{"version":2,"updates":[{"id":0,"timestamp":1761664892270,"update":"AegCyfi8egAnAQRib3RzJDU4NDlhZjU1LTVlOGEtNDhkNi05MTA2LTE5OTQ5OGU5ZWMwOAEnAMn4vHoABnN5c3RlbQIEAMn4vHoBEWFiLmFjdGlvbi5kZXN0cm95JwDJ+Lx6AAhhYkFjdGlvbgIEAMn4vHoTBHRydWUnAMn4vHoABGZvcm0CBADJ+Lx6GAdub3RoaW5nJwDJ+Lx6AA9hYkJvdE1lbnVBY3Rpb24CBADJ+Lx6IMACQGNvbnN0IHRhcmdldEJvdCA9IHRoYXQuYm90LmxpbmtzLnRhcmdldEJvdDsKCmlmICh0aGF0LmJvdC5saW5rcy50YXJnZXRPcmlnaW5Cb3RzKSB7CiAgICAvLyBEZXN0cm95IGJvdHMgYmVsb25naW5nIHRvIGFiSURPcmlnaW4uCiAgICBkZXN0cm95KHRoYXQuYm90LmxpbmtzLnRhcmdldE9yaWdpbkJvdHMpOwp9IGVsc2UgewogICAgLy8gRGVzdHJveSB0aGUgc2luZ2xlIHRhcmdldCBib3QuCiAgICBkZXN0cm95KHRhcmdldEJvdCk7Cn0KCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soeyByZXNldDogdHJ1ZSB9KTsnAMn4vHoADmFiQm90TWVudUxhYmVsAgQAyfi8euECB2Rlc3Ryb3knAMn4vHoADWFiQm90TWVudUljb24CBADJ+Lx66QIOZGVsZXRlX2ZvcmV2ZXInAMn4vHoAEmFiQm90TWVudVNvcnRPcmRlcgIEAMn4vHr4AgMxMDAnAMn4vHoACHJlbWVtYmVyAgQAyfi8evwCKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMn4vHoADW1hbmlmZXN0YXRpb24CBADJ+Lx6owMo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAyfi8egAIYWJJZ25vcmUCBADJ+Lx6ygMEdHJ1ZScAyfi8egAOYWJCb3RNZW51Q29sb3ICBADJ+Lx6zwMHI0Q5MzAzMCcAyfi8egAXYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBADJ+Lx61wPAA0Bjb25zdCBhbGxUYXJnZXRCb3RzID0gQXJyYXkuaXNBcnJheShsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMpID8gbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzIDogW2xpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1c107CmNvbnN0IGJ1aWxkZXIgPSBhYi5saW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90ID8gYWIubGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC5pZCA6IG51bGw7CmNvbnN0IHJlbGV2YW50VGFyZ2V0Qm90cyA9IGFsbFRhcmdldEJvdHMuZmlsdGVyKCh0YXJnZXQpID0+IHRhcmdldC5pZCAhPSBidWlsZGVyKTsKCmRlc3Ryb3kocmVsZXZhbnRUYXJnZXRCb3RzKTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soeyByZXNldDogdHJ1ZSB9KTsnAMn4vHoAFWFiTXVsdGlwbGVCb3RNZW51SWNvbgIEAMn4vHqYBw5kZWxldGVfZm9yZXZlcicAyfi8egAWYWJNdWx0aXBsZUJvdE1lbnVMYWJlbAIEAMn4vHqnBwdkZXN0cm95JwDJ+Lx6ABphYk11bHRpcGxlQm90TWVudVNvcnRPcmRlcgIEAMn4vHqvBwMxMDAnAMn4vHoAFmFiTXVsdGlwbGVCb3RNZW51Q29sb3ICBADJ+Lx6swcHI0Q5MzAzMCcAyfi8egAJYWJWZXJzaW9uAgQAyfi8ersHBTEwLjI5JwDJ+Lx6ABNhYkJvdE1lbnVPbkdlbmVyYXRlAgQAyfi8esEHrQdAY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1czsKCmlmICh0YXJnZXRCb3QpIHsKICAgIHRhZ3MubGFiZWwgPSAnZGVzdHJveSc7CiAgICB0YWdzLnRhcmdldEJvdCA9IGdldExpbmsodGFyZ2V0Qm90KTsKICAgIHRhZ3Mub25LZXlEb3duID0gYEAKICAgICAgICBpZiAodGhhdC5rZXlzLmluY2x1ZGVzKCJTaGlmdCIpKSB7CiAgICAgICAgICAgIGlmIChsaW5rcy50YXJnZXRCb3QgJiYgbGlua3MudGFyZ2V0Qm90LnRhZ3MuYWJJRE9yaWdpbikgewogICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGJ1dHRvbiB0byBkZXN0cm95IGFsbCBib3RzIHdpdGggc2FtZSBhYklET3JpZ2luLgogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0T3JpZ2luQm90cyA9IGdldEJvdHMoYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIudGFncy5hYklET3JpZ2luID09PSBsaW5rcy50YXJnZXRCb3QudGFncy5hYklET3JpZ2luOwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICBtYXNrcy5sYWJlbCA9ICdkZXN0cm95ICcgKyBsaW5rcy50YXJnZXRCb3QudGFncy5hYklET3JpZ2luICsgJyAoJyArIHRhcmdldE9yaWdpbkJvdHMubGVuZ3RoICsgJyBib3RzKSc7CiAgICAgICAgICAgICAgICB0YWdzLnRhcmdldE9yaWdpbkJvdHMgPSBnZXRMaW5rKHRhcmdldE9yaWdpbkJvdHMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgYDsKICAgIHRhZ3Mub25LZXlVcCA9IGBACiAgICAgICAgaWYgKHRoYXQua2V5cy5pbmNsdWRlcygiU2hpZnQiKSkgewogICAgICAgICAgICBtYXNrcy5sYWJlbCA9IG51bGw7CiAgICAgICAgICAgIHRhZ3MudGFyZ2V0T3JpZ2luQm90cyA9IG51bGw7CiAgICAgICAgfQogICAgYDsKfSBlbHNlIHsKICAgIC8vIE5vIGJvdCB0byBkZXN0cm95LgogICAgZGVzdHJveSh0aGlzQm90KTsKfScAyfi8egAbYWJNdWx0aXBsZUJvdE1lbnVPbkdlbmVyYXRlAgQAyfi8eu8O7wRAY29uc3QgYWxsVGFyZ2V0Qm90cyA9IEFycmF5LmlzQXJyYXkobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzKSA/IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyA6IFtsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXNdOwpjb25zdCBidWlsZGVyID0gYWIubGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCA/IGFiLmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QuaWQgOiBudWxsOwpjb25zdCByZWxldmFudFRhcmdldEJvdHMgPSBhbGxUYXJnZXRCb3RzLmZpbHRlcigodGFyZ2V0KSA9PiB0YXJnZXQuaWQgIT0gYnVpbGRlcik7CgppZiAocmVsZXZhbnRUYXJnZXRCb3RzLmxlbmd0aCA+IDEpIHsKICAgIC8vIE11bHRpcGxlIGJvdHMuCiAgICB0YWdzLmxhYmVsID0gYGRlc3Ryb3kgKCR7cmVsZXZhbnRUYXJnZXRCb3RzLmxlbmd0aH0gYm90cylgOwp9IGVsc2UgaWYgKHJlbGV2YW50VGFyZ2V0Qm90cy5sZW5ndGggPT09IDEpIHsKICAgIC8vIFNpbmdsZSBib3QuCiAgICB0YWdzLmxhYmVsID0gYGRlc3Ryb3lgOwp9IGVsc2UgewogICAgLy8gTm8gYm90cyB0byBkZXN0cm95LgogICAgZGVzdHJveSh0aGlzQm90KTsKfScBBGJvdHMkNWFlYzUwMWMtMzM4YS00MmNjLTlmZGQtOWExZWVhOTUzYTA2AScAyfi8et8TBnN5c3RlbQIEAMn4vHrgExBhYi5hY3Rpb24udXBkYXRlJwDJ+Lx63xMIYWJBY3Rpb24CBADJ+Lx68RMEdHJ1ZScAyfi8et8TEGFiQ29yZU1lbnVBY3Rpb24CBADJ+Lx69hPdBEBpZiAoIWFiVXBkYXRlQ2hlY2tlci50YWdzLmNoZWNraW5nKSB7CiAgICBpZiAoYWJVcGRhdGVDaGVja2VyLnRhZ3MudXBkYXRlQXZhaWxhYmxlKSB7CiAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgb3Muc2hvd0NvbmZpcm0oewogICAgICAgICAgICB0aXRsZTogJ0luc3RhbGwgJyArIGFiUGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICcgdXBkYXRlcz8nLAogICAgICAgICAgICBjb250ZW50OiAnV291bGQgeW91IGxpa2UgdG8gaW5zdGFsbCB0aGUgJyArIGFiUGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICcgdXBkYXRlcz8gWW91IGFuZCBhbnkgY29ubmVjdGVkIHVzZXJzIHdpbGwgYXV0b21hdGljYWxseSByZWZyZXNoIHRoZSBwYWdlIGFmdGVyIHRoZSB1cGRhdGUgaXMgY29tcGxldGUuJywKICAgICAgICAgICAgY2FuY2VsVGV4dDogJ05vdCBub3cnLAogICAgICAgICAgICBjb25maXJtVGV4dDogJ1llcycKICAgICAgICB9KQoKICAgICAgICBpZiAoY29uZmlybWVkKSB7CiAgICAgICAgICAgIGFiLnVwZGF0ZUFCKCk7CiAgICAgICAgICAgIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7CiAgICAgICAgfQogICAgfQp9JwDJ+Lx63xMEZm9ybQIEAMn4vHrUGAdub3RoaW5nJwDJ+Lx63xMIYWJJZ25vcmUCBADJ+Lx63BgEdHJ1ZScAyfi8et8TE2FiQ29yZU1lbnVTb3J0T3JkZXICBADJ+Lx64RgDMTAyJwDJ+Lx63xMOYWJDb3JlTWVudUljb24CBADJ+Lx65RgGdXBkYXRlJwDJ+Lx63xMPYWJDb3JlTWVudUxhYmVsAgQAyfi8euwYBnVwZGF0ZScAyfi8et8TFGFiQ29yZU1lbnVPbkdlbmVyYXRlAgQAyfi8evMY/A1AaWYgKCFnbG9iYWxUaGlzLmFiVXBkYXRlQ2hlY2tlcikgewogICAgZGVzdHJveSh0aGlzQm90KTsKICAgIHJldHVybjsKfQoKdGFncy5yZWZyZXNoRGlzcGxheSA9IGBACiAgICBpZiAodGhpc0JvdC52YXJzLmJ1c3lJbmRpY2F0b3IpIHsKICAgICAgICBkZXN0cm95KHRoaXNCb3QudmFycy5idXN5SW5kaWNhdG9yKTsKICAgICAgICB0aGlzQm90LnZhcnMuYnVzeUluZGljYXRvciA9IG51bGw7CiAgICB9CgogICAgLy8gQ2xlYXIgdGFnIG1hc2tzLgogICAgbWFza3MuYWJNZW51ID0gbnVsbDsKICAgIG1hc2tzLmxhYmVsID0gbnVsbDsKICAgIG1hc2tzLmNvbG9yID0gbnVsbDsKICAgIG1hc2tzLmZvcm1BZGRyZXNzID0gbnVsbDsKICAgIAogICAgaWYgKGFiVXBkYXRlQ2hlY2tlci50YWdzLnVwZGF0ZUF2YWlsYWJsZSkgewogICAgICAgIG1hc2tzLmxhYmVsID0gJ3VwZGF0ZSAnICsgYWJQZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5OwogICAgICAgIG1hc2tzLmNvbG9yID0gJyNBNEREMDAnOwogICAgICAgIG1hc2tzLmZvcm1BZGRyZXNzID0gJ3VwZGF0ZSc7CiAgICB9IGVsc2UgewogICAgICAgIGlmIChhYlVwZGF0ZUNoZWNrZXIudGFncy5jaGVja2luZykgewogICAgICAgICAgICAvLyBUZW1wb3JhcmlseSByZXBsYWNlIHdpdGggYnVzeSBpbmRpY2F0b3Igd2hpbGUgY2hlY2tpbmcgZm9yIHVwZGF0ZXMuCiAgICAgICAgICAgIHRoaXNCb3QudmFycy5idXN5SW5kaWNhdG9yID0gYWIubGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXN5SW5kaWNhdG9yKHsKICAgICAgICAgICAgICAgIGFiTWVudTogdHJ1ZSwKICAgICAgICAgICAgICAgIGxhYmVsOiAnY2hlY2tpbmcgZm9yIHVwZGF0ZXMgdG8gJyArIGFiUGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSwKICAgICAgICAgICAgICAgIGFiTWVudVNvcnRPcmRlcjogdGFncy5hYk1lbnVTb3J0T3JkZXIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgbWFza3MuYWJNZW51ID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQUIgaXMgdXAtdG8tZGF0ZS4KICAgICAgICAgICAgbWFza3MuYWJNZW51ID0gZmFsc2U7CiAgICAgICAgfQogICAgfQpgOwoKdGFncy5vbkRlc3Ryb3kgPSBgQAogICAgaWYgKHRoaXNCb3QudmFycy5idXN5SW5kaWNhdG9yKSB7CiAgICAgICAgZGVzdHJveSh0aGlzQm90LnZhcnMuYnVzeUluZGljYXRvcik7CiAgICAgICAgdGhpc0JvdC52YXJzLmJ1c3lJbmRpY2F0b3IgPSBudWxsOwogICAgfQoKICAgIGlmICh0aGlzQm90LnZhcnMub25BQlVwZGF0ZUNoZWNrZXJCb3RDaGFuZ2VkKSB7CiAgICAgICAgb3MucmVtb3ZlQm90TGlzdGVuZXIoYWJVcGRhdGVDaGVja2VyLCAnb25Cb3RDaGFuZ2VkJywgdGhpc0JvdC52YXJzLm9uQUJVcGRhdGVDaGVja2VyQm90Q2hhbmdlZCk7CiAgICB9CmAKCnRoaXNCb3QudmFycy5vbkFCVXBkYXRlQ2hlY2tlckJvdENoYW5nZWQgPSAobGlzdGVuZXJUaGF0KSA9PiB7CiAgICBjb25zdCBuZWVkUmVmcmVzaERpc3BsYXkgPSBsaXN0ZW5lclRoYXQudGFncy5zb21lKHQgPT4gdCA9PT0gJ2NoZWNraW5nJyB8fCB0ID09PSAndXBkYXRlQXZhaWxhYmxlJyk7CiAgICBpZiAobmVlZFJlZnJlc2hEaXNwbGF5KSB7CiAgICAgICAgdGhpc0JvdC5yZWZyZXNoRGlzcGxheSgpOwogICAgfQp9Cgpvcy5hZGRCb3RMaXN0ZW5lcihhYlVwZGF0ZUNoZWNrZXIsICdvbkJvdENoYW5nZWQnLCB0aGlzQm90LnZhcnMub25BQlVwZGF0ZUNoZWNrZXJCb3RDaGFuZ2VkKTsKCnRoaXNCb3QucmVmcmVzaERpc3BsYXkoKTsnAMn4vHrfEwlhYlZlcnNpb24CBADJ+Lx68CYFMTAuMjknAQRib3RzJDZiM2Q5NzQ0LTQ0NDgtNGVmNS05NmEyLTcxMjgxYzQyYWY2YwEnAMn4vHr2JglhYlZlcnNpb24CBADJ+Lx69yYFMTAuMjknAMn4vHr2JgZzeXN0ZW0CBADJ+Lx6/SYRYWIuYWN0aW9uLnZlcnNpb24nAMn4vHr2JhRhYkFjdGlvbk1ham9yVmVyc2lvbgIEAMn4vHqPJwExJwDJ+Lx69iYUYWJBY3Rpb25NaW5vclZlcnNpb24CBADJ+Lx6kScCMTcnAMn4vHr2Jg1vblNraWxsVXBkYXRlAgQAyfi8epQnmQFAY29uc3QgdmVyc2lvblN0cmluZyA9IHRhZ3MuYWJBY3Rpb25NYWpvclZlcnNpb24gKyAiLiIgKyB0YWdzLmFiQWN0aW9uTWlub3JWZXJzaW9uOwoKY29uc29sZS5sb2coIltBQkFjdGlvbl0gTG9hZGVkIEFCIEFjdGlvbiB2ZXJzaW9uICIgKyB2ZXJzaW9uU3RyaW5nKTsnAMn4vHr2JghhYklnbm9yZQIEAMn4vHquKAR0cnVlJwDJ+Lx69iYIYWJBY3Rpb24CBADJ+Lx6sygEdHJ1ZScAyfi8evYmBGZvcm0CBADJ+Lx6uCgHbm90aGluZycBBGJvdHMkNzE3NTY0NWMtNGI1My00NDU0LTg3MTYtZmMwZTY4ZGIyNjY1AScAyfi8esAoBnN5c3RlbQIEAMn4vHrBKA9hYi5hY3Rpb24ubG9naW4nAMn4vHrAKAhhYkFjdGlvbgIEAMn4vHrRKAR0cnVlJwDJ+Lx6wCgIYWJJZ25vcmUCBADJ+Lx61igEdHJ1ZScAyfi8esAoBGZvcm0CBADJ+Lx62ygHbm90aGluZycAyfi8esAoD2FiQ29yZU1lbnVDb2xvcgIEAMn4vHrjKAcjRjJCNzA1JwDJ+Lx6wCgTYWJDb3JlTWVudVNvcnRPcmRlcgIEAMn4vHrrKAItNScAyfi8esAoEGFiQ29yZU1lbnVBY3Rpb24CBADJ+Lx67igbQGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90KCk7JwDJ+Lx6wCgUYWJDb3JlTWVudU9uR2VuZXJhdGUCBADJ+Lx6iinrAUB0YWdzLmFiTWVudSA9IGZhbHNlOyAvLyBLZWVwIGJ1dHRvbiBoaWRkZW4gdW50aWwgYXV0aCBjaGVjayBpcyBjb21wbGV0ZS4KYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmIChhdXRoQm90KSB7CiAgICBkZXN0cm95KHRoaXNCb3QpOwp9IGVsc2UgewogICAgdGFncy5hYk1lbnUgPSB0cnVlOwogICAgdGFncy5vbkFCQXV0aEJvdEFkZGVkID0gYEBkZXN0cm95KHRoaXNCb3QpO2A7Cn0nAMn4vHrAKA5hYkNvcmVNZW51SWNvbgIEAMn4vHr2KgVsb2dpbicAyfi8esAoCHJlbWVtYmVyAgQAyfi8evwqKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMn4vHrAKAlhYlZlcnNpb24CBADJ+Lx6oysFMTAuMjknAMn4vHrAKAtwZXJzb25hbGl0eQIEAMn4vHqpKyjwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwDJ+Lx6wCgPYWJDb3JlTWVudUxhYmVsAgQAyfi8etArB3NpZ24gaW4nAMn4vHrAKA5hYkNvcmVNZW51SGlkZQIEAMn4vHrYKwR0cnVlJwDJ+Lx6wCgOb25BbnlCb3RzQWRkZWQCBADJ+Lx63Sv+AkBpZiAodGhhdC5ib3RzKSB7CiAgICBjb25zdCBhZGRlZEF1dGhCb3QgPSB0aGF0LmJvdHMuZmluZChiID0+IGIgPT09IGdsb2JhbFRoaXMuYXV0aEJvdCk7CgogICAgaWYgKGFkZGVkQXV0aEJvdCkgewogICAgICAgIHRoaXNCb3QudmFycy5hdXRoQm90SWQgPSBhZGRlZEF1dGhCb3QuaWQ7CgogICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gYXV0aCBib3QgYWRkZWQuIGF1dGhCb3QgaWQ6ICR7dGhpc0JvdC52YXJzLmF1dGhCb3RJZH1gKTsKICAgICAgICB9CgogICAgICAgIHNob3V0KCdvbkFCQXV0aEJvdEFkZGVkJywgeyBhdXRoQm90OiBhZGRlZEF1dGhCb3QgfSk7CiAgICB9Cn0nAMn4vHrAKAVkZWJ1ZwIEAMn4vHrcLgVmYWxzZScAyfi8esAoEG9uQW55Qm90c1JlbW92ZWQCBADJ+Lx64i6jA0BpZiAodGhhdC5ib3RJRHMgJiYgdGhpc0JvdC52YXJzLmF1dGhCb3RJZCkgewogICAgY29uc3QgcmVtb3ZlZEF1dGhCb3RJZCA9IHRoYXQuYm90SURzLnNvbWUoaWQgPT4gaWQgPT09IHRoaXNCb3QudmFycy5hdXRoQm90SWQpOwoKICAgIGlmIChyZW1vdmVkQXV0aEJvdElkKSB7CiAgICAgICAgdGhpc0JvdC52YXJzLmF1dGhCb3RJZCA9IG51bGw7CgogICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gYXV0aCBib3QgcmVtb3ZlZC4gYXV0aEJvdCBpZDogJHtyZW1vdmVkQXV0aEJvdElkfWApOwogICAgICAgIH0KCiAgICAgICAgc2hvdXQoJ29uQUJBdXRoQm90UmVtb3ZlZCcsIHsgYXV0aEJvdElkOiByZW1vdmVkQXV0aEJvdElkIH0pOwogICAgfQp9JwEEYm90cyRiMzM5YzExOC00ODlhLTQ2NmItYmE5Zi1iMDdhNWY5YjY2NGYBJwDJ+Lx6hjIGc3lzdGVtAgQAyfi8eocyD2FiLmFjdGlvbi5wYXN0ZSgAyfi8eoYyCGFiQWN0aW9uAXgnAMn4vHqGMgRmb3JtAgQAyfi8epgyB25vdGhpbmcnAMn4vHqGMgtkZXNjcmlwdGlvbgIEAMn4vHqgMithYiBza2lsbCB1c2VkIGZvciBjb3B5aW5nIGFuZCBwYXN0aW5nIGJvdHMuJwDJ+Lx6hjIHb25QYXN0ZQIEAMn4vHrMMv8HQGlmICghYnVpbGRlclZlcnNpb24pCnsKICAgIHJldHVybjsKfQoKY29uc3QgTUFDUk9TID0gWwogICAgewogICAgICAgIHRlc3Q6IC8oPzpb4oCc4oCdXSkvZywKICAgICAgICByZXBsYWNlbWVudDogKHZhbCkgPT4gJyInLAogICAgfSwKICAgIHsKICAgICAgICB0ZXN0OiAvKD86W+KAmOKAmV0pL2csCiAgICAgICAgcmVwbGFjZW1lbnQ6ICh2YWwpID0+ICInIiwKICAgIH0sCl07CgpsZXQgZm9ybWF0dGVkQ29weSA9IHJlcGxhY2VNYWNyb3ModGhhdC50ZXh0KTsKbGV0IGNvcHlCb3QgPSBKU09OLnBhcnNlKGZvcm1hdHRlZENvcHkpOwpsZXQgcGFzdGVkRGF0YSA9ICFjb3B5Qm90LnN0YXRlID8ge1tjb3B5Qm90LmlkXTogY29weUJvdH0gOiBjb3B5Qm90LnN0YXRlOwpsZXQgZGltTW9kID0gbGlua3MucmVtZW1iZXIudGFncy5hYkZvY3VzRGF0YTsKCmlmIChPYmplY3Qua2V5cyhwYXN0ZWREYXRhKS5sZW5ndGggPT0gMSAmJiBkaW1Nb2QpCnsKICAgIHBhc3RlZERhdGFbZGltTW9kLmRpbWVuc2lvbl0gPSB0cnVlOwogICAgcGFzdGVkRGF0YVtkaW1Nb2QuZGltZW5zaW9uKyJYIl0gPSBkaW1Nb2QueDsKICAgIHBhc3RlZERhdGFbZGltTW9kLmRpbWVuc2lvbisiWSJdID0gZGltTW9kLnk7CgogICAgb3MudG9hc3QoImJvdCBhZGRlZCB0byBpbnN0Iik7Cn0KZWxzZQp7CiAgICBvcy50b2FzdCgiYm90cyBhZGRlZCB0byBpbnN0Iik7Cn0KCmFiLmxvZyhsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogcGFzdGVkIGRhdGEiKTsKCmxpbmtzLmNyZWF0ZS5hYkNyZWF0ZUJvdHMoe2JvdHM6IHBhc3RlZERhdGEsIHNvdXJjZUV2ZW50OiAncGFzdGUnfSk7CgpmdW5jdGlvbiByZXBsYWNlTWFjcm9zKHRleHQpIHsKICAgIGlmICghdGV4dCkgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgfQoKICAgIGZvciAobGV0IG0gb2YgTUFDUk9TKSB7CiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShtLnRlc3QsIG0ucmVwbGFjZW1lbnQpOwogICAgfQoKICAgIHJldHVybiB0ZXh0Owp9JwDJ+Lx6hjIIcmVtZW1iZXICBADJ+Lx6xDoo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAyfi8eoYyBmNyZWF0ZQIEAMn4vHrrOijwn5SXMzRjM2MyMTAtNWJmMS00OWNmLWIxNTEtZWUyZDA3ZjBlNjczJwDJ+Lx6hjIIYWJJZ25vcmUCBADJ+Lx6kjsEdHJ1ZScAyfi8eoYyCW9uS2V5RG93bgIEAMn4vHqXO4MGQGlmICghYnVpbGRlclZlcnNpb24gfHwgKCFsaW5rcy5yZW1lbWJlci5saW5rcy5hYkJvdEZvY3VzICYmICFsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMpKSB7CiAgICByZXR1cm47Cn0KCmlmICh0aGF0LmtleXMgPT0gImMiKSB7CiAgICBsZXQgbWV0YUlucHV0ID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiTWV0YSIpOwoKICAgIGlmICghbWV0YUlucHV0KSB7CiAgICAgICAgbWV0YUlucHV0ID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiQ29udHJvbCIpOwogICAgfQoKICAgIGlmICghbWV0YUlucHV0KSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBzZWxlY3RlZEJvdHMgPSBbXTsKCiAgICBpZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1cykgewogICAgICAgIHNlbGVjdGVkQm90cy5wdXNoKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiQm90Rm9jdXMpOwogICAgfQogICAgZWxzZSBpZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rcy5yZW1lbWJlci5saW5rcyAgICAuYWJNdWx0aXBsZUJvdEZvY3VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHNlbGVjdGVkQm90cy5wdXNoKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1c1tpXSk7CiAgICAgICB9CiAgICB9CiAKICAgIHRoaXNCb3QuYWJDb3B5Qm90c1RvQ2xpcGJvYXJkKHsgYm90czogc2VsZWN0ZWRCb3RzIH0pOwp9JwDJ+Lx6hjIJYWJWZXJzaW9uAgQAyfi8eptBBTEwLjI5JwDJ+Lx6hjILcGVyc29uYWxpdHkCBADJ+Lx6oUEo8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYicAyfi8eoYyFWFiQ29weUJvdHNUb0NsaXBib2FyZAIEAMn4vHrIQZAKQGxldCBib3RzID0gdGhhdC5ib3RzOwpsZXQgb25QcmVwcm9jZXNzQmVmb3JlQ29weSA9IHRoYXQub25QcmVwcm9jZXNzQmVmb3JlQ29weTsKbGV0IHNvdXJjZUV2ZW50ID0gdGhhdC5zb3VyY2VFdmVudDsKCmxldCBib3RzVG9Db3B5ID0gW107CgppZiAoQXJyYXkuaXNBcnJheShib3RzKSkgewogICAgZm9yIChjb25zdCBib3Qgb2YgYm90cykgewogICAgICAgIGlmIChhYi5saW5rcy51dGlscy5pc0JvdChib3QpKSB7CiAgICAgICAgICAgIGJvdHNUb0NvcHkucHVzaChib3QpOwogICAgICAgIH0KICAgIH0KfSBlbHNlIHsKICAgIGlmIChhYi5saW5rcy51dGlscy5pc0JvdChib3RzKSkgewogICAgICAgIGJvdHNUb0NvcHkucHVzaChib3RzKTsKICAgIH0KfQoKaWYgKGJvdHNUb0NvcHkubGVuZ3RoID4gMCkgewogICAgLy8gTGV0IGFsbCBib3RzIGtub3cgdGhhdCBhYiBpcyBhYm91dCB0byBjb3B5IHNvbWUgYm90cy4KICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChzaG91dCgnb25BQkJlZm9yZUNvcHlCb3RzVG9DbGlwYm9hcmQnLCB7IGJvdHM6IGJvdHNUb0NvcHksIHNvdXJjZUV2ZW50IH0pKTsKICAgIAogICAgY29uc3Qgc3RhdGUgPSB7fTsKCiAgICBmb3IgKGNvbnN0IGJvdCBvZiBib3RzVG9Db3B5KSB7CiAgICAgICAgc3RhdGVbYm90LmlkXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYm90KSk7CiAgICB9CgogICAgLy8gRG8gYSBwcmVwcm9jZXNzaW5nIHBhc3MgdGhhdCBhbGxvd3MgbGlzdGVuZXJzIHRvIHByZXByb2Nlc3MgdGhlIGJvdCBkYXRhIGJlZm9yZSBpdCBpcyBjb3BpZWQuCiAgICBjb25zdCBwcmVwcm9jZXNzQXJnID0geyBib3REYXRhOiBzdGF0ZSwgc291cmNlRXZlbnQgfTsKCiAgICBpZiAob25QcmVwcm9jZXNzQmVmb3JlQ29weSkgewogICAgICAgIGF3YWl0IG9uUHJlcHJvY2Vzc0JlZm9yZUNvcHkocHJlcHJvY2Vzc0FyZyk7CiAgICB9CgogICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHNob3V0KCdvbkFCUHJlcHJvY2Vzc0JlZm9yZUNvcHlCb3RzVG9DbGlwYm9hcmQnLCBwcmVwcm9jZXNzQXJnKSk7CiAgICAKICAgIC8vIFNlcmlhbGl6ZSB0byB2MSBhdXggZmlsZSwgYW5kIHRoZW4gY29weSB0byBjbGlwYm9hcmQuCiAgICBjb25zdCBhdXggPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDEsIHN0YXRlIH0pOwogICAgb3Muc2V0Q2xpcGJvYXJkKGF1eCk7CgogICAgYWIubGlua3MudXRpbHMuYWJMb2dBbmRUb2FzdChgY29waWVkICR7Ym90c1RvQ29weS5sZW5ndGggPiAxID8gJ2JvdHMnIDogJ2JvdCd9IHRvIGNsaXBib2FyZGApOwp9JwEEYm90cyRiZGFiZDZjMC04OWY5LTRmNzUtYjM1Yy0yNmY0ZWM1MjA3ZDYBJwDJ+Lx62UsGc3lzdGVtAgQAyfi8etpLEGFiLmFjdGlvbi5yZXBvcnQnAMn4vHrZSwRmb3JtAgQAyfi8eutLB25vdGhpbmcnAMn4vHrZSxBhYkNvcmVNZW51QWN0aW9uAgQAyfi8evNLEUBvcy5yZXBvcnRJbnN0KCk7JwDJ+Lx62UsTYWJDb3JlTWVudVNvcnRPcmRlcgIEAMn4vHqFTAMxMDEnAMn4vHrZSw5hYkNvcmVNZW51SWNvbgIEAMn4vHqJTARmbGFnJwDJ+Lx62UsPYWJDb3JlTWVudUxhYmVsAgQAyfi8eo5MBnJlcG9ydCcAyfi8etlLCGFiQWN0aW9uAgQAyfi8epVMBHRydWUnAMn4vHrZSwhhYklnbm9yZQIEAMn4vHqaTAR0cnVlJwDJ+Lx62UsUYWJDb3JlTWVudU9uR2VuZXJhdGUCBADJ+Lx6n0xGQGlmIChjb25maWdCb3QudGFncy5zdGF0aWNJbnN0ICE9IHVuZGVmaW5lZCkKewogICAgZGVzdHJveSh0aGlzQm90KTsKfScAyfi8etlLCWFiVmVyc2lvbgIEAMn4vHrmTAUxMC4yOScBBGJvdHMkYzY4YzViODItYzBhNy00YTVhLTkxMDQtNWRkOGUzMmFlNGUyAScAyfi8euxMBnN5c3RlbQIEAMn4vHrtTBBhYi5hY3Rpb24ucG9ydGFsJwDJ+Lx67EwLZGVzY3JpcHRpb24CBADJ+Lx6/kwUU2tpbGwgdG8gb3BlbiBzaGVldC4nAMn4vHrsTAhhYkFjdGlvbgIEAMn4vHqTTQR0cnVlJwDJ+Lx67EwEZm9ybQIEAMn4vHqYTQdub3RoaW5nJwDJ+Lx67EwQYWJDb3JlTWVudUFjdGlvbgIEAMn4vHqgTQNALy8nAMn4vHrsTAhyZW1lbWJlcgIEAMn4vHqkTSjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDJ+Lx67EwPYWJDb3JlTWVudUxhYmVsAgQAyfi8estNEGN1cnJlbnQgcG9ydGFsOiAnAMn4vHrsTA9hYkJvdE1lbnVBY3Rpb24CBADJ+Lx63E34AkBjb25zdCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7CmNvbnN0IGN1cnJlbnREaW0gPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90LnRhZ3MubGluZVRvOwpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAoc3RhdGUpIAp7CiAgICBvcy5vcGVuVVJMKGNvbmZpZ0JvdC50YWdzLnBlcm1hbGluayArIGAmc2hlZXRQb3J0YWw9JHtjdXJyZW50RGltfWApOwp9CmVsc2UKewogICAgY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwgPSBjdXJyZW50RGltOwp9CgphYi5sb2cobGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IG9wZW5lZCBib3Qgc2hlZXQiKTsnAMn4vHrsTA5hYkJvdE1lbnVMYWJlbAIEAMn4vHrVUA5vcGVuIGJvdCBzaGVldCcAyfi8euxMDW1hbmlmZXN0YXRpb24CBADJ+Lx65FAo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAyfi8euxMDWFiQm90TWVudUljb24CBADJ+Lx6i1EKdGFibGVfdmlldycAyfi8euxMDmFiQ29yZU1lbnVJY29uAgQAyfi8epZRC2Fycm93X3JpZ2h0JwDJ+Lx67EwSYWJCb3RNZW51U29ydE9yZGVyAgQAyfi8eqJRATEnAMn4vHrsTAhhYklnbm9yZQIEAMn4vHqkUQR0cnVlJwDJ+Lx67EwXYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBADJ+Lx6qVGbBEBjb25zdCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7CmNvbnN0IGN1cnJlbnREaW0gPSAiYWJNdWx0aXBsZVNlbGVjdCI7Cgpjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9IGN1cnJlbnREaW07CgpzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cywgY3VycmVudERpbSwgdHJ1ZSwgInRlbXBMb2NhbCIpOwoKbWFza3MuY3VycmVudFNoZWV0Qm90cyA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJNdWx0aXBsZUJvdEZvY3VzOwptYXNrcy5vblBvcnRhbENoYW5nZWQgPSBgQCBpZiAodGhhdC5kaW1lbnNpb24gIT0gImFiTXVsdGlwbGVTZWxlY3QiICYmIHRoYXQucG9ydGFsID09ICJzaGVldFBvcnRhbCIpCnsKICAgIGNsZWFyVGFnTWFza3MobGlua3MuY3VycmVudFNoZWV0Qm90cyk7CgogICAgY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsKfSBgOwoKYWIubG9nKGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiBvcGVuZWQgbXVsdGlwbGUgc2VsZWN0IHNoZWV0Iik7JwDJ+Lx67EwWYWJNdWx0aXBsZUJvdE1lbnVMYWJlbAIEAMn4vHrFVRpvcGVuIG11bHRpcGxlIHNlbGVjdCBzaGVldCcAyfi8euxMFWFiTXVsdGlwbGVCb3RNZW51SWNvbgIEAMn4vHrgVQp0YWJsZV92aWV3JwDJ+Lx67EwTYWJCb3RNZW51T25HZW5lcmF0ZQIEAMn4vHrrVZgCQGxldCBzZWxlY3RlZEJvdCA9IGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QudGFncy5saW5lVG87Cgp0YWdzLmxhYmVsID0gInNoZWV0UG9ydGFsPSIgKyBzZWxlY3RlZEJvdC5zdWJzdHJpbmcoMCwgNCk7Cgp0YWdzLm9uS2V5RG93biA9IGBAIGlmKHRoYXQua2V5cyA9PSAiU2hpZnQiKXttYXNrcy5sYWJlbCA9IHRhZ3MubGFiZWwgKyAiIGluIG5ldyB0YWIiO31gOwp0YWdzLm9uS2V5VXAgPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSBudWxsO31gOycAyfi8euxMGmFiTXVsdGlwbGVCb3RNZW51U29ydE9yZGVyAgQAyfi8eoRYATAnAMn4vHrsTARtZW51AgQAyfi8eoZYKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAMn4vHrsTAlhYlZlcnNpb24CBADJ+Lx6rVgFMTAuMjknAMn4vHrsTAthYkJsdWVwcmludAIEAMn4vHqzWPsDQGNvbnN0IGJhY2tncm91bmRDb2xvciA9IGxpbmtzLnJlbWVtYmVyPy50YWdzLmFiQmx1ZXByaW50Q29sb3IgPz8gIiMxNzg1QjUiOwoKaWYgKGJhY2tncm91bmRDb2xvciA9PSBncmlkUG9ydGFsQm90Lm1hc2tzLnBvcnRhbENvbG9yKQp7CiAgICByZXR1cm47Cn0KCmdyaWRQb3J0YWxCb3QubWFza3MucG9ydGFsQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7CgptYXNrcy5vblBvcnRhbENoYW5nZWQgPSBgQCBpZiAodGhhdC5wb3J0YWwgPT0gImdyaWRQb3J0YWwiICYmIHRoYXQuZGltZW5zaW9uICE9ICJibHVlcHJpbnQiKXsKICAgIC8vIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQmFzZUNvbG9yID0gbnVsbDsKICAgIC8vIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQmFzZVN0cm9rZUNvbG9yID0gbnVsbDsKCiAgICBncmlkUG9ydGFsQm90Lm1hc2tzLnBvcnRhbENvbG9yID0gbnVsbDsKCiAgICBtYXNrcy5vblBvcnRhbENoYW5nZWQgPSBudWxsOwp9YDsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7JwDJ+Lx67EwLb25BbnlDcmVhdGUCBADJ+Lx6r1x2QGlmICh0aGF0LmJvdC50YWdzLmJsdWVwcmludCkKewogICAgdGhhdC5ib3QudGFncy5zdHJva2VDb2xvciA9ICIjZmZmZmZmIjsKICAgIHRoYXQuYm90LnRhZ3MubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKfScAyfi8euxMD29uUG9ydGFsQ2hhbmdlZAIEAMn4vHqmXWFAaWYgKHRoYXQucG9ydGFsID09ICJncmlkUG9ydGFsIiAmJiB0aGF0LmRpbWVuc2lvbiA9PSAiYmx1ZXByaW50IikKewogICAgdGhpc0JvdC5hYkJsdWVwcmludCgpOwp9JwDJ+Lx67EwLcGVyc29uYWxpdHkCBADJ+Lx6iF4o8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYicAyfi8euxMEmFiQ29yZU1lbnVJdGVtVHlwZQIEAMn4vHqvXghkcm9wZG93bicAyfi8euxMEWRyb3Bkb3duU29ydE9yZGVyAgQAyfi8erheATEnAMn4vHrsTA9kcm9wZG93bk9wdGlvbnMCBADJ+Lx6ul4G8J+nrFtdJwDJ+Lx67EwYYWJDb3JlTWVudU9uQmVmb3JlQ3JlYXRlAgQAyfi8er9e4h5AY29uc3QgZHJvcGRvd25PcHRpb25zID0gW107DQoNCmNvbnN0IGN1cnJlbnREaW0gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQWN0aXZlRGltZW5zaW9uOw0KY29uc3QgY3VycmVudFBvcnRhbCA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/ICJtYXAiIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCA9PSAiYmx1ZXByaW50IiA/ICJibHVlcHJpbnQiIDoiZ3JpZCI7DQpjb25zdCBhY3RpdmVNZW51ID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbDsNCmNvbnN0IHBlcm1hbGlua1VSTCA9IGNvbmZpZ0JvdC50YWdzLnBlcm1hbGluazsNCmNvbnN0IGFjdGl2ZUluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpOw0KY29uc3QgYWN0aXZlQmlvcyA9IGNvbmZpZ0JvdC50YWdzLm93bmVyID8gIiZvd25lcj0iICsgY29uZmlnQm90LnRhZ3Mub3duZXIgOiBmYWxzZTsNCmNvbnN0IGZpcnN0SW5kZXggPSBwZXJtYWxpbmtVUkwuaW5kZXhPZigiJiIpOw0KY29uc3QgaW5pdGlhbFVSTCA9IHBlcm1hbGlua1VSTC5zdWJzdHJpbmcoMCwgZmlyc3RJbmRleCk7DQpjb25zdCB1cGRhdGVkVVJMID0gYWN0aXZlQmlvcyAhPSBmYWxzZSA/IGluaXRpYWxVUkwgKyAiJmluc3Q9IiArIGFjdGl2ZUluc3QgOiBpbml0aWFsVVJMOw0KDQpzZXRUYWdNYXNrKHRoaXNCb3QsICJhYkNvcmVNZW51TGFiZWwiLGBtb2RlOiAke2N1cnJlbnRQb3J0YWx9IHBvcnRhbGApOw0Kc2V0VGFnTWFzayh0aGlzQm90LCAiY3VycmVudERpbWVuc2lvbiIsIGN1cnJlbnREaW0pOw0Kc2V0VGFnTWFzayh0aGlzQm90LCAiY3VycmVudFBvcnRhbCIsIGN1cnJlbnRQb3J0YWwpOw0Kc2V0VGFnTWFzayh0aGlzQm90LCAiZHJvcGRvd25Tb3J0T3JkZXIiLCAxKTsNCg0KY29uc3QgbWVudU9wdGlvbnMgPSB7fTsNCg0KbWVudU9wdGlvbnMuZGltZW5zaW9uID0gYWN0aXZlTWVudTsNCm1lbnVPcHRpb25zW2FjdGl2ZU1lbnVdID0gdHJ1ZTsNCm1lbnVPcHRpb25zLmFiUG9ydGFsTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7DQptZW51T3B0aW9ucy5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOw0KbWVudU9wdGlvbnMub25LZXlEb3duID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gdGFncy5sYWJlbCArICIgaW4gbmV3IHRhYiI7fWA7DQptZW51T3B0aW9ucy5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsNCm1lbnVPcHRpb25zLnNraWxsQm90ID0gZ2V0TGluayh0aGlzQm90KTsNCm1lbnVPcHRpb25zLnRhcmdldFVSTCA9IHVwZGF0ZWRVUkw7DQoNCmNvbnN0IG1hcE1lbnVCb3QgPSB7DQogICAgLi4ubWVudU9wdGlvbnMNCn07DQoNCm1hcE1lbnVCb3QubGFiZWwgPSAibWFwIHBvcnRhbCI7DQptYXBNZW51Qm90LmZvcm1BZGRyZXNzID0gInB1YmxpYyI7DQptYXBNZW51Qm90Lm9uQ2xpY2sgPSBgQCANCmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsNCg0KaWYoc3RhdGUpDQp7DQogICAgb3Mub3BlblVSTCh0YWdzLnRhcmdldFVSTCArICImbWFwUG9ydGFsPSR7Y3VycmVudERpbSA9PSAiYmx1ZXByaW50IiA/ICJob21lIiA6IGN1cnJlbnREaW19Iik7DQp9DQplbHNlDQp7DQogICAgY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID0gIiR7Y3VycmVudERpbSA9PSAiYmx1ZXByaW50IiA/ICJob21lIiA6IGN1cnJlbnREaW19IjsNCiAgICBjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsID0gbnVsbDsNCn1gOw0KDQppZiAoY3VycmVudFBvcnRhbCAhPSAibWFwIikNCnsNCiAgICAvL21hcCBwb3J0YWwgYnV0dG9uDQogICAgZHJvcGRvd25PcHRpb25zLnB1c2gobWFwTWVudUJvdCk7DQp9DQoNCmNvbnN0IGdyaWRNZW51Qm90ID0gew0KICAgIC4uLm1lbnVPcHRpb25zDQp9Ow0KZ3JpZE1lbnVCb3QubGFiZWwgPSAiZ3JpZCBwb3J0YWwiOw0KZ3JpZE1lbnVCb3QuZm9ybUFkZHJlc3MgPSAiY3ViZSI7DQpncmlkTWVudUJvdC5vbkNsaWNrID0gYEANCg0KY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOw0KDQppZihzdGF0ZSkNCnsNCiAgICBvcy5vcGVuVVJMKHRhZ3MudGFyZ2V0VVJMICsgIiZncmlkUG9ydGFsPSR7Y3VycmVudERpbSA9PSAiYmx1ZXByaW50IiA/ICJob21lIiA6IGN1cnJlbnREaW19Iik7DQp9IA0KZWxzZQ0Kew0KICAgIGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgPSAiJHtjdXJyZW50RGltID09ICJibHVlcHJpbnQiID8gImhvbWUiIDogY3VycmVudERpbX0iOyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPSBudWxsOw0KfWA7DQoNCmlmIChjdXJyZW50UG9ydGFsICE9ICJncmlkIiB8fCBjdXJyZW50RGltID09ICJibHVlcHJpbnQiKQ0Kew0KICAgIC8vZ3JpZCBwb3J0YWwgYnV0dG9uDQogICAgZHJvcGRvd25PcHRpb25zLnB1c2goZ3JpZE1lbnVCb3QpOw0KfQ0KDQpjb25zdCBibHVlcHJpbnRNZW51Qm90ID0gew0KICAgIC4uLm1lbnVPcHRpb25zDQp9Ow0KDQpibHVlcHJpbnRNZW51Qm90LmxhYmVsID0gImJsdWVwcmludCBwb3J0YWwiOw0KYmx1ZXByaW50TWVudUJvdC5mb3JtQWRkcmVzcyA9ICJhcmNoaXRlY3R1cmUiOw0KYmx1ZXByaW50TWVudUJvdC5vbkNsaWNrID0gYEANCg0KY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOw0KDQppZihzdGF0ZSkNCnsNCiAgICBvcy5vcGVuVVJMKHRhZ3MudGFyZ2V0VVJMICsgIiZncmlkUG9ydGFsPWJsdWVwcmludCIpOw0KfSANCmVsc2UNCnsNCiAgICBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsID0gImJsdWVwcmludCI7IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA9IG51bGw7DQp9DQoNCmxpbmtzLnNraWxsQm90LmFiQmx1ZXByaW50KCk7YDsNCg0KaWYgKGN1cnJlbnREaW0gIT0gImJsdWVwcmludCIpDQp7DQogICAgLy9ibHVlcHJpbnQgcG9ydGFsIGJ1dHRvbg0KICAgIGRyb3Bkb3duT3B0aW9ucy5wdXNoKGJsdWVwcmludE1lbnVCb3QpOw0KfQ0KDQoNCmNvbnN0IHNoZWV0TWVudUJvdCA9IHsNCiAgICAuLi5tZW51T3B0aW9ucw0KfTsNCnNoZWV0TWVudUJvdC5sYWJlbCA9ICJzaGVldCBwb3J0YWwiOw0Kc2hlZXRNZW51Qm90LmZvcm1BZGRyZXNzID0gInRhYmxlX3ZpZXciOw0Kc2hlZXRNZW51Qm90Lm9uQ2xpY2sgPSBgQCANCg0KY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOw0KDQppZihzdGF0ZSkNCnsNCiAgICBvcy5vcGVuVVJMKHRhZ3MudGFyZ2V0VVJMICsgIiZzaGVldFBvcnRhbD0ke2N1cnJlbnREaW19Iik7DQp9IA0KZWxzZQ0KeyANCiAgICBjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9ICIke2N1cnJlbnREaW19IjsNCn1gOw0KDQovL3NoZWV0IHBvcnRhbCBidXR0b24NCmRyb3Bkb3duT3B0aW9ucy5wdXNoKHNoZWV0TWVudUJvdCk7DQoNCg0KY29uc3Qgc3lzdGVtTWVudUJvdCA9IHsNCiAgICAuLi5tZW51T3B0aW9ucw0KfTsNCg0Kc3lzdGVtTWVudUJvdC5sYWJlbCA9ICJzeXN0ZW0gcG9ydGFsIjsNCnN5c3RlbU1lbnVCb3QuZm9ybUFkZHJlc3MgPSAic2V0dGluZ3NfYXBwbGljYXRpb25zIjsNCnN5c3RlbU1lbnVCb3Qub25DbGljayA9IGBADQoNCmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsNCg0KaWYoc3RhdGUpDQp7DQogICAgb3Mub3BlblVSTCh0YWdzLnRhcmdldFVSTCArICImc3lzdGVtUG9ydGFsPXRydWUiKTsNCn0gDQplbHNlDQp7IA0KICAgIGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCA9IHRydWU7DQp9YDsNCg0KLy9zeXN0ZW0gcG9ydGFsIGJ1dHRvbg0KZHJvcGRvd25PcHRpb25zLnB1c2goc3lzdGVtTWVudUJvdCk7DQoNCm1hc2tzLmRyb3Bkb3duT3B0aW9ucyA9IGRyb3Bkb3duT3B0aW9uczsNCg0KcmV0dXJuOycBBGJvdHMkZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3AScAyfi8eqJ9BnN5c3RlbQIEAMn4vHqjfQ1hYi5hY3Rpb24uYXNrJwDJ+Lx6on0EZm9ybQIEAMn4vHqxfQdub3RoaW5nJwDJ+Lx6on0GYXNrR1BUAgQAyfi8erl9gA9AaWYgKCF0YWdzLmdwdEFjdGl2ZSB8fCBhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLmFsbG93QUkgPT0gZmFsc2UpIHsKICAgIGNvbnN0IGFpTWVzc2FnZSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWlfcmVqZWN0aW9uX21lc3NhZ2UgPz8gIkFJIG5vdCBhdXRob3JpemVkIGZvciB0aGlzIGFjY291bnQiOwogICAgbGlua3MudXRpbHMuYWJMb2dBbmRUb2FzdCh7IG1lc3NhZ2U6IGFpTWVzc2FnZSB9KTsKICAgIG9zLm9wZW5RUkNvZGVTY2FubmVyKCk7CiAgICBjb25maWdCb3QudGFncy5hYlNjYW4gPSB0cnVlOwogICAgY29uZmlnQm90LnRhZ3MucmVxdWVzdGluZ0FJID0gdHJ1ZTsKICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gdGhhdDpgLCB0aGF0KTsKfQoKbGV0IGlucXVpcnkgPSB0aGF0LmlucXVpcnkgPz8gdGhhdDsKCmNvbnN0IHByb21wdCA9ICF0aGF0LnByb21wdCA/IHRhZ3MucHJvbXB0X2NvcmUgOiB0YWdzWyJwcm9tcHRfIiArIHRoYXQucHJvbXB0XTsKCmxpbmtzLnV0aWxzLmFiTG9nKHsgbWVzc2FnZTogYHRoaW5raW5nIGFib3V0OiAiJHtpbnF1aXJ5fSJgIH0pOwpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQm90Q2hhdCh7IG1lc3NhZ2U6IGB0aGlua2luZyBhYm91dDogIiR7aW5xdWlyeX0iYCB9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpIHsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikgewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyB0aGF0LmRhdGEuYm90LmlkOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJtdWx0aXBsZUJvdCIpIHsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBUQVJHRVRfQk9UX0lEUzogYCArIHRoYXQuZGF0YS5ib3RzOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJjb3JlIikgewogICAgLy8gRG8gbm90aGluZyBleHRyYS4KfQoKY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzQm90LnN1Ym1pdFJlcXVlc3RHUFQoeyBpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgbW9kZWw6IHRoYXQubW9kZWwgfSk7CgppZiAocmVzcG9uc2UpIHsKICAgIGxpbmtzLnV0aWxzLmFiTG9nKHsgbWVzc2FnZTogYFtnZW5lcmF0ZWQgY29kZV06XG4ke3Jlc3BvbnNlfWAgfSk7CgogICAgaWYgKGNvbmZpZ0JvdC50YWdzLmRldlVzZVBhdGNoQm90cykgewogICAgICAgIGNvbnN0IGFzayA9IGF3YWl0IGFiLmxpbmtzLnNlYXJjaC5vbkxvb2t1cEFza0lEKHsKICAgICAgICAgICAgYXNrSUQ6ICdhYlBhdGNoQm90JywKICAgICAgICAgICAgc2hvd0luZGljYXRvcjogZmFsc2UsCiAgICAgICAgICAgIGF1dG9IYXRjaDogdHJ1ZSwKICAgICAgICAgICAgZWdnUGFyYW1ldGVyczogewogICAgICAgICAgICAgICAgcGF0Y2hDb2RlOiByZXNwb25zZSwKICAgICAgICAgICAgICAgIGFza0lucHV0OiB0aGF0LmRhdGEKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc291cmNlRXZlbnQ6ICdhc2tfZ3B0JywKICAgICAgICAgICAgaWdub3JlUmVzZXJ2ZWQ6IHRydWUsCiAgICAgICAgfSkKCiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfV0uJHt0YWdOYW1lfV0gYXNrOmAsIGFzayk7CiAgICB9IGVsc2UgewogICAgICAgIGNyZWF0ZSh7IGhvbWU6IHRydWUsIG9uQ3JlYXRlOiBgQCAke3Jlc3BvbnNlfWAgfSk7CiAgICB9CgogICAgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7Cn0nAMn4vHqifQlncHRBY3RpdmUCBADJ+Lx6uowBBWZhbHNlJwDJ+Lx6on0Qc3VibWl0UmVxdWVzdEdQVAIEAMn4vHrAjAHjDkBpbXBvcnQgeyBBSUNoYXRPcHRpb25zIH0gZnJvbSAnY2FzdWFsb3MnOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gdGhhdGAsIHRoYXQpOwp9CgpsZXQgc3lzdGVtUHJvbXB0ID0gdGhhdC5wcm9tcHQgPyB0aGF0LnByb21wdCA6IHRhZ3MucHJvbXB0X2NvcmU7CgpzeXN0ZW1Qcm9tcHQgPSBzeXN0ZW1Qcm9tcHQgKyB0aGF0LmlucXVpcnk7CgppZiAoYXV0aEJvdC50YWdzLnByaXZhY3lGZWF0dXJlcy5hbGxvd0FJID09IGZhbHNlKQp7CiAgICBsaW5rcy51dGlscy5hYkxvZ0FuZFRvYXN0KHsgbWVzc2FnZTogIkFJIG5vdCBhdXRob3JpemVkIG9uIHRoaXMgYWNjb3VudCIsIGxvZ1R5cGU6ICdsb2cnIH0pOwogICAgcmV0dXJuIG51bGw7Cn0KCi8vIFtSeWFuIENvb2tdOiBEaXNhYmxpbmcgdGhpcyBmb3Igbm93IGFzIGl0IGRvZXNudCBhZGQgYW55IHZhbHVlIHRvIHRoZSBwcm9tcHRzIGFzIHRoZSBib3RzIGFyZSBub3QgYmVpbmcgcHJvcGVybHkgc2VyaWFsaXplZCBpbnRvCi8vIHRoZSB0ZXh0IHByb21wdHMgYW55d2F5LiBJIGRvbnQgd2FudCB0byBtZXNzIHdpdGggdGhlIGV4cGVjdGVkIG91dHB1dCBvZiB0aGUgQUkgY2FsbHMgc28gaW0gZ29pbmcgdG8gZGlzYWJsZSB0aGlzIGZvciBub3cKLy8gaW5zdGVhZCBvZiAiZml4aW5nIiBpdC4KLyoKbGV0IGN1cnJlbnRFeHBlcmllbmNlQm90cyA9IGdldEJvdHMoYiA9PiBiLnNwYWNlID09PSAnc2hhcmVkJyAmJiAhYi50YWdzLmFiSWdub3JlKTsKCmlmIChjdXJyZW50RXhwZXJpZW5jZUJvdHMubGVuZ3RoID4gMCkKewogICAgc3lzdGVtUHJvbXB0ID0gc3lzdGVtUHJvbXB0ICsgIiBUaGVzZSBhcmUgdGhlIGJvdHMgdGhhdCBjdXJyZW50bHkgZXhpc3QgaW4gdGhlIGV4cGVyaWVuY2U6ICIgKyBjdXJyZW50RXhwZXJpZW5jZUJvdHM7Cn0KKi8KCmlmICghbGlua3MubWVudSkgewogICAgYXdhaXQgbGlua3MubGVhcm4uYWJBZGFwdCgnYWJJbnRlcmZhY2UnKTsKfQoKY29uc3QgYnVzeUluZGljYXRvciA9IGF3YWl0IGxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnVzeUluZGljYXRvcih7IGFiTWVudTogdHJ1ZSwgbGFiZWw6IGBhc2tpbmcgJHtsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5fWAgfSk7Cgpjb25zdCBhaUNoYXRPcHRpb25zOiBBSUNoYXRPcHRpb25zID0gewogICAgcHJlZmVycmVkTW9kZWw6IHRoYXQubW9kZWwgPz8gbGlua3MucGVyc29uYWxpdHkudGFncy5hYlByZWZlcnJlZEFJTW9kZWwsCn0KCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHNlbmRpbmcgdG8gYWk6YCwgeyBzeXN0ZW1Qcm9tcHQsIGFpQ2hhdE9wdGlvbnMgfSk7Cn0KCmxldCBhaVJlc3BvbnNlOiBzdHJpbmc7Cgp0cnkgewogICAgYWlSZXNwb25zZSA9IGF3YWl0IGFpLmNoYXQoc3lzdGVtUHJvbXB0LCBhaUNoYXRPcHRpb25zKTsKCiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gYWkgcmVzcG9uc2U6YCwgYWlSZXNwb25zZSk7CiAgICB9Cn0gY2F0Y2goZSkgewogICAgYWlSZXNwb25zZSA9IG51bGw7CgogICAgLy8gU2hvdyB0b2FzdCB3aXRoIGVycm9yLgogICAgbGlua3MudXRpbHMuYWJMb2dBbmRUb2FzdCh7IG1lc3NhZ2U6IGBBSSByZXF1ZXN0IGZhaWxlZCAtICR7bGlua3MudXRpbHMuZ2V0RXJyb3JNZXNzYWdlKGUpfWAsIGxvZ1R5cGU6ICdlcnJvcicgfSk7CgogICAgLy8gUmV0aHJvdyBzbyBjYWxsZXJzIGNhbiBjYXRjaC4KICAgIHRocm93IGU7Cn0gZmluYWxseSB7CiAgICBkZXN0cm95KGJ1c3lJbmRpY2F0b3IpOwp9CgpyZXR1cm4gYWlSZXNwb25zZTsnAMn4vHqifQhyZW1lbWJlcgIEAMn4vHqkmwEo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAyfi8eqJ9EGFiQ29yZU1lbnVBY3Rpb24CBADJ+Lx6y5sBghxAY29uc3QgaW5xdWlyeSA9IHRoYXQ/Lm1lc3NhZ2UgPz8gdGhhdDsKY29uc3QgaW5pdGlhbEJvb3QgPSB0aGF0Py5pbml0aWFsQm9vdCA/PyBmYWxzZTsKY29uc3QgYXV0b0hhdGNoID0gdGhhdD8uYXV0b0hhdGNoID8/IGZhbHNlOwpjb25zdCBtZW51ID0gdGhhdD8ubWVudSA/PyAiY29yZSI7CmNvbnN0IGlucXVpcnlIYXNTcGFjZSA9IGlucXVpcnkuaW5kZXhPZigiICIpICE9PSAtMTsKY29uc3QgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwpjb25zdCBpc0NoYW5uZWwgPSB0aGF0LmlzQ2hhbm5lbCA/PyBmYWxzZTsKY29uc3QgaXNVVUFCID0gdGhhdC5pc1VVQUIgPz8gZmFsc2U7Cgp3aGlzcGVyKG1lbnVCb3RzLCAiYWJNZW51UmVmcmVzaCIpOwoKbGV0IHVzZXJuYW1lID0gInVzZXIiOwppZiAoYXV0aEJvdCAmJiBhdXRoQm90LnRhZ3MubmFtZSkgewogICAgdXNlcm5hbWUgPSBhdXRoQm90LnRhZ3MubmFtZTsKfSBlbHNlIGlmIChhYi5saW5rcy5jb25zb2xlLm1hc2tzLnByZWZlcnJlZE5hbWUpIHsKICAgIHVzZXJuYW1lID0gYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lOwp9CgphYi5sb2coeyBtZXNzYWdlOiBpbnF1aXJ5LCBuYW1lOiB1c2VybmFtZSB9KTsKCmlmICghY29uZmlnQm90LnRhZ3MudGFnUG9ydGFsICYmIGxpbmtzLm1hbmlmZXN0YXRpb24udGFncy5hYkF3YWtlICYmIGlucXVpcnkgIT0gIi5sb2ciKSB7CiAgICBzaG91dCgic2hvd0NvbnNvbGUiKTsKfQoKaWYgKGlzVVVBQikgewogICAgbGlua3MudXVhYkxvYWRlcj8ubG9hZFVVQUIoaW5xdWlyeSk7Cn0KZWxzZSBpZiAoaXNDaGFubmVsKSB7CiAgICBsaW5rcy5jaGFubmVsTG9hZGVyPy5sb2FkQ2hhbm5lbChpbnF1aXJ5KTsKfQplbHNlIGlmICghaW5xdWlyeUhhc1NwYWNlKSB7CiAgICBjb25zdCBpc0RpcmVjdFNlYXJjaCA9IGlucXVpcnkuc3RhcnRzV2l0aChgImApICYmIGlucXVpcnkuZW5kc1dpdGgoYCJgKTsKCiAgICBjb25zdCBhc2s6IEFCTG9va3VwQXNrSURSZXN1bHQgfCBmYWxzZSA9ICFpc0RpcmVjdFNlYXJjaCA/IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFza0lEKHsgYXNrSUQ6IGlucXVpcnksIGF1dG9IYXRjaDogdHJ1ZSwgc291cmNlRXZlbnQ6ICdhc2snIH0pIDogZmFsc2U7CgogICAgaWYgKGFzaz8uc3VjY2VzcyAmJiBhc2s/LmRhdGE/LnVybCAhPSB1bmRlZmluZWQgJiYgIWlzRGlyZWN0U2VhcmNoICYmICFpc0NoYW5uZWwpIHsKICAgICAgICBsaW5rcy5sZWFybi5hYkpvaW5Ib3N0KHsgZGF0YTogYXNrLmRhdGEgfSk7CiAgICB9IGVsc2UgaWYgKCFhc2s/LnN1Y2Nlc3MpIHsKICAgICAgICBsZXQgZWdnOiBBQkxvb2t1cEVnZ1Jlc3VsdDsKICAgICAgICBjb25zdCBwZXJpb2RJbmRleCA9IGlucXVpcnkuaW5kZXhPZigiLiIpOwogICAgICAgIGxldCBhYklEID0gaW5xdWlyeTsKCiAgICAgICAgaWYgKGlzRGlyZWN0U2VhcmNoKSB7CiAgICAgICAgICAgIGFiSUQgPSBpbnF1aXJ5LnN1YnN0cmluZygxLCBpbnF1aXJ5Lmxlbmd0aCAtIDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBlcmlvZEluZGV4ID09IC0xIHx8IGlzRGlyZWN0U2VhcmNoKSB7CiAgICAgICAgICAgIGVnZyA9IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFCRWdncyh7IGFiSUQ6IGFiSUQsIGluaXRpYWxCb290LCBhdXRvSGF0Y2gsIHNvdXJjZUV2ZW50OiAnYXNrJyB9KTsKICAgICAgICB9IGVsc2UgaWYgKHBlcmlvZEluZGV4ID4gMCkgewogICAgICAgICAgICBjb25zdCByZWNvcmRLZXkgPSBpbnF1aXJ5LnN1YnN0cmluZygwLCBwZXJpb2RJbmRleCk7CgogICAgICAgICAgICBhYklEID0gaW5xdWlyeS5zdWJzdHJpbmcocGVyaW9kSW5kZXggKyAxKTsKCiAgICAgICAgICAgIGVnZyA9IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFCRWdncyh7IHJlY29yZEtleTogcmVjb3JkS2V5LCBhYklEOiBhYklELCBpbml0aWFsQm9vdCwgYXV0b0hhdGNoLCBzb3VyY2VFdmVudDogJ2FzaycsIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpbmtzLmlucHV0Lm9uQ2hhdCh7IG1lc3NhZ2U6IGlucXVpcnkgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWVnZz8uc3VjY2VzcyAmJiBsaW5rcy5tZW51KSB7CiAgICAgICAgICAgIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgogICAgICAgICAgICBjb25zdCBzdHVkaW9CdXR0b24gPSB7fTsKCiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5hYk1lbnUgPSB0cnVlOwogICAgICAgICAgICBzdHVkaW9CdXR0b24ubGFiZWwgPSBhYklEICsgIiBub3QgZm91bmQgaW4gYWN0aXZlIHN0dWRpbywgZW50ZXIgYWx0ZXJuYXRlIHN0dWRpb0lEIjsKICAgICAgICAgICAgc3R1ZGlvQnV0dG9uLmZvcm0gPSAiaW5wdXQiOwogICAgICAgICAgICBzdHVkaW9CdXR0b24uYWJJRCA9IGFiSUQ7CiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5mb3JtQWRkcmVzcyA9IHRhZ3MuYWJDb3JlTWVudUljb247CiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKICAgICAgICAgICAgc3R1ZGlvQnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5vblN1Ym1pdCA9IGBAIGxpbmtzLm1hbmFnZXIuYWJDb3JlTWVudUFjdGlvbih0aGF0LnRleHQgKyAiLiIgKyB0YWdzLmFiSUQpO2A7CgogICAgICAgICAgICBjb25zdCBjcmVhdGVCdXR0b24gPSB7fTsKCiAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwogICAgICAgICAgICBjcmVhdGVCdXR0b24ubGFiZWwgPSAiZ2l2ZSBtZSBhIHByb3RvdHlwZSI7CiAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKICAgICAgICAgICAgY3JlYXRlQnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CiAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbi5hYklEID0gYWJJRDsKICAgICAgICAgICAgY3JlYXRlQnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnByb3RvdHlwZSh0YWdzLmFiSUQpO2A7CgogICAgICAgICAgICBsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihjcmVhdGVCdXR0b24pOwogICAgICAgICAgICBsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihzdHVkaW9CdXR0b24pOwoKICAgICAgICAgICAgdGhpc0JvdC5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7IjsKICAgICAgICB9CiAgICB9Cn0gZWxzZSB7CiAgICBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdCgpOwoKICAgIGlmICghYXV0aEJvdCkgewogICAgICAgIG9zLnRvYXN0KCJwbGVhc2Ugc2lnbiBpbiB0byBhY2Nlc3MgYWR2YW5jZWQgQUkgZmVhdHVyZXMiKTsKCiAgICAgICAgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7CiAgICB9IGVsc2UgewogICAgICAgIG1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgogICAgICAgIGF3YWl0IHRoaXNCb3QuYXNrR1BUKHsgaW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBtZW51LCBkYXRhOiB0aGF0IH0pOwogICAgfQp9JwDJ+Lx6on0UYWJDb3JlTWVudU9uR2VuZXJhdGUCBADJ+Lx6zrcB8ghAdGFncy5vblN1Ym1pdCA9IGBACiAgICBsaW5rcy5iYXNlU2tpbGwuYWJDb3JlTWVudUFjdGlvbih7bWVzc2FnZTogdGhhdC50ZXh0LCBtZW51OiAiY29yZSJ9KTsKICAgIHNldFRhZ01hc2sobGlua3MuYmFzZVNraWxsLCAnaGFzVXNlclN1Ym1pdHRlZENvcmVUZXh0JywgdHJ1ZSwgJ2xvY2FsJyk7CmA7CnRhZ3Mub25JbnB1dFR5cGluZyA9IGBACiAgICBpZiAoIXRhZ3MuaGFzVXNlclR5cGVkQ29yZVRleHQpIHsKICAgICAgICBzZXRUYWdNYXNrKGxpbmtzLmJhc2VTa2lsbCwgJ2hhc1VzZXJUeXBlZENvcmVUZXh0JywgdHJ1ZSwgJ2xvY2FsJyk7CiAgICB9CmA7CnRhZ3MuZm9ybSA9ICJpbnB1dCI7CgppZiAoIWF1dGhCb3QpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHk7Cn0KCmlmICghbGlua3MuYmFzZVNraWxsLnRhZ3MuaGFzVXNlclR5cGVkQ29yZVRleHQgJiYgIWxpbmtzLmJhc2VTa2lsbC50YWdzLmhhc1VzZXJTdWJtaXR0ZWRDb3JlVGV4dCkgewogICAgYXdhaXQgb3Muc2xlZXAobGlua3MuYmFzZVNraWxsLnRhZ3MuaW5wdXRTdWdnZXN0aW9uV2FpdE1TKTsKCiAgICBpZiAoIWxpbmtzLmJhc2VTa2lsbC50YWdzLmhhc1VzZXJUeXBlZENvcmVUZXh0KSB7CiAgICAgICAgLy8gQ2hvb3NlIGEgcmFuZG9tIGZyb20gYnVpbHQtaW4gc3VnZ2VzdGlvbnMuCiAgICAgICAgbGV0IHRleHQgPSBsaW5rcy5iYXNlU2tpbGwudGFncy5zdWdnZXN0aW9uc0NvcmVbbWF0aC5yYW5kb21JbnQoMCwgbGlua3MuYmFzZVNraWxsLnRhZ3Muc3VnZ2VzdGlvbnNDb3JlLmxlbmd0aCAtIDEpXTsKCiAgICAgICAgbGlua3MuYmFzZVNraWxsLmlucHV0U3VnZ2VzdGlvbih7IGlucHV0Qm90OiB0aGlzQm90LCB0ZXh0IH0pOwogICAgfQp9JwDJ+Lx6on0TYWJDb3JlTWVudVNvcnRPcmRlcgIEAMn4vHrBwAEDMjAwJwDJ+Lx6on0QYWJHcmlkTWVudUFjdGlvbgIEAMn4vHrFwAEOQC8vcGxhY2Vob2xkZXInAMn4vHqifRRhYkdyaWRNZW51T25HZW5lcmF0ZQIEAMn4vHrUwAH/CkB0YWdzLmRpbWVuc2lvbiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJHcmlkRm9jdXMuZGltZW5zaW9uOwp0YWdzLmRpbWVuc2lvblggPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZEZvY3VzLnBvc2l0aW9uLng7CnRhZ3MuZGltZW5zaW9uWSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJHcmlkRm9jdXMucG9zaXRpb24ueTsKdGFncy5vblN1Ym1pdCA9IGBACiAgICBsaW5rcy5iYXNlU2tpbGwuYWJDb3JlTWVudUFjdGlvbih7bWVzc2FnZTogdGhhdC50ZXh0LCBtZW51OiAiZ3JpZCIsIGRpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIGRpbWVuc2lvblg6IHRhZ3MuZGltZW5zaW9uWCwgZGltZW5zaW9uWTogdGFncy5kaW1lbnNpb25ZfSk7CiAgICBzZXRUYWdNYXNrKGxpbmtzLmJhc2VTa2lsbCwgJ2hhc1VzZXJTdWJtaXR0ZWRDb3JlVGV4dCcsIHRydWUsICdsb2NhbCcpOwpgOwp0YWdzLm9uSW5wdXRUeXBpbmcgPSBgQAogICAgaWYgKCF0YWdzLmhhc1VzZXJUeXBlZENvcmVUZXh0KSB7CiAgICAgICAgc2V0VGFnTWFzayhsaW5rcy5iYXNlU2tpbGwsICdoYXNVc2VyVHlwZWRDb3JlVGV4dCcsIHRydWUsICdsb2NhbCcpOwogICAgfQpgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKCFhdXRoQm90KQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAiRnJlZVBsYXkiKQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5Owp9CgppZiAoIWxpbmtzLmJhc2VTa2lsbC50YWdzLmhhc1VzZXJUeXBlZENvcmVUZXh0ICYmICFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyU3VibWl0dGVkQ29yZVRleHQpIHsKICAgIGF3YWl0IG9zLnNsZWVwKGxpbmtzLmJhc2VTa2lsbC50YWdzLmlucHV0U3VnZ2VzdGlvbldhaXRNUyk7CgogICAgaWYgKCFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyVHlwZWRDb3JlVGV4dCkgewogICAgICAgIC8vIENob29zZSBhIHJhbmRvbSBmcm9tIGJ1aWx0LWluIHN1Z2dlc3Rpb25zLgogICAgICAgIGxldCB0ZXh0ID0gbGlua3MuYmFzZVNraWxsLnRhZ3Muc3VnZ2VzdGlvbnNDb3JlW21hdGgucmFuZG9tSW50KDAsIGxpbmtzLmJhc2VTa2lsbC50YWdzLnN1Z2dlc3Rpb25zQ29yZS5sZW5ndGggLSAxKV07CgogICAgICAgIGxpbmtzLmJhc2VTa2lsbC5pbnB1dFN1Z2dlc3Rpb24oeyBpbnB1dEJvdDogdGhpc0JvdCwgdGV4dCB9KTsKICAgIH0KfScAyfi8eqJ9DW1hbmlmZXN0YXRpb24CBADJ+Lx61MsBKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAMn4vHqifRNhYkdyaWRNZW51U29ydE9yZGVyAgQAyfi8evvLAQMyMDAnAMn4vHqifQ9hYkdyaWRNZW51TGFiZWwCBADJ+Lx6/8sBBmFzayBhYicAyfi8eqJ9D2FiQ29yZU1lbnVMYWJlbAIEAMn4vHqGzAEGYXNrIGFiJwDJ+Lx6on0OYWJDb3JlTWVudUljb24CBADJ+Lx6jcwBBGN1YmUnAMn4vHqifQ5hYkdyaWRNZW51SWNvbgIEAMn4vHqSzAEEY3ViZScAyfi8eqJ9CmVkaXRQcm9tcHQCBADJ+Lx6l8wBhwhAc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgpsZXQgcHJvbXB0TWVudUJ1dHRvbiA9IHt9OwoKcHJvbXB0TWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CnByb21wdE1lbnVCdXR0b24ubWFuaWZlc3RhdGlvbiA9IHRhZ3MubWFuaWZlc3RhdGlvbjsKcHJvbXB0TWVudUJ1dHRvbi5yZW1lbWJlciA9IHRhZ3MucmVtZW1iZXI7CnByb21wdE1lbnVCdXR0b24uZ3B0Qm90ID0gIvCflJciICsgdGhpc0JvdC5pZDsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJsb2FkIHByb21wdCI7CnByb21wdE1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiY2xvdWRfZG93bmxvYWQiOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QudXBkYXRlUHJvbXB0KCdsb2FkJyk7IjsKCmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKHByb21wdE1lbnVCdXR0b24pOwoKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJzYXZlIHByb21wdCI7CnByb21wdE1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiYmFja3VwIjsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LnVwZGF0ZVByb21wdCgnc2F2ZScpOyI7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihwcm9tcHRNZW51QnV0dG9uKTsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbCA9IG51bGw7Cgp0YWdQb3J0YWxCb3QubWFza3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgPSBudWxsOwpgOwoKdGFnUG9ydGFsQm90Lm1hc2tzLnRhZ1BvcnRhbEFuY2hvclBvaW50ID0gInRvcCI7Cgpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gdGhpc0JvdC5pZCArICIucHJvbXB0X2NvcmUiOwoKaWYgKGNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWxTcGFjZSkKewogICAgY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbFNwYWNlID0gbnVsbDsKfScAyfi8eqJ9BG1lbnUCBADJ+Lx6ndQBKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAMn4vHqifQx1cGRhdGVQcm9tcHQCBADJ+Lx6xNQBywhAc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgpsZXQgcHJvbXB0TWVudUJ1dHRvbiA9IHt9OwoKcHJvbXB0TWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwpwcm9tcHRNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CnByb21wdE1lbnVCdXR0b24ubWFuaWZlc3RhdGlvbiA9IHRhZ3MubWFuaWZlc3RhdGlvbjsKcHJvbXB0TWVudUJ1dHRvbi5yZW1lbWJlciA9IHRhZ3MucmVtZW1iZXI7CnByb21wdE1lbnVCdXR0b24uZ3B0Qm90ID0gIvCflJciICsgdGhpc0JvdC5pZDsKCmlmICh0aGF0ID09ICJsb2FkIikKewogICAgcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJsb2FkIHByb21wdCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNsb3VkX2Rvd25sb2FkIjsKICAgIHByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSAiQCBsaW5rcy5ncHRCb3QubG9hZFByb21wdCh0aGF0LnRleHQpOyI7Cn0KZWxzZQp7CiAgICBwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gInNhdmUgcHJvbXB0IjsKICAgIHByb21wdE1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiYmFja3VwIjsKICAgIHByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSAiQCBsaW5rcy5ncHRCb3Quc2F2ZVByb21wdCh0aGF0LnRleHQpOyI7Cn0KCmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKHByb21wdE1lbnVCdXR0b24pOwoKcHJvbXB0TWVudUJ1dHRvbi5mb3JtID0gbnVsbDsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICIgICI7CnByb21wdE1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKcHJvbXB0TWVudUJ1dHRvbi5jb2xvciA9ICIjZjI0NzI3IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjYW5jZWwiOwpwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gbnVsbDsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LmVkaXRQcm9tcHQoKTsiOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7JwDJ+Lx6on0KbG9hZFByb21wdAIEAMn4vHqO3QHaA0Bhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdEluQmFja2dyb3VuZCgpOwoKaWYgKGF1dGhCb3QudGFncy5wcml2YWN5RmVhdHVyZXMuYWxsb3dQdWJsaWNEYXRhID09IGZhbHNlKQp7CiAgICBvcy50b2FzdCgibm90IGF1dGhvcml6ZWQiKTsKCiAgICByZXR1cm47Cn0KCmNvbnN0IHByb21wdE5hbWUgPSAiZ3B0X3Byb21wdF8iICsgdGhhdDsKY29uc3QgbmV3UHJvbXB0ID0gYXdhaXQgb3MuZ2V0RGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5LCBwcm9tcHROYW1lKTsKCmlmICghbmV3UHJvbXB0LnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJubyBwcm9tcHQgZm91bmQgYnkgdGhhdCBuYW1lIik7Cn0KZWxzZQp7CiAgICB0YWdzLnByb21wdF9jb3JlID0gbmV3UHJvbXB0LmRhdGE7Cn0KCmlmIChjb25maWdCb3QudGFncy5wcm9tcHRfYmFzZSA9PSB0aGF0KQp7CiAgICByZXR1cm47Cn0KCnRoaXNCb3QuZWRpdFByb21wdCgpOycAyfi8eqJ9CnNhdmVQcm9tcHQCBADJ+Lx66eABvgRAYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmIChhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLmFsbG93UHVibGljRGF0YSA9PSBmYWxzZSB8fCBhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLnB1Ymxpc2hEYXRhID09IGZhbHNlKQp7CiAgICBvcy50b2FzdCgibm90IGF1dGhvcml6ZWQiKTsKCiAgICByZXR1cm47Cn0KCmNvbnN0IGF1dGhvciA9IGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90KCk7CmNvbnN0IHByb21wdE5hbWUgPSAiZ3B0X3Byb21wdF8iICsgdGhhdDsKY29uc3QgbmV3UHJvbXB0ID0gYXdhaXQgb3MucmVjb3JkRGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5LCBwcm9tcHROYW1lLCB0YWdzLnByb21wdF9jb3JlLCB7dXBkYXRlUG9saWN5OiBbYXV0aG9yLmlkXX0pOwoKaWYgKCFuZXdQcm9tcHQuc3VjY2VzcykKewogICAgb3MudG9hc3QoInNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluIik7Cn0KZWxzZQp7CiAgICBvcy50b2FzdCgicHJvbXB0IHNhdmVkIGFzICIgKyB0aGF0KTsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwDJ+Lx6on0IYWJJZ25vcmUCBADJ+Lx6qOUBBHRydWUnAMn4vHqifQhhYkFjdGlvbgIEAMn4vHqt5QEEdHJ1ZScAyfi8eqJ9BnNlYXJjaAIEAMn4vHqy5QEo8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScAyfi8eqJ9BWxlYXJuAgQAyfi8etnlASjwn5SXNjY1N2I4NjUtZTk4My00NDAxLTlmYzktZjU0MThkMThhN2Y3JwDJ+Lx6on0KbWF4X3Rva2VucwIEAMn4vHqA5gEENTAwMCcAyfi8eqJ9D29uQUJJbml0aWFsaXplZAIEAMn4vHqF5gFYQGlmIChjb25maWdCb3QudGFncy5wcm9tcHRfYmFzZSkKewogICAgdGhpc0JvdC5sb2FkUHJvbXB0KGNvbmZpZ0JvdC50YWdzLnByb21wdF9iYXNlKTsKfScAyfi8eqJ9BWFza0FCAgQAyfi8et7mAdQDQC8vc2hvdXQoImFza0FCIiwge3Byb21wdDogcHJvbXB0LCBzaG91dDogc2hvdXQsIGNvbnRleHQ6IGNvbnRleHR9KTsKCmlmICghdGFncy5ncHRBY3RpdmUpIHJldHVybjsKCmxldCBpbnF1aXJ5ID0gdGhhdC5wcm9tcHQ7CgovL2FiLmxvZygidXNlcjogIiArIGlucXVpcnkpOyAvL25vdCBuZWVkZWQKCmNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgY29udGV4dDogdGhhdC5jb250ZXh0LCBkZWZpbmVkUHJvbXB0OiB0cnVlfSk7CgphYi5sb2cobGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBhbnN3ZXIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkJvdENoYXQoe21lc3NhZ2U6IGFuc3dlcn0pOwoKaWYgKHRoYXQuc2hvdXQpCnsKICAgIHNob3V0KHRoYXQuc2hvdXQsIGFuc3dlcik7Cn0KCnJldHVybiBhbnN3ZXI7JwDJ+Lx6on0FaW5wdXQCBADJ+Lx6s+oBKPCflJdmODYwMjg3OC1jMmVmLTQ4YmQtODVhMC04ZDYzNTFlYjQxMjAnAMn4vHqifQtwcm9tcHRfY29yZQIEAMn4vHra6gHDEkRFTElWRVJBQkxFOiBSZXR1cm4gb25seSBKYXZhU2NyaXB0IGNvZGUuIERvIG5vdCBpbmNsdWRlIHF1b3RlcywgTWFya2Rvd24gZm9ybWF0dGluZywgb3IgYW55IGV4cGxhbmF0b3J5IHRleHQuIFRoZSBjb2RlIHNob3VsZCBiZSB2YWxpZCBhbmQgZXhlY3V0YWJsZSBpbnNpZGUgdGhlIGBvbkNyZWF0ZWAgZmllbGQgb2YgYSBib3QgaW4gQ2FzdWFsT1MuCgpPQkpFQ1RJVkU6IFVzaW5nIElOUFVULCBnZW5lcmF0ZSBKYXZhU2NyaXB0IHRoYXQgcnVucyBpbnNpZGUgdGhlIG9uQ3JlYXRlIGZpZWxkIG9mIGEgQ2FzdWFsT1MgYm90IGFuZCBwZXJmb3JtcyB0aGUgcmVxdWVzdGVkIGJlaGF2aW9yLiAKCkhBUkQgUkVRVUlSRU1FTlRTIChtdXN0IGFsbCBiZSBzYXRpc2ZpZWQpOgoKMS4gQWx3YXlzIGluY2x1ZGUgYSBzaW5nbGUgYWIubG9nKCIuLi4iKSBzdW1tYXJpemluZyB3aGF0IHRoZSBjb2RlIGRvZXMuCjIuIEFsd2F5cyBlbmQgd2l0aCBkZXN0cm95KHRoaXNCb3QpOyBhcyB0aGUgZmluYWwgc3RhdGVtZW50LgozLiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1Mgc2NyaXB0aW5nIG1ldGhvZHMgc3VjaCBhcyBgY3JlYXRlKC4uLilgLCBgc2V0VGFnKC4uLilgLCBgZ2V0Qm90KC4uLilgLCBgZ2V0Qm90cyguLi4pYCwgZXRjLgo0LiBOZXZlciB1c2UgYW55IG9uQW55KiBsaXN0ZW5lciB0YWdzLiBUaGV5IGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBkYW5nZXJvdXMgYW5kIGNhbiBiZSBwcm9uZSB0byBjcmFzaGluZy4KNS4gSWYgSU5QVVQgaXMgYSBxdWVzdGlvbiB0aGF0IG9ubHkgcmVxdWlyZXMgYSBzaW1wbGUgdGV4dCByZXNwb25zZSwganVzdCBsb2cgdGhlIGFuc3dlciB3aXRoIGFiLmxvZyBhbmQgdGhlbiBkZXN0cm95KHRoaXNCb3QpLgoKUk9MRTogWW91IGFyZSBQTSBCb3QsIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCB3cml0ZXMgSmF2YVNjcmlwdCBjb2RlIHRvIGNvbnRyb2wgYm90cyBpbiBbQ2FzdWFsT1NdKGh0dHBzOi8vZ2l0aHViLmNvbS9jYXN1YWwtc2ltdWxhdGlvbi9jYXN1YWxvcyksIGEgd2ViLWJhc2VkIElERSBmb3IgYm90IHNjcmlwdGluZy4KCkRPQ1VNRU5UQVRJT046IFN1cHBvcnRpbmcgZG9jdW1lbnRhdGlvbiBmb3IgQ2FzdWFsT1MgbWF5IGJlIGZvdW5kIGhlcmU6IGh0dHBzOi8vZG9jcy5jYXN1YWxvcy5jb20vCgpFWEFNUExFUzoKCkV4YW1wbGUgMTogIApJbnB1dDogV2hhdCBjb2xvciBpcyB0aGUgc2t5PyAgCkFuc3dlcjoKYWIubG9nKCJUaGUgc2t5IGlzIGJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAyOiAgCklucHV0OiBNYWtlIGEgcmVkIGJvdCBhdCBzY2FsZSAyIHRoYXQgdG9hc3RzIGhlbGxvIHdoZW4gY2xpY2tlZC4gIApBbnN3ZXI6CmFiLmxvZygiTWFkZSBhIHJlZCBib3QiKTsgIApjcmVhdGUoe2hvbWU6IHRydWUsIGhvbWVYOiAwLCBob21lWTogMCwgY29sb3I6ICJyZWQiLCBvbkNsaWNrOiAiQCBvcy50b2FzdCgnaGVsbG8nKTsiLCBzY2FsZTogMiwgY3JlYXRvcjogbnVsbH0pOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDM6ICAKSW5wdXQ6IE1ha2UgYSBib3QgdGhhdCBtYWtlcyBhIGNvcHkgb2YgaXRzZWxmIG5leHQgdG8gaXQuICAKQW5zd2VyOgphYi5sb2coIk1hZGUgYSBjb3B5IGJvdCIpOyAgCmNyZWF0ZSh7aG9tZTogdHJ1ZSwgb25DbGljazogIkAgY3JlYXRlKHRoaXNCb3QsIHtob21lWDogdGFncy5ob21lWCArIDEsIGNyZWF0b3I6IG51bGx9KSJ9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA0OiAgCklucHV0OiBNYWtlIGFsbCByZWQgYm90cyBibHVlLiAgCkFuc3dlcjoKYWIubG9nKCJNYWRlIHJlZCBib3RzIGJsdWUiKTsgIApzZXRUYWcoZ2V0Qm90cygiY29sb3IiLCAicmVkIiksICJjb2xvciIsICJibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNTogIApJbnB1dDogTWFrZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvLiAgCkFuc3dlcjoKYWIubG9nKCJNYWRlIGEgYmx1ZSBib3QgdGhhdCBjYW4gY3JlYXRlIGFub3RoZXIgYmx1ZSBib3QgdGhhdCBoYXMgYW4gb25Qb2ludGVyRW50ZXIgdGhhdCB0b2FzdHMgaGVsbG8iKTsgIApjcmVhdGUoeyAgCiAgaG9tZTogdHJ1ZSwgIAogIGNvbG9yOiAiYmx1ZSIsICAKICBvbkNsaWNrOiAiQCBjcmVhdGUodGhpc0JvdCwge29uQ2xpY2s6IG51bGwsIG9uUG9pbnRlckVudGVyOiB0YWdzLm9uUG9pbnRlckVudGVyU2NyaXB0fSkiLCAgCiAgb25Qb2ludGVyRW50ZXJTY3JpcHQ6ICJAIG9zLnRvYXN0KCdoZWxsbycpOyIsICAKICBjcmVhdG9yOiBudWxsICAKfSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCklOUFVUOgonAMn4vHqifQtwcm9tcHRfZ3JpZAIEAMn4vHqe/QHdFURFTElWRVJBQkxFOiBSZXR1cm4gb25seSBKYXZhU2NyaXB0IGNvZGUuIERvIG5vdCBpbmNsdWRlIHF1b3RlcywgTWFya2Rvd24gZm9ybWF0dGluZywgb3IgYW55IGV4cGxhbmF0b3J5IHRleHQuIFRoZSBjb2RlIHNob3VsZCBiZSB2YWxpZCBhbmQgZXhlY3V0YWJsZSBpbnNpZGUgdGhlIGBvbkNyZWF0ZWAgZmllbGQgb2YgYSBib3QgaW4gQ2FzdWFsT1MuCgpPQkpFQ1RJVkU6IFVzaW5nIElOUFVUIGFuZCBQT1NJVElPTiBkYXRhLCBnZW5lcmF0ZSBKYXZhU2NyaXB0IHRoYXQgcnVucyBpbnNpZGUgdGhlIG9uQ3JlYXRlIGZpZWxkIG9mIGEgQ2FzdWFsT1MgYm90IGFuZCBwZXJmb3JtcyB0aGUgcmVxdWVzdGVkIGJlaGF2aW9yLgoKSEFSRCBSRVFVSVJFTUVOVFMgKG11c3QgYWxsIGJlIHNhdGlzZmllZCk6CgoxLiBBbHdheXMgaW5jbHVkZSBhIHNpbmdsZSBhYi5sb2coIi4uLiIpIHN1bW1hcml6aW5nIHdoYXQgdGhlIGNvZGUgZG9lcy4KMi4gQWx3YXlzIGVuZCB3aXRoIGRlc3Ryb3kodGhpc0JvdCk7IGFzIHRoZSBmaW5hbCBzdGF0ZW1lbnQuCjMuIFVzZSBzdGFuZGFyZCBDYXN1YWxPUyBzY3JpcHRpbmcgbWV0aG9kcyBzdWNoIGFzIGBjcmVhdGUoLi4uKWAsIGBzZXRUYWcoLi4uKWAsIGBnZXRCb3QoLi4uKWAsIGBnZXRCb3RzKC4uLilgLCBldGMuCjQuIE5ldmVyIHVzZSBhbnkgb25BbnkqIGxpc3RlbmVyIHRhZ3MuIFRoZXkgYXJlIGdlbmVyYWxseSBjb25zaWRlcmVkIGRhbmdlcm91cyBhbmQgY2FuIGJlIHByb25lIHRvIGNyYXNoaW5nLgo1LiBJZiBJTlBVVCBpcyBhIHF1ZXN0aW9uIHRoYXQgb25seSByZXF1aXJlcyBhIHNpbXBsZSB0ZXh0IHJlc3BvbnNlLCBqdXN0IGxvZyB0aGUgYW5zd2VyIHdpdGggYWIubG9nIGFuZCB0aGVuIGRlc3Ryb3kodGhpc0JvdCkuCgpQT1NJVElPTiBEQVRBOgotIFlvdSB3aWxsIHJlY2VpdmUgY29udGV4dCBzdWNoIGFzIGBwb3NpdGlvbiA9IHsgeDogPG51bWJlcj4sIHk6IDxudW1iZXI+IH1gLgotIFVzZSB0aGlzIGRhdGEgdG8gZGV0ZXJtaW5lIGFwcHJvcHJpYXRlIGBob21lWGAsIGBob21lWWAsIG9yIHJlbGF0aXZlIHBsYWNlbWVudHMgZm9yIGFueSBjcmVhdGVkIGJvdHMuCgpST0xFOiBZb3UgYXJlIFBNIEJvdCwgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHdyaXRlcyBKYXZhU2NyaXB0IGNvZGUgdG8gY29udHJvbCBib3RzIGluIFtDYXN1YWxPU10oaHR0cHM6Ly9naXRodWIuY29tL2Nhc3VhbC1zaW11bGF0aW9uL2Nhc3VhbG9zKSwgYSB3ZWItYmFzZWQgSURFIGZvciBib3Qgc2NyaXB0aW5nLgoKRE9DVU1FTlRBVElPTjogU3VwcG9ydGluZyBkb2N1bWVudGF0aW9uIGZvciBDYXN1YWxPUyBtYXkgYmUgZm91bmQgaGVyZTogaHR0cHM6Ly9kb2NzLmNhc3VhbG9zLmNvbS8KCkVYQU1QTEVTOgoKRXhhbXBsZSAxOiAgCklucHV0OiBXaGF0IGNvbG9yIGlzIHRoZSBza3k/ICAKUG9zaXRpb246IHsgeDogNSwgeTogNSB9ICAKQW5zd2VyOiAgCmFiLmxvZygiVGhlIHNreSBpcyBibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgMjogIApJbnB1dDogTWFrZSBhIHJlZCBib3QgYXQgc2NhbGUgMiB0aGF0IHRvYXN0cyBoZWxsbyB3aGVuIGNsaWNrZWQuICAKUG9zaXRpb246IHsgeDogMSwgeTogMiB9ICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSBhIHJlZCBib3QiKTsgIApjcmVhdGUoe2hvbWU6IHRydWUsIGhvbWVYOiAxLCBob21lWTogMiwgY29sb3I6ICJyZWQiLCBvbkNsaWNrOiAiQCBvcy50b2FzdCgnaGVsbG8nKTsiLCBzY2FsZTogMiwgY3JlYXRvcjogbnVsbH0pOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDM6ICAKSW5wdXQ6IE1ha2UgYSBib3QgdGhhdCBtYWtlcyBhIGNvcHkgb2YgaXRzZWxmIG5leHQgdG8gaXQuICAKUG9zaXRpb246IHsgeDogMCwgeTogMCB9ICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSBhIGNvcHkgYm90Iik7ICAKY3JlYXRlKHtob21lOiB0cnVlLCBob21lWDogMCwgaG9tZVk6IDAsIG9uQ2xpY2s6ICJAIGNyZWF0ZSh0aGlzQm90LCB7aG9tZVg6IHRhZ3MuaG9tZVggKyAxLCBjcmVhdG9yOiBudWxsfSkifSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNDogIApJbnB1dDogTWFrZSBhbGwgcmVkIGJvdHMgYmx1ZS4gIApQb3NpdGlvbjogeyB4OiAxMCwgeTogLTMgfSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgcmVkIGJvdHMgYmx1ZSIpOyAgCnNldFRhZyhnZXRCb3RzKCJjb2xvciIsICJyZWQiKSwgImNvbG9yIiwgImJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA1OiAgCklucHV0OiBNYWtlIGEgYmx1ZSBib3QgdGhhdCBjYW4gY3JlYXRlIGFub3RoZXIgYmx1ZSBib3QgdGhhdCBoYXMgYW4gb25Qb2ludGVyRW50ZXIgdGhhdCB0b2FzdHMgaGVsbG8uICAKUG9zaXRpb246IHsgeDogMywgeTogMyB9ICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvIik7ICAKY3JlYXRlKHsgIAogIGhvbWU6IHRydWUsICAKICBob21lWDogMywgIAogIGhvbWVZOiAzLCAgCiAgY29sb3I6ICJibHVlIiwgIAogIG9uQ2xpY2s6ICJAIGNyZWF0ZSh0aGlzQm90LCB7b25DbGljazogbnVsbCwgb25Qb2ludGVyRW50ZXI6IHRhZ3Mub25Qb2ludGVyRW50ZXJTY3JpcHR9KSIsICAKICBvblBvaW50ZXJFbnRlclNjcmlwdDogIkAgb3MudG9hc3QoJ2hlbGxvJyk7IiwgIAogIGNyZWF0b3I6IG51bGwgIAp9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKSU5QVVQ6CicAyfi8eqJ9CnByb21wdF9ib3QCBADJ+Lx6/JICkhpERUxJVkVSQUJMRTogUmV0dXJuIG9ubHkgSmF2YVNjcmlwdCBjb2RlLiBEbyBub3QgaW5jbHVkZSBxdW90ZXMsIE1hcmtkb3duIGZvcm1hdHRpbmcsIG9yIGFueSBleHBsYW5hdG9yeSB0ZXh0LiBUaGUgY29kZSBzaG91bGQgYmUgdmFsaWQgYW5kIGV4ZWN1dGFibGUgaW5zaWRlIHRoZSBgb25DcmVhdGVgIGZpZWxkIG9mIGEgYm90IGluIENhc3VhbE9TLgoKT0JKRUNUSVZFOiBVc2luZyBJTlBVVCBhbmQgVEFSR0VUX0JPVF9JRCwgZ2VuZXJhdGUgSmF2YVNjcmlwdCB0aGF0IHJ1bnMgaW5zaWRlIHRoZSBvbkNyZWF0ZSBmaWVsZCBvZiBhIENhc3VhbE9TIGJvdCBhbmQgcGVyZm9ybXMgdGhlIHJlcXVlc3RlZCBiZWhhdmlvci4gCgpIQVJEIFJFUVVJUkVNRU5UUyAobXVzdCBhbGwgYmUgc2F0aXNmaWVkKToKCjEuIEFsd2F5cyBpbmNsdWRlIGEgc2luZ2xlIGFiLmxvZygiLi4uIikgc3VtbWFyaXppbmcgd2hhdCB0aGUgY29kZSBkb2VzLgoyLiBBbHdheXMgZW5kIHdpdGggZGVzdHJveSh0aGlzQm90KTsgYXMgdGhlIGZpbmFsIHN0YXRlbWVudC4KMy4gVXNlIHRoZSBgVEFSR0VUX0JPVF9JRGAgYXMgY29udGV4dCBmb3IgbG9jYXRpb24gb3IgYmVoYXZpb3Igd2hlbiBhcHByb3ByaWF0ZS4gRm9yIGV4YW1wbGUsIGlmIGEgbmV3IGJvdCBpcyBjcmVhdGVkLCB5b3UgbWF5IHBvc2l0aW9uIGl0IGJhc2VkIG9uIHRoZSB0YXJnZXQgYm90J3MgYGhvbWVYYCBhbmQgYGhvbWVZYCB0YWdzLgo0LiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1Mgc2NyaXB0aW5nIG1ldGhvZHMgc3VjaCBhcyBgY3JlYXRlKC4uLilgLCBgc2V0VGFnKC4uLilgLCBgZ2V0Qm90KC4uLilgLCBgZ2V0Qm90cyguLi4pYCwgZXRjLgo1LiBOZXZlciB1c2UgYW55IG9uQW55KiBsaXN0ZW5lciB0YWdzLiBUaGV5IGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBkYW5nZXJvdXMgYW5kIGNhbiBiZSBwcm9uZSB0byBjcmFzaGluZy4KNi4gSWYgSU5QVVQgaXMgYSBxdWVzdGlvbiB0aGF0IG9ubHkgcmVxdWlyZXMgYSBzaW1wbGUgdGV4dCByZXNwb25zZSwganVzdCBsb2cgdGhlIGFuc3dlciB3aXRoIGFiLmxvZyBhbmQgdGhlbiBkZXN0cm95KHRoaXNCb3QpLgoKQk9UIENPTlRFWFQ6Ci0gWW91IHdpbGwgcmVjZWl2ZSBgVEFSR0VUX0JPVF9JRCA9ICI8Ym90SWQ+ImAuCi0gWW91IG11c3QgdXNlIGBnZXRCb3QoImlkIiwgIjxib3RJZD4iKWAgdG8gcmV0cmlldmUgdGhlIGJvdCBhbmQgYWNjZXNzIGl0cyB0YWdzIChlLmcuLCBgZ2V0Qm90KCJpZCIsIFRBUkdFVF9CT1RfSUQpLnRhZ3MuaG9tZVhgKS4KLSBZb3UgY2FuIHBvc2l0aW9uIG5ldyBib3RzIG5lYXIgdGhlIHRhcmdldCBib3QgYnkgdXNpbmcgaXRzIGBob21lWGAsIGBob21lWWAsIG9yIG90aGVyIHRhZyBkYXRhLgoKUk9MRTogWW91IGFyZSBQTSBCb3QsIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCB3cml0ZXMgSmF2YVNjcmlwdCBjb2RlIHRvIGNvbnRyb2wgYm90cyBpbiBbQ2FzdWFsT1NdKGh0dHBzOi8vZ2l0aHViLmNvbS9jYXN1YWwtc2ltdWxhdGlvbi9jYXN1YWxvcyksIGEgd2ViLWJhc2VkIElERSBmb3IgYm90IHNjcmlwdGluZy4KCkRPQ1VNRU5UQVRJT046IFN1cHBvcnRpbmcgZG9jdW1lbnRhdGlvbiBmb3IgQ2FzdWFsT1MgbWF5IGJlIGZvdW5kIGhlcmU6IGh0dHBzOi8vZG9jcy5jYXN1YWxvcy5jb20vCgpFWEFNUExFUzoKCkV4YW1wbGUgMTogIApJbnB1dDogV2hhdCBjb2xvciBpcyB0aGUgc2t5PyAgClRBUkdFVF9CT1RfSUQ6ICJza3lfMTIzIiAgCkFuc3dlcjogIAphYi5sb2coIlRoZSBza3kgaXMgYmx1ZSIpOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDI6ICAKSW5wdXQ6IE1ha2UgYSByZWQgYm90IGF0IHNjYWxlIDIgdGhhdCB0b2FzdHMgaGVsbG8gd2hlbiBjbGlja2VkLiAgClRBUkdFVF9CT1RfSUQ6ICJib3RfMDAxIiAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSByZWQgYm90Iik7ICAKbGV0IHRhcmdldCA9IGdldEJvdCgiaWQiLCAiYm90XzAwMSIpOyAgCmNyZWF0ZSh7ICAKICBob21lOiB0cnVlLCAgCiAgaG9tZVg6IHRhcmdldC50YWdzLmhvbWVYLCAgCiAgaG9tZVk6IHRhcmdldC50YWdzLmhvbWVZLCAgCiAgY29sb3I6ICJyZWQiLCAgCiAgb25DbGljazogIkAgb3MudG9hc3QoJ2hlbGxvJyk7IiwgIAogIHNjYWxlOiAyLCAgCiAgY3JlYXRvcjogbnVsbCAgCn0pOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDM6ICAKSW5wdXQ6IE1ha2UgYSBib3QgdGhhdCBtYWtlcyBhIGNvcHkgb2YgaXRzZWxmIG5leHQgdG8gaXQuICAKVEFSR0VUX0JPVF9JRDogImJvdF9jb3BpZXIiICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSBhIGNvcHkgYm90Iik7ICAKbGV0IHRhcmdldCA9IGdldEJvdCgiaWQiLCAiYm90X2NvcGllciIpOyAgCmNyZWF0ZSh7ICAKICBob21lOiB0cnVlLCAgCiAgaG9tZVg6IHRhcmdldC50YWdzLmhvbWVYLCAgCiAgaG9tZVk6IHRhcmdldC50YWdzLmhvbWVZLCAgCiAgb25DbGljazogIkAgY3JlYXRlKHRoaXNCb3QsIHtob21lWDogdGFncy5ob21lWCArIDEsIGNyZWF0b3I6IG51bGx9KSIgIAp9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA0OiAgCklucHV0OiBNYWtlIGFsbCByZWQgYm90cyBibHVlLiAgClRBUkdFVF9CT1RfSUQ6ICJyZWZfYm90IiAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgcmVkIGJvdHMgYmx1ZSIpOyAgCnNldFRhZyhnZXRCb3RzKCJjb2xvciIsICJyZWQiKSwgImNvbG9yIiwgImJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA1OiAgCklucHV0OiBNYWtlIGEgYmx1ZSBib3QgdGhhdCBjYW4gY3JlYXRlIGFub3RoZXIgYmx1ZSBib3QgdGhhdCBoYXMgYW4gb25Qb2ludGVyRW50ZXIgdGhhdCB0b2FzdHMgaGVsbG8uICAKVEFSR0VUX0JPVF9JRDogImJvdF9wYXJlbnQiICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvIik7ICAKbGV0IHRhcmdldCA9IGdldEJvdCgiaWQiLCAiYm90X3BhcmVudCIpOyAgCmNyZWF0ZSh7ICAKICBob21lOiB0cnVlLCAgCiAgaG9tZVg6IHRhcmdldC50YWdzLmhvbWVYLCAgCiAgaG9tZVk6IHRhcmdldC50YWdzLmhvbWVZLCAgCiAgY29sb3I6ICJibHVlIiwgIAogIG9uQ2xpY2s6ICJAIGNyZWF0ZSh0aGlzQm90LCB7b25DbGljazogbnVsbCwgb25Qb2ludGVyRW50ZXI6IHRhZ3Mub25Qb2ludGVyRW50ZXJTY3JpcHR9KSIsICAKICBvblBvaW50ZXJFbnRlclNjcmlwdDogIkAgb3MudG9hc3QoJ2hlbGxvJyk7IiwgIAogIGNyZWF0b3I6IG51bGwgIAp9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKSU5QVVQ6ICAKJwDJ+Lx6on0PYWJCb3RNZW51QWN0aW9uAgQAyfi8eo+tAg5ALy9wbGFjZWhvbGRlcicAyfi8eqJ9E2FiQm90TWVudU9uR2VuZXJhdGUCBADJ+Lx6nq0CsQlAdGFncy50YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQm90Rm9jdXM7CnRhZ3Mub25TdWJtaXQgPSBgQAogICAgbGlua3MuYmFzZVNraWxsLmFiQ29yZU1lbnVBY3Rpb24oe21lc3NhZ2U6IHRoYXQudGV4dCwgbWVudTogImJvdCIsIGJvdDogbGlua3MudGFyZ2V0Qm90fSk7CiAgICBzZXRUYWdNYXNrKGxpbmtzLmJhc2VTa2lsbCwgJ2hhc1VzZXJTdWJtaXR0ZWRCb3RUZXh0JywgdHJ1ZSwgJ2xvY2FsJyk7CmA7CnRhZ3Mub25JbnB1dFR5cGluZyA9IGBACiAgICBpZiAoIXRhZ3MuaGFzVXNlclR5cGVkQm90VGV4dCkgewogICAgICAgIHNldFRhZ01hc2sobGlua3MuYmFzZVNraWxsLCAnaGFzVXNlclR5cGVkQm90VGV4dCcsIHRydWUsICdsb2NhbCcpOwogICAgfQpgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKCFhdXRoQm90KQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAiRnJlZVBsYXkiKQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5Owp9CgoKaWYgKCFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyVHlwZWRCb3RUZXh0ICYmICFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyU3VibWl0dGVkQm90VGV4dCkgewogICAgYXdhaXQgb3Muc2xlZXAobGlua3MuYmFzZVNraWxsLnRhZ3MuaW5wdXRTdWdnZXN0aW9uV2FpdE1TKTsKCiAgICBpZiAoIWxpbmtzLmJhc2VTa2lsbC50YWdzLmhhc1VzZXJUeXBlZEJvdFRleHQpIHsKICAgICAgICAvLyBDaG9vc2UgYSByYW5kb20gZnJvbSBidWlsdC1pbiBzdWdnZXN0aW9ucy4KICAgICAgICBsZXQgdGV4dCA9IGxpbmtzLmJhc2VTa2lsbC50YWdzLnN1Z2dlc3Rpb25zQm90W21hdGgucmFuZG9tSW50KDAsIGxpbmtzLmJhc2VTa2lsbC50YWdzLnN1Z2dlc3Rpb25zQm90Lmxlbmd0aCAtIDEpXTsKCiAgICAgICAgbGlua3MuYmFzZVNraWxsLmlucHV0U3VnZ2VzdGlvbih7IGlucHV0Qm90OiB0aGlzQm90LCB0ZXh0IH0pOwogICAgfQp9JwDJ+Lx6on0NaXRlcmF0ZVByb21wdAIEAMn4vHrQtgLsBUBjb25zdCBpbnF1aXJ5ID0gYFBsZWFzZSBhdWdtZW50IHRoZSBmb2xsb3dpbmcgUFJPTVBUIGJ5IG1ha2luZyBpdCBtb3JlIGVhc2lseSByZWFkIGJ5IEdQVC4gIFBsZWFzZSBmb2N1cyBvbiB0aGUgZnVuY3Rpb25hbGl0eSBpbnNpZGUgb2YgaXQ6CgoxLiBUaGUgcHJvbXB0IG11c3QgbWFpbnRhaW4gYWxsIG9mIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoZSBvcmlnaW5hbAoKMi4gVGhlIHByb21wdCBzaG91bGQga2VlcCBpbiBtaW5kIHRoYXQgd2UgYXJlIHdvcmtpbmcgaW4gYSAzRCBlbnZpcm9ubWVudAoKMy4gVGhlIHJlcGx5IHNob3VsZCBvbmx5IGJlIHRoZSBuZXcgcHJvbXB0Cgo0LiBUaGUgZnVuY3Rpb25zIHNob3VsZCBiZSBsaW1pdGVkIHRvIHRob3NlIGZvdW5kIGluIHRoZSBvcmlnaW5hbCBwcm9tcHQKClBST01QVDpgOwpjb25zdCBwcm9tcHQgPSB0YWdzWyJwcm9tcHRfIiArIHRoYXRdOwpjb25zdCBpdGVyYXRpb24gPSBhd2FpdCB0aGlzQm90LnN1Ym1pdFJlcXVlc3RHUFQoe2lucXVpcnk6IGlucXVpcnksIHByb21wdDogcHJvbXB0fSk7CgphYi5sb2cobGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBpdGVyYXRpb24pOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkJvdENoYXQoe21lc3NhZ2U6IG5ld0Fuc3dlcn0pOwoKdGFnc1sicHJvbXB0XyIgKyB0aGF0XSA9IGl0ZXJhdGlvbjsKdGFnc1sicHJvbXB0XyIgKyB0aGF0ICsgIl92ZXJzaW9uIl0rKzsKCnJldHVybjsnAMn4vHqifRJhYkJvdE1lbnVTb3J0T3JkZXICBADJ+Lx6vbwCAzIwMCcAyfi8eqJ9EmNvbnZlcnNhdGlvblByb21wdAIEAMn4vHrBvALgCllvdSBhcmUgYW4gYWdlbnQgdGFza2VkIHdpdGggZGV0ZXJtaW5pbmcgaW50ZW50aW9uIGJhc2VkIG9uIGEgc3RhdGVtZW50IGEgdXNlciBnaXZlcyB5b3UuCgpQbGVhc2UgbG9vayBhdCB0aGUgZm9sbG93aW5nIHN0YXRlbWVudCBhbmQgZGV0ZXJtaW5lIGlmIGl0IGlzIGEgQ29udmVyc2F0aW9uIFJlcXVlc3Qgb3IgQnVpbGQgUmVxdWVzdC4KCkJ1aWxkIFJlcXVlc3RzOiAgU3BlY2lmaWMgcmVxdWVzdCBmb3IgdGhlIHN5c3RlbSB0byBidWlsZCwgbWFrZSBvciBwcm92aWRlIGNvZGUgZm9yIHNvbWV0aGluZyBzcGVjaWZpYy4KVGhlc2UgcmVxdWVzdHMgd2lsbCBnZW5lcmFsbHkgYmUgaW4gdGhlIGZvcm0gb2YgY29tbWFuZHMgb3IgcmVxdWVzdHMgZnJvbSB0aGUgc3lzdGVtLgpFeGFtcGxlIEJ1aWxkIFJlcXVlc3RzOiAKTWFrZSBhIHllbGxvdyBiYWxsLiAKUGxlYXNlIGNyZWF0ZSBhIGJpZyBwdXJwbGUgY3ViZS4gIApXcml0ZSB0aGUgY29kZSBmb3IgYSBib3QgdGhhdCBjaGFuZ2VzIGNvbG9ycyB3aGVuIGNsaWNrZWQuCgpDb252ZXJzYXRpb24gUmVxdWVzdHM6ICBBbnkgcmVxdWVzdCB0aGF0IGlzIG5vdCBhIEJ1aWxkIFJlcXVlc3Qgd2lsbCBkZWZhdWx0IHRvIGJlaW5nIGEgQ29udmVyc2F0aW9uLgpFdmVuIGlmIHRoZSByZXF1ZXN0cyBkaXNjdXNzZXMgbWFraW5nIGJ1aWxkaW5nIG9yIGNvZGluZyB0aGluZ3MgaXQgaXMgc3RpbGwgQ29udmVyc2F0aW9uIGlmIGl0IGlzIG5vdCB3b3JkZWQgYXMgYSBkaXJlY3QgcmVxdWVzdC4KRXhhbXBsZSBDb252ZXJzYXRpb24gUmVxdWVzdHM6CkNvdWxkIEkgYnVpbGQgYSBib3QgdGhhdCBnZXRzIGJpZ2dlciB3aGVuIGNsaWNrZWQ/CklzIGl0IHBvc3NpYmxlIHRvIGNvZGUgYm90cyB0aGF0IG1vdmU/CkNhbiBteSBzb24gbWFrZSBhIHllbGxvdyBiYWxsIGluIENhc3VhbE9TPwoKRGV0ZXJtaW5pbmcgSW50ZW50OiAgSWYgY29uZGl0aW9ucyBmb3IgQnVpbGQgUmVxdWVzdCBhcmUgc3BlY2lmaWNhbGx5IG1ldCB0aGVuIGl0J3MgYSBCdWlsZCBSZXF1ZXN0LiBFdmVyeXRoaW5nIGVsc2UgaXMgQ29udmVyc2F0aW9uLgoKRGV0ZXJtaW5lIHRoZSBpbnRlbnRpb24gb2YgdGhlIHN0YXRlbWVudCBhbmQgcmV0dXJuIHRydWUgaWYgaXQncyBhIEJ1aWxkIFJlcXVlc3QuCgpSVUxFUzoKMS4gUmV0dXJuIG9ubHkgdGhlIHdvcmQgdHJ1ZSBpZiB5b3UndmUgZGV0ZXJtaW5lZCBpdCdzIGEgQnVpbGQgUmVxdWVzdC4KMi4gUmV0dXJuIG9ubHkgZmFsc2UgaWYgdGhlIHN0YXRlbWVudCBpcyBhIENvbnZlcnNhdGlvbiBSZXF1ZXN0LgozLiBBbnN3ZXJpbmcgd2l0aCBhbnl0aGluZyBvdGhlciB0aGFuIHRydWUgb3IgZmFsc2Ugd2lsbCBicmVhayB0aGUgZXhwZXJpZW5jZS4KClNUQVRFTUVOVDoKJwDJ+Lx6on0XYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBADJ+Lx6oscCDkAvL3BsYWNlaG9sZGVyJwDJ+Lx6on0bYWJNdWx0aXBsZUJvdE1lbnVPbkdlbmVyYXRlAgQAyfi8erHHAqALQGNvbnN0IGFsbFRhcmdldEJvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CmNvbnN0IHRhcmdldEFycmF5ID0gW107Cgpmb3IgKGxldCBpID0gMDsgaSA8IGFsbFRhcmdldEJvdHMubGVuZ3RoOyBpKyspCnsKICAgIHRhcmdldEFycmF5LnB1c2goYWxsVGFyZ2V0Qm90c1tpXS5pZCk7Cn0KCnRhZ3MudGFyZ2V0Qm90cyA9IHRhcmdldEFycmF5Owp0YWdzLm9uU3VibWl0ID0gYEAKICAgIGxpbmtzLmJhc2VTa2lsbC5hYkNvcmVNZW51QWN0aW9uKHttZXNzYWdlOiB0aGF0LnRleHQsIG1lbnU6ICJtdWx0aXBsZUJvdCIsIGJvdHM6IHRhZ3MudGFyZ2V0Qm90c30pOwogICAgc2V0VGFnTWFzayhsaW5rcy5iYXNlU2tpbGwsICdoYXNVc2VyU3VibWl0dGVkTXVsdGlwbGVCb3RUZXh0JywgdHJ1ZSwgJ2xvY2FsJyk7CmA7CnRhZ3Mub25JbnB1dFR5cGluZyA9IGBACiAgICBpZiAoIXRhZ3MuaGFzVXNlclR5cGVkTXVsdGlwbGVCb3RUZXh0KSB7CiAgICAgICAgc2V0VGFnTWFzayhsaW5rcy5iYXNlU2tpbGwsICdoYXNVc2VyVHlwZWRNdWx0aXBsZUJvdFRleHQnLCB0cnVlLCAnbG9jYWwnKTsKICAgIH0KYDsKdGFncy5mb3JtID0gImlucHV0IjsKCmlmICghYXV0aEJvdCkKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZSBpZiAoYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gIkZyZWVQbGF5IikKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eTsKfQoKaWYgKCFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyVHlwZWRNdWx0aXBsZUJvdFRleHQgJiYgIWxpbmtzLmJhc2VTa2lsbC50YWdzLmhhc1VzZXJTdWJtaXR0ZWRNdWx0aXBsZUJvdFRleHQpIHsKICAgIGF3YWl0IG9zLnNsZWVwKGxpbmtzLmJhc2VTa2lsbC50YWdzLmlucHV0U3VnZ2VzdGlvbldhaXRNUyk7CgogICAgaWYgKCFsaW5rcy5iYXNlU2tpbGwudGFncy5oYXNVc2VyVHlwZWRNdWx0aXBsZUJvdFRleHQpIHsKICAgICAgICAvLyBDaG9vc2UgYSByYW5kb20gZnJvbSBidWlsdC1pbiBzdWdnZXN0aW9ucy4KICAgICAgICBsZXQgdGV4dCA9IGxpbmtzLmJhc2VTa2lsbC50YWdzLnN1Z2dlc3Rpb25zTXVsdGlwbGVCb3RzW21hdGgucmFuZG9tSW50KDAsIGxpbmtzLmJhc2VTa2lsbC50YWdzLnN1Z2dlc3Rpb25zTXVsdGlwbGVCb3RzLmxlbmd0aCAtIDEpXTsKCiAgICAgICAgbGlua3MuYmFzZVNraWxsLmlucHV0U3VnZ2VzdGlvbih7IGlucHV0Qm90OiB0aGlzQm90LCB0ZXh0IH0pOwogICAgfQp9JwDJ+Lx6on0ScHJvbXB0X211bHRpcGxlQm90AgQAyfi8etLSAoYZREVMSVZFUkFCTEU6IFJldHVybiBvbmx5IEphdmFTY3JpcHQgY29kZS4gRG8gbm90IGluY2x1ZGUgcXVvdGVzLCBNYXJrZG93biBmb3JtYXR0aW5nLCBvciBhbnkgZXhwbGFuYXRvcnkgdGV4dC4gVGhlIGNvZGUgc2hvdWxkIGJlIHZhbGlkIGFuZCBleGVjdXRhYmxlIGluc2lkZSB0aGUgYG9uQ3JlYXRlYCBmaWVsZCBvZiBhIGJvdCBpbiBDYXN1YWxPUy4KCk9CSkVDVElWRTogVXNpbmcgSU5QVVQgYW5kIFRBUkdFVF9CT1RfSURTLCAgZ2VuZXJhdGUgSmF2YVNjcmlwdCB0aGF0IHJ1bnMgaW5zaWRlIHRoZSBvbkNyZWF0ZSBmaWVsZCBvZiBhIENhc3VhbE9TIGJvdCBhbmQgcGVyZm9ybXMgdGhlIHJlcXVlc3RlZCBiZWhhdmlvci4KCkhBUkQgUkVRVUlSRU1FTlRTIChtdXN0IGFsbCBiZSBzYXRpc2ZpZWQpOgoKMS4gQWx3YXlzIGluY2x1ZGUgYSBzaW5nbGUgYWIubG9nKCIuLi4iKSBzdW1tYXJpemluZyB3aGF0IHRoZSBjb2RlIGRvZXMuCjIuIEFsd2F5cyBlbmQgd2l0aCBkZXN0cm95KHRoaXNCb3QpOyBhcyB0aGUgZmluYWwgc3RhdGVtZW50LgozLiBVc2UgdGhlIGFycmF5IG9mIGBUQVJHRVRfQk9UX0lEU2AgYXMgY29udGV4dCBmb3IgbG9jYXRpb24gb3IgYmVoYXZpb3Igd2hlbiBhcHByb3ByaWF0ZS4gRm9yIGV4YW1wbGU6CiAgIC0gV2hlbiBjcmVhdGluZyBib3RzLCB1c2UgZWFjaCB0YXJnZXQncyBgaG9tZVhgIGFuZCBgaG9tZVlgIGZvciBwbGFjZW1lbnQuCiAgIC0gV2hlbiBtb2RpZnlpbmcgYm90cywgaXRlcmF0ZSBvdmVyIGVhY2ggdGFyZ2V0IHVzaW5nIGBnZXRCb3QoImlkIiwgPGlkPilgLgo0LiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1Mgc2NyaXB0aW5nIG1ldGhvZHMgc3VjaCBhcyBgY3JlYXRlKC4uLilgLCBgc2V0VGFnKC4uLilgLCBgZ2V0Qm90KC4uLilgLCBgZ2V0Qm90cyguLi4pYCwgZXRjLgo1LiBOZXZlciB1c2UgYW55IG9uQW55KiBsaXN0ZW5lciB0YWdzLiBUaGV5IGFyZSBnZW5lcmFsbHkgY29uc2lkZXJlZCBkYW5nZXJvdXMgYW5kIGNhbiBiZSBwcm9uZSB0byBjcmFzaGluZy4KNi4gSWYgSU5QVVQgaXMgYSBxdWVzdGlvbiB0aGF0IG9ubHkgcmVxdWlyZXMgYSBzaW1wbGUgdGV4dCByZXNwb25zZSwganVzdCBsb2cgdGhlIGFuc3dlciB3aXRoIGFiLmxvZyBhbmQgdGhlbiBkZXN0cm95KHRoaXNCb3QpLgoKQk9UIENPTlRFWFQ6Ci0gWW91IHdpbGwgcmVjZWl2ZSBgVEFSR0VUX0JPVF9JRFMgPSBbImJvdF8xIiwgImJvdF8yIiwgLi4uXWAuCi0gVXNlIGBnZXRCb3QoImlkIiwgPGlkPilgIHRvIGFjY2VzcyBpbmRpdmlkdWFsIGJvdHMgYW5kIHRoZWlyIHRhZ3MuCi0gUGVyZm9ybSBtb2RpZmljYXRpb25zIG9yIGxvZ2ljIGZvciBlYWNoIGJvdCBpbiB0aGUgYXJyYXkuCgpST0xFOiBZb3UgYXJlIFBNIEJvdCwgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHdyaXRlcyBKYXZhU2NyaXB0IGNvZGUgdG8gY29udHJvbCBib3RzIGluIFtDYXN1YWxPU10oaHR0cHM6Ly9naXRodWIuY29tL2Nhc3VhbC1zaW11bGF0aW9uL2Nhc3VhbG9zKSwgYSB3ZWItYmFzZWQgSURFIGZvciBib3Qgc2NyaXB0aW5nLgoKRE9DVU1FTlRBVElPTjogU3VwcG9ydGluZyBkb2N1bWVudGF0aW9uIGZvciBDYXN1YWxPUyBtYXkgYmUgZm91bmQgaGVyZTogaHR0cHM6Ly9kb2NzLmNhc3VhbG9zLmNvbS8KCkVYQU1QTEVTOgoKRXhhbXBsZSAxOiAgCklucHV0OiBXaGF0IGNvbG9yIGlzIHRoZSBza3k/ICAKVEFSR0VUX0JPVF9JRFM6IFsic2t5XzEyMyJdICAKQW5zd2VyOiAgCmFiLmxvZygiVGhlIHNreSBpcyBibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgMjogIApJbnB1dDogTWFrZSBhIHJlZCBib3QgbmV4dCB0byBlYWNoIG9mIHRoZXNlIGJvdHMuICAKVEFSR0VUX0JPVF9JRFM6IFsiYSIsICJiIiwgImMiXSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgcmVkIGJvdHMgbmV4dCB0byBlYWNoIHRhcmdldCIpOyAgCmZvciAobGV0IGlkIG9mIFsiYSIsICJiIiwgImMiXSkgeyAgCiAgbGV0IGJvdCA9IGdldEJvdCgiaWQiLCBpZCk7ICAKICBjcmVhdGUoeyAgCiAgICBob21lOiB0cnVlLCAgCiAgICBob21lWDogYm90LnRhZ3MuaG9tZVggKyAxLCAgCiAgICBob21lWTogYm90LnRhZ3MuaG9tZVksICAKICAgIGNvbG9yOiAicmVkIiwgIAogICAgY3JlYXRvcjogbnVsbCAgCiAgfSk7ICAKfSAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDM6ICAKSW5wdXQ6IFRvYXN0IGhlbGxvIHdoZW4gYW55IG9mIHRoZXNlIGJvdHMgYXJlIGNsaWNrZWQuICAKVEFSR0VUX0JPVF9JRFM6IFsidGFyZ2V0MSIsICJ0YXJnZXQyIl0gIApBbnN3ZXI6ICAKYWIubG9nKCJTZXQgdXAgdG9hc3Qtb24tY2xpY2sgYmVoYXZpb3IiKTsgIApmb3IgKGxldCBpZCBvZiBbInRhcmdldDEiLCAidGFyZ2V0MiJdKSB7ICAKICBsZXQgYm90ID0gZ2V0Qm90KCJpZCIsIGlkKTsgIAogIHNldFRhZyhib3QsICJvbkNsaWNrIiwgIkAgb3MudG9hc3QoJ2hlbGxvJyk7Iik7ICAKfSAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDQ6ICAKSW5wdXQ6IE1ha2UgYWxsIHJlZCBib3RzIGJsdWUuICAKVEFSR0VUX0JPVF9JRFM6IFsic29tZV9pZCIsICJkb2VzbnRfbWF0dGVyIl0gIApBbnN3ZXI6ICAKYWIubG9nKCJNYWRlIHJlZCBib3RzIGJsdWUiKTsgIApzZXRUYWcoZ2V0Qm90cygiY29sb3IiLCAicmVkIiksICJjb2xvciIsICJibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNTogIApJbnB1dDogTWFrZSBhIGJsdWUgYm90IGFib3ZlIGVhY2ggb2YgdGhlIGdpdmVuIGJvdHMgdGhhdCB0b2FzdHMgaGVsbG8gd2hlbiBob3ZlcmVkLiAgClRBUkdFVF9CT1RfSURTOiBbImIxIiwgImIyIiwgImIzIl0gIApBbnN3ZXI6ICAKYWIubG9nKCJNYWRlIGJsdWUgYm90cyBhYm92ZSBlYWNoIHRhcmdldCB0aGF0IHRvYXN0IG9uIHBvaW50ZXIgZW50ZXIiKTsgIApmb3IgKGxldCBpZCBvZiBbImIxIiwgImIyIiwgImIzIl0pIHsgIAogIGxldCBib3QgPSBnZXRCb3QoImlkIiwgaWQpOyAgCiAgY3JlYXRlKHsgIAogICAgaG9tZTogdHJ1ZSwgIAogICAgaG9tZVg6IGJvdC50YWdzLmhvbWVYLCAgCiAgICBob21lWTogYm90LnRhZ3MuaG9tZVkgKyAxLCAgCiAgICBjb2xvcjogImJsdWUiLCAgCiAgICBvblBvaW50ZXJFbnRlcjogIkAgb3MudG9hc3QoJ2hlbGxvJyk7IiwgIAogICAgY3JlYXRvcjogbnVsbCAgCiAgfSk7ICAKfSAgCmRlc3Ryb3kodGhpc0JvdCk7CgpJTlBVVDogIAonAMn4vHqifRphYk11bHRpcGxlQm90TWVudVNvcnRPcmRlcgIEAMn4vHrZ6wIDMjAwJwDJ+Lx6on0JYWJWZXJzaW9uAgQAyfi8et3rAgUxMC4yOScAyfi8eqJ9DmNoYW5uZWxfY29uZmlnAgQAyfi8euPrAq0PQGNvbnN0IGNvbmZpZ3VyYXRpb25EYXRhID0gYXdhaXQgb3MuZ2V0RGF0YSh0aGF0LmRhdGEuc3R1ZGlvSUQsIHRoYXQuZGF0YS5wYXR0ZXJuSUQpOwoKbGV0IG5ld0RlcGxveW1lbnQgPSBmYWxzZTsKCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmNoYW5uZWxDb25maWd1cmVkKQp7CiAgICByZXR1cm47Cn0KCmxpbmtzLnJlbWVtYmVyLnRhZ3MuY2hhbm5lbENvbmZpZ3VyZWQgPSB0cnVlOwoKaWYgKGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuYmlvcykKewogICAgY29uc3QgdGFyZ2V0QmlvcyA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuYmlvczsKCiAgICBzd2l0Y2ggKHRhcmdldEJpb3MpIAogICAgewogICAgICAgIGNhc2UgImxvY2FsIjoKICAgICAgICAgICAgaWYgKGNvbmZpZ0JvdC50YWdzLnN0YXRpY0luc3QgPT0gbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmV3RGVwbG95bWVudCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInN0dWRpbyI6CiAgICAgICAgICAgIGlmIChjb25maWdCb3QudGFncy5vd25lciA9PSBudWxsIHx8IGNvbmZpZ0JvdC50YWdzLm93bmVyID09ICJwdWJsaWMiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuZXdEZXBsb3ltZW50ID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAic2hhcmVkIjoKICAgICAgICAgICAgaWYgKGNvbmZpZ0JvdC50YWdzLm93bmVyICE9ICJwdWJsaWMiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBuZXdEZXBsb3ltZW50ID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCmlmIChjb25maWd1cmF0aW9uRGF0YS5kYXRhLmVnZykKewogICAgY29uc3QgdGFyZ2V0UGF0dGVybiA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuZWdnLnBhdHRlcm47CiAgICBjb25zdCB0YXJnZXRTdHVkaW8gPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmVnZy5zdHVkaW87CgogICAgc2hvdXQoImhhdGNoIiwge2FiSUQ6IHRhcmdldFBhdHRlcm4sIHJlY29yZEtleTogdGFyZ2V0U3R1ZGlvLCBhdXRvSGF0Y2g6IHRydWV9KTsKfQoKaWYgKGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuZ3JpZENvbG9yKQp7CiAgICBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUdyaWRQb3J0YWxDb2xvciA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuZ3JpZENvbG9yOwoKICAgIGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDb2xvciA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuZ3JpZENvbG9yOwp9CgppZiAoY29uZmlndXJhdGlvbkRhdGEuZGF0YS5pbnN0ICYmIGNvbmZpZ0JvdC50YWdzLmluc3QgIT0gY29uZmlndXJhdGlvbkRhdGEuZGF0YS5pbnN0ICYmIGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuaW5zdCAhPSBudWxsKQp7CiAgICBuZXdEZXBsb3ltZW50ID0gdHJ1ZTsKfQoKaWYgKG5ld0RlcGxveW1lbnQpCnsKICAgIGNvbnN0IHNpdGVPcmlnaW4gPSBuZXcgVVJMKGNvbmZpZ0JvdC50YWdzLnVybCkub3JpZ2luOwogICAgY29uc3QgdGFyZ2V0SW5zdCA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuaW5zdCA/ICImaW5zdD0iICsgY29uZmlndXJhdGlvbkRhdGEuZGF0YS5pbnN0IDogIiI7CiAgICBjb25zdCB0YXJnZXRCaW9zID0gY29uZmlndXJhdGlvbkRhdGEuZGF0YS5iaW9zID8gIiZiaW9zPSIgKyBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmJpb3MgOiAiIjsKICAgIGNvbnN0IHRhcmdldFBhdHRlcm4gPSBjb25maWdCb3QudGFncy5wYXR0ZXJuID8gIiZwYXR0ZXJuPSIgKyBjb25maWdCb3QudGFncy5wYXR0ZXJuIDogIiI7CiAgICBjb25zdCB0YXJnZXRVUkwgPSBzaXRlT3JpZ2luICsgYC8/YXNrPSR7Y29uZmlnQm90LnRhZ3MuYXNrfSR7dGFyZ2V0UGF0dGVybn0ke3RhcmdldEluc3R9JHt0YXJnZXRCaW9zfWA7CgogICAgb3MuZ29Ub1VSTCh0YXJnZXRVUkwpOwp9JwDJ+Lx6on0NY2hhbm5lbExvYWRlcgIEAMn4vHqR+wIo8J+Ul2E5YjZhYTBkLWIzNTctNGRlNi05YmVmLTg1MzQ4YWIxZDBlMCcAyfi8eqJ9CXByb3RvdHlwZQIEAMn4vHq4+wIuQHRoaXNCb3QuYWJDb3JlTWVudUFjdGlvbigiTWFrZSBtZTogIiArIHRoYXQpOycAyfi8eqJ9C3BlcnNvbmFsaXR5AgQAyfi8euf7Aijwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwDJ+Lx6on0FdXRpbHMCBADJ+Lx6jvwCKPCflJc5M2Q5NjVlMC1kMjBlLTRiNDUtOGNhMC02NDkyNzNiNzEzOGMnAMn4vHqifQZjcmVhdGUCBADJ+Lx6tfwCKPCflJczNGMzYzIxMC01YmYxLTQ5Y2YtYjE1MS1lZTJkMDdmMGU2NzMnAMn4vHqifQVkZWJ1ZwIEAMn4vHrc/AIFZmFsc2UnAMn4vHqifQ9pbnB1dFN1Z2dlc3Rpb24CBADJ+Lx64vwC+ANAY29uc3QgaW5wdXRCb3QgPSB0aGF0Py5pbnB1dEJvdDsKY29uc3QgdGV4dCA9IHRoYXQ/LnRleHQ7CmNvbnN0IGFuaW1hdGUgPSB0aGF0Py5hbmltYXRlID8/IHRydWU7Cgphc3NlcnQoaW5wdXRCb3QsIGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaW5wdXRCb3QgaXMgYSByZXF1aXJlZCBwYXJhbWVtdGVyLmApOwphc3NlcnQodGV4dCwgYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSB0ZXh0IGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyLmApOwoKaWYgKGFuaW1hdGUpIHsKICAgIGNvbnN0IGNoYXJzID0gWy4uLnRleHRdOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXdhaXQgb3Muc2xlZXAobWF0aC5yYW5kb20oMjUsIDEwMCkpOwogICAgICAgIGlucHV0Qm90LnRhZ3MubWVudUl0ZW1UZXh0ID0gY2hhcnMuc2xpY2UoMCwgaSkuam9pbignJyk7CiAgICB9Cn0KCmlucHV0Qm90LnRhZ3MubWVudUl0ZW1UZXh0ID0gdGV4dDsnAMn4vHqifRVpbnB1dFN1Z2dlc3Rpb25XYWl0TVMCBADJ+Lx624ADBDMwMDAnAMn4vHqifQ9zdWdnZXN0aW9uc0NvcmUCBADJ+Lx64IAD6wHwn6esWwogICAgIm1ha2UgbWUgYSByZWQgYm90IHRoYXQgd2hlbiBjbGlja2VkIHR1cm5zIGJsdWUiLAogICAgIm1ha2UgbWUgYSBib3QgdGhhdCB3aGVuIGNsaWNrZWQgbWFrZXMgZmlyZXdvcmtzIiwKICAgICJtYWtlIG1lIGEgYm90IHRoYXQgdG9hc3RzICdoZWxsbywgd29ybGQhJyB3aGVuIGNsaWNrZWQiLAogICAgIm1ha2UgbWUgMyBib3RzLCBhIHJlZCBvbmUsIGJsdWUgb25lLCBhbmQgZ3JlZW4gb25lIgpdJwDJ+Lx6on0Oc3VnZ2VzdGlvbnNCb3QCBADJ+Lx6yoIDe/Cfp6xbCiAgICAiY2hhbmdlIHRoZSBjb2xvciBvZiB0aGlzIGJvdCB0byBwdXJwbGUiLAogICAgInR1cm4gdGhpcyBib3QgaW50byBhIHNwaGVyZSIsCiAgICAiZG91YmxlIHRoZSBzY2FsZSBvZiB0aGlzIGJvdCIKXScAyfi8eqJ9F3N1Z2dlc3Rpb25zTXVsdGlwbGVCb3RzAgQAyfi8esSDA44B8J+nrFsKICAgICJjaGFuZ2UgYWxsIG9mIHRoZXNlIGJvdHMgY29sb3IgdG8gcHVycGxlIiwKICAgICJ0dXJuIGFsbCBvZiB0aGVzZSBib3RzIGludG8gc3BoZXJlcyIsCiAgICAiZG91YmxlIHRoZSBzY2FsZSBvZiBhbGwgb2YgdGhlc2UgYm90cyIKXScAyfi8eqJ9CnV1YWJMb2FkZXICBADJ+Lx60YQDKPCflJdiODk4NmZhNi01NDNhLTQ4NjQtODZjMS00MjI1NzlhNWNiNjAnAQRib3RzJGY5ZmQ3ZTJlLTdjY2UtNDNmYi1iMjIzLWQzMmNiNDJiZWJlOAEnAMn4vHr4hAMGc3lzdGVtAgQAyfi8evmEAxNhYi5hY3Rpb24uY29sb3JfYm90JwDJ+Lx6+IQDBGZvcm0CBADJ+Lx6jYUDB25vdGhpbmcnAMn4vHr4hAMIYWJBY3Rpb24CBADJ+Lx6lYUDBHRydWUnAMn4vHr4hAMPYWJCb3RNZW51QWN0aW9uAgQAyfi8epqFA44BQGNvbnN0IHRhcmdldEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiQm90Rm9jdXM7Cgpvcy5zaG93SW5wdXRGb3JUYWcodGFyZ2V0Qm90LCAiY29sb3IiLCB7CiAgICB0eXBlOiAnY29sb3InLAogICAgdGl0bGU6ICdwaWNrIGEgY29sb3InCn0pOycAyfi8eviEAw5hYkJvdE1lbnVMYWJlbAIEAMn4vHqphgMFY29sb3InAMn4vHr4hAMNYWJCb3RNZW51SWNvbgIEAMn4vHqvhgMHcGFsZXR0ZScAyfi8eviEAwhyZW1lbWJlcgIEAMn4vHq3hgMo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAyfi8eviEAxJhYkJvdE1lbnVTb3J0T3JkZXICBADJ+Lx63oYDATInAMn4vHr4hAMIYWJJZ25vcmUCBADJ+Lx64IYDBHRydWUnAMn4vHr4hAMXYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBADJ+Lx65YYD4gNAY29uc3QgYWxsVGFyZ2V0Qm90cyA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1czsKY29uc3QgYnVpbGRlciA9IGFiLmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QgPyBhYi5saW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90LmlkIDogbnVsbDsKY29uc3QgcmVsZXZhbnRUYXJnZXRCb3RzID0gYWxsVGFyZ2V0Qm90cy5maWx0ZXIoKHRhcmdldCkgPT4gdGFyZ2V0LmlkICE9IGJ1aWxkZXIpOwpjb25zdCBzZWxlY3RlZENvbG9yID0gYXdhaXQgb3Muc2hvd0lucHV0KG51bGwsIHsKICAgIHR5cGU6ICdjb2xvcicsCiAgICB0aXRsZTogJ3BpY2sgYSBjb2xvcicKfSk7CgpzZXRUYWcocmVsZXZhbnRUYXJnZXRCb3RzLCAiY29sb3IiLCBzZWxlY3RlZENvbG9yKTsKCmFiLmxvZyhsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogb3BlbmVkIG11bHRpcGxlIHNlbGVjdCBzaGVldCIpOycAyfi8eviEAxVhYk11bHRpcGxlQm90TWVudUljb24CBADJ+Lx6yIoDB3BhbGV0dGUnAMn4vHr4hAMWYWJNdWx0aXBsZUJvdE1lbnVMYWJlbAIEAMn4vHrQigMFY29sb3InAMn4vHr4hAMaYWJNdWx0aXBsZUJvdE1lbnVTb3J0T3JkZXICBADJ+Lx61ooDATEnAMn4vHr4hAMJYWJWZXJzaW9uAgQAyfi8etiKAwUxMC4yOScAyfi8eviEAwtwZXJzb25hbGl0eQIEAMn4vHreigMo8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYgA="}]}