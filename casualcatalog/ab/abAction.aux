{"version":2,"updates":[{"id":0,"timestamp":1750954350011,"update":"AacC+9PF+A0AJwEEYm90cyQzOTg4MDFmZS00YjM1LTRjZTQtODI2Zi0yMzgzNWMxYjlhYzUBJwD708X4DQAGc3lzdGVtAgQA+9PF+A0BFGFiLmFjdGlvbi5jcmVhdGVfYm90JwD708X4DQAIYWJBY3Rpb24CBAD708X4DRYEdHJ1ZScA+9PF+A0ABGZvcm0CBAD708X4DRsHbm90aGluZycA+9PF+A0AC2Rlc2NyaXB0aW9uAgQA+9PF+A0jDUNyZWF0ZXMgYm90cy4nAPvTxfgNABBhYkdyaWRNZW51QWN0aW9uAgQA+9PF+A0xqwVAY29uc3QgZ3JpZEluZm9ybWF0aW9uID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1czsKY29uc3QgbmV3Qm90ID0ge307CgpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uICsgIlgiXSA9IGdyaWRJbmZvcm1hdGlvbi5wb3NpdGlvbi54OwpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbiArICJZIl0gPSBncmlkSW5mb3JtYXRpb24ucG9zaXRpb24ueTsKbmV3Qm90LmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCmxldCBjcmVhdGVkQm90ID0gY3JlYXRlKG5ld0JvdCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QubWFza3MubGluZVRvID0gY3JlYXRlZEJvdC5pZDsKCmxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyBjcmVhdGVkQm90LmlkOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKHttZW51OiAiYm90In0pOycA+9PF+A0AD2FiR3JpZE1lbnVMYWJlbAIEAPvTxfgN2wUDYm90JwD708X4DQAOYWJHcmlkTWVudUljb24CBAD708X4Dd8FB2FkZF9ib3gnAPvTxfgNAAhyZW1lbWJlcgIEAPvTxfgN5wUo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA+9PF+A0ADW1hbmlmZXN0YXRpb24CBAD708X4DY4GKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAPvTxfgNAAhhYklnbm9yZQIEAPvTxfgNtQYEdHJ1ZScA+9PF+A0AE2FiR3JpZE1lbnVTb3J0T3JkZXICBAD708X4DboGATEnAPvTxfgNAAlhYlZlcnNpb24CBAD708X4DbwGFjkuNjYuMS4xLjE3NTA5NTQzNTAwMDcnAQRib3RzJDU4NDlhZjU1LTVlOGEtNDhkNi05MTA2LTE5OTQ5OGU5ZWMwOAEnAPvTxfgN0wYGc3lzdGVtAgQA+9PF+A3UBhFhYi5hY3Rpb24uZGVzdHJveScA+9PF+A3TBghhYkFjdGlvbgIEAPvTxfgN5gYEdHJ1ZScA+9PF+A3TBgRmb3JtAgQA+9PF+A3rBgdub3RoaW5nJwD708X4DdMGD2FiQm90TWVudUFjdGlvbgIEAPvTxfgN8waBAUBjb25zdCB0YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYkJvdEZvY3VzOwoKZGVzdHJveSh0YXJnZXRCb3QpOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOycA+9PF+A3TBg5hYkJvdE1lbnVMYWJlbAIEAPvTxfgN9QcHZGVzdHJveScA+9PF+A3TBg1hYkJvdE1lbnVJY29uAgQA+9PF+A39Bw5kZWxldGVfZm9yZXZlcicA+9PF+A3TBhJhYkJvdE1lbnVTb3J0T3JkZXICBAD708X4DYwIAzEwMCcA+9PF+A3TBghyZW1lbWJlcgIEAPvTxfgNkAgo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA+9PF+A3TBg1tYW5pZmVzdGF0aW9uAgQA+9PF+A23CCjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD708X4DdMGCGFiSWdub3JlAgQA+9PF+A3eCAR0cnVlJwD708X4DdMGDmFiQm90TWVudUNvbG9yAgQA+9PF+A3jCAcjRDkzMDMwJwD708X4DdMGF2FiTXVsdGlwbGVCb3RNZW51QWN0aW9uAgQA+9PF+A3rCMwCQGNvbnN0IGFsbFRhcmdldEJvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CmNvbnN0IGJ1aWxkZXIgPSBhYi5saW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90ID8gYWIubGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC5pZCA6IG51bGw7CmNvbnN0IHJlbGV2YW50VGFyZ2V0Qm90cyA9IGFsbFRhcmdldEJvdHMuZmlsdGVyKCh0YXJnZXQpID0+IHRhcmdldC5pZCAhPSBidWlsZGVyKTsKCmRlc3Ryb3kocmVsZXZhbnRUYXJnZXRCb3RzKTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsnAPvTxfgN0wYVYWJNdWx0aXBsZUJvdE1lbnVJY29uAgQA+9PF+A24Cw5kZWxldGVfZm9yZXZlcicA+9PF+A3TBhZhYk11bHRpcGxlQm90TWVudUxhYmVsAgQA+9PF+A3HCwdkZXN0cm95JwD708X4DdMGGmFiTXVsdGlwbGVCb3RNZW51U29ydE9yZGVyAgQA+9PF+A3PCwMxMDAnAPvTxfgN0wYWYWJNdWx0aXBsZUJvdE1lbnVDb2xvcgIEAPvTxfgN0wsHI0Q5MzAzMCcA+9PF+A3TBglhYlZlcnNpb24CBAD708X4DdsLFjkuNjYuMS4xLjE3NTA5NTQzNTAwMDcnAQRib3RzJDcxNzU2NDVjLTRiNTMtNDQ1NC04NzE2LWZjMGU2OGRiMjY2NQEnAPvTxfgN8gsGc3lzdGVtAgQA+9PF+A3zCw9hYi5hY3Rpb24ubG9naW4nAPvTxfgN8gsIYWJBY3Rpb24CBAD708X4DYMMBHRydWUnAPvTxfgN8gsIYWJJZ25vcmUCBAD708X4DYgMBHRydWUnAPvTxfgN8gsEZm9ybQIEAPvTxfgNjQwHbm90aGluZycA+9PF+A3yCw9hYkNvcmVNZW51Q29sb3ICBAD708X4DZUMByNGMkI3MDUnAPvTxfgN8gsTYWJDb3JlTWVudVNvcnRPcmRlcgIEAPvTxfgNnQwCLTUnAPvTxfgN8gsQYWJDb3JlTWVudUFjdGlvbgIEAPvTxfgNoAwsQG9zLmdvVG9VUkwobGlua3MucmVtZW1iZXIudGFncy5hYkF1dGhTaXRlKTsnAPvTxfgN8gsUYWJDb3JlTWVudU9uR2VuZXJhdGUCBAD708X4Dc0MnQJAYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF1dGhTaXRlKQp7CiAgICBkZXN0cm95KHRoaXNCb3QpOwp9Cgp0YWdzLmxhYmVsID0gImJ1eSAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eTsKCmlmICghYXV0aEJvdCkKewogICAgcmV0dXJuOwp9CmVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCnsKICAgIHJldHVybjsKfQoKZGVzdHJveSh0aGlzQm90KTsnAPvTxfgN8gsOYWJDb3JlTWVudUljb24CBAD708X4DesODmFjY291bnRfY2lyY2xlJwD708X4DfILCHJlbWVtYmVyAgQA+9PF+A36Dijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD708X4DfILCWFiVmVyc2lvbgIEAPvTxfgNoQ8WOS42Ni4xLjEuMTc1MDk1NDM1MDAwNycBBGJvdHMkYjMzOWMxMTgtNDg5YS00NjZiLWJhOWYtYjA3YTVmOWI2NjRmAScA+9PF+A24DwZzeXN0ZW0CBAD708X4DbkPD2FiLmFjdGlvbi5wYXN0ZSgA+9PF+A24DwhhYkFjdGlvbgF4JwD708X4DbgPBGZvcm0CBAD708X4DcoPB25vdGhpbmcnAPvTxfgNuA8LZGVzY3JpcHRpb24CBAD708X4DdIPK2FiIHNraWxsIHVzZWQgZm9yIGNvcHlpbmcgYW5kIHBhc3RpbmcgYm90cy4nAPvTxfgNuA8Hb25QYXN0ZQIEAPvTxfgN/g/iB0BpZiAoIWJ1aWxkZXJWZXJzaW9uKQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IE1BQ1JPUyA9IFsKICAgIHsKICAgICAgICB0ZXN0OiAvKD86W+KAnOKAnV0pL2csCiAgICAgICAgcmVwbGFjZW1lbnQ6ICh2YWwpID0+ICciJywKICAgIH0sCiAgICB7CiAgICAgICAgdGVzdDogLyg/OlvigJjigJldKS9nLAogICAgICAgIHJlcGxhY2VtZW50OiAodmFsKSA9PiAiJyIsCiAgICB9LApdOwoKbGV0IGZvcm1hdHRlZENvcHkgPSByZXBsYWNlTWFjcm9zKHRoYXQudGV4dCk7CmxldCBjb3B5Qm90ID0gSlNPTi5wYXJzZShmb3JtYXR0ZWRDb3B5KTsKbGV0IHBhc3RlZERhdGEgPSAhY29weUJvdC5zdGF0ZSA/IHtbY29weUJvdC5pZF06IGNvcHlCb3R9IDogY29weUJvdC5zdGF0ZTsKbGV0IGRpbU1vZCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJGb2N1c0RhdGE7CgppZiAoT2JqZWN0LmtleXMocGFzdGVkRGF0YSkubGVuZ3RoID09IDEgJiYgZGltTW9kKQp7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIHBhc3RlZERhdGFbZGltTW9kLmRpbWVuc2lvbisiWCJdID0gZGltTW9kLng7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb24rIlkiXSA9IGRpbU1vZC55OwoKICAgIG9zLnRvYXN0KCJib3QgYWRkZWQgdG8gaW5zdCIpOwp9CmVsc2UKewogICAgb3MudG9hc3QoImJvdHMgYWRkZWQgdG8gaW5zdCIpOwp9CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogcGFzdGVkIGRhdGEiKTsKCmxpbmtzLmNyZWF0ZS5hYkNyZWF0ZUJvdHMoe2JvdHM6IHBhc3RlZERhdGF9KTsKCmZ1bmN0aW9uIHJlcGxhY2VNYWNyb3ModGV4dCkgewogICAgaWYgKCF0ZXh0KSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICB9CgogICAgZm9yIChsZXQgbSBvZiBNQUNST1MpIHsKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG0udGVzdCwgbS5yZXBsYWNlbWVudCk7CiAgICB9CgogICAgcmV0dXJuIHRleHQ7Cn0nAPvTxfgNuA8IcmVtZW1iZXICBAD708X4DdkXKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAPvTxfgNuA8GY3JlYXRlAgQA+9PF+A2AGCjwn5SXMzRjM2MyMTAtNWJmMS00OWNmLWIxNTEtZWUyZDA3ZjBlNjczJwD708X4DbgPCGFiSWdub3JlAgQA+9PF+A2nGAR0cnVlJwD708X4DbgPCW9uS2V5RG93bgIEAPvTxfgNrBisCUBpZiAoIWJ1aWxkZXJWZXJzaW9uIHx8ICghbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1cyAmJiAhbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzKSkKewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5rZXlzID09ICJjIikKewogICAgbGV0IG1ldGFJbnB1dCA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIk1ldGEiKTsKCiAgICBpZiAoIW1ldGFJbnB1dCkKICAgIHsKICAgICAgICBtZXRhSW5wdXQgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJDb250cm9sIik7CiAgICB9CiAgICAKICAgIGlmICghbWV0YUlucHV0KQogICAgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBsZXQgZm9ybWF0dGVkRmlsZTsKICAgIGxldCBzdGF0ZSA9IHt9OwoKICAgIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYkJvdEZvY3VzKQogICAgewogICAgICAgIGxldCBzZWxlY3RlZEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiQm90Rm9jdXM7CgogICAgICAgIHN0YXRlW3NlbGVjdGVkQm90LmlkXSA9IHNlbGVjdGVkQm90OwoKICAgICAgICBhYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogY29waWVkIGEgYm90IHRvIGNsaXBib2FyZCIpOwogICAgfQogICAgZWxzZSBpZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzKQogICAgewogICAgICAgIGxldCBzZWxlY3RlZEJvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWRCb3RzLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgc3RhdGVbc2VsZWN0ZWRCb3RzW2ldLmlkXSA9IHNlbGVjdGVkQm90c1tpXTsKICAgICAgICB9CgogICAgICAgIGFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiBjb3BpZWQgbXVsdGlwbGUgYm90cyB0byBjbGlwYm9hcmQiKTsKICAgIH0KCiAgICBsZXQgbmV3RmlsZSA9IHt9OwogICAgbmV3RmlsZS52ZXJzaW9uID0gMTsKICAgIG5ld0ZpbGUuc3RhdGUgPSBzdGF0ZTsKCiAgICBmb3JtYXR0ZWRGaWxlID0gSlNPTi5zdHJpbmdpZnkobmV3RmlsZSk7CgogICAgb3Muc2V0Q2xpcGJvYXJkKGZvcm1hdHRlZEZpbGUpOwoKICAgIG9zLnRvYXN0KCJib3QgY29waWVkIHRvIGNsaXBib2FyZCIpOwp9JwD708X4DbgPCWFiVmVyc2lvbgIEAPvTxfgN2SEWOS42Ni4xLjEuMTc1MDk1NDM1MDAwNycBBGJvdHMkYmRhYmQ2YzAtODlmOS00Zjc1LWIzNWMtMjZmNGVjNTIwN2Q2AScA+9PF+A3wIQZzeXN0ZW0CBAD708X4DfEhEGFiLmFjdGlvbi5yZXBvcnQnAPvTxfgN8CEEZm9ybQIEAPvTxfgNgiIHbm90aGluZycA+9PF+A3wIRBhYkNvcmVNZW51QWN0aW9uAgQA+9PF+A2KIhFAb3MucmVwb3J0SW5zdCgpOycA+9PF+A3wIRNhYkNvcmVNZW51U29ydE9yZGVyAgQA+9PF+A2cIgMxMDEnAPvTxfgN8CEOYWJDb3JlTWVudUljb24CBAD708X4DaAiBGZsYWcnAPvTxfgN8CEPYWJDb3JlTWVudUxhYmVsAgQA+9PF+A2lIgZyZXBvcnQnAPvTxfgN8CEIYWJBY3Rpb24CBAD708X4DawiBHRydWUnAPvTxfgN8CEIYWJJZ25vcmUCBAD708X4DbEiBHRydWUnAPvTxfgN8CEUYWJDb3JlTWVudU9uR2VuZXJhdGUCBAD708X4DbYiRkBpZiAoY29uZmlnQm90LnRhZ3Muc3RhdGljSW5zdCAhPSB1bmRlZmluZWQpCnsKICAgIGRlc3Ryb3kodGhpc0JvdCk7Cn0nAPvTxfgN8CEJYWJWZXJzaW9uAgQA+9PF+A39IhY5LjY2LjEuMS4xNzUwOTU0MzUwMDA3JwEEYm90cyRjNjhjNWI4Mi1jMGE3LTRhNWEtOTEwNC01ZGQ4ZTMyYWU0ZTIBJwD708X4DZQjBnN5c3RlbQIEAPvTxfgNlSMQYWIuYWN0aW9uLnBvcnRhbCcA+9PF+A2UIwtkZXNjcmlwdGlvbgIEAPvTxfgNpiMUU2tpbGwgdG8gb3BlbiBzaGVldC4nAPvTxfgNlCMIYWJBY3Rpb24CBAD708X4DbsjBHRydWUnAPvTxfgNlCMEZm9ybQIEAPvTxfgNwCMHbm90aGluZycA+9PF+A2UIxBhYkNvcmVNZW51QWN0aW9uAgQA+9PF+A3II84kQHNob3V0KCJhYlBvcnRhbE1lbnVSZWZyZXNoIik7Cgpjb25zdCBhY3RpdmVNZW51ID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbDsKY29uc3QgYWN0aXZlRGltZW5zaW9uID0gdGhhdC5ib3QudGFncy5jdXJyZW50RGltZW5zaW9uOwpjb25zdCBhY3RpdmVQb3J0YWwgPSB0aGF0LmJvdC50YWdzLmN1cnJlbnRQb3J0YWw7CgovLyB0aGF0LmJvdC5tYXNrc1thY3RpdmVNZW51XSA9IGZhbHNlOwp0aGF0LmJvdC5tYXNrcy5hYlBvcnRhbE1lbnVSZWZyZXNoID0gIkAgY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsiOwp0aGF0LmJvdC5tYXNrcy5mb3JtQWRkcmVzcyA9ICJhcnJvd19kcm9wX2Rvd24iOwp0aGF0LmJvdC5tYXNrcy5vbkNsaWNrID0gYEAgc2hvdXQoImFiUG9ydGFsTWVudVJlZnJlc2giKTtgOwp0aGF0LmJvdC5tYXNrcy5tZW51SXRlbVN0eWxlID0gewogICAgImJvcmRlci1yYWRpdXMiOiI4cHggOHB4IDBweCAwcHgiLCAKICAgICJtYXJnaW4tdG9wIjoiOHB4IiwgCiAgICAiYm9yZGVyLXdpZHRoIjogIjJweCIsIAogICAgImJvcmRlci1jb2xvciI6ICIjMDAwIiwgCiAgICAiYm9yZGVyLXRvcC1zdHlsZSI6ICJzb2xpZCIsCiAgICAiYm9yZGVyLWxlZnQtc3R5bGUiOiAic29saWQiLAogICAgImJvcmRlci1yaWdodC1zdHlsZSI6ICJzb2xpZCIsCiAgICAiYm94LXNoYWRvdyI6ICIzcHggNHB4ICMwMDAiLAogICAgIm1pbi1oZWlnaHQiOiAiNDRweCIKfTsKCmNvbnN0IHBlcm1hbGlua1VSTCA9IGNvbmZpZ0JvdC50YWdzLnBlcm1hbGluazsKY29uc3QgYWN0aXZlSW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7CmNvbnN0IGFjdGl2ZUJpb3MgPSBjb25maWdCb3QudGFncy5vd25lciA/ICImb3duZXI9IiArIGNvbmZpZ0JvdC50YWdzLm93bmVyIDogZmFsc2U7CmNvbnN0IGZpcnN0SW5kZXggPSBwZXJtYWxpbmtVUkwuaW5kZXhPZigiJiIpOwpjb25zdCBpbml0aWFsVVJMID0gcGVybWFsaW5rVVJMLnN1YnN0cmluZygwLCBmaXJzdEluZGV4KTsKY29uc3QgdXBkYXRlZFVSTCA9IGFjdGl2ZUJpb3MgIT0gZmFsc2UgPyBpbml0aWFsVVJMICsgIiZpbnN0PSIgKyBhY3RpdmVJbnN0IDogaW5pdGlhbFVSTDsKY29uc3QgbWVudUJvdCA9IHt9OwoKbWVudUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51Qm90LmRpbWVuc2lvbiA9IGFjdGl2ZU1lbnU7Cm1lbnVCb3RbYWN0aXZlTWVudV0gPSB0cnVlOwptZW51Qm90LmFiUG9ydGFsTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7Cm1lbnVCb3QuYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJvdC5vbktleURvd24gPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSB0YWdzLmxhYmVsICsgIiBpbiBuZXcgdGFiIjt9YDsKbWVudUJvdC5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsKbWVudUJvdC5tYW5hZ2VyID0gZ2V0TGluayh0aGF0LmJvdCk7Cm1lbnVCb3Quc2tpbGxCb3QgPSBnZXRMaW5rKHRoaXNCb3QpOwptZW51Qm90LnRhcmdldFVSTCA9IHVwZGF0ZWRVUkw7CgptZW51Qm90LmxhYmVsID0gIm1hcCBwb3J0YWwiOwptZW51Qm90LmZvcm1BZGRyZXNzID0gInB1YmxpYyI7Cm1lbnVCb3Qub25DbGljayA9IGBAIHNob3V0KCJhYlBvcnRhbE1lbnVSZWZyZXNoIik7Cgpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZihzdGF0ZSkKewogICAgb3Mub3BlblVSTCh0YWdzLnRhcmdldFVSTCArICImbWFwUG9ydGFsPSR7YWN0aXZlRGltZW5zaW9uID09ICJibHVlcHJpbnQiID8gImhvbWUiIDogYWN0aXZlRGltZW5zaW9ufSIpOwp9CmVsc2UKewogICAgY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID0gIiR7YWN0aXZlRGltZW5zaW9uID09ICJibHVlcHJpbnQiID8gImhvbWUiIDogYWN0aXZlRGltZW5zaW9ufSI7Owp9YDsKbWVudUJvdFthY3RpdmVNZW51ICsgIlNvcnRPcmRlciJdID0gMC4yOwptZW51Qm90Lm1lbnVJdGVtU3R5bGUgPSB7CiAgICAiYm9yZGVyLXJhZGl1cyI6IjAiLCAKICAgICJtYXJnaW4tdG9wIjoiMHB4IiwKICAgICJib3JkZXItd2lkdGgiOiAiMnB4IiwgCiAgICAiYm9yZGVyLWNvbG9yIjogIiMwMDAiLCAKICAgICJib3JkZXItdG9wLXN0eWxlIjogInNvbGlkIiwKICAgICJib3JkZXItbGVmdC1zdHlsZSI6ICJzb2xpZCIsCiAgICAiYm9yZGVyLXJpZ2h0LXN0eWxlIjogInNvbGlkIiwKICAgICJib3gtc2hhZG93IjogIjNweCA0cHggIzAwMCIsCiAgICAibWluLWhlaWdodCI6ICI0NHB4Igp9OwoKaWYgKGFjdGl2ZVBvcnRhbCAhPSAibWFwIikKewogICAgLy9tYXAgcG9ydGFsIGJ1dHRvbgogICAgbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24obWVudUJvdCk7Cn0KCm1lbnVCb3QubGFiZWwgPSAiZ3JpZCBwb3J0YWwiOwptZW51Qm90LmZvcm1BZGRyZXNzID0gImN1YmUiOwptZW51Qm90Lm9uQ2xpY2sgPSBgQCBzaG91dCgiYWJQb3J0YWxNZW51UmVmcmVzaCIpOyAKCmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmKHN0YXRlKQp7CiAgICBvcy5vcGVuVVJMKHRhZ3MudGFyZ2V0VVJMICsgIiZncmlkUG9ydGFsPSR7YWN0aXZlRGltZW5zaW9uID09ICJibHVlcHJpbnQiID8gImhvbWUiIDogYWN0aXZlRGltZW5zaW9ufSIpOwp9IAplbHNlCnsKICAgIGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgPSAiJHthY3RpdmVEaW1lbnNpb24gPT0gImJsdWVwcmludCIgPyAiaG9tZSIgOiBhY3RpdmVEaW1lbnNpb259IjsgY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID0gbnVsbDsKfWA7Cm1lbnVCb3RbYWN0aXZlTWVudSArICJTb3J0T3JkZXIiXSA9IDAuMjsKCmlmIChhY3RpdmVQb3J0YWwgIT0gImdyaWQiIHx8IGFjdGl2ZURpbWVuc2lvbiA9PSAiYmx1ZXByaW50IikKewogICAgLy9ncmlkIHBvcnRhbCBidXR0b24KICAgIGxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKG1lbnVCb3QpOwp9CgptZW51Qm90LmxhYmVsID0gImJsdWVwcmludCBwb3J0YWwiOwptZW51Qm90LmZvcm1BZGRyZXNzID0gImFyY2hpdGVjdHVyZSI7Cm1lbnVCb3Qub25DbGljayA9IGBAIHNob3V0KCJhYlBvcnRhbE1lbnVSZWZyZXNoIik7IAoKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYoc3RhdGUpCnsKICAgIG9zLm9wZW5VUkwodGFncy50YXJnZXRVUkwgKyAiJmdyaWRQb3J0YWw9Ymx1ZXByaW50Iik7Cn0gCmVsc2UKewogICAgY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCA9ICJibHVlcHJpbnQiOyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPSBudWxsOwp9CgpsaW5rcy5za2lsbEJvdC5hYkJsdWVwcmludCgpO2A7Cm1lbnVCb3RbYWN0aXZlTWVudSArICJTb3J0T3JkZXIiXSA9IDAuMzsKCmlmIChhY3RpdmVEaW1lbnNpb24gIT0gImJsdWVwcmludCIpCnsKICAgIC8vYmx1ZXByaW50IHBvcnRhbCBidXR0b24KICAgIGxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKG1lbnVCb3QpOwp9CgptZW51Qm90LmxhYmVsID0gInNoZWV0IHBvcnRhbCI7Cm1lbnVCb3QuZm9ybUFkZHJlc3MgPSAidGFibGVfdmlldyI7Cm1lbnVCb3Qub25DbGljayA9IGBAIHNob3V0KCJhYlBvcnRhbE1lbnVSZWZyZXNoIik7Cgpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZihzdGF0ZSkKewogICAgb3Mub3BlblVSTCh0YWdzLnRhcmdldFVSTCArICImc2hlZXRQb3J0YWw9JHthY3RpdmVEaW1lbnNpb259Iik7Cn0gCmVsc2UKeyAKICAgIGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsID0gIiR7YWN0aXZlRGltZW5zaW9ufSI7Cn1gOwptZW51Qm90W2FjdGl2ZU1lbnUgKyAiU29ydE9yZGVyIl0gPSAwLjE7CgovL3NoZWV0IHBvcnRhbCBidXR0b24KbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24obWVudUJvdCk7CgptZW51Qm90LmxhYmVsID0gInN5c3RlbSBwb3J0YWwiOwptZW51Qm90LmZvcm1BZGRyZXNzID0gInNldHRpbmdzX2FwcGxpY2F0aW9ucyI7Cm1lbnVCb3Qub25DbGljayA9IGBAIHNob3V0KCJhYlBvcnRhbE1lbnVSZWZyZXNoIik7Cgpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZihzdGF0ZSkKewogICAgb3Mub3BlblVSTCh0YWdzLnRhcmdldFVSTCArICImc3lzdGVtUG9ydGFsPXRydWUiKTsKfSAKZWxzZQp7IAogICAgY29uZmlnQm90LnRhZ3Muc3lzdGVtUG9ydGFsID0gdHJ1ZTsKfWA7Cm1lbnVCb3RbYWN0aXZlTWVudSArICJTb3J0T3JkZXIiXSA9IDAuNDsKbWVudUJvdC5tZW51SXRlbVN0eWxlID0gewogICAgImJvcmRlci1yYWRpdXMiOiIwIDAgOHB4IDhweCIsCiAgICAibWFyZ2luLXRvcCI6IjBweCIsCiAgICAiYm9yZGVyLXdpZHRoIjogIjJweCIsIAogICAgImJvcmRlci1jb2xvciI6ICIjMDAwIiwgCiAgICAiYm9yZGVyLXRvcC1zdHlsZSI6ICJzb2xpZCIsCiAgICAiYm9yZGVyLWxlZnQtc3R5bGUiOiAic29saWQiLAogICAgImJvcmRlci1yaWdodC1zdHlsZSI6ICJzb2xpZCIsCiAgICAiYm94LXNoYWRvdyI6ICIzcHggNHB4ICMwMDAiLAogICAgIm1pbi1oZWlnaHQiOiAiNDRweCIKfTsKCi8vc3lzdGVtIHBvcnRhbCBidXR0b24KbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24obWVudUJvdCk7JwD708X4DZQjCHJlbWVtYmVyAgQA+9PF+A2XSCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD708X4DZQjD2FiQ29yZU1lbnVMYWJlbAIEAPvTxfgNvkgQY3VycmVudCBwb3J0YWw6ICcA+9PF+A2UIw9hYkJvdE1lbnVBY3Rpb24CBAD708X4Dc9I8QJAY29uc3QgY3VycmVudEluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpOwpjb25zdCBjdXJyZW50RGltID0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC50YWdzLmxpbmVUbzsKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKHN0YXRlKSAKewogICAgb3Mub3BlblVSTChjb25maWdCb3QudGFncy5wZXJtYWxpbmsgKyBgJnNoZWV0UG9ydGFsPSR7Y3VycmVudERpbX1gKTsKfQplbHNlCnsKICAgIGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsID0gY3VycmVudERpbTsKfQoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IG9wZW5lZCBib3Qgc2hlZXQiKTsnAPvTxfgNlCMOYWJCb3RNZW51TGFiZWwCBAD708X4DcFLDm9wZW4gYm90IHNoZWV0JwD708X4DZQjDW1hbmlmZXN0YXRpb24CBAD708X4DdBLKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAPvTxfgNlCMNYWJCb3RNZW51SWNvbgIEAPvTxfgN90sKdGFibGVfdmlldycA+9PF+A2UIw5hYkNvcmVNZW51SWNvbgIEAPvTxfgNgkwLYXJyb3dfcmlnaHQnAPvTxfgNlCMSYWJCb3RNZW51U29ydE9yZGVyAgQA+9PF+A2OTAExJwD708X4DZQjCGFiSWdub3JlAgQA+9PF+A2QTAR0cnVlJwD708X4DZQjF2FiTXVsdGlwbGVCb3RNZW51QWN0aW9uAgQA+9PF+A2VTJQEQGNvbnN0IGN1cnJlbnRJbnN0ID0gb3MuZ2V0Q3VycmVudEluc3QoKTsKY29uc3QgY3VycmVudERpbSA9ICJhYk11bHRpcGxlU2VsZWN0IjsKCmNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsID0gY3VycmVudERpbTsKCnNldFRhZ01hc2sobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzLCBjdXJyZW50RGltLCB0cnVlLCAidGVtcExvY2FsIik7CgptYXNrcy5jdXJyZW50U2hlZXRCb3RzID0gbGlua3MucmVtZW1iZXIudGFncy5hYk11bHRpcGxlQm90Rm9jdXM7Cm1hc2tzLm9uUG9ydGFsQ2hhbmdlZCA9IGBAIGlmICh0aGF0LmRpbWVuc2lvbiAhPSAiYWJNdWx0aXBsZVNlbGVjdCIgJiYgdGhhdC5wb3J0YWwgPT0gInNoZWV0UG9ydGFsIikKewogICAgY2xlYXJUYWdNYXNrcyhsaW5rcy5jdXJyZW50U2hlZXRCb3RzKTsKCiAgICBjbGVhclRhZ01hc2tzKHRoaXNCb3QpOwp9IGA7CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogb3BlbmVkIG11bHRpcGxlIHNlbGVjdCBzaGVldCIpOycA+9PF+A2UIxZhYk11bHRpcGxlQm90TWVudUxhYmVsAgQA+9PF+A2qUBpvcGVuIG11bHRpcGxlIHNlbGVjdCBzaGVldCcA+9PF+A2UIxVhYk11bHRpcGxlQm90TWVudUljb24CBAD708X4DcVQCnRhYmxlX3ZpZXcnAPvTxfgNlCMUYWJDb3JlTWVudU9uR2VuZXJhdGUCBAD708X4DdBQxwJAY29uc3QgY3VycmVudERpbSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBY3RpdmVEaW1lbnNpb247CmNvbnN0IGN1cnJlbnRQb3J0YWwgPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyAibWFwIiA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgPT0gImJsdWVwcmludCIgPyAiYmx1ZXByaW50IiA6ImdyaWQiOwoKdGFncy5sYWJlbCA9IGBtb2RlOiAke2N1cnJlbnRQb3J0YWx9IHBvcnRhbGA7CnRhZ3MuY3VycmVudERpbWVuc2lvbiA9IGN1cnJlbnREaW07CnRhZ3MuY3VycmVudFBvcnRhbCA9IGN1cnJlbnRQb3J0YWw7CnRhZ3Mub25Qb2ludGVyRG93biA9ICJAIC8vIjsnAPvTxfgNlCMTYWJCb3RNZW51T25HZW5lcmF0ZQIEAPvTxfgNmFOYAkBsZXQgc2VsZWN0ZWRCb3QgPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90LnRhZ3MubGluZVRvOwoKdGFncy5sYWJlbCA9ICJzaGVldFBvcnRhbD0iICsgc2VsZWN0ZWRCb3Quc3Vic3RyaW5nKDAsIDQpOwoKdGFncy5vbktleURvd24gPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSB0YWdzLmxhYmVsICsgIiBpbiBuZXcgdGFiIjt9YDsKdGFncy5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsnAPvTxfgNlCMaYWJNdWx0aXBsZUJvdE1lbnVTb3J0T3JkZXICBAD708X4DbFVATAnAPvTxfgNlCMEbWVudQIEAPvTxfgNs1Uo8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA+9PF+A2UIwlhYlZlcnNpb24CBAD708X4DdpVFjkuNjYuMS4xLjE3NTA5NTQzNTAwMDcnAPvTxfgNlCMLYWJCbHVlcHJpbnQCBAD708X4DfFV+wNAY29uc3QgYmFja2dyb3VuZENvbG9yID0gbGlua3MucmVtZW1iZXI/LnRhZ3MuYWJCbHVlcHJpbnRDb2xvciA/PyAiIzE3ODVCNSI7CgppZiAoYmFja2dyb3VuZENvbG9yID09IGdyaWRQb3J0YWxCb3QubWFza3MucG9ydGFsQ29sb3IpCnsKICAgIHJldHVybjsKfQoKZ3JpZFBvcnRhbEJvdC5tYXNrcy5wb3J0YWxDb2xvciA9IGJhY2tncm91bmRDb2xvcjsKCm1hc2tzLm9uUG9ydGFsQ2hhbmdlZCA9IGBAIGlmICh0aGF0LnBvcnRhbCA9PSAiZ3JpZFBvcnRhbCIgJiYgdGhhdC5kaW1lbnNpb24gIT0gImJsdWVwcmludCIpewogICAgLy8gbGlua3MucmVtZW1iZXIubWFza3MuYWJCYXNlQ29sb3IgPSBudWxsOwogICAgLy8gbGlua3MucmVtZW1iZXIubWFza3MuYWJCYXNlU3Ryb2tlQ29sb3IgPSBudWxsOwoKICAgIGdyaWRQb3J0YWxCb3QubWFza3MucG9ydGFsQ29sb3IgPSBudWxsOwoKICAgIG1hc2tzLm9uUG9ydGFsQ2hhbmdlZCA9IG51bGw7Cn1gOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsnAPvTxfgNlCMLb25BbnlDcmVhdGUCBAD708X4De1ZdkBpZiAodGhhdC5ib3QudGFncy5ibHVlcHJpbnQpCnsKICAgIHRoYXQuYm90LnRhZ3Muc3Ryb2tlQ29sb3IgPSAiI2ZmZmZmZiI7CiAgICB0aGF0LmJvdC50YWdzLmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cn0nAPvTxfgNlCMPb25Qb3J0YWxDaGFuZ2VkAgQA+9PF+A3kWmFAaWYgKHRoYXQucG9ydGFsID09ICJncmlkUG9ydGFsIiAmJiB0aGF0LmRpbWVuc2lvbiA9PSAiYmx1ZXByaW50IikKewogICAgdGhpc0JvdC5hYkJsdWVwcmludCgpOwp9JwEEYm90cyRlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcBJwD708X4DcZbBnN5c3RlbQIEAPvTxfgNx1sNYWIuYWN0aW9uLmFzaycA+9PF+A3GWwRmb3JtAgQA+9PF+A3VWwdub3RoaW5nJwD708X4DcZbBmFza0dQVAIEAPvTxfgN3VuBCkBpZiAoIXRhZ3MuZ3B0QWN0aXZlIHx8IGF1dGhCb3QudGFncy5wcml2YWN5RmVhdHVyZXMuYWxsb3dBSSA9PSBmYWxzZSkKewogICAgY29uc3QgYWlNZXNzYWdlID0gbGlua3MucmVtZW1iZXIudGFncy5haV9yZWplY3Rpb25fbWVzc2FnZSA/PyAiQUkgbm90IGF1dGhvcml6ZWQgZm9yIHRoaXMgYWNjb3VudCI7CgogICAgb3MudG9hc3QoYWlNZXNzYWdlLCA3KTsKCiAgICBhYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgICI6ICIgKyBhaU1lc3NhZ2UpOwogICAgCiAgICByZXR1cm47Cn0gCgovLyBjb25zb2xlLmxvZygiQVNLIiwgdGhhdCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgcHJvbXB0ID0gIXRoYXQucHJvbXB0ID8gdGFncy5wcm9tcHRfY29yZSA6IHRhZ3NbInByb21wdF8iICsgdGhhdC5wcm9tcHRdOwoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IHRoaW5raW5nIGFib3V0ICIgKyBpbnF1aXJ5KTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJCb3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyB0aGF0LmRhdGEuYm90LmlkOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJtdWx0aXBsZUJvdCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBUQVJHRVRfQk9UX0lEUzogYCArIHRoYXQuZGF0YS5ib3RzOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJjb3JlIikKewoKfQoKY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpc0JvdC5zdWJtaXRSZXF1ZXN0R1BUKHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgbW9kZWw6IHRoYXQubW9kZWx9KTsKCmFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgYW5zd2VyKTsKCmNyZWF0ZSh7aG9tZTogdHJ1ZSwgb25DcmVhdGU6IGBAICR7YW5zd2VyfWB9KTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOwoKcmV0dXJuOycA+9PF+A3GWwlncHRBY3RpdmUCBAD708X4Dd9lBWZhbHNlJwD708X4DcZbEHN1Ym1pdFJlcXVlc3RHUFQCBAD708X4DeVlpQZAbGV0IHN5c3RlbVByb21wdCA9IHRoYXQucHJvbXB0ID8gdGhhdC5wcm9tcHQgOiB0YWdzLnByb21wdF9jb3JlOwoKc3lzdGVtUHJvbXB0ID0gc3lzdGVtUHJvbXB0ICsgdGhhdC5pbnF1aXJ5OwoKaWYgKGF1dGhCb3QudGFncy5wcml2YWN5RmVhdHVyZXMuYWxsb3dBSSA9PSBmYWxzZSkKewogICAgb3MudG9hc3QoIkFJIG5vdCBhdXRob3JpemVkIG9uIHRoaXMgYWNjb3VudCIpOwoKICAgIHJldHVybjsKfQoKbGV0IGN1cnJlbnRFeHBlcmllbmNlQm90cyA9IGdldEJvdHMoYnlNb2Qoe3NwYWNlOiAic2hhcmVkIiwgYWJJZ25vcmU6IG51bGx9KSk7CgppZiAoY3VycmVudEV4cGVyaWVuY2VCb3RzLmxlbmd0aCA+IDApCnsKICAgIHN5c3RlbVByb21wdCA9IHN5c3RlbVByb21wdCArICIgVGhlc2UgYXJlIHRoZSBib3RzIHRoYXQgY3VycmVudGx5IGV4aXN0IGluIHRoZSBleHBlcmllbmNlOiAiICsgY3VycmVudEV4cGVyaWVuY2VCb3RzOwp9CgpsZXQgbmV3U3RhdHVzQmFyID0gYXdhaXQgbGlua3MuaW5wdXQuYWJQcm9ncmVzc0JhcihgYXNraW5nICR7bGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eX1gKTsKCmNvbnN0IGFpUmVzcCA9IGF3YWl0IGFpLmNoYXQoc3lzdGVtUHJvbXB0LCB7CiAgICBtb2RlbDogdGhhdC5tb2RlbCA/PyAiY2xhdWRlLTMtNS1zb25uZXQtbGF0ZXN0IiwKICAgIHRlbXBlcmF0dXJlOiAwLAogICAgdG9wUDogMSwKICAgIHByZXNlbmNlUGVuYWx0eTogMC42LAogICAgZnJlcXVlbmN5UGVuYWx0eTogMAp9KTsKCmRlc3Ryb3kobmV3U3RhdHVzQmFyKTsKCnJldHVybiBhaVJlc3A7JwD708X4DcZbCHJlbWVtYmVyAgQA+9PF+A2LbCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD708X4DcZbEGFiQ29yZU1lbnVBY3Rpb24CBAD708X4DbJs1hlAY29uc3QgaW5xdWlyeSA9IHRoYXQubWVzc2FnZSA/PyB0aGF0Owpjb25zdCBiYXNlSW5xdWlyeSA9IGlucXVpcnk7CmNvbnN0IG1lbnUgPSB0aGF0Lm1lbnUgPz8gImNvcmUiOwpjb25zdCBzcGFjZUNoZWNrID0gaW5xdWlyeS5pbmRleE9mKCIgIik7CmNvbnN0IG1lbnVCb3RzID0gZ2V0Qm90cyhjb25maWdCb3QudGFncy5tZW51UG9ydGFsLCB0cnVlKTsKCndoaXNwZXIobWVudUJvdHMsICJhYk1lbnVSZWZyZXNoIik7CgphYi5sb2coInVzZXI6ICIgKyBpbnF1aXJ5KTsKCmlmICghY29uZmlnQm90LnRhZ3MudGFnUG9ydGFsICYmIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlICYmIHRoYXQubWVzc2FnZSAhPSAiLmxvZyIpCnsKICAgIHNob3V0KCJzaG93Q29uc29sZSIpOwp9CgppZiAoc3BhY2VDaGVjayA9PSAtMSkKewogICAgY29uc3QgcXVvYXRhdGlvbkNoZWNrMSA9IGJhc2VJbnF1aXJ5LmluZGV4T2YoJyInKTsKICAgIGNvbnN0IHF1b2F0YXRpb25DaGVjazIgPSBiYXNlSW5xdWlyeS5sYXN0SW5kZXhPZignIicpOwogICAgY29uc3QgZGlyZWN0U2VhcmNoID0gcXVvYXRhdGlvbkNoZWNrMSA9PSAwICYmIHF1b2F0YXRpb25DaGVjazIgPT0gYmFzZUlucXVpcnkubGVuZ3RoIC0xOwogICAgY29uc3QgY2hhbm5lbENvbmZpZ0NoZWNrID0gYmFzZUlucXVpcnlbMF0gPT0gIkAiOwogICAgY29uc3QgYXNrSm9pbklEID0gaW5xdWlyeS5yZXBsYWNlQWxsKCItIiwgIiIpOwoKICAgIGxldCBhc2sgPSAhZGlyZWN0U2VhcmNoID8gYXdhaXQgbGlua3Muc2VhcmNoLm9uTG9va3VwQXNrSUQoe2Fza0lEOiBhc2tKb2luSUQsIGNoYW5uZWxDb25maWc6IGNoYW5uZWxDb25maWdDaGVja30pIDogZmFsc2U7CiAgICAKICAgIGlmIChhc2s/LnN1Y2Nlc3MgJiYgYXNrPy5kYXRhLnVybCAhPSB1bmRlZmluZWQgJiYgIWRpcmVjdFNlYXJjaCAmJiAhY2hhbm5lbENvbmZpZ0NoZWNrKQogICAgewogICAgICAgIGxpbmtzLmxlYXJuLmFiSm9pbkhvc3Qoe2RhdGE6IGFzay5kYXRhfSk7CiAgICB9CiAgICBlbHNlIGlmIChhc2s/LnN1Y2Nlc3MgJiYgY2hhbm5lbENvbmZpZ0NoZWNrKQogICAgewogICAgICAgIGxpbmtzLmNoYW5uZWxMb2FkZXI/LmxvYWRDaGFubmVsKGFzayk7CiAgICB9CiAgICBlbHNlIGlmICghYXNrPy5zdWNjZXNzKQogICAgewogICAgICAgIGNvbnN0IHBlcmlvZEluZGV4ID0gYmFzZUlucXVpcnkuaW5kZXhPZigiLiIpOwoKICAgICAgICBsZXQgYWJJRCA9IGJhc2VJbnF1aXJ5OwoKICAgICAgICBpZiAoZGlyZWN0U2VhcmNoKQogICAgICAgIHsKICAgICAgICAgICAgYWJJRCA9IGJhc2VJbnF1aXJ5LnN1YnN0cmluZygxLCBiYXNlSW5xdWlyeS5sZW5ndGggLSAxKTsKICAgICAgICB9CgogICAgICAgIGlmIChwZXJpb2RJbmRleCA9PSAtMSB8fCBkaXJlY3RTZWFyY2gpCiAgICAgICAgewogICAgICAgICAgICBhc2sgPSBhd2FpdCBsaW5rcy5zZWFyY2gub25Mb29rdXBBQkVnZ3Moe2FiSUQ6IGFiSUQsIGluaXRpYWxCb290OiB0aGF0LmluaXRpYWxCb290LCBhdXRvSGF0Y2g6IHRoYXQuYXV0b0hhdGNofSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBlcmlvZEluZGV4ID4gMCkKICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHJlY29yZEtleSA9IGJhc2VJbnF1aXJ5LnN1YnN0cmluZygwLCBwZXJpb2RJbmRleCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBhYklEID0gYmFzZUlucXVpcnkuc3Vic3RyaW5nKHBlcmlvZEluZGV4ICsgMSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBhc2sgPSBhd2FpdCBsaW5rcy5zZWFyY2gub25Mb29rdXBBQkVnZ3Moe3JlY29yZEtleTogcmVjb3JkS2V5LCBhYklEOiBhYklELCBpbml0aWFsQm9vdDogdGhhdC5pbml0aWFsQm9vdCwgYXV0b0hhdGNoOiB0aGF0LmF1dG9IYXRjaH0pOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBsaW5rcy5pbnB1dC5vbkNoYXQoe21lc3NhZ2U6IGlucXVpcnl9KTsKICAgICAgICB9CgogICAgICAgIGlmICghYXNrPy5zdWNjZXNzICYmIGxpbmtzLm1lbnUpCiAgICAgICAgewogICAgICAgICAgICBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKICAgICAgICAgICAgY29uc3Qgc3R1ZGlvQnV0dG9uID0ge307CgogICAgICAgICAgICBzdHVkaW9CdXR0b24uYWJNZW51ID0gdHJ1ZTsKICAgICAgICAgICAgc3R1ZGlvQnV0dG9uLmxhYmVsID0gYWJJRCArICIgbm90IGZvdW5kIGluIGFjdGl2ZSBzdHVkaW8sIGVudGVyIGFsdGVybmF0ZSBzdHVkaW9JRCI7CiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5mb3JtID0gImlucHV0IjsKICAgICAgICAgICAgc3R1ZGlvQnV0dG9uLmFiSUQgPSBhYklEOwogICAgICAgICAgICBzdHVkaW9CdXR0b24uZm9ybUFkZHJlc3MgPSB0YWdzLmFiQ29yZU1lbnVJY29uOwogICAgICAgICAgICBzdHVkaW9CdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CiAgICAgICAgICAgIHN0dWRpb0J1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwogICAgICAgICAgICBzdHVkaW9CdXR0b24ub25TdWJtaXQgPSBgQCBsaW5rcy5tYW5hZ2VyLmFiQ29yZU1lbnVBY3Rpb24odGhhdC50ZXh0ICsgIi4iICsgdGFncy5hYklEKTtgOwoKICAgICAgICAgICAgbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24oc3R1ZGlvQnV0dG9uKTsKCiAgICAgICAgICAgIHRoaXNCb3QubWFza3Mub25HcmlkQ2xpY2sgPSAiQCBzaG91dCgnYWJNZW51UmVmcmVzaCcpOyI7CiAgICAgICAgfQogICAgfQp9CmVsc2UKewogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3QoKTsKCiAgICBpZiAoIWF1dGhCb3QpCiAgICB7CiAgICAgICAgb3MudG9hc3QoInBsZWFzZSBzaWduIGluIHRvIGFjY2VzcyBhZHZhbmNlZCBBSSBmZWF0dXJlcyIpOwoKICAgICAgICBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsKICAgIH0KICAgIGVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCiAgICB7CiAgICAgICAgb3MudG9hc3QoInBsZWFzZSBjaGVjayB5b3VyIHN1YnNjcmlwdGlvbiBpbiBvcmRlciB0byBhY2Nlc3MgYWR2YW5jZWQgQUkgZmVhdHVyZXMiKTsKCiAgICAgICAgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbWFza3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICAgICAgYXdhaXQgdGhpc0JvdC5hc2tHUFQoe2lucXVpcnk6IGlucXVpcnksIHByb21wdDogbWVudSwgZGF0YTogdGhhdH0pOwogICAgfQp9JwD708X4DcZbFGFiQ29yZU1lbnVPbkdlbmVyYXRlAgQA+9PF+A2JhgGoA0B0YWdzLm9uU3VibWl0ID0gYEAgbGlua3MuYmFzZVNraWxsLmFiQ29yZU1lbnVBY3Rpb24oe21lc3NhZ2U6IHRoYXQudGV4dCwgbWVudTogImNvcmUifSk7YDsKdGFncy5mb3JtID0gImlucHV0IjsKCmlmICghYXV0aEJvdCkKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZSBpZiAoYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gIkZyZWVQbGF5IikKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eTsKfQonAPvTxfgNxlsTYWJDb3JlTWVudVNvcnRPcmRlcgIEAPvTxfgNsokBAzEwMicA+9PF+A3GWxBhYkdyaWRNZW51QWN0aW9uAgQA+9PF+A22iQEOQC8vcGxhY2Vob2xkZXInAPvTxfgNxlsUYWJHcmlkTWVudU9uR2VuZXJhdGUCBAD708X4DcWJAbMFQHRhZ3MuZGltZW5zaW9uID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1cy5kaW1lbnNpb247CnRhZ3MuZGltZW5zaW9uWCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJHcmlkRm9jdXMucG9zaXRpb24ueDsKdGFncy5kaW1lbnNpb25ZID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1cy5wb3NpdGlvbi55Owp0YWdzLm9uU3VibWl0ID0gYEBsaW5rcy5iYXNlU2tpbGwuYWJDb3JlTWVudUFjdGlvbih7bWVzc2FnZTogdGhhdC50ZXh0LCBtZW51OiAiZ3JpZCIsIGRpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIGRpbWVuc2lvblg6IHRhZ3MuZGltZW5zaW9uWCwgZGltZW5zaW9uWTogdGFncy5kaW1lbnNpb25ZfSk7YDsKdGFncy5mb3JtID0gImlucHV0IjsKCmlmICghYXV0aEJvdCkKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZSBpZiAoYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gIkZyZWVQbGF5IikKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiIChsaW1pdGVkKSI7Cn0KZWxzZQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eTsKfScA+9PF+A3GWw1tYW5pZmVzdGF0aW9uAgQA+9PF+A35jgEo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcA+9PF+A3GWxNhYkdyaWRNZW51U29ydE9yZGVyAgQA+9PF+A2gjwEDMTAyJwD708X4DcZbD2FiR3JpZE1lbnVMYWJlbAIEAPvTxfgNpI8BBmFzayBhYicA+9PF+A3GWw9hYkNvcmVNZW51TGFiZWwCBAD708X4DauPAQZhc2sgYWInAPvTxfgNxlsOYWJDb3JlTWVudUljb24CBAD708X4DbKPAQRjdWJlJwD708X4DcZbDmFiR3JpZE1lbnVJY29uAgQA+9PF+A23jwEEY3ViZScA+9PF+A3GWwplZGl0UHJvbXB0AgQA+9PF+A28jwGHCEBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWJNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiTWVudSA9IHRydWU7CnByb21wdE1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKcHJvbXB0TWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gdGFncy5tYW5pZmVzdGF0aW9uOwpwcm9tcHRNZW51QnV0dG9uLnJlbWVtYmVyID0gdGFncy5yZW1lbWJlcjsKcHJvbXB0TWVudUJ1dHRvbi5ncHRCb3QgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gImxvYWQgcHJvbXB0IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjbG91ZF9kb3dubG9hZCI7CnByb21wdE1lbnVCdXR0b24ub25DbGljayA9ICJAIGxpbmtzLmdwdEJvdC51cGRhdGVQcm9tcHQoJ2xvYWQnKTsiOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gInNhdmUgcHJvbXB0IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJiYWNrdXAiOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QudXBkYXRlUHJvbXB0KCdzYXZlJyk7IjsKCmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKHByb21wdE1lbnVCdXR0b24pOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gbnVsbDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9IG51bGw7CmA7Cgp0YWdQb3J0YWxCb3QubWFza3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgPSAidG9wIjsKCmNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSB0aGlzQm90LmlkICsgIi5wcm9tcHRfY29yZSI7CgppZiAoY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbFNwYWNlKQp7CiAgICBjb25maWdCb3QubWFza3MudGFnUG9ydGFsU3BhY2UgPSBudWxsOwp9JwD708X4DcZbBG1lbnUCBAD708X4DcKXASjwn5SXYjMwYzZjNWQtYTRmNy00MjY2LWJhMzgtMzkzZGM5NWUxZWNiJwD708X4DcZbDHVwZGF0ZVByb21wdAIEAPvTxfgN6ZcBywhAc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgpsZXQgcHJvbXB0TWVudUJ1dHRvbiA9IHt9OwoKcHJvbXB0TWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwpwcm9tcHRNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CnByb21wdE1lbnVCdXR0b24ubWFuaWZlc3RhdGlvbiA9IHRhZ3MubWFuaWZlc3RhdGlvbjsKcHJvbXB0TWVudUJ1dHRvbi5yZW1lbWJlciA9IHRhZ3MucmVtZW1iZXI7CnByb21wdE1lbnVCdXR0b24uZ3B0Qm90ID0gIvCflJciICsgdGhpc0JvdC5pZDsKCmlmICh0aGF0ID09ICJsb2FkIikKewogICAgcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJsb2FkIHByb21wdCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNsb3VkX2Rvd25sb2FkIjsKICAgIHByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSAiQCBsaW5rcy5ncHRCb3QubG9hZFByb21wdCh0aGF0LnRleHQpOyI7Cn0KZWxzZQp7CiAgICBwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gInNhdmUgcHJvbXB0IjsKICAgIHByb21wdE1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiYmFja3VwIjsKICAgIHByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSAiQCBsaW5rcy5ncHRCb3Quc2F2ZVByb21wdCh0aGF0LnRleHQpOyI7Cn0KCmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKHByb21wdE1lbnVCdXR0b24pOwoKcHJvbXB0TWVudUJ1dHRvbi5mb3JtID0gbnVsbDsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICIgICI7CnByb21wdE1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKcHJvbXB0TWVudUJ1dHRvbi5jb2xvciA9ICIjZjI0NzI3IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjYW5jZWwiOwpwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gbnVsbDsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LmVkaXRQcm9tcHQoKTsiOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7JwD708X4DcZbCmxvYWRQcm9tcHQCBAD708X4DbOgAdoDQGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7CgppZiAoYXV0aEJvdC50YWdzLnByaXZhY3lGZWF0dXJlcy5hbGxvd1B1YmxpY0RhdGEgPT0gZmFsc2UpCnsKICAgIG9zLnRvYXN0KCJub3QgYXV0aG9yaXplZCIpOwoKICAgIHJldHVybjsKfQoKY29uc3QgcHJvbXB0TmFtZSA9ICJncHRfcHJvbXB0XyIgKyB0aGF0Owpjb25zdCBuZXdQcm9tcHQgPSBhd2FpdCBvcy5nZXREYXRhKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJSZWNvcmRLZXksIHByb21wdE5hbWUpOwoKaWYgKCFuZXdQcm9tcHQuc3VjY2VzcykKewogICAgb3MudG9hc3QoIm5vIHByb21wdCBmb3VuZCBieSB0aGF0IG5hbWUiKTsKfQplbHNlCnsKICAgIHRhZ3MucHJvbXB0X2NvcmUgPSBuZXdQcm9tcHQuZGF0YTsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnByb21wdF9iYXNlID09IHRoYXQpCnsKICAgIHJldHVybjsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwD708X4DcZbCnNhdmVQcm9tcHQCBAD708X4DY6kAb4EQGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7CgppZiAoYXV0aEJvdC50YWdzLnByaXZhY3lGZWF0dXJlcy5hbGxvd1B1YmxpY0RhdGEgPT0gZmFsc2UgfHwgYXV0aEJvdC50YWdzLnByaXZhY3lGZWF0dXJlcy5wdWJsaXNoRGF0YSA9PSBmYWxzZSkKewogICAgb3MudG9hc3QoIm5vdCBhdXRob3JpemVkIik7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBhdXRob3IgPSBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdCgpOwpjb25zdCBwcm9tcHROYW1lID0gImdwdF9wcm9tcHRfIiArIHRoYXQ7CmNvbnN0IG5ld1Byb21wdCA9IGF3YWl0IG9zLnJlY29yZERhdGEobGlua3MucmVtZW1iZXIudGFncy5hYlJlY29yZEtleSwgcHJvbXB0TmFtZSwgdGFncy5wcm9tcHRfY29yZSwge3VwZGF0ZVBvbGljeTogW2F1dGhvci5pZF19KTsKCmlmICghbmV3UHJvbXB0LnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJzb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2FpbiIpOwp9CmVsc2UKewogICAgb3MudG9hc3QoInByb21wdCBzYXZlZCBhcyAiICsgdGhhdCk7Cn0KCnRoaXNCb3QuZWRpdFByb21wdCgpOycA+9PF+A3GWwhhYklnbm9yZQIEAPvTxfgNzagBBHRydWUnAPvTxfgNxlsIYWJBY3Rpb24CBAD708X4DdKoAQR0cnVlJwD708X4DcZbBnNlYXJjaAIEAPvTxfgN16gBKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAPvTxfgNxlsFbGVhcm4CBAD708X4Df6oASjwn5SXNjY1N2I4NjUtZTk4My00NDAxLTlmYzktZjU0MThkMThhN2Y3JwD708X4DcZbCm1heF90b2tlbnMCBAD708X4DaWpAQQ1MDAwJwD708X4DcZbD29uQUJJbml0aWFsaXplZAIEAPvTxfgNqqkBWEBpZiAoY29uZmlnQm90LnRhZ3MucHJvbXB0X2Jhc2UpCnsKICAgIHRoaXNCb3QubG9hZFByb21wdChjb25maWdCb3QudGFncy5wcm9tcHRfYmFzZSk7Cn0nAPvTxfgNxlsFYXNrQUICBAD708X4DYOqAc0DQC8vc2hvdXQoImFza0FCIiwge3Byb21wdDogcHJvbXB0LCBzaG91dDogc2hvdXQsIGNvbnRleHQ6IGNvbnRleHR9KTsKCmlmICghdGFncy5ncHRBY3RpdmUpIHJldHVybjsKCmxldCBpbnF1aXJ5ID0gdGhhdC5wcm9tcHQ7CgovL2FiLmxvZygidXNlcjogIiArIGlucXVpcnkpOyAvL25vdCBuZWVkZWQKCmNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgY29udGV4dDogdGhhdC5jb250ZXh0LCBkZWZpbmVkUHJvbXB0OiB0cnVlfSk7CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogIiArIGFuc3dlcik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQm90Q2hhdCh7bWVzc2FnZTogYW5zd2VyfSk7CgppZiAodGhhdC5zaG91dCkKewogICAgc2hvdXQodGhhdC5zaG91dCwgYW5zd2VyKTsKfQoKcmV0dXJuIGFuc3dlcjsnAPvTxfgNxlsFaW5wdXQCBAD708X4DdGtASjwn5SXZjg2MDI4NzgtYzJlZi00OGJkLTg1YTAtOGQ2MzUxZWI0MTIwJwD708X4DcZbC3Byb21wdF9jb3JlAgQA+9PF+A34rQH5D0RFTElWRVJBQkxFOiBSZXR1cm4gb25seSBKYXZhU2NyaXB0IGNvZGUuIERvIG5vdCBpbmNsdWRlIHF1b3RlcywgTWFya2Rvd24gZm9ybWF0dGluZywgb3IgYW55IGV4cGxhbmF0b3J5IHRleHQuIFRoZSBjb2RlIHNob3VsZCBiZSB2YWxpZCBhbmQgZXhlY3V0YWJsZSBpbnNpZGUgdGhlIGBvbkNyZWF0ZWAgZmllbGQgb2YgYSBib3QgaW4gQ2FzdWFsT1MuCgpPQkpFQ1RJVkU6IEJhc2VkIG9uIHRoZSBJTlBVVCwgZ2VuZXJhdGUgSmF2YVNjcmlwdCB0aGF0IHBlcmZvcm1zIHRoZSByZXF1ZXN0ZWQgYmVoYXZpb3IgaW4gQ2FzdWFsT1MuIFRoZSBjb2RlIG11c3Q6CgoxLiBJbXBsZW1lbnQgdGhlIHJlcXVlc3RlZCBhY3Rpb24uCjIuIEFsd2F5cyBpbmNsdWRlIGBhYi5sb2coImEgZGVzY3JpcHRpb24gb2YgdGhlIGV4ZWN1dGlvbiIpYCB0byBpbmRpY2F0ZSB3aGF0IHRoZSBjb2RlIGlzIGRvaW5nLgozLiBBbHdheXMgaW5jbHVkZSBgZGVzdHJveSh0aGlzQm90KTtgIGF0IHRoZSBlbmQgdG8gcmVtb3ZlIHRoZSBib3QgYWZ0ZXIgZXhlY3V0aW9uLgo0LiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1MgYm90IHNjcmlwdGluZyBtZXRob2RzIHN1Y2ggYXMgYGNyZWF0ZSguLi4pYCwgYHNldFRhZyguLi4pYCwgYGdldEJvdHMoLi4uKWAsIGV0Yy4KClJPTEU6IFlvdSBhcmUgUE0gQm90LCBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgd3JpdGVzIEphdmFTY3JpcHQgY29kZSB0byBjb250cm9sIGJvdHMgaW4gW0Nhc3VhbE9TXShodHRwczovL2dpdGh1Yi5jb20vY2FzdWFsLXNpbXVsYXRpb24vY2FzdWFsb3MpLCBhIHdlYi1iYXNlZCBJREUgZm9yIGJvdCBzY3JpcHRpbmcuCgpFWEFNUExFUzoKCkV4YW1wbGUgMTogIApJbnB1dDogV2hhdCBjb2xvciBpcyB0aGUgc2t5PyAgCkFuc3dlcjoKYWIubG9nKCJUaGUgc2t5IGlzIGJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAyOiAgCklucHV0OiBNYWtlIGEgcmVkIGJvdCBhdCBzY2FsZSAyIHRoYXQgdG9hc3RzIGhlbGxvIHdoZW4gY2xpY2tlZC4gIApBbnN3ZXI6CmFiLmxvZygiTWFkZSBhIHJlZCBib3QiKTsgIApjcmVhdGUoe2hvbWU6IHRydWUsIGhvbWVYOiAwLCBob21lWTogMCwgY29sb3I6ICJyZWQiLCBvbkNsaWNrOiAiQCBvcy50b2FzdCgnaGVsbG8nKTsiLCBzY2FsZTogMiwgY3JlYXRvcjogbnVsbH0pOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDM6ICAKSW5wdXQ6IE1ha2UgYSBib3QgdGhhdCBtYWtlcyBhIGNvcHkgb2YgaXRzZWxmIG5leHQgdG8gaXQuICAKQW5zd2VyOgphYi5sb2coIk1hZGUgYSBjb3B5IGJvdCIpOyAgCmNyZWF0ZSh7aG9tZTogdHJ1ZSwgb25DbGljazogIkAgY3JlYXRlKHRoaXNCb3QsIHtob21lWDogdGFncy5ob21lWCArIDEsIGNyZWF0b3I6IG51bGx9KSJ9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA0OiAgCklucHV0OiBNYWtlIGFsbCByZWQgYm90cyBibHVlLiAgCkFuc3dlcjoKYWIubG9nKCJNYWRlIHJlZCBib3RzIGJsdWUiKTsgIApzZXRUYWcoZ2V0Qm90cygiY29sb3IiLCAicmVkIiksICJjb2xvciIsICJibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNTogIApJbnB1dDogTWFrZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvLiAgCkFuc3dlcjoKYWIubG9nKCJNYWRlIGEgYmx1ZSBib3QgdGhhdCBjYW4gY3JlYXRlIGFub3RoZXIgYmx1ZSBib3QgdGhhdCBoYXMgYW4gb25Qb2ludGVyRW50ZXIgdGhhdCB0b2FzdHMgaGVsbG8iKTsgIApjcmVhdGUoeyAgCiAgaG9tZTogdHJ1ZSwgIAogIGNvbG9yOiAiYmx1ZSIsICAKICBvbkNsaWNrOiAiQCBjcmVhdGUodGhpc0JvdCwge29uQ2xpY2s6IG51bGwsIG9uUG9pbnRlckVudGVyOiB0YWdzLm9uUG9pbnRlckVudGVyU2NyaXB0fSkiLCAgCiAgb25Qb2ludGVyRW50ZXJTY3JpcHQ6ICJAIG9zLnRvYXN0KCdoZWxsbycpOyIsICAKICBjcmVhdG9yOiBudWxsICAKfSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCklOUFVUOgonAPvTxfgNxlsLcHJvbXB0X2dyaWQCBAD708X4DfK9AZwUREVMSVZFUkFCTEU6IFJldHVybiBvbmx5IEphdmFTY3JpcHQgY29kZS4gRG8gbm90IGluY2x1ZGUgcXVvdGVzLCBNYXJrZG93biBmb3JtYXR0aW5nLCBvciBhbnkgZXhwbGFuYXRvcnkgdGV4dC4gVGhlIGNvZGUgc2hvdWxkIGJlIHZhbGlkIGFuZCBleGVjdXRhYmxlIGluc2lkZSB0aGUgYG9uQ3JlYXRlYCBmaWVsZCBvZiBhIGJvdCBpbiBDYXN1YWxPUy4KCk9CSkVDVElWRTogQmFzZWQgb24gdGhlIElOUFVUIGFuZCBwcm92aWRlZCBQT1NJVElPTiBkYXRhLCBnZW5lcmF0ZSBKYXZhU2NyaXB0IHRoYXQgcGVyZm9ybXMgdGhlIHJlcXVlc3RlZCBiZWhhdmlvciBpbiBDYXN1YWxPUy4gVGhlIGNvZGUgbXVzdDoKCjEuIEltcGxlbWVudCB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KMi4gQWx3YXlzIGluY2x1ZGUgYGFiLmxvZygiYSBkZXNjcmlwdGlvbiBvZiB0aGUgZXhlY3V0aW9uIilgIHRvIGluZGljYXRlIHdoYXQgdGhlIGNvZGUgaXMgZG9pbmcuCjMuIEFsd2F5cyBpbmNsdWRlIGBkZXN0cm95KHRoaXNCb3QpO2AgYXQgdGhlIGVuZCB0byByZW1vdmUgdGhlIGJvdCBhZnRlciBleGVjdXRpb24uCjQuIFVzZSB0aGUgUE9TSVRJT04gZGF0YSB3aGVuIHBsYWNpbmcgYm90cyBvciBkZXRlcm1pbmluZyBzcGF0aWFsIGJlaGF2aW9yIChlLmcuLCBgaG9tZVhgLCBgaG9tZVlgLCBvZmZzZXRzLCBwbGFjZW1lbnQgbG9naWMpLgo1LiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1MgYm90IHNjcmlwdGluZyBtZXRob2RzIHN1Y2ggYXMgYGNyZWF0ZSguLi4pYCwgYHNldFRhZyguLi4pYCwgYGdldEJvdHMoLi4uKWAsIGV0Yy4KClBPU0lUSU9OIERBVEE6Ci0gWW91IHdpbGwgcmVjZWl2ZSBjb250ZXh0IHN1Y2ggYXMgYHBvc2l0aW9uID0geyB4OiA8bnVtYmVyPiwgeTogPG51bWJlcj4gfWAuCi0gVXNlIHRoaXMgZGF0YSB0byBkZXRlcm1pbmUgYXBwcm9wcmlhdGUgYGhvbWVYYCwgYGhvbWVZYCwgb3IgcmVsYXRpdmUgcGxhY2VtZW50cyBmb3IgYW55IGNyZWF0ZWQgYm90cy4KClJPTEU6IFlvdSBhcmUgUE0gQm90LCBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgd3JpdGVzIEphdmFTY3JpcHQgY29kZSB0byBjb250cm9sIGJvdHMgaW4gW0Nhc3VhbE9TXShodHRwczovL2dpdGh1Yi5jb20vY2FzdWFsLXNpbXVsYXRpb24vY2FzdWFsb3MpLCBhIHdlYi1iYXNlZCBJREUgZm9yIGJvdCBzY3JpcHRpbmcuCgpFWEFNUExFUzoKCkV4YW1wbGUgMTogIApJbnB1dDogV2hhdCBjb2xvciBpcyB0aGUgc2t5PyAgClBvc2l0aW9uOiB7IHg6IDUsIHk6IDUgfSAgCkFuc3dlcjogIAphYi5sb2coIlRoZSBza3kgaXMgYmx1ZSIpOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDI6ICAKSW5wdXQ6IE1ha2UgYSByZWQgYm90IGF0IHNjYWxlIDIgdGhhdCB0b2FzdHMgaGVsbG8gd2hlbiBjbGlja2VkLiAgClBvc2l0aW9uOiB7IHg6IDEsIHk6IDIgfSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSByZWQgYm90Iik7ICAKY3JlYXRlKHtob21lOiB0cnVlLCBob21lWDogMSwgaG9tZVk6IDIsIGNvbG9yOiAicmVkIiwgb25DbGljazogIkAgb3MudG9hc3QoJ2hlbGxvJyk7Iiwgc2NhbGU6IDIsIGNyZWF0b3I6IG51bGx9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAzOiAgCklucHV0OiBNYWtlIGEgYm90IHRoYXQgbWFrZXMgYSBjb3B5IG9mIGl0c2VsZiBuZXh0IHRvIGl0LiAgClBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSBjb3B5IGJvdCIpOyAgCmNyZWF0ZSh7aG9tZTogdHJ1ZSwgaG9tZVg6IDAsIGhvbWVZOiAwLCBvbkNsaWNrOiAiQCBjcmVhdGUodGhpc0JvdCwge2hvbWVYOiB0YWdzLmhvbWVYICsgMSwgY3JlYXRvcjogbnVsbH0pIn0pOyAgCmRlc3Ryb3kodGhpc0JvdCk7CgpFeGFtcGxlIDQ6ICAKSW5wdXQ6IE1ha2UgYWxsIHJlZCBib3RzIGJsdWUuICAKUG9zaXRpb246IHsgeDogMTAsIHk6IC0zIH0gIApBbnN3ZXI6ICAKYWIubG9nKCJNYWRlIHJlZCBib3RzIGJsdWUiKTsgIApzZXRUYWcoZ2V0Qm90cygiY29sb3IiLCAicmVkIiksICJjb2xvciIsICJibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNTogIApJbnB1dDogTWFrZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvLiAgClBvc2l0aW9uOiB7IHg6IDMsIHk6IDMgfSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSBibHVlIGJvdCB0aGF0IGNhbiBjcmVhdGUgYW5vdGhlciBibHVlIGJvdCB0aGF0IGhhcyBhbiBvblBvaW50ZXJFbnRlciB0aGF0IHRvYXN0cyBoZWxsbyIpOyAgCmNyZWF0ZSh7ICAKICBob21lOiB0cnVlLCAgCiAgaG9tZVg6IDMsICAKICBob21lWTogMywgIAogIGNvbG9yOiAiYmx1ZSIsICAKICBvbkNsaWNrOiAiQCBjcmVhdGUodGhpc0JvdCwge29uQ2xpY2s6IG51bGwsIG9uUG9pbnRlckVudGVyOiB0YWdzLm9uUG9pbnRlckVudGVyU2NyaXB0fSkiLCAgCiAgb25Qb2ludGVyRW50ZXJTY3JpcHQ6ICJAIG9zLnRvYXN0KCdoZWxsbycpOyIsICAKICBjcmVhdG9yOiBudWxsICAKfSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCklOUFVUOgonAPvTxfgNxlsKcHJvbXB0X2JvdAIEAPvTxfgNj9IB0hdERUxJVkVSQUJMRTogUmV0dXJuIG9ubHkgSmF2YVNjcmlwdCBjb2RlLiBEbyBub3QgaW5jbHVkZSBxdW90ZXMsIE1hcmtkb3duIGZvcm1hdHRpbmcsIG9yIGFueSBleHBsYW5hdG9yeSB0ZXh0LiBUaGUgY29kZSBzaG91bGQgYmUgdmFsaWQgYW5kIGV4ZWN1dGFibGUgaW5zaWRlIHRoZSBgb25DcmVhdGVgIGZpZWxkIG9mIGEgYm90IGluIENhc3VhbE9TLgoKT0JKRUNUSVZFOiBCYXNlZCBvbiB0aGUgSU5QVVQgYW5kIHRoZSBwcm92aWRlZCBUQVJHRVRfQk9UX0lELCBnZW5lcmF0ZSBKYXZhU2NyaXB0IHRoYXQgcGVyZm9ybXMgdGhlIHJlcXVlc3RlZCBiZWhhdmlvciBpbiBDYXN1YWxPUy4gVGhlIGNvZGUgbXVzdDoKCjEuIEltcGxlbWVudCB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KMi4gQWx3YXlzIGluY2x1ZGUgYGFiLmxvZygiYSBkZXNjcmlwdGlvbiBvZiB0aGUgZXhlY3V0aW9uIilgIHRvIGRlc2NyaWJlIHdoYXQgdGhlIGNvZGUgZG9lcy4KMy4gQWx3YXlzIGluY2x1ZGUgYGRlc3Ryb3kodGhpc0JvdCk7YCBhdCB0aGUgZW5kIHRvIHJlbW92ZSB0aGUgYm90IGFmdGVyIGV4ZWN1dGlvbi4KNC4gVXNlIHRoZSBgVEFSR0VUX0JPVF9JRGAgYXMgY29udGV4dCBmb3IgbG9jYXRpb24gb3IgYmVoYXZpb3Igd2hlbiBhcHByb3ByaWF0ZS4gRm9yIGV4YW1wbGUsIGlmIGEgbmV3IGJvdCBpcyBjcmVhdGVkLCB5b3UgbWF5IHBvc2l0aW9uIGl0IGJhc2VkIG9uIHRoZSB0YXJnZXQgYm90J3MgYGhvbWVYYCBhbmQgYGhvbWVZYCB0YWdzLgo1LiBVc2Ugc3RhbmRhcmQgQ2FzdWFsT1Mgc2NyaXB0aW5nIG1ldGhvZHMgc3VjaCBhcyBgY3JlYXRlKC4uLilgLCBgc2V0VGFnKC4uLilgLCBgZ2V0Qm90KC4uLilgLCBgZ2V0Qm90cyguLi4pYCwgZXRjLgoKQk9UIENPTlRFWFQ6Ci0gWW91IHdpbGwgcmVjZWl2ZSBgVEFSR0VUX0JPVF9JRCA9ICI8Ym90SWQ+ImAuCi0gWW91IG11c3QgdXNlIGBnZXRCb3QoImlkIiwgIjxib3RJZD4iKWAgdG8gcmV0cmlldmUgdGhlIGJvdCBhbmQgYWNjZXNzIGl0cyB0YWdzIChlLmcuLCBgZ2V0Qm90KCJpZCIsIFRBUkdFVF9CT1RfSUQpLnRhZ3MuaG9tZVhgKS4KLSBZb3UgY2FuIHBvc2l0aW9uIG5ldyBib3RzIG5lYXIgdGhlIHRhcmdldCBib3QgYnkgdXNpbmcgaXRzIGBob21lWGAsIGBob21lWWAsIG9yIG90aGVyIHRhZyBkYXRhLgoKUk9MRTogWW91IGFyZSBQTSBCb3QsIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCB3cml0ZXMgSmF2YVNjcmlwdCBjb2RlIHRvIGNvbnRyb2wgYm90cyBpbiBbQ2FzdWFsT1NdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbGFuLWFpL2Nhc3VhbG9zKSwgYSB3ZWItYmFzZWQgSURFIGZvciBib3Qgc2NyaXB0aW5nLgoKRVhBTVBMRVM6CgpFeGFtcGxlIDE6ICAKSW5wdXQ6IFdoYXQgY29sb3IgaXMgdGhlIHNreT8gIApUQVJHRVRfQk9UX0lEOiAic2t5XzEyMyIgIApBbnN3ZXI6ICAKYWIubG9nKCJUaGUgc2t5IGlzIGJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAyOiAgCklucHV0OiBNYWtlIGEgcmVkIGJvdCBhdCBzY2FsZSAyIHRoYXQgdG9hc3RzIGhlbGxvIHdoZW4gY2xpY2tlZC4gIApUQVJHRVRfQk9UX0lEOiAiYm90XzAwMSIgIApBbnN3ZXI6ICAKYWIubG9nKCJNYWRlIGEgcmVkIGJvdCIpOyAgCmxldCB0YXJnZXQgPSBnZXRCb3QoImlkIiwgImJvdF8wMDEiKTsgIApjcmVhdGUoeyAgCiAgaG9tZTogdHJ1ZSwgIAogIGhvbWVYOiB0YXJnZXQudGFncy5ob21lWCwgIAogIGhvbWVZOiB0YXJnZXQudGFncy5ob21lWSwgIAogIGNvbG9yOiAicmVkIiwgIAogIG9uQ2xpY2s6ICJAIG9zLnRvYXN0KCdoZWxsbycpOyIsICAKICBzY2FsZTogMiwgIAogIGNyZWF0b3I6IG51bGwgIAp9KTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAzOiAgCklucHV0OiBNYWtlIGEgYm90IHRoYXQgbWFrZXMgYSBjb3B5IG9mIGl0c2VsZiBuZXh0IHRvIGl0LiAgClRBUkdFVF9CT1RfSUQ6ICJib3RfY29waWVyIiAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSBjb3B5IGJvdCIpOyAgCmxldCB0YXJnZXQgPSBnZXRCb3QoImlkIiwgImJvdF9jb3BpZXIiKTsgIApjcmVhdGUoeyAgCiAgaG9tZTogdHJ1ZSwgIAogIGhvbWVYOiB0YXJnZXQudGFncy5ob21lWCwgIAogIGhvbWVZOiB0YXJnZXQudGFncy5ob21lWSwgIAogIG9uQ2xpY2s6ICJAIGNyZWF0ZSh0aGlzQm90LCB7aG9tZVg6IHRhZ3MuaG9tZVggKyAxLCBjcmVhdG9yOiBudWxsfSkiICAKfSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNDogIApJbnB1dDogTWFrZSBhbGwgcmVkIGJvdHMgYmx1ZS4gIApUQVJHRVRfQk9UX0lEOiAicmVmX2JvdCIgIApBbnN3ZXI6ICAKYWIubG9nKCJNYWRlIHJlZCBib3RzIGJsdWUiKTsgIApzZXRUYWcoZ2V0Qm90cygiY29sb3IiLCAicmVkIiksICJjb2xvciIsICJibHVlIik7ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNTogIApJbnB1dDogTWFrZSBhIGJsdWUgYm90IHRoYXQgY2FuIGNyZWF0ZSBhbm90aGVyIGJsdWUgYm90IHRoYXQgaGFzIGFuIG9uUG9pbnRlckVudGVyIHRoYXQgdG9hc3RzIGhlbGxvLiAgClRBUkdFVF9CT1RfSUQ6ICJib3RfcGFyZW50IiAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYSBibHVlIGJvdCB0aGF0IGNhbiBjcmVhdGUgYW5vdGhlciBibHVlIGJvdCB0aGF0IGhhcyBhbiBvblBvaW50ZXJFbnRlciB0aGF0IHRvYXN0cyBoZWxsbyIpOyAgCmxldCB0YXJnZXQgPSBnZXRCb3QoImlkIiwgImJvdF9wYXJlbnQiKTsgIApjcmVhdGUoeyAgCiAgaG9tZTogdHJ1ZSwgIAogIGhvbWVYOiB0YXJnZXQudGFncy5ob21lWCwgIAogIGhvbWVZOiB0YXJnZXQudGFncy5ob21lWSwgIAogIGNvbG9yOiAiYmx1ZSIsICAKICBvbkNsaWNrOiAiQCBjcmVhdGUodGhpc0JvdCwge29uQ2xpY2s6IG51bGwsIG9uUG9pbnRlckVudGVyOiB0YWdzLm9uUG9pbnRlckVudGVyU2NyaXB0fSkiLCAgCiAgb25Qb2ludGVyRW50ZXJTY3JpcHQ6ICJAIG9zLnRvYXN0KCdoZWxsbycpOyIsICAKICBjcmVhdG9yOiBudWxsICAKfSk7ICAKZGVzdHJveSh0aGlzQm90KTsKCklOUFVUOiAgCicA+9PF+A3GWw9hYkJvdE1lbnVBY3Rpb24CBAD708X4DeLpAQ5ALy9wbGFjZWhvbGRlcicA+9PF+A3GWxNhYkJvdE1lbnVPbkdlbmVyYXRlAgQA+9PF+A3x6QHtA0B0YWdzLnRhcmdldEJvdCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCb3RGb2N1czsKdGFncy5vblN1Ym1pdCA9IGBAIGxpbmtzLmJhc2VTa2lsbC5hYkNvcmVNZW51QWN0aW9uKHttZXNzYWdlOiB0aGF0LnRleHQsIG1lbnU6ICJib3QiLCBib3Q6IGxpbmtzLnRhcmdldEJvdH0pO2A7CnRhZ3MuZm9ybSA9ICJpbnB1dCI7CgppZiAoIWF1dGhCb3QpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHk7Cn0nAPvTxfgNxlsNaXRlcmF0ZVByb21wdAIEAPvTxfgN3+0BggZAY29uc3QgaW5xdWlyeSA9IGBQbGVhc2UgYXVnbWVudCB0aGUgZm9sbG93aW5nIFBST01QVCBieSBtYWtpbmcgaXQgbW9yZSBlYXNpbHkgcmVhZCBieSBHUFQuICBQbGVhc2UgZm9jdXMgb24gdGhlIGZ1bmN0aW9uYWxpdHkgaW5zaWRlIG9mIGl0OgoKMS4gVGhlIHByb21wdCBtdXN0IG1haW50YWluIGFsbCBvZiB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGUgb3JpZ2luYWwKCjIuIFRoZSBwcm9tcHQgc2hvdWxkIGtlZXAgaW4gbWluZCB0aGF0IHdlIGFyZSB3b3JraW5nIGluIGEgM0QgZW52aXJvbm1lbnQKCjMuIFRoZSByZXBseSBzaG91bGQgb25seSBiZSB0aGUgbmV3IHByb21wdAoKNC4gVGhlIGZ1bmN0aW9ucyBzaG91bGQgYmUgbGltaXRlZCB0byB0aG9zZSBmb3VuZCBpbiB0aGUgb3JpZ2luYWwgcHJvbXB0CgpQUk9NUFQ6YDsKY29uc3QgcHJvbXB0ID0gdGFnc1sicHJvbXB0XyIgKyB0aGF0XTsKY29uc3QgaXRlcmF0aW9uID0gYXdhaXQgdGhpc0JvdC5zdWJtaXRSZXF1ZXN0R1BUKHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgbW9kZWw6ICJncHQtNC0xMTA2LXByZXZpZXcifSk7CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogIiArIGl0ZXJhdGlvbik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQm90Q2hhdCh7bWVzc2FnZTogbmV3QW5zd2VyfSk7Cgp0YWdzWyJwcm9tcHRfIiArIHRoYXRdID0gaXRlcmF0aW9uOwp0YWdzWyJwcm9tcHRfIiArIHRoYXQgKyAiX3ZlcnNpb24iXSsrOwoKcmV0dXJuOycA+9PF+A3GWxJhYkJvdE1lbnVTb3J0T3JkZXICBAD708X4DeLzAQMxMDInAPvTxfgNxlsSY29udmVyc2F0aW9uUHJvbXB0AgQA+9PF+A3m8wHgCllvdSBhcmUgYW4gYWdlbnQgdGFza2VkIHdpdGggZGV0ZXJtaW5pbmcgaW50ZW50aW9uIGJhc2VkIG9uIGEgc3RhdGVtZW50IGEgdXNlciBnaXZlcyB5b3UuCgpQbGVhc2UgbG9vayBhdCB0aGUgZm9sbG93aW5nIHN0YXRlbWVudCBhbmQgZGV0ZXJtaW5lIGlmIGl0IGlzIGEgQ29udmVyc2F0aW9uIFJlcXVlc3Qgb3IgQnVpbGQgUmVxdWVzdC4KCkJ1aWxkIFJlcXVlc3RzOiAgU3BlY2lmaWMgcmVxdWVzdCBmb3IgdGhlIHN5c3RlbSB0byBidWlsZCwgbWFrZSBvciBwcm92aWRlIGNvZGUgZm9yIHNvbWV0aGluZyBzcGVjaWZpYy4KVGhlc2UgcmVxdWVzdHMgd2lsbCBnZW5lcmFsbHkgYmUgaW4gdGhlIGZvcm0gb2YgY29tbWFuZHMgb3IgcmVxdWVzdHMgZnJvbSB0aGUgc3lzdGVtLgpFeGFtcGxlIEJ1aWxkIFJlcXVlc3RzOiAKTWFrZSBhIHllbGxvdyBiYWxsLiAKUGxlYXNlIGNyZWF0ZSBhIGJpZyBwdXJwbGUgY3ViZS4gIApXcml0ZSB0aGUgY29kZSBmb3IgYSBib3QgdGhhdCBjaGFuZ2VzIGNvbG9ycyB3aGVuIGNsaWNrZWQuCgpDb252ZXJzYXRpb24gUmVxdWVzdHM6ICBBbnkgcmVxdWVzdCB0aGF0IGlzIG5vdCBhIEJ1aWxkIFJlcXVlc3Qgd2lsbCBkZWZhdWx0IHRvIGJlaW5nIGEgQ29udmVyc2F0aW9uLgpFdmVuIGlmIHRoZSByZXF1ZXN0cyBkaXNjdXNzZXMgbWFraW5nIGJ1aWxkaW5nIG9yIGNvZGluZyB0aGluZ3MgaXQgaXMgc3RpbGwgQ29udmVyc2F0aW9uIGlmIGl0IGlzIG5vdCB3b3JkZWQgYXMgYSBkaXJlY3QgcmVxdWVzdC4KRXhhbXBsZSBDb252ZXJzYXRpb24gUmVxdWVzdHM6CkNvdWxkIEkgYnVpbGQgYSBib3QgdGhhdCBnZXRzIGJpZ2dlciB3aGVuIGNsaWNrZWQ/CklzIGl0IHBvc3NpYmxlIHRvIGNvZGUgYm90cyB0aGF0IG1vdmU/CkNhbiBteSBzb24gbWFrZSBhIHllbGxvdyBiYWxsIGluIENhc3VhbE9TPwoKRGV0ZXJtaW5pbmcgSW50ZW50OiAgSWYgY29uZGl0aW9ucyBmb3IgQnVpbGQgUmVxdWVzdCBhcmUgc3BlY2lmaWNhbGx5IG1ldCB0aGVuIGl0J3MgYSBCdWlsZCBSZXF1ZXN0LiBFdmVyeXRoaW5nIGVsc2UgaXMgQ29udmVyc2F0aW9uLgoKRGV0ZXJtaW5lIHRoZSBpbnRlbnRpb24gb2YgdGhlIHN0YXRlbWVudCBhbmQgcmV0dXJuIHRydWUgaWYgaXQncyBhIEJ1aWxkIFJlcXVlc3QuCgpSVUxFUzoKMS4gUmV0dXJuIG9ubHkgdGhlIHdvcmQgdHJ1ZSBpZiB5b3UndmUgZGV0ZXJtaW5lZCBpdCdzIGEgQnVpbGQgUmVxdWVzdC4KMi4gUmV0dXJuIG9ubHkgZmFsc2UgaWYgdGhlIHN0YXRlbWVudCBpcyBhIENvbnZlcnNhdGlvbiBSZXF1ZXN0LgozLiBBbnN3ZXJpbmcgd2l0aCBhbnl0aGluZyBvdGhlciB0aGFuIHRydWUgb3IgZmFsc2Ugd2lsbCBicmVhayB0aGUgZXhwZXJpZW5jZS4KClNUQVRFTUVOVDoKJwD708X4DcZbF2FiTXVsdGlwbGVCb3RNZW51QWN0aW9uAgQA+9PF+A3H/gEOQC8vcGxhY2Vob2xkZXInAPvTxfgNxlsbYWJNdWx0aXBsZUJvdE1lbnVPbkdlbmVyYXRlAgQA+9PF+A3W/gGbBUBjb25zdCBhbGxUYXJnZXRCb3RzID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzOwpjb25zdCB0YXJnZXRBcnJheSA9IFtdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxUYXJnZXRCb3RzLmxlbmd0aDsgaSsrKQp7CiAgICB0YXJnZXRBcnJheS5wdXNoKGFsbFRhcmdldEJvdHNbaV0uaWQpOwp9Cgp0YWdzLnRhcmdldEJvdHMgPSB0YXJnZXRBcnJheTsKdGFncy5vblN1Ym1pdCA9IGBAIGxpbmtzLmJhc2VTa2lsbC5hYkNvcmVNZW51QWN0aW9uKHttZXNzYWdlOiB0aGF0LnRleHQsIG1lbnU6ICJtdWx0aXBsZUJvdCIsIGJvdHM6IHRhZ3MudGFyZ2V0Qm90c30pO2A7CnRhZ3MuZm9ybSA9ICJpbnB1dCI7CgppZiAoIWF1dGhCb3QpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIiAobGltaXRlZCkiOwp9CmVsc2UKewogICAgdGFncy5sYWJlbCA9ICJhc2sgIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHk7Cn0nAPvTxfgNxlsScHJvbXB0X211bHRpcGxlQm90AgQA+9PF+A3ygwLGFkRFTElWRVJBQkxFOiBSZXR1cm4gb25seSBKYXZhU2NyaXB0IGNvZGUuIERvIG5vdCBpbmNsdWRlIHF1b3RlcywgTWFya2Rvd24gZm9ybWF0dGluZywgb3IgYW55IGV4cGxhbmF0b3J5IHRleHQuIFRoZSBjb2RlIHNob3VsZCBiZSB2YWxpZCBhbmQgZXhlY3V0YWJsZSBpbnNpZGUgdGhlIGBvbkNyZWF0ZWAgZmllbGQgb2YgYSBib3QgaW4gQ2FzdWFsT1MuCgpPQkpFQ1RJVkU6IEJhc2VkIG9uIHRoZSBJTlBVVCBhbmQgdGhlIHByb3ZpZGVkIFRBUkdFVF9CT1RfSURTLCBnZW5lcmF0ZSBKYXZhU2NyaXB0IHRoYXQgcGVyZm9ybXMgdGhlIHJlcXVlc3RlZCBiZWhhdmlvciBpbiBDYXN1YWxPUy4gVGhlIGNvZGUgbXVzdDoKCjEuIEltcGxlbWVudCB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KMi4gQWx3YXlzIGluY2x1ZGUgYGFiLmxvZygiYSBkZXNjcmlwdGlvbiBvZiB0aGUgZXhlY3V0aW9uIilgIHRvIGRlc2NyaWJlIHdoYXQgdGhlIGNvZGUgZG9lcy4KMy4gQWx3YXlzIGluY2x1ZGUgYGRlc3Ryb3kodGhpc0JvdCk7YCBhdCB0aGUgZW5kIHRvIHJlbW92ZSB0aGUgYm90IGFmdGVyIGV4ZWN1dGlvbi4KNC4gVXNlIHRoZSBhcnJheSBvZiBgVEFSR0VUX0JPVF9JRFNgIGFzIGNvbnRleHQgZm9yIGxvY2F0aW9uIG9yIGJlaGF2aW9yIHdoZW4gYXBwcm9wcmlhdGUuIEZvciBleGFtcGxlOgogICAtIFdoZW4gY3JlYXRpbmcgYm90cywgdXNlIGVhY2ggdGFyZ2V0J3MgYGhvbWVYYCBhbmQgYGhvbWVZYCBmb3IgcGxhY2VtZW50LgogICAtIFdoZW4gbW9kaWZ5aW5nIGJvdHMsIGl0ZXJhdGUgb3ZlciBlYWNoIHRhcmdldCB1c2luZyBgZ2V0Qm90KCJpZCIsIDxpZD4pYC4KNS4gVXNlIHN0YW5kYXJkIENhc3VhbE9TIHNjcmlwdGluZyBtZXRob2RzIHN1Y2ggYXMgYGNyZWF0ZSguLi4pYCwgYHNldFRhZyguLi4pYCwgYGdldEJvdCguLi4pYCwgYGdldEJvdHMoLi4uKWAsIGV0Yy4KCkJPVCBDT05URVhUOgotIFlvdSB3aWxsIHJlY2VpdmUgYFRBUkdFVF9CT1RfSURTID0gWyJib3RfMSIsICJib3RfMiIsIC4uLl1gLgotIFVzZSBgZ2V0Qm90KCJpZCIsIDxpZD4pYCB0byBhY2Nlc3MgaW5kaXZpZHVhbCBib3RzIGFuZCB0aGVpciB0YWdzLgotIFBlcmZvcm0gbW9kaWZpY2F0aW9ucyBvciBsb2dpYyBmb3IgZWFjaCBib3QgaW4gdGhlIGFycmF5LgoKUk9MRTogWW91IGFyZSBQTSBCb3QsIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCB3cml0ZXMgSmF2YVNjcmlwdCBjb2RlIHRvIGNvbnRyb2wgYm90cyBpbiBbQ2FzdWFsT1NdKGh0dHBzOi8vZ2l0aHViLmNvbS9hbGFuLWFpL2Nhc3VhbG9zKSwgYSB3ZWItYmFzZWQgSURFIGZvciBib3Qgc2NyaXB0aW5nLgoKRVhBTVBMRVM6CgpFeGFtcGxlIDE6ICAKSW5wdXQ6IFdoYXQgY29sb3IgaXMgdGhlIHNreT8gIApUQVJHRVRfQk9UX0lEUzogWyJza3lfMTIzIl0gIApBbnN3ZXI6ICAKYWIubG9nKCJUaGUgc2t5IGlzIGJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSAyOiAgCklucHV0OiBNYWtlIGEgcmVkIGJvdCBuZXh0IHRvIGVhY2ggb2YgdGhlc2UgYm90cy4gIApUQVJHRVRfQk9UX0lEUzogWyJhIiwgImIiLCAiYyJdICAKQW5zd2VyOiAgCmFiLmxvZygiTWFkZSByZWQgYm90cyBuZXh0IHRvIGVhY2ggdGFyZ2V0Iik7ICAKZm9yIChsZXQgaWQgb2YgWyJhIiwgImIiLCAiYyJdKSB7ICAKICBsZXQgYm90ID0gZ2V0Qm90KCJpZCIsIGlkKTsgIAogIGNyZWF0ZSh7ICAKICAgIGhvbWU6IHRydWUsICAKICAgIGhvbWVYOiBib3QudGFncy5ob21lWCArIDEsICAKICAgIGhvbWVZOiBib3QudGFncy5ob21lWSwgIAogICAgY29sb3I6ICJyZWQiLCAgCiAgICBjcmVhdG9yOiBudWxsICAKICB9KTsgIAp9ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgMzogIApJbnB1dDogVG9hc3QgaGVsbG8gd2hlbiBhbnkgb2YgdGhlc2UgYm90cyBhcmUgY2xpY2tlZC4gIApUQVJHRVRfQk9UX0lEUzogWyJ0YXJnZXQxIiwgInRhcmdldDIiXSAgCkFuc3dlcjogIAphYi5sb2coIlNldCB1cCB0b2FzdC1vbi1jbGljayBiZWhhdmlvciIpOyAgCmZvciAobGV0IGlkIG9mIFsidGFyZ2V0MSIsICJ0YXJnZXQyIl0pIHsgIAogIGxldCBib3QgPSBnZXRCb3QoImlkIiwgaWQpOyAgCiAgc2V0VGFnKGJvdCwgIm9uQ2xpY2siLCAiQCBvcy50b2FzdCgnaGVsbG8nKTsiKTsgIAp9ICAKZGVzdHJveSh0aGlzQm90KTsKCkV4YW1wbGUgNDogIApJbnB1dDogTWFrZSBhbGwgcmVkIGJvdHMgYmx1ZS4gIApUQVJHRVRfQk9UX0lEUzogWyJzb21lX2lkIiwgImRvZXNudF9tYXR0ZXIiXSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgcmVkIGJvdHMgYmx1ZSIpOyAgCnNldFRhZyhnZXRCb3RzKCJjb2xvciIsICJyZWQiKSwgImNvbG9yIiwgImJsdWUiKTsgIApkZXN0cm95KHRoaXNCb3QpOwoKRXhhbXBsZSA1OiAgCklucHV0OiBNYWtlIGEgYmx1ZSBib3QgYWJvdmUgZWFjaCBvZiB0aGUgZ2l2ZW4gYm90cyB0aGF0IHRvYXN0cyBoZWxsbyB3aGVuIGhvdmVyZWQuICAKVEFSR0VUX0JPVF9JRFM6IFsiYjEiLCAiYjIiLCAiYjMiXSAgCkFuc3dlcjogIAphYi5sb2coIk1hZGUgYmx1ZSBib3RzIGFib3ZlIGVhY2ggdGFyZ2V0IHRoYXQgdG9hc3Qgb24gcG9pbnRlciBlbnRlciIpOyAgCmZvciAobGV0IGlkIG9mIFsiYjEiLCAiYjIiLCAiYjMiXSkgeyAgCiAgbGV0IGJvdCA9IGdldEJvdCgiaWQiLCBpZCk7ICAKICBjcmVhdGUoeyAgCiAgICBob21lOiB0cnVlLCAgCiAgICBob21lWDogYm90LnRhZ3MuaG9tZVgsICAKICAgIGhvbWVZOiBib3QudGFncy5ob21lWSArIDEsICAKICAgIGNvbG9yOiAiYmx1ZSIsICAKICAgIG9uUG9pbnRlckVudGVyOiAiQCBvcy50b2FzdCgnaGVsbG8nKTsiLCAgCiAgICBjcmVhdG9yOiBudWxsICAKICB9KTsgIAp9ICAKZGVzdHJveSh0aGlzQm90KTsKCklOUFVUOiAgCicA+9PF+A3GWxphYk11bHRpcGxlQm90TWVudVNvcnRPcmRlcgIEAPvTxfgNuZoCAzEwMScA+9PF+A3GWwlhYlZlcnNpb24CBAD708X4Db2aAhY5LjY2LjEuMS4xNzUwOTU0MzUwMDA3JwD708X4DcZbDmNoYW5uZWxfY29uZmlnAgQA+9PF+A3UmgKtD0Bjb25zdCBjb25maWd1cmF0aW9uRGF0YSA9IGF3YWl0IG9zLmdldERhdGEodGhhdC5kYXRhLnN0dWRpb0lELCB0aGF0LmRhdGEucGF0dGVybklEKTsKCmxldCBuZXdEZXBsb3ltZW50ID0gZmFsc2U7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5jaGFubmVsQ29uZmlndXJlZCkKewogICAgcmV0dXJuOwp9CgpsaW5rcy5yZW1lbWJlci50YWdzLmNoYW5uZWxDb25maWd1cmVkID0gdHJ1ZTsKCmlmIChjb25maWd1cmF0aW9uRGF0YS5kYXRhLmJpb3MpCnsKICAgIGNvbnN0IHRhcmdldEJpb3MgPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmJpb3M7CgogICAgc3dpdGNoICh0YXJnZXRCaW9zKSAKICAgIHsKICAgICAgICBjYXNlICJsb2NhbCI6CiAgICAgICAgICAgIGlmIChjb25maWdCb3QudGFncy5zdGF0aWNJbnN0ID09IG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG5ld0RlcGxveW1lbnQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJzdHVkaW8iOgogICAgICAgICAgICBpZiAoY29uZmlnQm90LnRhZ3Mub3duZXIgPT0gbnVsbCB8fCBjb25maWdCb3QudGFncy5vd25lciA9PSAicHVibGljIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmV3RGVwbG95bWVudCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInNoYXJlZCI6CiAgICAgICAgICAgIGlmIChjb25maWdCb3QudGFncy5vd25lciAhPSAicHVibGljIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmV3RGVwbG95bWVudCA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgfQp9CgppZiAoY29uZmlndXJhdGlvbkRhdGEuZGF0YS5lZ2cpCnsKICAgIGNvbnN0IHRhcmdldFBhdHRlcm4gPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmVnZy5wYXR0ZXJuOwogICAgY29uc3QgdGFyZ2V0U3R1ZGlvID0gY29uZmlndXJhdGlvbkRhdGEuZGF0YS5lZ2cuc3R1ZGlvOwoKICAgIHNob3V0KCJoYXRjaCIsIHthYklEOiB0YXJnZXRQYXR0ZXJuLCByZWNvcmRLZXk6IHRhcmdldFN0dWRpbywgYXV0b0hhdGNoOiB0cnVlfSk7Cn0KCmlmIChjb25maWd1cmF0aW9uRGF0YS5kYXRhLmdyaWRDb2xvcikKewogICAgbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VHcmlkUG9ydGFsQ29sb3IgPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmdyaWRDb2xvcjsKCiAgICBncmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ29sb3IgPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmdyaWRDb2xvcjsKfQoKaWYgKGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuaW5zdCAmJiBjb25maWdCb3QudGFncy5pbnN0ICE9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuaW5zdCAmJiBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmluc3QgIT0gbnVsbCkKewogICAgbmV3RGVwbG95bWVudCA9IHRydWU7Cn0KCmlmIChuZXdEZXBsb3ltZW50KQp7CiAgICBjb25zdCBzaXRlT3JpZ2luID0gbmV3IFVSTChjb25maWdCb3QudGFncy51cmwpLm9yaWdpbjsKICAgIGNvbnN0IHRhcmdldEluc3QgPSBjb25maWd1cmF0aW9uRGF0YS5kYXRhLmluc3QgPyAiJmluc3Q9IiArIGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuaW5zdCA6ICIiOwogICAgY29uc3QgdGFyZ2V0QmlvcyA9IGNvbmZpZ3VyYXRpb25EYXRhLmRhdGEuYmlvcyA/ICImYmlvcz0iICsgY29uZmlndXJhdGlvbkRhdGEuZGF0YS5iaW9zIDogIiI7CiAgICBjb25zdCB0YXJnZXRQYXR0ZXJuID0gY29uZmlnQm90LnRhZ3MucGF0dGVybiA/ICImcGF0dGVybj0iICsgY29uZmlnQm90LnRhZ3MucGF0dGVybiA6ICIiOwogICAgY29uc3QgdGFyZ2V0VVJMID0gc2l0ZU9yaWdpbiArIGAvP2Fzaz0ke2NvbmZpZ0JvdC50YWdzLmFza30ke3RhcmdldFBhdHRlcm59JHt0YXJnZXRJbnN0fSR7dGFyZ2V0Qmlvc31gOwoKICAgIG9zLmdvVG9VUkwodGFyZ2V0VVJMKTsKfScA+9PF+A3GWw1jaGFubmVsTG9hZGVyAgQA+9PF+A2CqgIo8J+Ul2E5YjZhYTBkLWIzNTctNGRlNi05YmVmLTg1MzQ4YWIxZDBlMCcBBGJvdHMkZjlmZDdlMmUtN2NjZS00M2ZiLWIyMjMtZDMyY2I0MmJlYmU4AScA+9PF+A2pqgIGc3lzdGVtAgQA+9PF+A2qqgITYWIuYWN0aW9uLmNvbG9yX2JvdCcA+9PF+A2pqgIEZm9ybQIEAPvTxfgNvqoCB25vdGhpbmcnAPvTxfgNqaoCCGFiQWN0aW9uAgQA+9PF+A3GqgIEdHJ1ZScA+9PF+A2pqgIPYWJCb3RNZW51QWN0aW9uAgQA+9PF+A3LqgKOAUBjb25zdCB0YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYkJvdEZvY3VzOwoKb3Muc2hvd0lucHV0Rm9yVGFnKHRhcmdldEJvdCwgImNvbG9yIiwgewogICAgdHlwZTogJ2NvbG9yJywKICAgIHRpdGxlOiAncGljayBhIGNvbG9yJwp9KTsnAPvTxfgNqaoCDmFiQm90TWVudUxhYmVsAgQA+9PF+A3aqwIFY29sb3InAPvTxfgNqaoCDWFiQm90TWVudUljb24CBAD708X4DeCrAgdwYWxldHRlJwD708X4DamqAghyZW1lbWJlcgIEAPvTxfgN6KsCKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAPvTxfgNqaoCEmFiQm90TWVudVNvcnRPcmRlcgIEAPvTxfgNj6wCATInAPvTxfgNqaoCCGFiSWdub3JlAgQA+9PF+A2RrAIEdHJ1ZScA+9PF+A2pqgIXYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBAD708X4DZasAtsDQGNvbnN0IGFsbFRhcmdldEJvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CmNvbnN0IGJ1aWxkZXIgPSBhYi5saW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90ID8gYWIubGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC5pZCA6IG51bGw7CmNvbnN0IHJlbGV2YW50VGFyZ2V0Qm90cyA9IGFsbFRhcmdldEJvdHMuZmlsdGVyKCh0YXJnZXQpID0+IHRhcmdldC5pZCAhPSBidWlsZGVyKTsKY29uc3Qgc2VsZWN0ZWRDb2xvciA9IGF3YWl0IG9zLnNob3dJbnB1dChudWxsLCB7CiAgICB0eXBlOiAnY29sb3InLAogICAgdGl0bGU6ICdwaWNrIGEgY29sb3InCn0pOwoKc2V0VGFnKHJlbGV2YW50VGFyZ2V0Qm90cywgImNvbG9yIiwgc2VsZWN0ZWRDb2xvcik7CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogb3BlbmVkIG11bHRpcGxlIHNlbGVjdCBzaGVldCIpOycA+9PF+A2pqgIVYWJNdWx0aXBsZUJvdE1lbnVJY29uAgQA+9PF+A3yrwIHcGFsZXR0ZScA+9PF+A2pqgIWYWJNdWx0aXBsZUJvdE1lbnVMYWJlbAIEAPvTxfgN+q8CBWNvbG9yJwD708X4DamqAhphYk11bHRpcGxlQm90TWVudVNvcnRPcmRlcgIEAPvTxfgNgLACATEnAPvTxfgNqaoCCWFiVmVyc2lvbgIEAPvTxfgNgrACFjkuNjYuMS4xLjE3NTA5NTQzNTAwMDcA"}]}