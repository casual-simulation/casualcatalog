{"version":2,"updates":[{"id":0,"timestamp":1758644943233,"update":"AVCgneqNBQAnAQRib3RzJDY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNwEnAKCd6o0FABJhYkNvcmVNYWpvclZlcnNpb24CBACgneqNBQECMTAnAKCd6o0FABJhYkNvcmVNaW5vclZlcnNpb24CBACgneqNBQQCMTAnAKCd6o0FAAZzeXN0ZW0CBACgneqNBQcNYWIuY29yZS5sZWFybicAoJ3qjQUABGFiSUQCBACgneqNBRUFbGVhcm4nAKCd6o0FAARmb3JtAgQAoJ3qjQUbB25vdGhpbmcnAKCd6o0FAAZhYkJvb3QCBACgneqNBSONJ0AvKioKKiBNSVQgTGljZW5zZQoqCiogQ29weXJpZ2h0IChjKSAyMDE5IENhc3VhbCBTaW11bGF0aW9uLCBJbmMuCioKKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Ciogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCiogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAoqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwoqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CioKKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwKKiBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoqCiogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRQoqIFNPRlRXQVJFLgoqIEBsaWNlbnNlIE1JVAoqLwoKLy9pbnN0IG1vZGUgKHBsYXllciBvciBidWlsZGVyKQpsZXQgaW5zdE1vZGVDaGVjayA9IGF3YWl0IG9zLnZlcnNpb24oKS5wbGF5ZXJNb2RlOwovL2NoZWNrIHNlbGYgZm9yIGluaXRpYWwgYm9vdCBkYXRhCmxldCBpbml0aWFsQm9vdCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuaW5pdGlhbEJvb3QgPyB0cnVlIDogZmFsc2U7Ci8vY2hlY2sgdXJsIGZvciBwb3NzaWJsZSBhYidzIHRvIGxvYWQKbGV0IGJvb3RGbGFnID0gY29uZmlnQm90LnRhZ3MucGF0dGVybiA/IGNvbmZpZ0JvdC50YWdzLnBhdHRlcm4gOiBjb25maWdCb3QudGFncy5hYjsKLy9jaGVjayBmb3IgYXNrCmxldCBhc2sgPSBjb25maWdCb3QudGFncy5hc2s7Ci8vbG9naW4KbGV0IHN0YXR1cyA9IGF3YWl0IHRoaXNCb3QubG9hZGluZ1N0YXR1cygpOwovL3NlZWQgKG5vdCBhY3RpdmVseSB1c2VkIGhlcmUpCmxldCBzZWVkID0gY29uZmlnQm90LnRhZ3Muc2VlZDsKLy9wcm9tcHQKbGV0IHByb21wdCA9IGNvbmZpZ0JvdC50YWdzLnByb21wdDsKLy9jaGFubmVsCmxldCBjaGFubmVsID0gY29uZmlnQm90LnRhZ3MuY2hhbm5lbDsKLy9yZXF1ZXN0IGF1dGggYm90CmF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7CgovL3JlZGlyZWN0IGlmIGluIFVSTAppZiAoY29uZmlnQm90LnRhZ3Muam9pbkNvZGUpIHsKICAgIHRoaXNCb3QuYWJKb2luSG9zdCh7IHRleHQ6IGNvbmZpZ0JvdC50YWdzLmpvaW5Db2RlIH0pOwp9CgovL3N0YXR1cyBjbGVhbiB1cApkZXN0cm95KHN0YXR1cyk7CgovL2NoZWNrIHRpbWUgaWYgbmVlZGVkCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiQ29uZGl0aW9uKSB7CiAgICBhd2FpdCBsaW5rcy5yZW1lbWJlci5hYkNvbmRpdGlvbigpOwp9CgovL2lmIG5vIHN0dWRpbywgc2V0IHN0dWRpbwppZiAoYXV0aEJvdCAmJiAhY29uZmlnQm90LnRhZ3Muc3R1ZGlvKSB7CiAgICBjb25maWdCb3QudGFncy5zdHVkaW8gPSBhdXRoQm90LmlkOwp9CgppZiAoYXV0aEJvdCkgewogICAgdGhpc0JvdC5hYkxvYWRTdHVkaW9zKCk7Cn0KCmlmICghbGlua3MucGVyc29uYWxpdHkpIHsgCiAgICBhd2FpdCB0aGlzQm90LmFiQWRhcHQoImFiUGVyc29uYWxpdHkiKTsKfQoKLy9pbml0aWFsaXplIHJlbWVtYmVyIGdsb2JhbHMKZ2xvYmFsVGhpcy5hYkluc3RNZW1vcnkgPSBsaW5rcy5yZW1lbWJlcjsKZ2xvYmFsVGhpcy5hYlJlbWVtYmVyID0gbGlua3MucmVtZW1iZXI7Cmdsb2JhbFRoaXMuYWJQZXJzb25hbGl0eSA9IGxpbmtzLnBlcnNvbmFsaXR5OwoKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlR3JpZFBvcnRhbENvbG9yKSB7CiAgICBncmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUdyaWRQb3J0YWxDb2xvcjsKfQoKLy9UaGlzIGNoZWNrcyBmb3IgdGhlIGFwcHJvcHJpYXRlIGFycmF5IG9mIHNraWxscyBhbmQgaW5pdGlhbGl6ZXMgdGhlbQphd2FpdCB0aGlzQm90LmFiU2tpbGxJbml0aWFsaXphdGlvbihpbnN0TW9kZUNoZWNrKTsKCi8vaW5pdGlhbGl6aW5nIG9mIGdsb2JhbCB2YXJpYWJsZXMKZ2xvYmFsVGhpcy5idWlsZGVyVmVyc2lvbiA9IGluc3RNb2RlQ2hlY2sgPT0gImJ1aWxkZXIiID8gdHJ1ZSA6IGZhbHNlOwpnbG9iYWxUaGlzLmFiTG9uZ1Rlcm1NZW1vcnlTZWFyY2ggPSBsaW5rcy5zZWFyY2g7Cmdsb2JhbFRoaXMuYWJTZWFyY2ggPSBsaW5rcy5zZWFyY2g7Cmdsb2JhbFRoaXMuYWJQdWJsaXNoID0gbGlua3Muc3RvcmU7Cmdsb2JhbFRoaXMuYWJTdG9yZSA9IGxpbmtzLnN0b3JlOwpnbG9iYWxUaGlzLmFiID0gdGhpc0JvdDsKCi8vcG9wdWxhdGUgYm9vdGZsYWcgYWIKaWYgKGluaXRpYWxCb290ICYmIGJvb3RGbGFnKSB7CiAgICBhd2FpdCBsaW5rcy5zZWFyY2gub25Mb29rdXBBQkVnZ3MoeyBhYklEOiBib290RmxhZywgaW5pdGlhbEJvb3Q6IHRydWUsIGF1dG9IYXRjaDogdHJ1ZSwgc291cmNlRXZlbnQ6ICdib290JyB9KTsKfQoKLy9sb29rdXAgYXNrSUQgaWYgYXZhaWxhYmxlCmlmIChpbml0aWFsQm9vdCAmJiBhc2spIHsKICAgIGlmIChhc2sgPT0gImVnZ0NhcnRvbiIgfHwgYXNrID09ICJjYXN1YWxUdXRvcmlhbCIpIHsKICAgICAgICBhd2FpdCB0aGlzQm90LmFiQWRhcHQoYXNrKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdCgiYWJBY3Rpb24iKTsKCiAgICAgICAgbGlua3MuYXNrLmFiQ29yZU1lbnVBY3Rpb24oYXNrKTsKICAgIH0KfQoKLy9jaGVjayBmb3IgY2hhbm5lbCBpZiBjaGFubmVscyBhbGxvd2VkCmlmIChpbml0aWFsQm9vdCAmJiBjaGFubmVsICYmIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWxsb3dDaGFubmVscykgewogICAgYXdhaXQgdGhpc0JvdC5hYkFkYXB0KCJhYkFjdGlvbiIpOwoKICAgIGxpbmtzLmFzay5hYkNvcmVNZW51QWN0aW9uKHttZXNzYWdlOiBjaGFubmVsLCBpc0NoYW5uZWw6IHRydWV9KTsKfQoKLy9jaGVjayBmb3IgYXJ0aWZhY3QgRklYCmlmIChjb25maWdCb3QudGFncy5hcnRpZmFjdCAmJiBpbml0aWFsQm9vdCAmJiAhYXNrICYmICFib290RmxhZykgewogICAgY29uc3QgYXJ0aWZhY3QgPSBjb25maWdCb3QudGFncy5hcnRpZmFjdDsKICAgIGNvbnN0IGFydEluZGV4ID0gYXJ0aWZhY3QuaW5kZXhPZigiX2FydF8iKTsKICAgIGNvbnN0IHN0dWRpbyA9IGFydGlmYWN0LnN1YnN0cmluZygwLCBhcnRJbmRleCk7CiAgICBjb25zdCByZWNvcmRBZGRyZXNzID0gYXJ0aWZhY3Quc3Vic3RyaW5nKGFydEluZGV4KTsKICAgIGNvbnN0IHJlY29yZERhdGEgPSBhd2FpdCBvcy5nZXREYXRhKHN0dWRpbywgcmVjb3JkQWRkcmVzcyk7CiAgICBjb25zdCBhc2tJRCA9IHJlY29yZERhdGEuZGF0YS5wYXR0ZXJuOwoKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdCgiYWJBY3Rpb24iKTsKCiAgICBsaW5rcy5hc2suYWJDb3JlTWVudUFjdGlvbihhc2tJRCk7Cn0KCi8vIENoZWNrIGlmIHdlIGNhbiB3YWtlIHVwIGFiLCBhbmQgdGhlbiBkbyBzby4KaWYgKCFjb25maWdCb3QudGFncy5hYlNsZWVwKSB7CiAgICBpZiAoKGluaXRpYWxCb290ICYmICFib290RmxhZyAmJiAhYXNrKSB8fCBsaW5rcy5yZW1lbWJlci50YWdzLmFiQWx3YXlzU3RhcnRBd2FrZSB8fCBjb25maWdCb3QudGFncy5hYlN0YXlBd2FrZSkgewogICAgICAgIGF3YWl0IGxpbmtzLm1hbmlmZXN0YXRpb24uYWJTZXRBd2FrZSh7IGF3YWtlOiB0cnVlLCBpbml0aWFsOiBpbml0aWFsQm9vdCB9KTsKICAgIH0KfQoKLy9zZXQgaW5pdGlhbCBib290IGRhdGEKaWYgKGluaXRpYWxCb290KSB7CiAgICBzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLCAnaW5pdGlhbEJvb3QnLCBmYWxzZSwgJ3NoYXJlZCcpOwoKICAgIGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbGl6YXRpb25Db25maWd1cmF0aW9uKSB7CiAgICAgICAgbGlua3MucmVtZW1iZXIuYWJJbml0aWFsaXphdGlvbkNvbmZpZ3VyYXRpb24oKTsKICAgIH0KfQoKLy9jbGVhbiB1cCBVUkwgd2l0aCB0YWdQb3J0YWwKaWYgKGNvbmZpZ0JvdC50YWdzLnRhZ1BvcnRhbCAmJiAhY29uZmlnQm90LnRhZ3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgJiYgYnVpbGRlclZlcnNpb24pIHsKICAgIGNvbmZpZ0JvdC50YWdzLnRhZ1BvcnRhbCA9IG51bGw7CiAgICBjb25maWdCb3QudGFncy50YWdQb3J0YWxTcGFjZSA9IG51bGw7Cn0KCi8vcGF1c2UgZm9yIGFiIGxvYWRpbmcKYXdhaXQgb3Muc2xlZXAoNTAwKTsKCi8vaW5pdGlhbGl6ZSB0aW1lIGJvdAp0aGlzQm90LmFiVGltZXIoKTsKCmxpbmtzLnBlcnNvbmFsaXR5LnVwZGF0ZVBlcnNvbmFsaXR5KCk7CgovL2luaXRpYWxpemF0aW9uIHNob3V0CnN1cGVyU2hvdXQoIm9uQUJJbml0aWFsaXplZCIsIHRhZ3MuYWJJbnN0KTsoAKCd6o0FAAZhYkNvcmUBeCcAoJ3qjQUAB2FiQWRhcHQCBACgneqNBbInyA5AbGV0IHNraWxsTmFtZTsKbGV0IHNraWxsRGF0YTsKCmlmICh0eXBlb2YgdGhhdCA9PT0gJ3N0cmluZycpIHsKICAgIHNraWxsTmFtZSA9IHRoYXQ7CiAgICBza2lsbERhdGEgPSBudWxsOwp9IGVsc2UgaWYgKHR5cGVvZiB0aGF0ID09PSAnb2JqZWN0JykgewogICAgaWYgKHRoYXQuc3lzdGVtSUQpIHsKICAgICAgICBza2lsbE5hbWUgPSB0aGF0LnN5c3RlbUlEOwogICAgfSBlbHNlIGlmICh0aGF0LnNraWxsTmFtZSkgewogICAgICAgIHNraWxsTmFtZSA9IHRoYXQuc2tpbGxOYW1lOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc2tpbGxOYW1lIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyLmApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBza2lsbERhdGEgPSB0aGF0LmRhdGEgPz8gbnVsbDsKfQoKdHJ5IHsKICAgIGNvbnN0IHVybCA9IHRoaXNCb3QuYWJCdWlsZENhc3VhbENhdGFsb2dVUkwoYC9hYi8ke3NraWxsTmFtZX0uYXV4YCk7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdlYi5ob29rKHsgbWV0aG9kOiAiR0VUIiwgdXJsIH0pOwoKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gQ291bGQgbm90IGRvd25sb2FkICR7c2tpbGxOYW1lfS4gUmVzcG9uc2U6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgbGV0IGJvdElkczsKCiAgICBpZiAocmVzcG9uc2UuZGF0YS52ZXJzaW9uID09PSAyKSB7CiAgICAgICAgLy8gQVVYIEZvcm1hdCBWZXJzaW9uIDIuCiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHJlc3BvbnNlLmRhdGEudXBkYXRlczsKICAgICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IG9zLmdldEluc3RTdGF0ZUZyb21VcGRhdGVzKHVwZGF0ZXMpOwogICAgICAgIGF3YWl0IG9zLmFwcGx5VXBkYXRlc1RvSW5zdCh1cGRhdGVzKTsKCiAgICAgICAgYm90SWRzID0gT2JqZWN0LmtleXMoc3RhdGUpOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gQVVYIGZvcm1hdCB2ZXJzaW9uICR7cmVzcG9uc2UuZGF0YS52ZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLmApOwogICAgfQoKICAgIGlmIChib3RJZHMgJiYgYm90SWRzLmxlbmd0aCA+IDApIHsKICAgICAgICB3aGlzcGVyKGJvdElkcywgdGFnTmFtZSwgY29uZmlnQm90LnRhZ3MuaW5zdCk7CiAgICAgICAgd2hpc3Blcihib3RJZHMsICJvblNraWxsVXBkYXRlIiwgeyBkYXRhOiBza2lsbERhdGEgfSk7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBObyBib3RzIGFwcGVhciB0byBoYXZlIGJlZW4gbG9hZGVkIHdpdGggJHtza2lsbE5hbWV9LmApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZiAoIXRoaXNCb3QudmFycy5sb2FkZWRTa2lsbHMpIHsKICAgICAgICB0aGlzQm90LnZhcnMubG9hZGVkU2tpbGxzID0gbmV3IFNldCgpOwogICAgfQoKICAgIGlmICghdGhpc0JvdC52YXJzLmxvYWRlZFNraWxscy5oYXMoc2tpbGxOYW1lKSkgewogICAgICAgIHRoaXNCb3QudmFycy5sb2FkZWRTa2lsbHMuYWRkKHNraWxsTmFtZSk7CiAgICB9CgogICAgcmV0dXJuIHRydWU7Cn0gY2F0Y2ggKGUpIHsKICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICBjb25zb2xlLmVycm9yKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gRmFpbGVkIHRvIGRvd25sb2FkICR7c2tpbGxOYW1lfS4gU2VlIGFib3ZlIGVycm9yLmApOwogICAgcmV0dXJuIGZhbHNlOwp9JwCgneqNBQALZGVzY3JpcHRpb24CBACgneqNBfs1T1RoaXMgc2tpbGwgaXMgZGVzaWduZWQgdG8gaGFuZGxlIGJvdGggcmVjb25maWd1cmF0aW9uIG9mIGFiIGFuZCBpbml0aWFsaXphdGlvbi4nAKCd6o0FAApvbkJvdEFkZGVkAgQAoJ3qjQXLNvEBQGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gYWJDb3JlIFNUQVJUIFVQYCk7Cgp0aGlzQm90LmFiSW5zdFVwZGF0ZSgpOwoKaWYgKCFsaW5rcy5yZW1lbWJlcikgewogICAgY29uc29sZS5lcnJvcihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIENvdWxkIG5vdCBmaW5kIGFiQ29uZmlnIHJlbWVtYmVyIGJvdC5gKTsKfQoKc2V0VGltZW91dCgoKSA9PiB0aGlzQm90LmFiQm9vdCgpLCA1MDApOycAoJ3qjQUACHJlbWVtYmVyAgQAoJ3qjQW9OCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwCgneqNBQADbG9nAgQAoJ3qjQXkOGxALy9wYXNzIHRocm91Z2ggbG9nIGRhdGEKaWYgKGxpbmtzLmNvbnNvbGUpIHsKICAgIGxpbmtzLmNvbnNvbGUubG9nKHRoYXQpOwp9CmVsc2UgewogICAgY29uc29sZS5sb2codGhhdCk7Cn0nAKCd6o0FAA1tYW5pZmVzdGF0aW9uAgQAoJ3qjQXROSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwCgneqNBQAMYWJDcmVhdGVIb3N0AgQAoJ3qjQX4OZYKQGNvbnN0IHNpdGVPcmlnaW4gPSBuZXcgVVJMKGNvbmZpZ0JvdC50YWdzLnVybCkub3JpZ2luOwoKLy90aGlzIGZ1bmN0aW9uIGhhbmRsZXMgY3JlYXRpbmcgYSBmaWxlIGZvciBqb2luIGNvZGVzCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmhvc3RJRCkgewogICAgb3MudG9hc3QoInVybCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7CgogICAgb3Muc2V0Q2xpcGJvYXJkKHNpdGVPcmlnaW4gKyAiLz9qb2luQ29kZT0iICsgbGlua3MucmVtZW1iZXIudGFncy5ob3N0SUQuc3Vic3RyaW5nKDAsIDMpICsgIi0iICsgbGlua3MucmVtZW1iZXIudGFncy5ob3N0SUQuc3Vic3RyaW5nKDMpKTsKCiAgICByZXR1cm47Cn0KCmlmICghYXV0aEJvdCkgewogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3QoKTsKfQoKaWYgKCFhdXRoQm90KSB7CiAgICBvcy50b2FzdCgicGxlYXNlIGxvZyBpbiB0byBnZW5lcmF0ZSBhIGpvaW4gY29kZSIpOwogICAgcmV0dXJuOwp9Cgpjb25zdCBuZXdIb3N0SUQgPSB1dWlkKCkucmVwbGFjZUFsbCgiLSIsICIiKS5zdWJzdHJpbmcoMCwgNik7CmNvbnN0IGRhdGUgPSBEYXRlVGltZS5ub3coKS50b01pbGxpcygpOwpjb25zdCByZWNvcmRLZXkgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5Owpjb25zdCByZWNvcmREYXRhID0gYXdhaXQgb3MucmVjb3JkRGF0YShyZWNvcmRLZXksIG5ld0hvc3RJRCwgeyB1cmw6IGNvbmZpZ0JvdC50YWdzLnVybCwgZGF0ZTogZGF0ZSwgbWFya2VyczogWyJwdWJsaWNSZWFkIl0gfSk7CgppZiAocmVjb3JkRGF0YS5zdWNjZXNzKSB7CiAgICBzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLCAnaG9zdElEJywgbmV3SG9zdElELnN1YnN0cmluZygwLCAzKSArICItIiArIG5ld0hvc3RJRC5zdWJzdHJpbmcoMyksICdzaGFyZWQnKTsKCiAgICBjb25zdCBqb2luVVJMID0gc2l0ZU9yaWdpbiArICIvP2pvaW5Db2RlPSIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmhvc3RJRDsKCiAgICBvcy5zZXRDbGlwYm9hcmQoam9pblVSTCk7CgogICAgdGhhdC50YWdzLmxhYmVsID0gImpvaW4gY29kZTogIiArIG5ld0hvc3RJRC5zdWJzdHJpbmcoMCwgMykgKyAiLSIgKyBuZXdIb3N0SUQuc3Vic3RyaW5nKDMpOwoKICAgIG9zLnNob3dRUkNvZGUoam9pblVSTCk7CgogICAgb3MudG9hc3QoImhvc3QgZ2VuZXJhdGVkLCB1cmwgY29waWVkIHRvIGNsaXBib2FyZDogIiArIG5ld0hvc3RJRCk7Cn0KZWxzZSB7CiAgICBvcy50b2FzdCgic29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4iKTsKCiAgICBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwp9JwCgneqNBQAKYWJKb2luSG9zdAIEAKCd6o0Fj0TuBkAvL2xvZ2ljIGZvciB1c2luZyBhIGpvaW4gY29kZSAoY2hlY2tzIGZvciBleGlzdGluZyBmaWxlcykKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmxldCBnZXRSZWNvcmQ7CgppZiAodGhhdC5kYXRhKSB7CiAgICBnZXRSZWNvcmQgPSB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHRoYXQuZGF0YSB9Owp9CmVsc2UgewogICAgY29uc3Qgam9pbkNvZGUgPSB0aGF0LnRleHQucmVwbGFjZUFsbCgiLSIsICIiKTsKICAgIGNvbnN0IHJlY29yZEtleSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJSZWNvcmRLZXk7CiAgICBjb25zb2xlLmxvZygiSk9JTkNPREUiLCBqb2luQ29kZSkKICAgIGdldFJlY29yZCA9IGF3YWl0IG9zLmdldERhdGEocmVjb3JkS2V5LCBqb2luQ29kZSk7Cn0KCmlmIChnZXRSZWNvcmQuc3VjY2VzcykgewogICAgY29uc3QgZGF0ZSA9IERhdGVUaW1lLm5vdygpOwogICAgbGV0IGNyZWF0ZURhdGUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKGdldFJlY29yZC5kYXRhLmRhdGUpOwogICAgbGV0IGRpZmZlcmVuY2UgPSBkYXRlLmRpZmYoY3JlYXRlRGF0ZSwgImRheXMiKS50b09iamVjdCgpOwoKICAgIGRpZmZlcmVuY2UgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UuZGF5cyk7CgogICAgaWYgKGRpZmZlcmVuY2UgPCA4KSB7CiAgICAgICAgb3MudG9hc3QoImpvaW5pbmcgaG9zdCBub3ciKTsKCiAgICAgICAgb3MuZ29Ub1VSTChnZXRSZWNvcmQuZGF0YS51cmwpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgb3MudG9hc3QoImpvaW4gY29kZSBvdXQgb2YgZGF0ZSwgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IGpvaW4gY29kZSIpOwogICAgfQp9CmVsc2UgewogICAgb3MudG9hc3QoImNvZGUvYWIgaW52YWxpZCwgcGxlYXNlIHRyeSBhZ2FpbiIpOwp9JwCgneqNBQAGc2VhcmNoAgQAoJ3qjQX+Sijwn5SXZDgzNzE0NDQtOTE1OC00NDM2LThmYzctODRjYzkxYjdmNTI1JwCgneqNBQAIYWJJZ25vcmUCBACgneqNBaVLBHRydWUnAKCd6o0FAARtZW51AgQAoJ3qjQWqSyjwn5SXYjMwYzZjNWQtYTRmNy00MjY2LWJhMzgtMzkzZGM5NWUxZWNiJwCgneqNBQAVYWJTa2lsbEluaXRpYWxpemF0aW9uAgQAoJ3qjQXRS6MCQC8vRmluZCB0aGUgYXBwcm9wcmlhdGUgYXJyYXkgYW5kIHBvcHVsYXRlIHNraWxscwpsZXQgc2tpbGxBcnJheSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3NbdGhhdCArICJTa2lsbEFycmF5Il07Cgpmb3IgKGxldCBpID0gMDsgaSA8IHNraWxsQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdChza2lsbEFycmF5W2ldKTsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLmVtYmVkID09PSAnaW9zJykgewogICAgYXdhaXQgdGhpc0JvdC5hYkFkYXB0KCdhYklPU0JyaWRnZScpOwp9CgpyZXR1cm47JwCgneqNBQAGYmFubmVyAgQAoJ3qjQX1TSjwn5SXYjU1MmVhZjktYTlkNi00MWM4LTg1MTUtY2JkMmFiZWFhZTczJwCgneqNBQAFaW5wdXQCBACgneqNBZxOKPCflJdmODYwMjg3OC1jMmVmLTQ4YmQtODVhMC04ZDYzNTFlYjQxMjAnAKCd6o0FAA1sb2FkaW5nU3RhdHVzAgQAoJ3qjQXDTsYHQGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTG9hZFN0YXR1cyI7CgpsZXQgc3RhdHVzQm90ID0ge307CgpzdGF0dXNCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKc3RhdHVzQm90LmxhYmVsID0gInZlcmlmeWluZyBhdXRoQm90IjsKc3RhdHVzQm90LmxhYmVsQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpzdGF0dXNCb3QuYWJMb2FkU3RhdHVzID0gdHJ1ZTsKc3RhdHVzQm90Lm1lbnVJdGVtU3R5bGUgPSB7ICJiYWNrZ3JvdW5kIjogIm5vbmUiIH07CnN0YXR1c0JvdC50cmFja051bSA9IDA7CnN0YXR1c0JvdC5vbkNyZWF0ZSA9IGBACiAgICBpZiAodGFncy50cmFja051bSA9PSAyKSB7CiAgICAgICAgdGFncy50cmFja051bSA9IDA7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICB0YWdzLnRyYWNrTnVtKys7CiAgICB9CgogICAgdGFncy5sYWJlbCA9IHRhZ3NbImxhYmVsIit0YWdzLnRyYWNrTnVtXTsKICAgIHRhZ3MuZm9ybUFkZHJlc3MgPSB0YWdzWyJmb3JtIit0YWdzLnRyYWNrTnVtXTsKCiAgICBzZXRUaW1lb3V0KCgpID0+IHdoaXNwZXIodGhpc0JvdCwgIm9uQ3JlYXRlIiksIDUwMCk7YDsKc3RhdHVzQm90LmxhYmVsMCA9ICJ2ZXJpZnlpbmcgYXV0aEJvdC4iOwpzdGF0dXNCb3QubGFiZWwxID0gInZlcmlmeWluZyBhdXRoQm90Li4iOwpzdGF0dXNCb3QubGFiZWwyID0gInZlcmlmeWluZyBhdXRoQm90Li4uIjsKc3RhdHVzQm90LmZvcm0wID0gImhvdXJnbGFzc19ib3R0b20iOwpzdGF0dXNCb3QuZm9ybTEgPSAiaG91cmdsYXNzX3RvcCI7CnN0YXR1c0JvdC5mb3JtMiA9ICJob3VyZ2xhc3NfYm90dG9tIjsKc3RhdHVzQm90Lm9uRGVzdHJveSA9IGBACiAgICBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CmA7CgpsZXQgY3JlYXRlZFN0YXR1c0JvdCA9IGNyZWF0ZShzdGF0dXNCb3QpOwoKcmV0dXJuIGNyZWF0ZWRTdGF0dXNCb3Q7JwCgneqNBQADYXNrAgQAoJ3qjQWKVijwn5SXZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3JwCgneqNBQANYWJMb2FkU3R1ZGlvcwIEAKCd6o0FsVZbQGNvbnN0IHVzZXJTdHVkaW9zID0gYXdhaXQgb3MubGlzdFVzZXJTdHVkaW9zKCk7CmNvbmZpZ0JvdC50YWdzLnVzZXJfc3R1ZGlvcyA9IHVzZXJTdHVkaW9zOycAoJ3qjQUAB2FiVGltZXICBACgneqNBY1XwQZAaWYgKGdldEJvdCgiYWJUaW1lciIsIHRydWUpKSB7CiAgICByZXR1cm47Cn0KCmlmICghdGFncy5hYlhQKSB7CiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYlhQIiwgIjAiLCAibG9jYWwiKTsKfQoKbGV0IHRpbWVyQm90ID0ge307Cgp0aW1lckJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwp0aW1lckJvdC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKdGltZXJCb3Qub25DcmVhdGUgPSBgQAogICAgbWFza3MuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzQm90Lm9uVGltZUNoZWNrKCksIDYwMDAwKTsKYDsKdGltZXJCb3QuYWJUaW1lciA9IHRydWU7CnRpbWVyQm90Lm9uVGltZUNoZWNrID0gYEAKICAgIGlmICh0YWdzLm5vdElkbGUpIHsKICAgICAgICB0YWdzLm5vdElkbGUgPSBmYWxzZTsKCiAgICAgICAgLy9jb25zb2xlLmxvZygiWFAiLCBsaW5rcy5tYW5hZ2VyLnRhZ3MuYWJYUCk7CgogICAgICAgIGNvbnN0IHRvdGFsWFAgPSBsaW5rcy5tYW5hZ2VyLnRhZ3MuYWJYUCArIDE7CgogICAgICAgIHNldFRhZ01hc2sobGlua3MubWFuYWdlciwgImFiWFAiLCB0b3RhbFhQLCAibG9jYWwiKTsKICAgIH0KYDsKdGltZXJCb3Qubm90SWRsZSA9IGZhbHNlOwp0aW1lckJvdC5vbkFueUFjdGlvbiA9IGBACiAgICBpZiAoIXRhZ3Mubm90SWRsZSkgewogICAgICAgIGlmICh0aGF0LmFjdGlvbi5pZCA9PSBncmlkUG9ydGFsQm90LmlkKQogICAgICAgIHsKICAgICAgICAgICAgdGFncy5ub3RJZGxlID0gdHJ1ZTsKICAgICAgICB9CiAgICB9CmA7CgpsZXQgYWJUaW1lciA9IGNyZWF0ZSh0aW1lckJvdCk7CgpnbG9iYWxUaGlzLmFiVGltZXIgPSBhYlRpbWVyOycAoJ3qjQUABXN0b3JlAgQAoJ3qjQXPXSjwn5SXNzZhZjA0OTEtMzkxOS00OTg0LWFhODItMjJjNzQyZjQyNjNmJwCgneqNBQAHY29uc29sZQIEAKCd6o0F9l0o8J+UlzI0YjdlNjZmLTBkNWItNDA2NC1iZjQ4LWI1NjJiOWU2ZTNlYicAoJ3qjQUACWFiVmVyc2lvbgIEAKCd6o0FnV4FMTAuMTAnAKCd6o0FAAxhYkxvYWRDb25maWcCBACgneqNBaNemgZAY29uc3QgdXJsID0gbmV3IFVSTChvcy5nZXRBQjFCb290c3RyYXBVUkwoKSk7CnVybC5wYXRobmFtZSA9IHVybC5wYXRobmFtZS5yZXBsYWNlKCdhYjEuYXV4JywgJ2FiQ29uZmlnLmF1eCcpOwoKdHJ5IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2ViLmhvb2soeyBtZXRob2Q6ICJHRVQiLCB1cmw6IHVybC5ocmVmIH0pOwoKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gQ291bGQgbm90IGRvd25sb2FkIGFiQ29uZmlnLiBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCB1cGRhdGVzID0gcmVzcG9uc2UuZGF0YS51cGRhdGVzOwogICAgYXdhaXQgb3MuYXBwbHlVcGRhdGVzVG9JbnN0KHVwZGF0ZXMpOwoKICAgIGlmIChsaW5rcy5yZW1lbWJlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gTG9hZGVkIGFiQ29uZmlnIGF1eCBidXQgY291bGQgbm90IGZpbmQgcmVtZW1iZXIgYm90LmApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIGNvbnNvbGUuZXJyb3IoYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBGYWlsZWQgdG8gZG93bmxvYWQgYWJDb25maWcuIFNlZSBhYm92ZSBlcnJvci5gKTsKICAgIHJldHVybiBmYWxzZTsKfScAoJ3qjQUAF2FiQnVpbGRDYXN1YWxDYXRhbG9nVVJMAgQAoJ3qjQW+ZP8BQGNvbnN0IHJlbGF0aXZlUGF0aCA9IHRoYXQ7Cgpjb25zdCB1cmwgPSBuZXcgVVJMKGxpbmtzLnJlbWVtYmVyLnRhZ3MuY2FzdWFsQ2F0YWxvZ1VSTCk7CmNvbnN0IGVudiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuY2FzdWFsQ2F0YWxvZ0VudjsKCnVybC5wYXRobmFtZSA9IHJlbGF0aXZlUGF0aDsKCmlmIChlbnYgJiYgZW52ICE9PSAncHJvZCcpIHsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdlbnYnLCBlbnYpOwp9CgpyZXR1cm4gdXJsLmhyZWY7JwCgneqNBQAHY2hhbm5lbAIEAKCd6o0FvmYo8J+Ul2E5YjZhYTBkLWIzNTctNGRlNi05YmVmLTg1MzQ4YWIxZDBlMCcAoJ3qjQUAC3BlcnNvbmFsaXR5AgQAoJ3qjQXlZijwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwCgneqNBQAMYWJJbnN0VXBkYXRlAgQAoJ3qjQWMZ6IBQC8vIFVwZGF0ZSB0aGUgYWJJbnN0IHRhZyB3aGljaCByZXByZXNlbnRzIHRoZSBpbnN0IHRoYXQgdGhpcyBhYiBleGlzdHMgaW4uCmNvbnN0IGN1ckluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpOwpzZXRUYWdNYXNrKHRoaXNCb3QsICdhYkluc3QnLCBjdXJJbnN0LCAnc2hhcmVkJyk7JwCgneqNBQAMb25JbnN0Sm9pbmVkAgQAoJ3qjQWvaBhAdGhpc0JvdC5hYkluc3RVcGRhdGUoKTsnAKCd6o0FAAtvbkluc3RMZWF2ZQIEAKCd6o0FyGgYQHRoaXNCb3QuYWJJbnN0VXBkYXRlKCk7JwCgneqNBQAMcmVzZXJ2ZWRBc2tzAgQAoJ3qjQXhaAzwn6esWyJob21lIl0nAKCd6o0FAAhhcnRpZmFjdAIEAKCd6o0F7Ggo8J+Ulzc4ZTQxNTAzLWM5MzMtNGY4YS04MTdhLWJhOTdiZjhkNWQyNycAoJ3qjQUAC2JvdF9mYWN0b3J5AgQAoJ3qjQWTaSjwn5SXYzc4YWE2NjMtZDA1Yy00ZWM0LWJjMmMtMjZmZDUxNTYwYjk3JwCgneqNBQAFdXRpbHMCBACgneqNBbppKPCflJc5M2Q5NjVlMC1kMjBlLTRiNDUtOGNhMC02NDkyNzNiNzEzOGMnAKCd6o0FAAh1cGRhdGVBQgIEAKCd6o0F4Wl3QGNvbnN0IGxvYWRlZFNLaWxscyA9IHRoaXNCb3QudmFycy5sb2FkZWRTa2lsbHM7DQoNCmxvYWRlZFNLaWxscy5mb3JFYWNoKChza2lsbCkgPT4gew0KICAgIHRoaXNCb3QuYWJBZGFwdChza2lsbCk7DQp9KTsA"}]}