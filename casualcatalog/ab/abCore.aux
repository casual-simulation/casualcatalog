{"version":2,"updates":[{"id":0,"timestamp":1752512449286,"update":"AUL0r/zGDgAnAQRib3RzJDY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNwEnAPSv/MYOABJhYkNvcmVNYWpvclZlcnNpb24CBAD0r/zGDgECMTAnAPSv/MYOABJhYkNvcmVNaW5vclZlcnNpb24CBAD0r/zGDgQBNCcA9K/8xg4ABnN5c3RlbQIEAPSv/MYOBg1hYi5jb3JlLmxlYXJuJwD0r/zGDgAEYWJJRAIEAPSv/MYOFAVsZWFybicA9K/8xg4ABGZvcm0CBAD0r/zGDhoHbm90aGluZycA9K/8xg4ABmFiQm9vdAIEAPSv/MYOIqgqQC8qKgoqIE1JVCBMaWNlbnNlCioKKiBDb3B5cmlnaHQgKGMpIDIwMTkgQ2FzdWFsIFNpbXVsYXRpb24sIEluYy4KKgoqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAoqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCiogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKgoqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbAoqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCioKKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgoqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAoqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLAoqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFCiogU09GVFdBUkUuCiogQGxpY2Vuc2UgTUlUCiovCgovL2luc3QgbW9kZSAocGxheWVyIG9yIGJ1aWxkZXIpCmxldCBpbnN0TW9kZUNoZWNrID0gYXdhaXQgb3MudmVyc2lvbigpLnBsYXllck1vZGU7Ci8vY2hlY2sgc2VsZiBmb3IgaW5pdGlhbCBib290IGRhdGEKbGV0IGluaXRpYWxCb290ID0gbGlua3MucmVtZW1iZXIudGFncy5pbml0aWFsQm9vdCA/IHRydWUgOiBmYWxzZTsKLy9jaGVjayB1cmwgZm9yIHBvc3NpYmxlIGFiJ3MgdG8gbG9hZApsZXQgYm9vdEZsYWcgPSBjb25maWdCb3QudGFncy5wYXR0ZXJuID8gY29uZmlnQm90LnRhZ3MucGF0dGVybiA6IGNvbmZpZ0JvdC50YWdzLmFiOwovL2NoZWNrIGZvciBhc2sKbGV0IGFzayA9IGNvbmZpZ0JvdC50YWdzLmFzazsKLy9sb2dpbgpsZXQgc3RhdHVzID0gYXdhaXQgdGhpc0JvdC5sb2FkaW5nU3RhdHVzKCk7Ci8vc2VlZCAobm90IGFjdGl2ZWx5IHVzZWQgaGVyZSkKbGV0IHNlZWQgPSBjb25maWdCb3QudGFncy5zZWVkOwovL3Byb21wdApsZXQgcHJvbXB0ID0gY29uZmlnQm90LnRhZ3MucHJvbXB0OwovL2NoYW5uZWwKbGV0IGNoYW5uZWwgPSBjb25maWdCb3QudGFncy5jaGFubmVsOwovL3JlcXVlc3QgYXV0aCBib3QKYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCi8vcmVkaXJlY3QgaWYgaW4gVVJMCmlmIChjb25maWdCb3QudGFncy5qb2luQ29kZSkgewogICAgdGhpc0JvdC5hYkpvaW5Ib3N0KHsgdGV4dDogY29uZmlnQm90LnRhZ3Muam9pbkNvZGUgfSk7Cn0KCi8vc3RhdHVzIGNsZWFuIHVwCmRlc3Ryb3koc3RhdHVzKTsKCi8vY2hlY2sgdGltZSBpZiBuZWVkZWQKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJDb25kaXRpb24pIHsKICAgIGF3YWl0IGxpbmtzLnJlbWVtYmVyLmFiQ29uZGl0aW9uKCk7Cn0KCi8vaWYgbm8gc3R1ZGlvLCBzZXQgc3R1ZGlvCmlmIChhdXRoQm90ICYmICFjb25maWdCb3QudGFncy5zdHVkaW8pIHsKICAgIGNvbmZpZ0JvdC50YWdzLnN0dWRpbyA9IGF1dGhCb3QuaWQ7Cn0KCmlmIChhdXRoQm90KSB7CiAgICB0aGlzQm90LmFiTG9hZFN0dWRpb3MoKTsKfQoKaWYgKCFsaW5rcy5wZXJzb25hbGl0eSkgeyAKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdCgiYWJQZXJzb25hbGl0eSIpOwp9CgovL2luaXRpYWxpemUgcmVtZW1iZXIgZ2xvYmFscwpnbG9iYWxUaGlzLmFiSW5zdE1lbW9yeSA9IGxpbmtzLnJlbWVtYmVyOwpnbG9iYWxUaGlzLmFiUmVtZW1iZXIgPSBsaW5rcy5yZW1lbWJlcjsKZ2xvYmFsVGhpcy5hYlBlcnNvbmFsaXR5ID0gbGlua3MucGVyc29uYWxpdHk7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VHcmlkUG9ydGFsQ29sb3IpIHsKICAgIGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlR3JpZFBvcnRhbENvbG9yOwp9CgovL1RoaXMgY2hlY2tzIGZvciB0aGUgYXBwcm9wcmlhdGUgYXJyYXkgb2Ygc2tpbGxzIGFuZCBpbml0aWFsaXplcyB0aGVtCmF3YWl0IHRoaXNCb3QuYWJTa2lsbEluaXRpYWxpemF0aW9uKGluc3RNb2RlQ2hlY2spOwoKLy9pbml0aWFsaXppbmcgb2YgZ2xvYmFsIHZhcmlhYmxlcwpnbG9iYWxUaGlzLmJ1aWxkZXJWZXJzaW9uID0gaW5zdE1vZGVDaGVjayA9PSAiYnVpbGRlciIgPyB0cnVlIDogZmFsc2U7Cmdsb2JhbFRoaXMuYWJMb25nVGVybU1lbW9yeVNlYXJjaCA9IGxpbmtzLnNlYXJjaDsKZ2xvYmFsVGhpcy5hYlNlYXJjaCA9IGxpbmtzLnNlYXJjaDsKZ2xvYmFsVGhpcy5hYlB1Ymxpc2ggPSBsaW5rcy5zdG9yZTsKZ2xvYmFsVGhpcy5hYlN0b3JlID0gbGlua3Muc3RvcmU7Cmdsb2JhbFRoaXMuYWIgPSB0aGlzQm90OwoKLy9wb3B1bGF0ZSBib290ZmxhZyBhYgppZiAoaW5pdGlhbEJvb3QgJiYgYm9vdEZsYWcpIHsKICAgIGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFCRWdncyh7IGFiSUQ6IGJvb3RGbGFnLCBpbml0aWFsQm9vdDogdHJ1ZSwgYXV0b0hhdGNoOiB0cnVlIH0pOwp9Cgpjb25zdCBwbGF5U3Vic2NyaXB0aW9uID0gIWF1dGhCb3QgPyB0cnVlIDogYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gIkZyZWVQbGF5IiA/IHRydWUgOiBmYWxzZTsKCi8vbG9va3VwIGFza0lEIGlmIGF2YWlsYWJsZQppZiAoaW5pdGlhbEJvb3QgJiYgYXNrKSB7CiAgICBpZiAoYXNrID09ICJlZ2dDYXJ0b24iIHx8IGFzayA9PSAiY2FzdWFsVHV0b3JpYWwiKSB7CiAgICAgICAgYXdhaXQgdGhpc0JvdC5hYkFkYXB0KGFzayk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBhd2FpdCB0aGlzQm90LmFiQWRhcHQoImFiQWN0aW9uIik7CgogICAgICAgIGxpbmtzLmFzay5hYkNvcmVNZW51QWN0aW9uKGFzayk7CiAgICB9Cn0KCi8vY2hlY2sgZm9yIGNoYW5uZWwgaWYgY2hhbm5lbHMgYWxsb3dlZAppZiAoaW5pdGlhbEJvb3QgJiYgY2hhbm5lbCAmJiBsaW5rcy5yZW1lbWJlci50YWdzLmFsbG93Q2hhbm5lbHMpIHsKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdCgiYWJBY3Rpb24iKTsKCiAgICBsaW5rcy5hc2suYWJDb3JlTWVudUFjdGlvbigiQCIgKyBjaGFubmVsKTsKfQoKLy9sb2FkIHBlcnNvbmFsIGNoYW5uZWwgYnkgZGVmYXVsdCBpZiBjaGFubmVscyBhbGxvd2VkIGFuZCBubyBvdGhlciBmbGFncyBwcmVzZW50CmlmIChpbml0aWFsQm9vdCAmJiAhY2hhbm5lbCAmJiAhYXNrICYmICFib290RmxhZyAmJiBsaW5rcy5yZW1lbWJlci50YWdzLmFsbG93Q2hhbm5lbHMpIHsKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdCgiYWJDaGFubmVsIik7CgogICAgYXdhaXQgbGlua3MuY2hhbm5lbC5sb2FkUGVyc29uYWxDaGFubmVsKCk7Cn0KCi8vY2hlY2sgZm9yIGFydGlmYWN0IEZJWAppZiAoY29uZmlnQm90LnRhZ3MuYXJ0aWZhY3QgJiYgaW5pdGlhbEJvb3QgJiYgIWFzayAmJiAhYm9vdEZsYWcpIHsKICAgIGNvbnN0IGFydGlmYWN0ID0gY29uZmlnQm90LnRhZ3MuYXJ0aWZhY3Q7CiAgICBjb25zdCBhcnRJbmRleCA9IGFydGlmYWN0LmluZGV4T2YoIl9hcnRfIik7CiAgICBjb25zdCBzdHVkaW8gPSBhcnRpZmFjdC5zdWJzdHJpbmcoMCwgYXJ0SW5kZXgpOwogICAgY29uc3QgcmVjb3JkQWRkcmVzcyA9IGFydGlmYWN0LnN1YnN0cmluZyhhcnRJbmRleCk7CiAgICBjb25zdCByZWNvcmREYXRhID0gYXdhaXQgb3MuZ2V0RGF0YShzdHVkaW8sIHJlY29yZEFkZHJlc3MpOwogICAgY29uc3QgYXNrSUQgPSByZWNvcmREYXRhLmRhdGEucGF0dGVybjsKCiAgICBhd2FpdCB0aGlzQm90LmFiQWRhcHQoImFiQWN0aW9uIik7CgogICAgbGlua3MuYXNrLmFiQ29yZU1lbnVBY3Rpb24oYXNrSUQpOwp9CgovL3dha2UgdXAgYnVpbGRlciBpZiBzdWJzY3JpcHRpb24gaXMgcmlnaHQKaWYgKChpbml0aWFsQm9vdCAmJiAhYm9vdEZsYWcgJiYgIXBsYXlTdWJzY3JpcHRpb24gJiYgIWFzaykgJiYgIWNvbmZpZ0JvdC50YWdzLmFiU2xlZXApIHsKICAgIGlmIChsaW5rcy5tYW5pZmVzdGF0aW9uKSB7CiAgICAgICAgbGlua3MubWFuaWZlc3RhdGlvbi5hYkluaXRpYWxNYW5pZmVzdCgpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgbGlua3MuaW5wdXQub25DaGF0KHsgbWVzc2FnZTogIi4uIiB9KTsKICAgIH0KfQplbHNlIGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ID09ICJhYi0xIiAmJiAhY29uZmlnQm90LnRhZ3MuYWJTbGVlcCkgewogICAgbGlua3MuaW5wdXQub25DaGF0KHsgbWVzc2FnZTogIi4uIiB9KTsKfQoKLy9zZXQgaW5pdGlhbCBib290IGRhdGEKaWYgKGluaXRpYWxCb290KSB7CiAgICBzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLCAnaW5pdGlhbEJvb3QnLCBmYWxzZSwgJ3NoYXJlZCcpOwoKICAgIGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbGl6YXRpb25Db25maWd1cmF0aW9uKSB7CiAgICAgICAgbGlua3MucmVtZW1iZXIuYWJJbml0aWFsaXphdGlvbkNvbmZpZ3VyYXRpb24oKTsKICAgIH0KfQoKLy9jbGVhbiB1cCBVUkwgd2l0aCB0YWdQb3J0YWwKaWYgKGNvbmZpZ0JvdC50YWdzLnRhZ1BvcnRhbCAmJiAhY29uZmlnQm90LnRhZ3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgJiYgYnVpbGRlclZlcnNpb24pIHsKICAgIGNvbmZpZ0JvdC50YWdzLnRhZ1BvcnRhbCA9IG51bGw7CiAgICBjb25maWdCb3QudGFncy50YWdQb3J0YWxTcGFjZSA9IG51bGw7Cn0KCi8vcGF1c2UgZm9yIGFiIGxvYWRpbmcKYXdhaXQgb3Muc2xlZXAoNTAwKTsKCi8vaW5pdGlhbGl6ZSB0aW1lIGJvdAp0aGlzQm90LmFiVGltZXIoKTsKCi8vaW5pdGlhbGl6YXRpb24gc2hvdXQKc3VwZXJTaG91dCgib25BQkluaXRpYWxpemVkIiwgdGFncy5hYkluc3QpOygA9K/8xg4ABmFiQ29yZQF4JwD0r/zGDgAHYWJBZGFwdAIEAPSv/MYOzCr+DEBsZXQgc2tpbGxOYW1lOwpsZXQgc2tpbGxEYXRhOwoKaWYgKHR5cGVvZiB0aGF0ID09PSAnc3RyaW5nJykgewogICAgc2tpbGxOYW1lID0gdGhhdDsKICAgIHNraWxsRGF0YSA9IG51bGw7Cn0gZWxzZSBpZiAodHlwZW9mIHRoYXQgPT09ICdvYmplY3QnKSB7CiAgICBpZiAodGhhdC5zeXN0ZW1JRCkgewogICAgICAgIHNraWxsTmFtZSA9IHRoYXQuc3lzdGVtSUQ7CiAgICB9IGVsc2UgaWYgKHRoYXQuc2tpbGxOYW1lKSB7CiAgICAgICAgc2tpbGxOYW1lID0gdGhhdC5za2lsbE5hbWU7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBza2lsbE5hbWUgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIuYCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHNraWxsRGF0YSA9IHRoYXQuZGF0YSA/PyBudWxsOwp9Cgp0cnkgewogICAgY29uc3QgdXJsID0gdGhpc0JvdC5hYkJ1aWxkQ2FzdWFsQ2F0YWxvZ1VSTChgL2FiLyR7c2tpbGxOYW1lfS5hdXhgKTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2ViLmhvb2soeyBtZXRob2Q6ICJHRVQiLCB1cmwgfSk7CgogICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBDb3VsZCBub3QgZG93bmxvYWQgJHtza2lsbE5hbWV9LiBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBsZXQgYm90SWRzOwoKICAgIGlmIChyZXNwb25zZS5kYXRhLnZlcnNpb24gPT09IDIpIHsKICAgICAgICAvLyBBVVggRm9ybWF0IFZlcnNpb24gMi4KICAgICAgICBjb25zdCB1cGRhdGVzID0gcmVzcG9uc2UuZGF0YS51cGRhdGVzOwogICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgb3MuZ2V0SW5zdFN0YXRlRnJvbVVwZGF0ZXModXBkYXRlcyk7CiAgICAgICAgYXdhaXQgb3MuYXBwbHlVcGRhdGVzVG9JbnN0KHVwZGF0ZXMpOwoKICAgICAgICBib3RJZHMgPSBPYmplY3Qua2V5cyhzdGF0ZSk7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBBVVggZm9ybWF0IHZlcnNpb24gJHtyZXNwb25zZS5kYXRhLnZlcnNpb259IGlzIG5vdCBzdXBwb3J0ZWQuYCk7CiAgICB9CgogICAgaWYgKGJvdElkcyAmJiBib3RJZHMubGVuZ3RoID4gMCkgewogICAgICAgIHdoaXNwZXIoYm90SWRzLCB0YWdOYW1lLCBjb25maWdCb3QudGFncy5pbnN0KTsKICAgICAgICB3aGlzcGVyKGJvdElkcywgIm9uU2tpbGxVcGRhdGUiLCB7IGRhdGE6IHNraWxsRGF0YSB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIE5vIGJvdHMgYXBwZWFyIHRvIGhhdmUgYmVlbiBsb2FkZWQgd2l0aCAke3NraWxsTmFtZX0uYCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiB0cnVlOwp9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmVycm9yKGUpOwogICAgY29uc29sZS5lcnJvcihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIEZhaWxlZCB0byBkb3dubG9hZCAke3NraWxsTmFtZX0uIFNlZSBhYm92ZSBlcnJvci5gKTsKICAgIHJldHVybiBmYWxzZTsKfScA9K/8xg4AC2Rlc2NyaXB0aW9uAgQA9K/8xg7LN09UaGlzIHNraWxsIGlzIGRlc2lnbmVkIHRvIGhhbmRsZSBib3RoIHJlY29uZmlndXJhdGlvbiBvZiBhYiBhbmQgaW5pdGlhbGl6YXRpb24uJwD0r/zGDgAKb25Cb3RBZGRlZAIEAPSv/MYOmzjYAUBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGFiQ29yZSBTVEFSVCBVUGApOwoKaWYgKCFsaW5rcy5yZW1lbWJlcikgewogICAgY29uc29sZS5lcnJvcihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIENvdWxkIG5vdCBmaW5kIGFiQ29uZmlnIHJlbWVtYmVyIGJvdC5gKTsKfQoKc2V0VGltZW91dCgoKSA9PiB0aGlzQm90LmFiQm9vdCgpLCA1MDApOycA9K/8xg4ACHJlbWVtYmVyAgQA9K/8xg70OSjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD0r/zGDgADbG9nAgQA9K/8xg6bOmxALy9wYXNzIHRocm91Z2ggbG9nIGRhdGEKaWYgKGxpbmtzLmNvbnNvbGUpIHsKICAgIGxpbmtzLmNvbnNvbGUubG9nKHRoYXQpOwp9CmVsc2UgewogICAgY29uc29sZS5sb2codGhhdCk7Cn0nAPSv/MYOAA1tYW5pZmVzdGF0aW9uAgQA9K/8xg6IOyjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD0r/zGDgAMYWJDcmVhdGVIb3N0AgQA9K/8xg6vO5YKQGNvbnN0IHNpdGVPcmlnaW4gPSBuZXcgVVJMKGNvbmZpZ0JvdC50YWdzLnVybCkub3JpZ2luOwoKLy90aGlzIGZ1bmN0aW9uIGhhbmRsZXMgY3JlYXRpbmcgYSBmaWxlIGZvciBqb2luIGNvZGVzCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmhvc3RJRCkgewogICAgb3MudG9hc3QoInVybCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7CgogICAgb3Muc2V0Q2xpcGJvYXJkKHNpdGVPcmlnaW4gKyAiLz9qb2luQ29kZT0iICsgbGlua3MucmVtZW1iZXIudGFncy5ob3N0SUQuc3Vic3RyaW5nKDAsIDMpICsgIi0iICsgbGlua3MucmVtZW1iZXIudGFncy5ob3N0SUQuc3Vic3RyaW5nKDMpKTsKCiAgICByZXR1cm47Cn0KCmlmICghYXV0aEJvdCkgewogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3QoKTsKfQoKaWYgKCFhdXRoQm90KSB7CiAgICBvcy50b2FzdCgicGxlYXNlIGxvZyBpbiB0byBnZW5lcmF0ZSBhIGpvaW4gY29kZSIpOwogICAgcmV0dXJuOwp9Cgpjb25zdCBuZXdIb3N0SUQgPSB1dWlkKCkucmVwbGFjZUFsbCgiLSIsICIiKS5zdWJzdHJpbmcoMCwgNik7CmNvbnN0IGRhdGUgPSBEYXRlVGltZS5ub3coKS50b01pbGxpcygpOwpjb25zdCByZWNvcmRLZXkgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5Owpjb25zdCByZWNvcmREYXRhID0gYXdhaXQgb3MucmVjb3JkRGF0YShyZWNvcmRLZXksIG5ld0hvc3RJRCwgeyB1cmw6IGNvbmZpZ0JvdC50YWdzLnVybCwgZGF0ZTogZGF0ZSwgbWFya2VyczogWyJwdWJsaWNSZWFkIl0gfSk7CgppZiAocmVjb3JkRGF0YS5zdWNjZXNzKSB7CiAgICBzZXRUYWdNYXNrKGxpbmtzLnJlbWVtYmVyLCAnaG9zdElEJywgbmV3SG9zdElELnN1YnN0cmluZygwLCAzKSArICItIiArIG5ld0hvc3RJRC5zdWJzdHJpbmcoMyksICdzaGFyZWQnKTsKCiAgICBjb25zdCBqb2luVVJMID0gc2l0ZU9yaWdpbiArICIvP2pvaW5Db2RlPSIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmhvc3RJRDsKCiAgICBvcy5zZXRDbGlwYm9hcmQoam9pblVSTCk7CgogICAgdGhhdC50YWdzLmxhYmVsID0gImpvaW4gY29kZTogIiArIG5ld0hvc3RJRC5zdWJzdHJpbmcoMCwgMykgKyAiLSIgKyBuZXdIb3N0SUQuc3Vic3RyaW5nKDMpOwoKICAgIG9zLnNob3dRUkNvZGUoam9pblVSTCk7CgogICAgb3MudG9hc3QoImhvc3QgZ2VuZXJhdGVkLCB1cmwgY29waWVkIHRvIGNsaXBib2FyZDogIiArIG5ld0hvc3RJRCk7Cn0KZWxzZSB7CiAgICBvcy50b2FzdCgic29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4iKTsKCiAgICBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwp9JwD0r/zGDgAKYWJKb2luSG9zdAIEAPSv/MYOxkXuBkAvL2xvZ2ljIGZvciB1c2luZyBhIGpvaW4gY29kZSAoY2hlY2tzIGZvciBleGlzdGluZyBmaWxlcykKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmxldCBnZXRSZWNvcmQ7CgppZiAodGhhdC5kYXRhKSB7CiAgICBnZXRSZWNvcmQgPSB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHRoYXQuZGF0YSB9Owp9CmVsc2UgewogICAgY29uc3Qgam9pbkNvZGUgPSB0aGF0LnRleHQucmVwbGFjZUFsbCgiLSIsICIiKTsKICAgIGNvbnN0IHJlY29yZEtleSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJSZWNvcmRLZXk7CiAgICBjb25zb2xlLmxvZygiSk9JTkNPREUiLCBqb2luQ29kZSkKICAgIGdldFJlY29yZCA9IGF3YWl0IG9zLmdldERhdGEocmVjb3JkS2V5LCBqb2luQ29kZSk7Cn0KCmlmIChnZXRSZWNvcmQuc3VjY2VzcykgewogICAgY29uc3QgZGF0ZSA9IERhdGVUaW1lLm5vdygpOwogICAgbGV0IGNyZWF0ZURhdGUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKGdldFJlY29yZC5kYXRhLmRhdGUpOwogICAgbGV0IGRpZmZlcmVuY2UgPSBkYXRlLmRpZmYoY3JlYXRlRGF0ZSwgImRheXMiKS50b09iamVjdCgpOwoKICAgIGRpZmZlcmVuY2UgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UuZGF5cyk7CgogICAgaWYgKGRpZmZlcmVuY2UgPCA4KSB7CiAgICAgICAgb3MudG9hc3QoImpvaW5pbmcgaG9zdCBub3ciKTsKCiAgICAgICAgb3MuZ29Ub1VSTChnZXRSZWNvcmQuZGF0YS51cmwpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgb3MudG9hc3QoImpvaW4gY29kZSBvdXQgb2YgZGF0ZSwgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IGpvaW4gY29kZSIpOwogICAgfQp9CmVsc2UgewogICAgb3MudG9hc3QoImNvZGUvYWIgaW52YWxpZCwgcGxlYXNlIHRyeSBhZ2FpbiIpOwp9JwD0r/zGDgAGc2VhcmNoAgQA9K/8xg61TCjwn5SXZDgzNzE0NDQtOTE1OC00NDM2LThmYzctODRjYzkxYjdmNTI1JwD0r/zGDgAIYWJJZ25vcmUCBAD0r/zGDtxMBHRydWUnAPSv/MYOAARtZW51AgQA9K/8xg7hTCjwn5SXYjMwYzZjNWQtYTRmNy00MjY2LWJhMzgtMzkzZGM5NWUxZWNiJwD0r/zGDgAVYWJTa2lsbEluaXRpYWxpemF0aW9uAgQA9K/8xg6ITdABQC8vRmluZCB0aGUgYXBwcm9wcmlhdGUgYXJyYXkgYW5kIHBvcHVsYXRlIHNraWxscwpsZXQgc2tpbGxBcnJheSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3NbdGhhdCArICJTa2lsbEFycmF5Il07Cgpmb3IgKGxldCBpID0gMDsgaSA8IHNraWxsQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgIGF3YWl0IHRoaXNCb3QuYWJBZGFwdChza2lsbEFycmF5W2ldKTsKfQoKcmV0dXJuOycA9K/8xg4ABmJhbm5lcgIEAPSv/MYO2U4o8J+Ul2I1NTJlYWY5LWE5ZDYtNDFjOC04NTE1LWNiZDJhYmVhYWU3MycA9K/8xg4ABWlucHV0AgQA9K/8xg6ATyjwn5SXZjg2MDI4NzgtYzJlZi00OGJkLTg1YTAtOGQ2MzUxZWI0MTIwJwD0r/zGDgANbG9hZGluZ1N0YXR1cwIEAPSv/MYOp0/GB0Bjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYkxvYWRTdGF0dXMiOwoKbGV0IHN0YXR1c0JvdCA9IHt9OwoKc3RhdHVzQm90LnNwYWNlID0gInRlbXBMb2NhbCI7CnN0YXR1c0JvdC5sYWJlbCA9ICJ2ZXJpZnlpbmcgYXV0aEJvdCI7CnN0YXR1c0JvdC5sYWJlbENvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKc3RhdHVzQm90LmFiTG9hZFN0YXR1cyA9IHRydWU7CnN0YXR1c0JvdC5tZW51SXRlbVN0eWxlID0geyAiYmFja2dyb3VuZCI6ICJub25lIiB9OwpzdGF0dXNCb3QudHJhY2tOdW0gPSAwOwpzdGF0dXNCb3Qub25DcmVhdGUgPSBgQAogICAgaWYgKHRhZ3MudHJhY2tOdW0gPT0gMikgewogICAgICAgIHRhZ3MudHJhY2tOdW0gPSAwOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgdGFncy50cmFja051bSsrOwogICAgfQoKICAgIHRhZ3MubGFiZWwgPSB0YWdzWyJsYWJlbCIrdGFncy50cmFja051bV07CiAgICB0YWdzLmZvcm1BZGRyZXNzID0gdGFnc1siZm9ybSIrdGFncy50cmFja051bV07CgogICAgc2V0VGltZW91dCgoKSA9PiB3aGlzcGVyKHRoaXNCb3QsICJvbkNyZWF0ZSIpLCA1MDApO2A7CnN0YXR1c0JvdC5sYWJlbDAgPSAidmVyaWZ5aW5nIGF1dGhCb3QuIjsKc3RhdHVzQm90LmxhYmVsMSA9ICJ2ZXJpZnlpbmcgYXV0aEJvdC4uIjsKc3RhdHVzQm90LmxhYmVsMiA9ICJ2ZXJpZnlpbmcgYXV0aEJvdC4uLiI7CnN0YXR1c0JvdC5mb3JtMCA9ICJob3VyZ2xhc3NfYm90dG9tIjsKc3RhdHVzQm90LmZvcm0xID0gImhvdXJnbGFzc190b3AiOwpzdGF0dXNCb3QuZm9ybTIgPSAiaG91cmdsYXNzX2JvdHRvbSI7CnN0YXR1c0JvdC5vbkRlc3Ryb3kgPSBgQAogICAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwpgOwoKbGV0IGNyZWF0ZWRTdGF0dXNCb3QgPSBjcmVhdGUoc3RhdHVzQm90KTsKCnJldHVybiBjcmVhdGVkU3RhdHVzQm90OycA9K/8xg4AA2FzawIEAPSv/MYO7lYo8J+Ul2VjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNycA9K/8xg4ADWFiTG9hZFN0dWRpb3MCBAD0r/zGDpVXW0Bjb25zdCB1c2VyU3R1ZGlvcyA9IGF3YWl0IG9zLmxpc3RVc2VyU3R1ZGlvcygpOwpjb25maWdCb3QudGFncy51c2VyX3N0dWRpb3MgPSB1c2VyU3R1ZGlvczsnAPSv/MYOAAdhYlRpbWVyAgQA9K/8xg7xV8EGQGlmIChnZXRCb3QoImFiVGltZXIiLCB0cnVlKSkgewogICAgcmV0dXJuOwp9CgppZiAoIXRhZ3MuYWJYUCkgewogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJYUCIsICIwIiwgImxvY2FsIik7Cn0KCmxldCB0aW1lckJvdCA9IHt9OwoKdGltZXJCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKdGltZXJCb3QubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CnRpbWVyQm90Lm9uQ3JlYXRlID0gYEAKICAgIG1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5vblRpbWVDaGVjaygpLCA2MDAwMCk7CmA7CnRpbWVyQm90LmFiVGltZXIgPSB0cnVlOwp0aW1lckJvdC5vblRpbWVDaGVjayA9IGBACiAgICBpZiAodGFncy5ub3RJZGxlKSB7CiAgICAgICAgdGFncy5ub3RJZGxlID0gZmFsc2U7CgogICAgICAgIC8vY29uc29sZS5sb2coIlhQIiwgbGlua3MubWFuYWdlci50YWdzLmFiWFApOwoKICAgICAgICBjb25zdCB0b3RhbFhQID0gbGlua3MubWFuYWdlci50YWdzLmFiWFAgKyAxOwoKICAgICAgICBzZXRUYWdNYXNrKGxpbmtzLm1hbmFnZXIsICJhYlhQIiwgdG90YWxYUCwgImxvY2FsIik7CiAgICB9CmA7CnRpbWVyQm90Lm5vdElkbGUgPSBmYWxzZTsKdGltZXJCb3Qub25BbnlBY3Rpb24gPSBgQAogICAgaWYgKCF0YWdzLm5vdElkbGUpIHsKICAgICAgICBpZiAodGhhdC5hY3Rpb24uaWQgPT0gZ3JpZFBvcnRhbEJvdC5pZCkKICAgICAgICB7CiAgICAgICAgICAgIHRhZ3Mubm90SWRsZSA9IHRydWU7CiAgICAgICAgfQogICAgfQpgOwoKbGV0IGFiVGltZXIgPSBjcmVhdGUodGltZXJCb3QpOwoKZ2xvYmFsVGhpcy5hYlRpbWVyID0gYWJUaW1lcjsnAPSv/MYOAAVzdG9yZQIEAPSv/MYOs14o8J+Ulzc2YWYwNDkxLTM5MTktNDk4NC1hYTgyLTIyYzc0MmY0MjYzZicA9K/8xg4ADG9uSW5zdEpvaW5lZAIEAPSv/MYO2l75AUBpZiAoIXRhZ3MuYWJJbnN0KSB7CiAgICBjb25zdCBhbGxJbnN0cyA9IGNvbmZpZ0JvdC50YWdzLmluc3Q7CgogICAgbGV0IGFjdGl2ZUluc3QgPSB0aGF0Lmluc3Q7CgogICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSW5zdHMpKSB7CiAgICAgICAgYWN0aXZlSW5zdCA9IGFsbEluc3RzW2FsbEluc3RzLmxlbmd0aCAtIDFdOwogICAgfQoKICAgIHNldFRhZ01hc2sodGhpc0JvdCwgJ2FiSW5zdCcsIGFjdGl2ZUluc3QsICdzaGFyZWQnKTsKfScA9K/8xg4AB2NvbnNvbGUCBAD0r/zGDtRgKPCflJcyNGI3ZTY2Zi0wZDViLTQwNjQtYmY0OC1iNTYyYjllNmUzZWInAPSv/MYOAAlhYlZlcnNpb24CBAD0r/zGDvtgBDEwLjQnAPSv/MYOAAxhYkxvYWRDb25maWcCBAD0r/zGDoBhmgZAY29uc3QgdXJsID0gbmV3IFVSTChvcy5nZXRBQjFCb290c3RyYXBVUkwoKSk7CnVybC5wYXRobmFtZSA9IHVybC5wYXRobmFtZS5yZXBsYWNlKCdhYjEuYXV4JywgJ2FiQ29uZmlnLmF1eCcpOwoKdHJ5IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2ViLmhvb2soeyBtZXRob2Q6ICJHRVQiLCB1cmw6IHVybC5ocmVmIH0pOwoKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gQ291bGQgbm90IGRvd25sb2FkIGFiQ29uZmlnLiBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCB1cGRhdGVzID0gcmVzcG9uc2UuZGF0YS51cGRhdGVzOwogICAgYXdhaXQgb3MuYXBwbHlVcGRhdGVzVG9JbnN0KHVwZGF0ZXMpOwoKICAgIGlmIChsaW5rcy5yZW1lbWJlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gTG9hZGVkIGFiQ29uZmlnIGF1eCBidXQgY291bGQgbm90IGZpbmQgcmVtZW1iZXIgYm90LmApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIGNvbnNvbGUuZXJyb3IoYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBGYWlsZWQgdG8gZG93bmxvYWQgYWJDb25maWcuIFNlZSBhYm92ZSBlcnJvci5gKTsKICAgIHJldHVybiBmYWxzZTsKfScA9K/8xg4AF2FiQnVpbGRDYXN1YWxDYXRhbG9nVVJMAgQA9K/8xg6bZ/8BQGNvbnN0IHJlbGF0aXZlUGF0aCA9IHRoYXQ7Cgpjb25zdCB1cmwgPSBuZXcgVVJMKGxpbmtzLnJlbWVtYmVyLnRhZ3MuY2FzdWFsQ2F0YWxvZ1VSTCk7CmNvbnN0IGVudiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuY2FzdWFsQ2F0YWxvZ0VudjsKCnVybC5wYXRobmFtZSA9IHJlbGF0aXZlUGF0aDsKCmlmIChlbnYgJiYgZW52ICE9PSAncHJvZCcpIHsKICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdlbnYnLCBlbnYpOwp9CgpyZXR1cm4gdXJsLmhyZWY7JwD0r/zGDgAHY2hhbm5lbAIEAPSv/MYOm2ko8J+Ul2ExNmQzYTQ2LTliMDctNGQ2Yi05ODJlLTE5ZmRjOTUzZGIyNScA9K/8xg4AC3BlcnNvbmFsaXR5AgQA9K/8xg7CaSjwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiAA=="}]}