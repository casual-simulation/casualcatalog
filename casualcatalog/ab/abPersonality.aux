{"version":2,"updates":[{"id":0,"timestamp":1752590107510,"update":"AX7jhvqeDAAnAQRib3RzJDE2NTU0YmMxLWU5M2UtNGEwYi04Y2QzLWRmZDc3MjMxOTY3MgEnAOOG+p4MAAZzeXN0ZW0CBADjhvqeDAEWYWIucGVyc29uYWxpdHkudmVyc2lvbicA44b6ngwAGWFiUGVyc29uYWxpdHlNYWpvclZlcnNpb24CBADjhvqeDBgBMScA44b6ngwAGWFiUGVyc29uYWxpdHlNaW5vclZlcnNpb24CBADjhvqeDBoBMicA44b6ngwADW9uU2tpbGxVcGRhdGUCBADjhvqeDBytAUBjb25zdCB2ZXJzaW9uU3RyaW5nID0gdGFncy5hYlBlcnNvbmFsaXR5TWFqb3JWZXJzaW9uICsgIi4iICsgdGFncy5hYlBlcnNvbmFsaXR5TWlub3JWZXJzaW9uOwoKY29uc29sZS5sb2coIltBQlBlcnNvbmFsaXR5XSBMb2FkZWQgQUIgUGVyc29uYWxpdHkgdmVyc2lvbiAiICsgdmVyc2lvblN0cmluZyk7JwDjhvqeDAANYWJQZXJzb25hbGl0eQIEAOOG+p4MygEEdHJ1ZScA44b6ngwACGFiSWdub3JlAgQA44b6ngzPAQR0cnVlJwDjhvqeDAAEZm9ybQIEAOOG+p4M1AEHbm90aGluZycA44b6ngwACWFiVmVyc2lvbgIEAOOG+p4M3AEEMTAuNCcBBGJvdHMkYjI2ZTEwODktMTcyZC00NWE5LThkMjItMDVjM2Y1OGMyYmY3AScA44b6ngzhAQZzeXN0ZW0CBADjhvqeDOIBGGFiLnBlcnNvbmFsaXR5LmFuaW1hdGlvbicA44b6ngzhAQRmb3JtAgQA44b6ngz7AQdub3RoaW5nJwDjhvqeDOEBCGFiSWdub3JlAgQA44b6ngyDAgR0cnVlJwDjhvqeDOEBDW1hbmlmZXN0YXRpb24CBADjhvqeDIgCKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAOOG+p4M4QEIcmVtZW1iZXICBADjhvqeDK8CKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOOG+p4M4QEYYW5pbWF0aW9uX2FiR3JpZE1hbmlmZXN0AgQA44b6ngzWAuoOQHNob3V0KCJyZXNldCIpOwoKY29uc3QgcG9zaXRpb25YID0gdGhhdD8ucG9zaXRpb24ueCA/PyAwOwpjb25zdCBwb3NpdGlvblkgPSB0aGF0Py5wb3NpdGlvbi55ID8/IDA7CmNvbnN0IGRpbWVuc2lvbiA9IHRoYXQ/LmRpbWVuc2lvbiA/PyAiaG9tZSI7CmNvbnN0IGdyaWRTY2FsZSA9IHRoYXQ/LnNjYWxlID8/IDU7CmNvbnN0IG1vbWVudENvdW50ID0gMDsKY29uc3QgZ3JpZEJvdCA9IHt9OwoKZ3JpZEJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpncmlkQm90LmNvbG9yID0gImNsZWFyIjsKZ3JpZEJvdC5zdHJva2VDb2xvciA9IGFiUGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKZ3JpZEJvdC5zY2FsZSA9IDAuMDAxOwpncmlkQm90LnNjYWxlWiA9IDAuMTsKZ3JpZEJvdC5yZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKZ3JpZEJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKZ3JpZEJvdC5wb2ludGFibGUgPSBmYWxzZTsKZ3JpZEJvdC5raWxsVGltZXIgPSAiQCBhd2FpdCBvcy5zbGVlcCg0MDApOyBkZXN0cm95KHRoaXNCb3QpOyI7CgpsZXQgcm91bmRCb3RzOwoKZm9yIChsZXQgaSA9IGdyaWRTY2FsZTsgaSA+IDA7IGktLSkKewogICAgY29uc3QgYm90Q291bnQgPSBpICogODsKCiAgICBsZXQgc2lkZUNvdW50ID0gMDsKICAgIGxldCBwaGFzZUZhY3RvciA9IDA7CgogICAgZm9yIChsZXQgaiA9IDA7IGogPCBib3RDb3VudDsgaisrKQogICAgewogICAgICAgIGlmIChwaGFzZUZhY3RvciA9PSAwKQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gKChpICsgcG9zaXRpb25YKSAqIC0xKSArIHNpZGVDb3VudDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gaSArIHBvc2l0aW9uWTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAocGhhc2VGYWN0b3IgPT0gMSkKICAgICAgICB7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlgiXSA9IGkgKyBwb3NpdGlvblg7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9IChpICsgcG9zaXRpb25ZKSAtIHNpZGVDb3VudDsgIAogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwaGFzZUZhY3RvciA9PSAyKQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gKGkgKyBwb3NpdGlvblgpIC0gc2lkZUNvdW50OwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSAoKGkgKyBwb3NpdGlvblkpICogLTEpIDsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gKChpICsgcG9zaXRpb25YKSAqIC0xKSA7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9ICgoaSArIHBvc2l0aW9uWSkgKiAtMSkgKyBzaWRlQ291bnQ7ICAKICAgICAgICB9CgogICAgICAgIGNvbnN0IG5ld0dyaWRCb3QgPSBhd2FpdCBjcmVhdGUoZ3JpZEJvdCk7CgogICAgICAgIGFuaW1hdGVUYWcobmV3R3JpZEJvdCwgInNjYWxlIiwgewogICAgICAgICAgICB0b1ZhbHVlOiAxLAogICAgICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlbGFzdGljIiwKICAgICAgICAgICAgICAgIG1vZGU6ICJvdXQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGR1cmF0aW9uOiAwLjAxCiAgICAgICAgfSk7CgogICAgICAgIG5ld0dyaWRCb3Qua2lsbFRpbWVyKCk7CgogICAgICAgIHNpZGVDb3VudCsrOwoKICAgICAgICBpZiAoc2lkZUNvdW50ID09IGJvdENvdW50IC8gNCkKICAgICAgICB7CiAgICAgICAgICAgIHNpZGVDb3VudCA9IDA7CgogICAgICAgICAgICBwaGFzZUZhY3RvcisrOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgb3Muc2xlZXAoOCk7CiAgICB9Cn0nAOOG+p4M4QEJYWJWZXJzaW9uAgQA44b6ngzBEQQxMC40JwDjhvqeDOEBBm9uQ2hhdAIEAOOG+p4MxhFVQC8vIGlmICh0aGF0Lm1lc3NhZ2UgPT0gIkB0ZXN0IikKLy8gewovLyAgICAgdGhpc0JvdC5hbmltYXRpb25fYWJHcmlkTWFuaWZlc3QoKTsKLy8gfScA44b6ngzhAQtwZXJzb25hbGl0eQIEAOOG+p4MnBIo8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYicA44b6ngzhAQ1hYlBlcnNvbmFsaXR5AgQA44b6ngzDEgR0cnVlJwEEYm90cyRiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGIBJwDjhvqeDMgSBnN5c3RlbQIEAOOG+p4MyRIVYWIucGVyc29uYWxpdHkuY29uZmlnJwDjhvqeDMgSCGFiSWdub3JlAgQA44b6ngzfEgR0cnVlJwDjhvqeDMgSBGZvcm0CBADjhvqeDOQSB25vdGhpbmcnAOOG+p4MyBILYWJCYXNlQ29sb3ICBADjhvqeDOwSByMwMEQ5Q0QnAOOG+p4MyBIRYWJCYXNlU3Ryb2tlQ29sb3ICBADjhvqeDPQSByMwMEQ5Q0QnAOOG+p4MyBIQYWJCbHVlcHJpbnRDb2xvcgIEAOOG+p4M/BIHIzAwODI3QicA44b6ngzIEghyZW1lbWJlcgIEAOOG+p4MhBMo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA44b6ngzIEhFhYkJ1aWxkZXJJZGVudGl0eQIEAOOG+p4MqxMKY2FzdWFsLmJvdCcA44b6ngzIEglhYlZlcnNpb24CBADjhvqeDLYTBDEwLjQnAOOG+p4MyBIXY2hhbmdlUGVyc29uYWxpdHlDb25maWcCBADjhvqeDLsT0AlAaWYgKCF0aGF0KSB7DQogICAgcmV0dXJuOw0KfQ0KDQppZiAoIWF1dGhCb3QpIHsNCiAgICBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdEluQmFja2dyb3VuZCgpOw0KfQ0KDQppZiAoIWF1dGhCb3QpIHsNCiAgICByZXR1cm47DQp9DQoNCmF3YWl0IG9zLmdyYW50SW5zdEFkbWluUGVybWlzc2lvbihhdXRoQm90LmlkKTsNCg0KbGV0IGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0gYXdhaXQgb3MuZ2V0RGF0YShhdXRoQm90LmlkLCAiYWJQZXJzb25hbGl0eUNvbmZpZyIpOw0KDQppZiAoYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2VzcyA9PSBmYWxzZSkgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0ge307DQp9IGVsc2Ugew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0gYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuZGF0YTsNCn0NCg0KaWYgKHRoYXQubmFtZSkgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJ1aWxkZXJJZGVudGl0eSJdID0gdGhhdC5uYW1lOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQnVpbGRlcklkZW50aXR5IiwgdGhhdC5uYW1lLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQuY29sb3IpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlQ29sb3IiXSA9IHRoYXQuY29sb3I7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQmFzZVN0cm9rZUNvbG9yIl0gPSB0aGF0LmNvbG9yOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQmFzZUNvbG9yIiwgdGhhdC5jb2xvciwgImxvY2FsIik7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlU3Ryb2tlQ29sb3IiLCB0aGF0LmNvbG9yLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQubWVudUNvbG9yKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQmFzZU1lbnVDb2xvciJdID0gdGhhdC5tZW51Q29sb3I7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlTWVudUNvbG9yIiwgdGhhdC5tZW51Q29sb3IsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5mb3JtKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiRm9ybSJdID0gdGhhdC5mb3JtOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiRm9ybSIsIHRoYXQuZm9ybSwgImxvY2FsIik7DQp9DQphd2FpdCBvcy5yZWNvcmREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIiwgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEpOycA44b6ngzIEg9hYkJhc2VNZW51Q29sb3ICBADjhvqeDIwdByMwMEQ5Q0QnAOOG+p4MyBIRdXBkYXRlUGVyc29uYWxpdHkCBADjhvqeDJQdvghAaWYgKCFhdXRoQm90KSB7DQogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsNCn0NCg0KaWYgKCFhdXRoQm90KSB7DQogICAgcmV0dXJuOw0KfQ0KDQpsZXQgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhd2FpdCBvcy5nZXREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIik7DQoNCmlmICghbGlua3MucmVtZW1iZXIgJiYgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2VzcyA9PSBmYWxzZSkgew0KICAgIHJldHVybjsNCn0NCg0KaWYgKGFiUGVyc29uYWxpdHlDb25maWdEYXRhLnN1Y2Nlc3MpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IGFiUGVyc29uYWxpdHlDb25maWdEYXRhLmRhdGE7DQp9DQoNCi8vYWJCbHVlUHJpbnRDb2xvcg0KLy9hYkJhc2VMYWJlbENvbG9yDQovL2FiQmFzZUFjY2VudENvbG9yDQovL2FiTWVudVNoYWRvd0NvbG9yPw0KY29uc3QgYWJUYWdzID0gWyJhYkJhc2VDb2xvciIsICJhYkJhc2VNZW51Q29sb3IiLCAiYWJCdWlsZGVySWRlbnRpdHkiLCAiYWJCYXNlU3Ryb2tlQ29sb3IiXTsNCg0KZm9yIChsZXQgaSA9IDA7IGkgPCBhYlRhZ3MubGVuZ3RoOyArK2kpIHsNCiAgICBpZiAoYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgJiYgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbYWJUYWdzW2ldXSkgew0KICAgICAgICBpZiAodGFnc1thYlRhZ3NbaV1dICE9IGFiUGVyc29uYWxpdHlDb25maWdEYXRhW2FiVGFnc1tpXV0pIHsNCiAgICAgICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgYWJUYWdzW2ldLCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dLCAibG9jYWwiKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSBpZiAobGlua3MucmVtZW1iZXIgJiYgbGlua3MucmVtZW1iZXIudGFnc1thYlRhZ3NbaV1dKSB7DQogICAgICAgIGlmIChsaW5rcy5yZW1lbWJlci50YWdzW2FiVGFnc1tpXV0gIT0gdGFnc1thYlRhZ3NbaV1dKSB7DQogICAgICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIGFiVGFnc1tpXSwgbGlua3MucmVtZW1iZXIudGFnc1thYlRhZ3NbaV1dLCAibG9jYWwiKTsNCiAgICAgICAgfQ0KICAgIH0NCn0nAOOG+p4MyBINYWJQZXJzb25hbGl0eQIEAOOG+p4M0yUEdHJ1ZScA44b6ngzIEg1vblNraWxsVXBkYXRlAgQA44b6ngzYJR1AdGhpc0JvdC51cGRhdGVQZXJzb25hbGl0eSgpOycBBGJvdHMkZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkAScA44b6ngz2JQZzeXN0ZW0CBADjhvqeDPclHGFiLnBlcnNvbmFsaXR5Lm1hbmlmZXN0YXRpb24nAOOG+p4M9iUEZm9ybQIEAOOG+p4MlCYHbm90aGluZycA44b6ngz2JQtkZXNjcmlwdGlvbgIEAOOG+p4MnCY4VGhpcyBza2lsbCBjb250cm9scyB0aGUgYWN0dWFsIGJvdCBmb3IgdGhlIGFiIGludGVyZmFjZS4nAOOG+p4M9iUFbGVhcm4CBADjhvqeDNUmKPCflJc2NjU3Yjg2NS1lOTgzLTQ0MDEtOWZjOS1mNTQxOGQxOGE3ZjcnAOOG+p4M9iUPb25Qb3J0YWxDaGFuZ2VkAgQA44b6ngz8JrwNQGlmIChjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCAhPSBudWxsIHx8IGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCAhPSBudWxsKQp7CiAgICBpZiAodGFncy5hYkJvdCkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgfHwgdGhhdC5wb3J0YWwgPT0gInRhZ1BvcnRhbCIgfHwgdGhhdC5wb3J0YWwgPT0gIm1lbnVQb3J0YWwiIHx8ICh0aGF0LnBvcnRhbCA9PSAiZ3JpZFBvcnRhbCIgJiYgY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSkKewogICAgcmV0dXJuOwp9CgppZiAodGFncy5hYkJvdCkKewogICAgZGVzdHJveShsaW5rcy5hYkJvdCk7Cn0KCmNvbnN0IHBvcnRhbEFycmF5ID0gWyJtaW5pR3JpZFBvcnRhbCIsICJncmlkUG9ydGFsIiwgIm1hcFBvcnRhbCIsICJtaW5pTWFwUG9ydGFsIiwgImxlZnRXcmlzdFBvcnRhbCIsICJyaWdodFdyaXN0UG9ydGFsIl07CgpsZXQgbWFwUG9ydGFsQ2hlY2sgPSBmYWxzZTsKbGV0IG5ld0FCID0gZmFsc2U7CgppZiAocG9ydGFsQXJyYXkuaW5kZXhPZih0aGF0LnBvcnRhbCkgIT0gLTEgJiYgdGhhdC5kaW1lbnNpb24gJiYgIWNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsKQp7CiAgICBpZiAodGhhdC5wb3J0YWwgPT0gIm1hcFBvcnRhbCIpCiAgICB7CiAgICAgICAgbmV3QUIgPSBhd2FpdCB0aGlzQm90LmFiTWFuaWZlc3RCb3QoeyBkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IC04NS42NzYxODk0ODIyNDM0LCB5OiA0Mi45NjU2NzU2NzU2NzU2fX0pOwoKICAgICAgICBtYXBQb3J0YWxDaGVjayA9IHRydWU7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbmV3QUIgPSBhd2FpdCB0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OjAseTowfX0pOwogICAgfQp9CmVsc2UgaWYgKHBvcnRhbEFycmF5LmluZGV4T2YodGhhdC5wb3J0YWwpID09IC0xICYmICF0aGF0LmRpbWVuc2lvbikKewogICAgY29uc3Qgc3VtbW9uRGltZW5zaW9uID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgIAogICAgbWFwUG9ydGFsQ2hlY2sgPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyB0cnVlIDogZmFsc2U7CgogICAgaWYgKG1hcFBvcnRhbENoZWNrKQogICAgewogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHsgZGltZW5zaW9uOiBzdW1tb25EaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogLTg1LjY3NjE4OTQ4MjI0MzQsIHk6IDQyLjk2NTY3NTY3NTY3NTZ9fSk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbmV3QUIgPSBhd2FpdCB0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogc3VtbW9uRGltZW5zaW9uLCBwb3NpdGlvbjp7eDowLHk6MH19KTsKICAgIH0KfQplbHNlCnsKICAgIHJldHVybjsKfQoKaWYgKG5ld0FCKQp7CiAgICBhd2FpdCBvcy5zbGVlcCg1MDApCgogICAgY29uc3Qgem9vbVZhcmlhbmNlID0gbWFwUG9ydGFsQ2hlY2sgPyAyMDAwIDogMTA7CgogICAgYXdhaXQgb3MuZm9jdXNPbihsaW5rcy5hYkJvdCwge3pvb206IHpvb21WYXJpYW5jZSwgcm90YXRpb246IHt4OiA0NSwgeTogNDV9fSkuY2F0Y2goZSA9PiB7fSk7Cn0nAOOG+p4M9iUIcmVtZW1iZXICBADjhvqeDLk0KPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOOG+p4M9iUNYWJNYW5pZmVzdEJvdAIEAOOG+p4M4DTREUBpZiAodGFncy5hYkJvdCkKewogICAgYXdhaXQgZGVzdHJveShsaW5rcy5hYkJvdCk7Cn0KCmxldCBhYiA9IHt9OwoKYWIuc3BhY2UgPSAidGVtcExvY2FsIjsKYWIuY29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZUNvbG9yOwphYi5mb3JtT3BhY2l0eSA9ICIwLjMzIjsKYWIubGFiZWwgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUxhYmVsOwphYi5sYWJlbFBvc2l0aW9uID0gImZyb250IjsKYWIubGFiZWxDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFiLmxhYmVsU2l6ZSA9IDAuNjE7CmFiLm9uQ2xpY2sgPSAiQCBpZiAodGhhdC5tb2RhbGl0eSA9PSAnbW91c2UnICYmIHRoYXQuYnV0dG9uSWQgPT0gJ3JpZ2h0Jykge3JldHVybjt9IGxpbmtzLm1hbmFnZXIuYWJDbGljaygpOyI7CmFiLmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwphYlt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwphYlt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CmFiW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKYWIuc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwovL2FiLmxpbmVDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFiLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwphYi5hbmltYXRlQm90ID0gYEAgaWYgKGNvbmZpZ0JvdC50YWdzLmFiT3B0aW1pemVkKQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IHJvdFogPSB0YWdzLmRpbWVuc2lvbiArICJSb3RhdGlvbloiOwpsZXQgdGFyZ2V0U2NhbGUgPSAwLjY1OwoKLy8gaWYgKHRhZ3Muc2NhbGUgPD0gMC42NTEpCi8vIHsKLy8gICAgIHRhcmdldFNjYWxlID0gMC45NTsKLy8gfQoKYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LAp7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBbcm90Wl06IDAsCiAgICAgICAgLy9zY2FsZTogdGFncy5zY2FsZQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBbcm90Wl06IDYuMywKICAgICAgICAvL3NjYWxlOiB0YXJnZXRTY2FsZQogICAgfSwKICAgIGVhc2luZzogewogICAgICAgIHR5cGU6ICJzaW51c29pZGFsIiwKICAgICAgICBtb2RlOiAiaW5vdXQiCiAgICB9LAogICAgZHVyYXRpb246IDIKfSkuY2F0Y2goZSA9PiB7fSk7CmA7CmFiLm9uQ3JlYXRlID0gYEAKCnRoaXNCb3QuYW5pbWF0ZUJvdCgpOwoKbWFza3MuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzQm90LmFuaW1hdGVCb3QoKSwgMjAwMCk7CmA7CmFiLm9uRGVzdHJveSA9IGBACmNsZWFySW50ZXJ2YWwodGFncy5pbnRlcnZhbCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwpgOwphYi5kcmFnZ2FibGUgPSBmYWxzZTsKYWIuc2NhbGUgPSAwLjk7CgpsZXQgYWJNYW5pZmVzdGVkID0gYXdhaXQgY3JlYXRlKGFiKTsKCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiU2Vjb25kYXJ5TGFiZWwpCnsKICAgIGxldCBhYkxhYmVsQm90ID0ge307CgogICAgYWJMYWJlbEJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgYWJMYWJlbEJvdFt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwogICAgYWJMYWJlbEJvdFt0aGF0LmRpbWVuc2lvbiArICJaIl0gPSAtMTsKICAgIGFiTGFiZWxCb3QuY3JlYXRvciA9IGFiTWFuaWZlc3RlZC5pZDsKICAgIGFiTGFiZWxCb3QudHJhbnNmb3JtZXIgPSBhYk1hbmlmZXN0ZWQuaWQ7CiAgICBhYkxhYmVsQm90LnBvaW50YWJsZSA9IGZhbHNlOwogICAgYWJMYWJlbEJvdC5jb2xvciA9ICJjbGVhciI7CiAgICBhYkxhYmVsQm90LmxhYmVsID0gbGlua3MucmVtZW1iZXIudGFncy5hYlNlY29uZGFyeUxhYmVsOwogICAgYWJMYWJlbEJvdC5sYWJlbFBvc2l0aW9uID0gImxlZnQiOwogICAgYWJMYWJlbEJvdC5sYWJlbFNpemUgPSAwLjc7CiAgICBhYkxhYmVsQm90LmxhYmVsQ29sb3IgPSBhYk1hbmlmZXN0ZWQudGFncy5sYWJlbENvbG9yOwoKICAgIGNyZWF0ZShhYkxhYmVsQm90KTsKfQoKbWFza3MuYWJCb3QgPSAi8J+UlyIgKyBhYk1hbmlmZXN0ZWQuaWQ7CgpsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkFjdGl2ZURpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwoKc2hvdXQoIm9uQUJNb3ZlZCIsIHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX0pOwoKcmV0dXJuIGFiTWFuaWZlc3RlZDsKCgoKaWYgKGNvbmZpZ0JvdC50YWdzLmFiT3B0aW1pemVkKQp7CiAgICByZXR1cm47Cn0nAOOG+p4M9iUcYWJNYW5pZmVzdFN0YXRlQXNsZWVwT25FbnRlcgIEAOOG+p4MrkZvQGRlc3Ryb3kobGlua3MuYWJCb3QpOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlID0gZmFsc2U7CgpzaG91dCgib25BQlNsZWVwIik7JwDjhvqeDPYlC29uR3JpZENsaWNrAgQA44b6ngyeR44TQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUpCnsKICAgIHJldHVybjsKfQoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbnN0IHNoaWZ0Q2hlY2sgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKHRhZ3MuYWJCb3QgJiYgKHNoaWZ0Q2hlY2sgfHwgKHRoYXQubW9kYWxpdHkgPT0gIm1vdXNlIiAmJiB0aGF0LmJ1dHRvbklkID09ICJyaWdodCIgJiYgIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJSaWdodENsaWNrRGlzYWJsZWQpKSkKewogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwogICAgfQogICAgCiAgICBsZXQgYXJtID0ge307CgogICAgYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICBhcm1bdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIGFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CiAgICBhcm1bdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5wb3NpdGlvbi55OwogICAgYXJtLmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwogICAgYXJtLnNjYWxlID0gMC45OwogICAgYXJtLnNjYWxlWiA9IDAuMDE7CiAgICBhcm0uY29sb3IgPSAiY2xlYXIiOwogICAgYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKICAgIGFybS5saW5lQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgYXJtLmxpbmVUbyA9IGxpbmtzLmFiQm90LmlkOwogICAgYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwogICAgYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwogICAgc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOwogICAgbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRhZ3MuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CgogICAgbGV0IG5ld0FybSA9IGF3YWl0IGNyZWF0ZShhcm0pOwoKICAgIHNob3V0KCJvbkFCQXJtUGxhY2VkIiwge3g6IHRoYXQucG9zaXRpb24ueCwgeTogdGhhdC5wb3NpdGlvbi55fSk7CgogICAgbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOwoKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwoKICAgIHJldHVybjsKfQoKbGV0IGZvb3RwcmludCA9IHt9OwoKZm9vdHByaW50LnNwYWNlID0gInRlbXBMb2NhbCI7CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwpmb290cHJpbnQuZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CmZvb3RwcmludFt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CmZvb3RwcmludC5zY2FsZVogPSAwLjAxOwpmb290cHJpbnQub25DbGljayA9IGBAIHRhZ3NbdGFncy5kaW1lbnNpb25dID0gZmFsc2U7CnNob3V0KCJvbkFCRm9vdENsaWNrZWQiKTsKbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHRhZ3MucG9zaXRpb25JbmZvKTsKYDsKZm9vdHByaW50LnBvc2l0aW9uSW5mbyA9IHRoYXQ7CmZvb3RwcmludC5jb2xvciA9ICJjbGVhciI7CmZvb3RwcmludC5wZXJzb25hbGl0eSA9IHRhZ3MucGVyc29uYWxpdHk7CmZvb3RwcmludC5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmZvb3RwcmludC5kcmFnZ2FibGUgPSBmYWxzZTsKZm9vdHByaW50Lm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwpmb290cHJpbnQub25DcmVhdGUgPSBgQCBzZXRUaW1lb3V0KCgpID0+IGRlc3Ryb3kodGhpc0JvdCksIDgwMCk7CgogICAgYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgIHNjYWxlWDogMC4xLAogICAgICAgICAgICBzY2FsZVk6IDAuMQogICAgICAgIH0sCiAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICBzY2FsZVg6IDEuMSwKICAgICAgICAgICAgc2NhbGVZOiAxLjEKICAgICAgICB9LAogICAgICAgIGR1cmF0aW9uOiAwLjUsCiAgICAgICAgZWFzaW5nOiB7CiAgICAgICAgICAgIHR5cGU6ICJlbGFzdGljIiwKICAgICAgICAgICAgbW9kZTogIm91dCIKICAgICAgICB9CiAgICB9KS5jYXRjaChlID0+IHt9KTsKYDsKCmNyZWF0ZShmb290cHJpbnQpOycA44b6ngz2JQRtZW51AgQA44b6ngynWijwn5SXYjMwYzZjNWQtYTRmNy00MjY2LWJhMzgtMzkzZGM5NWUxZWNiJwDjhvqeDPYlB2FiQ2xpY2sCBADjhvqeDM5alwpAaWYgKCFsaW5rcy5hYkJvdCkKewogICAgcmV0dXJuOwp9CgppZiAobGlua3MuaW5wdXQpIHsKICAgIGxpbmtzLmlucHV0LmFiQ2hhdEJhckNsb3NlKCk7Cn0KCmNvbnN0IG1lbnVUeXBlID0gdGhhdCA/IHRoYXQubWVudSA6ICJjb3JlIjsKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKGxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwgfHwgc3RhdGUpCnsKICAgIGNvbnN0IGFiTWVudUJvdHMgPSBnZXRCb3RzKCJhYk1lbnUiLCB0cnVlKTsKCiAgICB3aGlzcGVyKGFiTWVudUJvdHMsICJhYk1lbnVSZWZyZXNoIik7CiAgICAKICAgIGNsZWFySW50ZXJ2YWwobGlua3MuYWJCb3QudGFncy5pbnRlcnZhbCk7CgogICAgbGlua3MuYWJCb3QubWFza3MuaW50ZXJ2YWwgPSBudWxsOwoKICAgIGNsZWFyQW5pbWF0aW9ucyhsaW5rcy5hYkJvdCk7CgogICAgY29uc3Qgcm90WiA9IGxpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlJvdGF0aW9uWiI7CgogICAgaWYgKHN0YXRlICYmIG1lbnVUeXBlID09ICJjb3JlIikKICAgIHsKICAgICAgICBsaW5rcy5tZW51LmFiRW52aXJvbm1lbnRNZW51KCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYk9wZW5NZW51KG1lbnVUeXBlKTsKICAgIH0KCiAgICBhd2FpdCBhbmltYXRlVGFnKGxpbmtzLmFiQm90LAogICAgewogICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICBbcm90Wl06IGxpbmtzLmFiQm90LnRhZ3Nbcm90Wl0sCiAgICAgICAgICAgIHNjYWxlOiBsaW5rcy5hYkJvdC50YWdzLnNjYWxlCiAgICAgICAgfSwKICAgICAgICB0b1ZhbHVlOiB7CiAgICAgICAgICAgIFtyb3RaXTogMCwKICAgICAgICAgICAgc2NhbGU6IDAuOQogICAgICAgIH0sCiAgICAgICAgZWFzaW5nOiB7CiAgICAgICAgICAgIHR5cGU6ICJzaW51c29pZGFsIiwKICAgICAgICAgICAgbW9kZTogImlub3V0IgogICAgICAgIH0sCiAgICAgICAgZHVyYXRpb246IDAuNQogICAgfSkuY2F0Y2goZSA9PiB7fSk7Cn0KZWxzZQp7CiAgICBsaW5rcy5hYkJvdC5hbmltYXRlQm90KCk7CgogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbnVsbDsKCiAgICBpZiAobGlua3MuYWJCb3QudGFncy5hcm0pCiAgICB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwogICAgfQoKICAgIHNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgogICAgbGlua3MuYWJCb3QubWFza3MuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBsaW5rcy5hYkJvdC5hbmltYXRlQm90KCksIDIwMDApOwp9JwDjhvqeDPYlG2FiTWFuaWZlc3RTdGF0ZUF3YWtlT25FbnRlcgIEAOOG+p4M5mSJAkBsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IHRydWU7CgpsZXQgZGltZW5zaW9uID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKCmlmICghZGltZW5zaW9uKQp7CiAgICByZXR1cm47Cn0KCnRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiBkaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogMCwgeTogMH19KTsKCnNob3V0KCJvbkFCQXdha2UiKTsnAOOG+p4M9iUMb25BbnlCb3REcmFnAgQA44b6ngzwZtYLQGlmICh0aGF0LmJvdCAhPSBsaW5rcy5hYkJvdCkgcmV0dXJuOwoKaWYgKGxpbmtzLmlucHV0KSB7CiAgICBsaW5rcy5pbnB1dC5hYkNoYXRCYXJDbG9zZSgpOwp9CgppZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzICYmIHRoYXQuYm90LmlkID09IGxpbmtzLmFiQm90LmlkKQp7CiAgICBvcy5lbmFibGVDdXN0b21EcmFnZ2luZygpOwoKICAgIHJldHVybjsKfQoKaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7Cn0KCmlmICghdGhhdC5ib3QudGFncy5pbnRlcnZhbCkKewogICAgdGhpc0JvdC5hYkNsaWNrKCk7Cn0KCmxldCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CmxldCBhcm0gPSB7fTsKCmFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb25dID0gdHJ1ZTsKYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSA9IGxpbmtzLmFiQm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdOwphcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdID0gbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl07CmFybS5jcmVhdG9yID0gbGlua3MuYWJCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsKYXJtLnNjYWxlID0gMC45Owphcm0uc2NhbGVaID0gMC4wMTsKYXJtLmNvbG9yID0gImNsZWFyIjsKYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYXJtLmxpbmVDb2xvciA9IGxpbmtzLmFiQm90LnRhZ3Muc3Ryb2tlQ29sb3I7CmFybS5saW5lVG8gPSB0aGF0LmJvdC5pZDsKYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwphcm0ub25DbGljayA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7CnNob3V0KCJvbkFCRm9vdENsaWNrZWQiKTsKbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRhZ3MuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CmFybS5vbkRyb3AgPSBgQCBzaG91dCgib25BQkFybVBsYWNlZCIsIHt4OiB0aGF0LnRvLngsIHk6IHRoYXQudG8ueX0pO2AKCmlmIChzdGF0ZSkKewogICAgYXJtLm11bHRpU2VsZWN0ID0gdHJ1ZTsKICAgIGFybS5mb3JtID0gInNwaGVyZSI7CiAgICBhcm0uY29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmRyYWdnYWJsZSA9IHRydWU7Cn0KCmxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCmxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsKCm9zLnJlcGxhY2VEcmFnQm90KG5ld0FybSk7JwDjhvqeDPYlEW9uQW55Qm90RHJvcEVudGVyAgQA44b6ngzDctgJQGlmICghdGFncy5hYkJvdCkgcmV0dXJuOwppZiAobGlua3MuYWJCb3Q/LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5tdWx0aVNlbGVjdCkKewogICAgbGlua3MuYWJCb3QubWFza3MubGluZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcy5hYkJvdC50YWdzLmxpbmVUbykpCiAgICB7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvLnB1c2godGhhdC50by5ib3QuaWQpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IFt0aGF0LnRvLmJvdC5pZF07CiAgICB9CgogICAgbGV0IG5ld0xpbms7CgogICAgaWYgKCFsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHMpCiAgICB7CiAgICAgICAgbmV3TGluayA9IGdldExpbmsodGhhdC50by5ib3QpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxldCBwcmV2aW91c0xpbmtCb3RzID0gbGlua3MuYWJCb3QubGlua3MuYXJtLmxpbmtzLnNlbGVjdGVkQm90czsKCiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHByZXZpb3VzTGlua0JvdHMpKQogICAgICAgIHsKICAgICAgICAgICAgcHJldmlvdXNMaW5rQm90cyA9IFtwcmV2aW91c0xpbmtCb3RzXQogICAgICAgIH0KCiAgICAgICAgY29uc3QgYWxyZWFkeUFkZGVkID0gcHJldmlvdXNMaW5rQm90cy5zb21lKGIgPT4gYi5pZCA9PT0gdGhhdC50by5ib3QuaWQpOwogICAgICAgIGlmICghYWxyZWFkeUFkZGVkKQogICAgICAgIHsKICAgICAgICAgICAgcHJldmlvdXNMaW5rQm90cy5wdXNoKHRoYXQudG8uYm90KTsKICAgICAgICB9CgogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHByZXZpb3VzTGlua0JvdHMpOwogICAgfQoKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90cyA9IG5ld0xpbms7Cn0KZWxzZQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSAiY2xlYXIiOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IGZhbHNlOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKfScA44b6ngz2JRBvbkFueUJvdERyb3BFeGl0AgQA44b6ngycfJwCQGlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5zdHJva2VDb2xvciA9IG51bGw7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3MubGluZVRvID0gbnVsbDsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0uaWQ7Cn0nAOOG+p4M9iUMb25BbnlCb3REcm9wAgQA44b6ngy5fq0HQG1hc2tzLm11bHRpRHJhZyA9IG51bGw7CgppZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdCkgcmV0dXJuOwppZiAoIWxpbmtzLmFiQm90LnRhZ3MuYXJtKSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiTXVsdGlwbGVCb3RGb2N1cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90czsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJtdWx0aXBsZUJvdCJ9KTsKICAgIAogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwoKICAgIHNob3V0KCJvbkFCU2VsZWN0ZWRCb3QiLCBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMpOwp9CmVsc2UgaWYgKHRoYXQudG8uYm90KQp7CiAgICBpZiAodGhhdC50by5ib3QgPT0gbGlua3MuYWJCb3QpCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyB0aGF0LnRvLmJvdC5pZDsKCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAiYm90In0pOwogICAgfQogICAgCiAgICBzaG91dCgib25BQlNlbGVjdGVkQm90IiwgdGhhdC50by5ib3QpOwogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CmVsc2UKewogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LnRvLmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnRvLngsIHk6IHRoYXQudG8ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7Cn0nAOOG+p4M9iUIYWJJZ25vcmUCBADjhvqeDOWFAQR0cnVlJwDjhvqeDPYlA2FzawIEAOOG+p4M6oUBKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAOOG+p4M9iUJYXNrQnV0dG9uAgQA44b6ngyRhgHcBUBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlKQp7CiAgICByZXR1cm47Cn0KCmxldCBhYk1lbnVCdXR0b24gPSB7fTsKCmFiTWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSBsaW5rcy5tZW51LnRhZ3MucmVtZW1iZXI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gbGlua3MubWVudS50YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24uYmFzZVNraWxsID0gIvCflJciICsgbGlua3MuYXNrLmlkOwphYk1lbnVCdXR0b24ubGFiZWwgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51TGFiZWw7CmFiTWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVJY29uOwphYk1lbnVCdXR0b24ub25DcmVhdGUgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51T25HZW5lcmF0ZTsKYWJNZW51QnV0dG9uLmFiTWVudVNvcnRPcmRlciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVTb3J0T3JkZXI7CmFiTWVudUJ1dHRvbi5jb2xvciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA/IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA6IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihhYk1lbnVCdXR0b24pOycA44b6ngz2JQlhYkJvdENoYXQCBADjhvqeDOyLAdULQGlmICghbGlua3MuYWJCb3QgJiYgIXRoYXQuYm90KQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IGJvdEJhc2UgPSB0aGF0LmJvdCA/IHRoYXQuYm90OiBsaW5rcy5hYkJvdDsKY29uc3QgZGltZW5zaW9uID0gIXRoYXQuYm90ID8gYm90QmFzZS50YWdzLmRpbWVuc2lvbiA6IHRoYXQuZGltZW5zaW9uID8gdGhhdC5kaW1lbnNpb24gOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlOwpjb25zdCBtZXNzYWdlVGltZSA9IHRoYXQudGltZSA/IHRoYXQudGltZSAqIDEwMDAgOiAxNjAwOyAKY29uc3QgbWVzc2FnZUJvdCA9IHt9OwoKbWVzc2FnZUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZXNzYWdlQm90LnRyYW5zZm9ybWVyID0gYm90QmFzZS5pZDsKbWVzc2FnZUJvdC5mb3JtID0gInNwcml0ZSI7Cm1lc3NhZ2VCb3QuY29sb3IgPSAiIzAwMDAwMCI7Cm1lc3NhZ2VCb3QubGFiZWwgPSBtZXNzYWdlOwptZXNzYWdlQm90LmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lc3NhZ2VCb3QubGFiZWxTaXplID0gMTsKbWVzc2FnZUJvdC5zY2FsZVggPSBtZXNzYWdlLmxlbmd0aCAvIDUgPiAxMCA/IDEwIDogbWVzc2FnZS5sZW5ndGggPCAxMCA/IDIgOiBtZXNzYWdlLmxlbmd0aCAvIDU7Cm1lc3NhZ2VCb3Quc2NhbGVZID0gKG1lc3NhZ2UubGVuZ3RoIC8gNTApID4gMSA/IE1hdGgucm91bmQobWVzc2FnZS5sZW5ndGggLyA1MCkgOiAxLjMzOwptZXNzYWdlQm90LnNjYWxlWiA9IDAuMTsKbWVzc2FnZUJvdC5vcmllbnRhdGlvbk1vZGUgPSAiYmlsbGJvYXJkIjsKbWVzc2FnZUJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKbWVzc2FnZUJvdC5kaW1lbnNpb24gPSBkaW1lbnNpb247Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlgiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlkiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIloiXSA9IGJvdEJhc2UudGFncy5zY2FsZSA/IGJvdEJhc2UudGFncy5zY2FsZSAvIDIgKyAyIDogMjsKbWVzc2FnZUJvdC5vbkZhZGUgPSBgQCBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAxLAogICAgICAgIGxhYmVsT3BhY2l0eTogMSwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMCwKICAgICAgICBsYWJlbE9wYWNpdHk6IDAsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0gKyA1CiAgICB9LAogICAgZHVyYXRpb246ICR7dGhhdC5kdXJhdGlvbiA/PyAzfQp9KS5jYXRjaCh7fSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpjb25zdCBhY3RpdmVNZXNzYWdlID0gY3JlYXRlKG1lc3NhZ2VCb3QpOwoKc2V0VGltZW91dCgoKT0+IGFjdGl2ZU1lc3NhZ2Uub25GYWRlKCksIG1lc3NhZ2VUaW1lKTsnAOOG+p4M9iUQb25BbnlCb3REcmFnZ2luZwIEAOOG+p4MwpcBiRBAaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgIGxldCBkcmFnQ29vcmRpbmF0b3JCb3QgPSBsaW5rcy5kcmFnQ29vcmQ7CiAgICAKICAgIGlmICghZHJhZ0Nvb3JkaW5hdG9yQm90KQogICAgewogICAgICAgIGNvbnN0IGRyYWdDb29yZGluYXRvckJvdE1vZCA9IHt9OwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLmRpbWVuc2lvbiA9IGFjdGl2ZURpbWVuc2lvbjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uXSA9IHRydWU7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJYIl0gPSAwOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWSJdID0gMDsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIloiXSA9IC0xOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5wb2ludGFibGUgPSBmYWxzZTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QuY29sb3IgPSAiY2xlYXIiOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5vbkFueUJvdFBvaW50ZXJVcCA9IGBAIGxpbmtzLm1hbmFnZXIubWFza3MuZHJhZ0Nvb3JkID0gbnVsbDsgc2hvdXQoJ2FiU3RvcERyYWcnLCB7eDogdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YLCB5OiB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVl9KTsgZGVzdHJveSh0aGlzQm90KTtgOwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3QgPSBjcmVhdGUoZHJhZ0Nvb3JkaW5hdG9yQm90TW9kKTsKCiAgICAgICAgbWFza3MuZHJhZ0Nvb3JkID0gZ2V0TGluayhkcmFnQ29vcmRpbmF0b3JCb3QpOwoKICAgICAgICBjb25zdCBkcmFnQm90cyA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1czsKCiAgICAgICAgbGlua3MuYWJCb3QubWFza3MudHJhbnNmb3JtZXIgPSBkcmFnQ29vcmRpbmF0b3JCb3QuaWQ7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MuYWJTdG9wRHJhZyA9IGBAIG1hc2tzLnRyYW5zZm9ybWVyID0gbnVsbDsgbWFza3MuYWJTdG9wRHJhZyA9IG51bGw7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCArIHRoYXQueDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZICsgdGhhdC55YDsKCiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgInRyYW5zZm9ybWVyIiwgZHJhZ0Nvb3JkaW5hdG9yQm90LmlkLCAidGVtcExvY2FsIik7CiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgImFiU3RvcERyYWciLCBgQCBtYXNrcy50cmFuc2Zvcm1lciA9IG51bGw7IG1hc2tzLmFiU3RvcERyYWcgPSBudWxsOyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggKyB0aGF0Lng7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSArIHRoYXQueWAsICJ0ZW1wTG9jYWwiKTsKICAgIH0KCiAgICBjb25zdCB4Q2hhbmdlID0gdGhhdC50by54IC0gdGhhdC5mcm9tLng7CiAgICBjb25zdCB5Q2hhbmdlID0gdGhhdC50by55IC0gdGhhdC5mcm9tLnk7CgogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIlgiXSA9IHhDaGFuZ2U7CiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWSJdID0geUNoYW5nZTsKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJaIl0gPSAtMTsKfScA44b6ngz2JQlhYlZlcnNpb24CBADjhvqeDMynAQQxMC40JwDjhvqeDPYlEWFiSW5pdGlhbE1hbmlmZXN0AgQA44b6ngzRpwGjCUBsZXQgc2tpbGxBcnJheSA9IFsiYWJJbnRlcmZhY2UiLCAiYWJBY3Rpb24iLCAiYWJUZXN0cyJdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBza2lsbEFycmF5Lmxlbmd0aDsgaSsrKSAKewogICAgYXdhaXQgbGlua3MubGVhcm4uYWJBZGFwdChza2lsbEFycmF5W2ldKTsKfQoKYXdhaXQgb3Muc2xlZXAoMzAwKTsKCi8vYW5pbWF0aW9uIGlmIGFwcGxpY2FibGUKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsQW5pbWF0aW9uKQp7CiAgICBhd2FpdCBsaW5rcy5hbmltYXRpb25bbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxBbmltYXRpb25dKCk7Cn0KCi8va2VlcCBhYiBhd2FrZQpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IHRydWU7CgppZiAoY29uZmlnQm90LnRhZ3MucGF0dGVybikgCnsKICAgIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYmFzZUFCID0gY29uZmlnQm90LnRhZ3MucGF0dGVybjsKfQplbHNlIAp7CiAgICBsaW5rcy5yZW1lbWJlci50YWdzLmJhc2VBQiA9IHV1aWQoKTsKfQoKY2hhbmdlU3RhdGUobGlua3MubWFuaWZlc3RhdGlvbiwgIkF3YWtlIiwgImFiTWFuaWZlc3RTdGF0ZSIpOwoKdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246ICJob21lIiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CgovL21lc3NhZ2UgaWYgYXBwbGljYWJsZQppZiAobGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKQp7CiAgICBzaG91dCgic2hvd0NvbnNvbGUiKTsKCiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpKQogICAgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgYWIubG9nKGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlW2ldKTsKCiAgICAgICAgICAgIGF3YWl0IG9zLnNsZWVwKDIwMDApOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBhYi5sb2cobGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpOwogICAgfQp9JwDjhvqeDPYlCWFuaW1hdGlvbgIEAOOG+p4M9bABKPCflJdiMjZlMTA4OS0xNzJkLTQ1YTktOGQyMi0wNWMzZjU4YzJiZjcnAOOG+p4M9iUPYWJNYW5pZmVzdFN0YXRlAgQA44b6ngycsQEGQXNsZWVwJwDjhvqeDPYlD29uQW55Qm90Q2xpY2tlZAIEAOOG+p4Mo7EB/BBAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiUmlnaHRDbGlja0Rpc2FibGVkICAmJiAhdGhhdC5ib3QudGFncy5hYlJpZ2h0Q2xpY2tJZ25vcmUgJiYgdGhhdC5tb2RhbGl0eSA9PSAibW91c2UiICYmIHRoYXQuYnV0dG9uSWQgPT0gInJpZ2h0Iikgew0KDQogICAgaWYgKHRhZ3MuYWJNYW5pZmVzdFN0YXRlID09ICJBc2xlZXAiKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvL2FiIHNlbGVjdGVkDQogICAgaWYgKHRoYXQuYm90ID09IGxpbmtzLmFiQm90KQ0KICAgIHsNCiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy9HZXQgcmlkIG9mIGFueSBvdGhlciBvbmVzDQogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKSB7DQogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsNCiAgICB9DQoNCiAgICAvL2FuaW1hdGlvbnMNCiAgICBpZiAoIWxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwpIHsNCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKCk7DQogICAgfQ0KDQogICAgLy9DcmVhdGUgYXJtDQogICAgbGV0IGFybSA9IHt9Ow0KDQogICAgYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uXSA9IHRydWU7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQuYm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXTsNCiAgICBhcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOw0KICAgIGFybS5kaW1lbnNpb24gPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsNCiAgICBhcm0uc2NhbGUgPSAwLjk7DQogICAgYXJtLnNjYWxlWiA9IDAuMDE7DQogICAgYXJtLmNvbG9yID0gImNsZWFyIjsNCiAgICBhcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lQ29sb3IgPSBsaW5rcy5hYkJvdC50YWdzLnN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsNCiAgICBhcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7DQogICAgYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOw0KICAgICAgICAgICAgICAgICAgICBzaG91dCgib25BQkZvb3RDbGlja2VkIik7DQogICAgICAgICAgICAgICAgICAgIGxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOw0KDQogICAgbGV0IG5ld0FybSA9IGF3YWl0IGNyZWF0ZShhcm0pOw0KDQogICAgbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOw0KDQogICAgdGhpc0JvdC5vbkFueUJvdERyb3BFbnRlcih7DQogICAgICAgIGRyYWdCb3Q6IGxpbmtzLmFiQm90LmxpbmtzLmFybSwNCiAgICAgICAgdG86IHsNCiAgICAgICAgICAgIGJvdDogdGhhdC5ib3QsDQogICAgICAgICAgICB4OiB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSwNCiAgICAgICAgICAgIHk6IHRoYXQuYm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdLA0KICAgICAgICAgICAgZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbg0KICAgICAgICB9LA0KICAgICAgICBmcm9tOiB7DQogICAgICAgICAgICB4OiBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSwNCiAgICAgICAgICAgIHk6IGxpbmtzLmFiQm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdLA0KICAgICAgICAgICAgZGltZW5zaW9uOiBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbg0KICAgICAgICB9DQogICAgfSkNCg0KICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyB0aGF0LmJvdC5pZDsNCg0KICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsNCg0KICAgIHJldHVybjsNCn0nAOOG+p4M9iUFaW5wdXQCBADjhvqeDJrCASjwn5SXZjg2MDI4NzgtYzJlZi00OGJkLTg1YTAtOGQ2MzUxZWI0MTIwJwDjhvqeDPYlC3BlcnNvbmFsaXR5AgQA44b6ngzBwgEo8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYicA44b6ngz2JQ1hYlBlcnNvbmFsaXR5AgQA44b6ngzowgEEdHJ1ZQA="}]}