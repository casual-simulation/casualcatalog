{"version":2,"updates":[{"id":0,"timestamp":1752006504344,"update":"AWegpKiVCAAnAQRib3RzJGIyNmUxMDg5LTE3MmQtNDVhOS04ZDIyLTA1YzNmNThjMmJmNwEnAKCkqJUIAAZzeXN0ZW0CBACgpKiVCAEYYWIucGVyc29uYWxpdHkuYW5pbWF0aW9uJwCgpKiVCAAEZm9ybQIEAKCkqJUIGgdub3RoaW5nJwCgpKiVCAAIYWJJZ25vcmUCBACgpKiVCCIEdHJ1ZScAoKSolQgADW1hbmlmZXN0YXRpb24CBACgpKiVCCco8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAoKSolQgACHJlbWVtYmVyAgQAoKSolQhOKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAKCkqJUIABhhbmltYXRpb25fYWJHcmlkTWFuaWZlc3QCBACgpKiVCHXuDkBzaG91dCgicmVzZXQiKTsKCmNvbnN0IHBvc2l0aW9uWCA9IHRoYXQ/LnBvc2l0aW9uLnggPz8gMDsKY29uc3QgcG9zaXRpb25ZID0gdGhhdD8ucG9zaXRpb24ueSA/PyAwOwpjb25zdCBkaW1lbnNpb24gPSB0aGF0Py5kaW1lbnNpb24gPz8gImhvbWUiOwpjb25zdCBncmlkU2NhbGUgPSB0aGF0Py5zY2FsZSA/PyA1Owpjb25zdCBtb21lbnRDb3VudCA9IDA7CmNvbnN0IGdyaWRCb3QgPSB7fTsKCmdyaWRCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKZ3JpZEJvdC5jb2xvciA9ICJjbGVhciI7CmdyaWRCb3Quc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpncmlkQm90LnNjYWxlID0gMC4wMDE7CmdyaWRCb3Quc2NhbGVaID0gMC4xOwpncmlkQm90LnJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpncmlkQm90W2RpbWVuc2lvbl0gPSB0cnVlOwpncmlkQm90LnBvaW50YWJsZSA9IGZhbHNlOwpncmlkQm90LmtpbGxUaW1lciA9ICJAIGF3YWl0IG9zLnNsZWVwKDQwMCk7IGRlc3Ryb3kodGhpc0JvdCk7IjsKCmxldCByb3VuZEJvdHM7Cgpmb3IgKGxldCBpID0gZ3JpZFNjYWxlOyBpID4gMDsgaS0tKQp7CiAgICBjb25zdCBib3RDb3VudCA9IGkgKiA4OwoKICAgIGxldCBzaWRlQ291bnQgPSAwOwogICAgbGV0IHBoYXNlRmFjdG9yID0gMDsKCiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvdENvdW50OyBqKyspCiAgICB7CiAgICAgICAgaWYgKHBoYXNlRmFjdG9yID09IDApCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpICsgc2lkZUNvdW50OwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSBpICsgcG9zaXRpb25ZOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwaGFzZUZhY3RvciA9PSAxKQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gaSArIHBvc2l0aW9uWDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKGkgKyBwb3NpdGlvblkpIC0gc2lkZUNvdW50OyAgCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBoYXNlRmFjdG9yID09IDIpCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoaSArIHBvc2l0aW9uWCkgLSBzaWRlQ291bnQ7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9ICgoaSArIHBvc2l0aW9uWSkgKiAtMSkgOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpIDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKChpICsgcG9zaXRpb25ZKSAqIC0xKSArIHNpZGVDb3VudDsgIAogICAgICAgIH0KCiAgICAgICAgY29uc3QgbmV3R3JpZEJvdCA9IGF3YWl0IGNyZWF0ZShncmlkQm90KTsKCiAgICAgICAgYW5pbWF0ZVRhZyhuZXdHcmlkQm90LCAic2NhbGUiLCB7CiAgICAgICAgICAgIHRvVmFsdWU6IDEsCiAgICAgICAgICAgIGVhc2luZzogewogICAgICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICAgICAgbW9kZTogIm91dCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHVyYXRpb246IDAuMDEKICAgICAgICB9KTsKCiAgICAgICAgbmV3R3JpZEJvdC5raWxsVGltZXIoKTsKCiAgICAgICAgc2lkZUNvdW50Kys7CgogICAgICAgIGlmIChzaWRlQ291bnQgPT0gYm90Q291bnQgLyA0KQogICAgICAgIHsKICAgICAgICAgICAgc2lkZUNvdW50ID0gMDsKCiAgICAgICAgICAgIHBoYXNlRmFjdG9yKys7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCBvcy5zbGVlcCg4KTsKICAgIH0KfScAoKSolQgACWFiVmVyc2lvbgIEAKCkqJUI5A8EMTAuNCcAoKSolQgABm9uQ2hhdAIEAKCkqJUI6Q9VQC8vIGlmICh0aGF0Lm1lc3NhZ2UgPT0gIkB0ZXN0IikKLy8gewovLyAgICAgdGhpc0JvdC5hbmltYXRpb25fYWJHcmlkTWFuaWZlc3QoKTsKLy8gfScAoKSolQgAC3BlcnNvbmFsaXR5AgQAoKSolQi/ECjwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwCgpKiVCAANYWJQZXJzb25hbGl0eQIEAKCkqJUI5hAEdHJ1ZScBBGJvdHMkYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiAScAoKSolQjrEAZzeXN0ZW0CBACgpKiVCOwQFWFiLnBlcnNvbmFsaXR5LmNvbmZpZycAoKSolQjrEA1hYlBlcnNvbmFsaXR5AgQAoKSolQiCEQR0cnVlJwCgpKiVCOsQCGFiSWdub3JlAgQAoKSolQiHEQR0cnVlJwCgpKiVCOsQBGZvcm0CBACgpKiVCIwRB25vdGhpbmcnAKCkqJUI6xALYWJCYXNlQ29sb3ICBACgpKiVCJQRByMwMEQ5Q0QnAKCkqJUI6xARYWJCYXNlU3Ryb2tlQ29sb3ICBACgpKiVCJwRByMwMEQ5Q0QnAKCkqJUI6xAQYWJCbHVlcHJpbnRDb2xvcgIEAKCkqJUIpBEHIzAwODI3QicAoKSolQjrEAxvbkluc3RKb2luZWQCBACgpKiVCKwR6AVAaWYgKCFhdXRoQm90KSB7DQogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsNCn0NCg0KaWYgKCFhdXRoQm90KSB7DQogICAgcmV0dXJuOw0KfQ0KDQpjb25zdCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IGF3YWl0IG9zLmdldERhdGEoYXV0aEJvdC5pZCwgImFiUGVyc29uYWxpdHlDb25maWciKTsNCg0KaWYgKCFsaW5rcy5yZW1lbWJlciAmJiAhYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEpIHsNCiAgICByZXR1cm47DQp9DQoNCmNvbnN0IGFiVGFncyA9IFsiYWJCYXNlQ29sb3IiLCAiYWJCYXNlU3Ryb2tlQ29sb3IiLCAiYWJCbHVlcHJpbnRDb2xvciJdOw0KDQpmb3IgKGxldCBpID0gMDsgaSA8IGFiVGFncy5sZW5ndGg7ICsraSkgew0KICAgIGlmIChhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dICYmIHRhZ3NbYWJUYWdzW2ldXSAhPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dKSB7DQogICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgYWJUYWdzW2ldLCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dKTsNCiAgICB9IGVsc2UgaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSAmJiBsaW5rcy5yZW1lbWJlci50YWdzW2FiVGFnc1tpXV0gIT0gdGFnc1thYlRhZ3NbaV1dKSB7DQogICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgYWJUYWdzW2ldLCBsaW5rcy5yZW1lbWJlci50YWdzW2FiVGFnc1tpXV0pOw0KICAgIH0NCn0nAKCkqJUI6xAIcmVtZW1iZXICBACgpKiVCJUXKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAKCkqJUI6xARYWJCdWlsZGVySWRlbnRpdHkCBACgpKiVCLwXCmNhc3VhbC5ib3QnAKCkqJUI6xAJYWJWZXJzaW9uAgQAoKSolQjHFwQxMC40JwEEYm90cyRkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQBJwCgpKiVCMwXBnN5c3RlbQIEAKCkqJUIzRccYWIucGVyc29uYWxpdHkubWFuaWZlc3RhdGlvbicAoKSolQjMFwRmb3JtAgQAoKSolQjqFwdub3RoaW5nJwCgpKiVCMwXC2Rlc2NyaXB0aW9uAgQAoKSolQjyFzhUaGlzIHNraWxsIGNvbnRyb2xzIHRoZSBhY3R1YWwgYm90IGZvciB0aGUgYWIgaW50ZXJmYWNlLicAoKSolQjMFwVsZWFybgIEAKCkqJUIqxgo8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycAoKSolQjMFw9vblBvcnRhbENoYW5nZWQCBACgpKiVCNIYvA1AaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsICE9IG51bGwgfHwgY29uZmlnQm90LnRhZ3Muc3lzdGVtUG9ydGFsICE9IG51bGwpCnsKICAgIGlmICh0YWdzLmFiQm90KQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QpOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSB8fCB0aGF0LnBvcnRhbCA9PSAidGFnUG9ydGFsIiB8fCB0aGF0LnBvcnRhbCA9PSAibWVudVBvcnRhbCIgfHwgKHRoYXQucG9ydGFsID09ICJncmlkUG9ydGFsIiAmJiBjb25maWdCb3QudGFncy5tYXBQb3J0YWwpKQp7CiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmFiQm90KQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKfQoKY29uc3QgcG9ydGFsQXJyYXkgPSBbIm1pbmlHcmlkUG9ydGFsIiwgImdyaWRQb3J0YWwiLCAibWFwUG9ydGFsIiwgIm1pbmlNYXBQb3J0YWwiLCAibGVmdFdyaXN0UG9ydGFsIiwgInJpZ2h0V3Jpc3RQb3J0YWwiXTsKCmxldCBtYXBQb3J0YWxDaGVjayA9IGZhbHNlOwpsZXQgbmV3QUIgPSBmYWxzZTsKCmlmIChwb3J0YWxBcnJheS5pbmRleE9mKHRoYXQucG9ydGFsKSAhPSAtMSAmJiB0aGF0LmRpbWVuc2lvbiAmJiAhY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpCnsKICAgIGlmICh0aGF0LnBvcnRhbCA9PSAibWFwUG9ydGFsIikKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7IGRpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogLTg1LjY3NjE4OTQ4MjI0MzQsIHk6IDQyLjk2NTY3NTY3NTY3NTZ9fSk7CgogICAgICAgIG1hcFBvcnRhbENoZWNrID0gdHJ1ZTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CiAgICB9Cn0KZWxzZSBpZiAocG9ydGFsQXJyYXkuaW5kZXhPZih0aGF0LnBvcnRhbCkgPT0gLTEgJiYgIXRoYXQuZGltZW5zaW9uKQp7CiAgICBjb25zdCBzdW1tb25EaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwogICAgCiAgICBtYXBQb3J0YWxDaGVjayA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IHRydWUgOiBmYWxzZTsKCiAgICBpZiAobWFwUG9ydGFsQ2hlY2spCiAgICB7CiAgICAgICAgbmV3QUIgPSBhd2FpdCB0aGlzQm90LmFiTWFuaWZlc3RCb3QoeyBkaW1lbnNpb246IHN1bW1vbkRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiAtODUuNjc2MTg5NDgyMjQzNCwgeTogNDIuOTY1Njc1Njc1Njc1Nn19KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiBzdW1tb25EaW1lbnNpb24sIHBvc2l0aW9uOnt4OjAseTowfX0pOwogICAgfQp9CmVsc2UKewogICAgcmV0dXJuOwp9CgppZiAobmV3QUIpCnsKICAgIGF3YWl0IG9zLnNsZWVwKDUwMCkKCiAgICBjb25zdCB6b29tVmFyaWFuY2UgPSBtYXBQb3J0YWxDaGVjayA/IDIwMDAgOiAxMDsKCiAgICBhd2FpdCBvcy5mb2N1c09uKGxpbmtzLmFiQm90LCB7em9vbTogem9vbVZhcmlhbmNlLCByb3RhdGlvbjoge3g6IDQ1LCB5OiA0NX19KS5jYXRjaChlID0+IHt9KTsKfScAoKSolQjMFwhyZW1lbWJlcgIEAKCkqJUIjyYo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAoKSolQjMFw1hYk1hbmlmZXN0Qm90AgQAoKSolQi2JtERQGlmICh0YWdzLmFiQm90KQp7CiAgICBhd2FpdCBkZXN0cm95KGxpbmtzLmFiQm90KTsKfQoKbGV0IGFiID0ge307CgphYi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphYi5jb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlQ29sb3I7CmFiLmZvcm1PcGFjaXR5ID0gIjAuMzMiOwphYi5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlTGFiZWw7CmFiLmxhYmVsUG9zaXRpb24gPSAiZnJvbnQiOwphYi5sYWJlbENvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubGFiZWxTaXplID0gMC42MTsKYWIub25DbGljayA9ICJAIGlmICh0aGF0Lm1vZGFsaXR5ID09ICdtb3VzZScgJiYgdGhhdC5idXR0b25JZCA9PSAncmlnaHQnKSB7cmV0dXJuO30gbGlua3MubWFuYWdlci5hYkNsaWNrKCk7IjsKYWIuZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CmFiW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFiW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKYWJbdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5wb3NpdGlvbi55OwphYi5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7Ci8vYWIubGluZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFiLmFuaW1hdGVCb3QgPSBgQCBpZiAoY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQpCnsKICAgIHJldHVybjsKfQoKY29uc3Qgcm90WiA9IHRhZ3MuZGltZW5zaW9uICsgIlJvdGF0aW9uWiI7CmxldCB0YXJnZXRTY2FsZSA9IDAuNjU7CgovLyBpZiAodGFncy5zY2FsZSA8PSAwLjY1MSkKLy8gewovLyAgICAgdGFyZ2V0U2NhbGUgPSAwLjk1OwovLyB9Cgphd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsCnsKICAgIGZyb21WYWx1ZTogewogICAgICAgIFtyb3RaXTogMCwKICAgICAgICAvL3NjYWxlOiB0YWdzLnNjYWxlCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIFtyb3RaXTogNi4zLAogICAgICAgIC8vc2NhbGU6IHRhcmdldFNjYWxlCiAgICB9LAogICAgZWFzaW5nOiB7CiAgICAgICAgdHlwZTogInNpbnVzb2lkYWwiLAogICAgICAgIG1vZGU6ICJpbm91dCIKICAgIH0sCiAgICBkdXJhdGlvbjogMgp9KS5jYXRjaChlID0+IHt9KTsKYDsKYWIub25DcmVhdGUgPSBgQAoKdGhpc0JvdC5hbmltYXRlQm90KCk7CgptYXNrcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHRoaXNCb3QuYW5pbWF0ZUJvdCgpLCAyMDAwKTsKYDsKYWIub25EZXN0cm95ID0gYEAKY2xlYXJJbnRlcnZhbCh0YWdzLmludGVydmFsKTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CmA7CmFiLmRyYWdnYWJsZSA9IGZhbHNlOwphYi5zY2FsZSA9IDAuOTsKCmxldCBhYk1hbmlmZXN0ZWQgPSBhd2FpdCBjcmVhdGUoYWIpOwoKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJTZWNvbmRhcnlMYWJlbCkKewogICAgbGV0IGFiTGFiZWxCb3QgPSB7fTsKCiAgICBhYkxhYmVsQm90LnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICBhYkxhYmVsQm90W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CiAgICBhYkxhYmVsQm90W3RoYXQuZGltZW5zaW9uICsgIloiXSA9IC0xOwogICAgYWJMYWJlbEJvdC5jcmVhdG9yID0gYWJNYW5pZmVzdGVkLmlkOwogICAgYWJMYWJlbEJvdC50cmFuc2Zvcm1lciA9IGFiTWFuaWZlc3RlZC5pZDsKICAgIGFiTGFiZWxCb3QucG9pbnRhYmxlID0gZmFsc2U7CiAgICBhYkxhYmVsQm90LmNvbG9yID0gImNsZWFyIjsKICAgIGFiTGFiZWxCb3QubGFiZWwgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiU2Vjb25kYXJ5TGFiZWw7CiAgICBhYkxhYmVsQm90LmxhYmVsUG9zaXRpb24gPSAibGVmdCI7CiAgICBhYkxhYmVsQm90LmxhYmVsU2l6ZSA9IDAuNzsKICAgIGFiTGFiZWxCb3QubGFiZWxDb2xvciA9IGFiTWFuaWZlc3RlZC50YWdzLmxhYmVsQ29sb3I7CgogICAgY3JlYXRlKGFiTGFiZWxCb3QpOwp9CgptYXNrcy5hYkJvdCA9ICLwn5SXIiArIGFiTWFuaWZlc3RlZC5pZDsKCmxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQWN0aXZlRGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CgpzaG91dCgib25BQk1vdmVkIiwge3g6IHRoYXQucG9zaXRpb24ueCwgeTogdGhhdC5wb3NpdGlvbi55fSk7CgpyZXR1cm4gYWJNYW5pZmVzdGVkOwoKCgppZiAoY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQpCnsKICAgIHJldHVybjsKfScAoKSolQjMFxxhYk1hbmlmZXN0U3RhdGVBc2xlZXBPbkVudGVyAgQAoKSolQiEOG9AZGVzdHJveShsaW5rcy5hYkJvdCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSBmYWxzZTsKCnNob3V0KCJvbkFCU2xlZXAiKTsnAKCkqJUIzBcLb25HcmlkQ2xpY2sCBACgpKiVCPQ45BJAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSkKewogICAgcmV0dXJuOwp9CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uc3Qgc2hpZnRDaGVjayA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAodGFncy5hYkJvdCAmJiAoc2hpZnRDaGVjayB8fCAodGhhdC5tb2RhbGl0eSA9PSAibW91c2UiICYmIHRoYXQuYnV0dG9uSWQgPT0gInJpZ2h0IiAmJiAhbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCkpKQp7CiAgICBpZiAobGlua3MuYWJCb3QudGFncy5hcm0pCiAgICB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IG51bGw7CiAgICB9CiAgICAKICAgIGxldCBhcm0gPSB7fTsKCiAgICBhcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKICAgIGFybVt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwogICAgYXJtW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKICAgIGFybVt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CiAgICBhcm0uZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CiAgICBhcm0uc2NhbGUgPSAwLjk7CiAgICBhcm0uc2NhbGVaID0gMC4wMTsKICAgIGFybS5jb2xvciA9ICJjbGVhciI7CiAgICBhcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgYXJtLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBhcm0ubGluZVRvID0gbGlua3MuYWJCb3QuaWQ7CiAgICBhcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CiAgICBhcm0ub25DbGljayA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7CiAgICBzaG91dCgib25BQkZvb3RDbGlja2VkIik7CiAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKCiAgICBsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgogICAgc2hvdXQoIm9uQUJBcm1QbGFjZWQiLCB7eDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9KTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7CgogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7CgogICAgcmV0dXJuOwp9CgpsZXQgZm9vdHByaW50ID0ge307Cgpmb290cHJpbnQuc3BhY2UgPSAidGVtcExvY2FsIjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmZvb3RwcmludC5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKZm9vdHByaW50LnNjYWxlWiA9IDAuMDE7CmZvb3RwcmludC5vbkNsaWNrID0gYEAgdGFnc1t0YWdzLmRpbWVuc2lvbl0gPSBmYWxzZTsKc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOwpsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3QodGFncy5wb3NpdGlvbkluZm8pOwpgOwpmb290cHJpbnQucG9zaXRpb25JbmZvID0gdGhhdDsKZm9vdHByaW50LmNvbG9yID0gImNsZWFyIjsKZm9vdHByaW50LnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKZm9vdHByaW50LmRyYWdnYWJsZSA9IGZhbHNlOwpmb290cHJpbnQubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmZvb3RwcmludC5vbkNyZWF0ZSA9IGBAIHNldFRpbWVvdXQoKCkgPT4gZGVzdHJveSh0aGlzQm90KSwgODAwKTsKCiAgICBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgICAgICBmcm9tVmFsdWU6IHsKICAgICAgICAgICAgc2NhbGVYOiAwLjEsCiAgICAgICAgICAgIHNjYWxlWTogMC4xCiAgICAgICAgfSwKICAgICAgICB0b1ZhbHVlOiB7CiAgICAgICAgICAgIHNjYWxlWDogMS4xLAogICAgICAgICAgICBzY2FsZVk6IDEuMQogICAgICAgIH0sCiAgICAgICAgZHVyYXRpb246IDAuNSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICBtb2RlOiAib3V0IgogICAgICAgIH0KICAgIH0pLmNhdGNoKGUgPT4ge30pOwpgOwoKY3JlYXRlKGZvb3RwcmludCk7JwCgpKiVCMwXBG1lbnUCBACgpKiVCNNLKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAKCkqJUIzBcHYWJDbGljawIEAKCkqJUI+kuXCkBpZiAoIWxpbmtzLmFiQm90KQp7CiAgICByZXR1cm47Cn0KCmlmIChsaW5rcy5pbnB1dCkgewogICAgbGlua3MuaW5wdXQuYWJDaGF0QmFyQ2xvc2UoKTsKfQoKY29uc3QgbWVudVR5cGUgPSB0aGF0ID8gdGhhdC5tZW51IDogImNvcmUiOwpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAobGlua3MuYWJCb3QudGFncy5pbnRlcnZhbCB8fCBzdGF0ZSkKewogICAgY29uc3QgYWJNZW51Qm90cyA9IGdldEJvdHMoImFiTWVudSIsIHRydWUpOwoKICAgIHdoaXNwZXIoYWJNZW51Qm90cywgImFiTWVudVJlZnJlc2giKTsKICAgIAogICAgY2xlYXJJbnRlcnZhbChsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IG51bGw7CgogICAgY2xlYXJBbmltYXRpb25zKGxpbmtzLmFiQm90KTsKCiAgICBjb25zdCByb3RaID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKCiAgICBpZiAoc3RhdGUgJiYgbWVudVR5cGUgPT0gImNvcmUiKQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5tZW51LmFiT3Blbk1lbnUobWVudVR5cGUpOwogICAgfQoKICAgIGF3YWl0IGFuaW1hdGVUYWcobGlua3MuYWJCb3QsCiAgICB7CiAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgIFtyb3RaXTogbGlua3MuYWJCb3QudGFnc1tyb3RaXSwKICAgICAgICAgICAgc2NhbGU6IGxpbmtzLmFiQm90LnRhZ3Muc2NhbGUKICAgICAgICB9LAogICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgW3JvdFpdOiAwLAogICAgICAgICAgICBzY2FsZTogMC45CiAgICAgICAgfSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogInNpbnVzb2lkYWwiLAogICAgICAgICAgICBtb2RlOiAiaW5vdXQiCiAgICAgICAgfSwKICAgICAgICBkdXJhdGlvbjogMC41CiAgICB9KS5jYXRjaChlID0+IHt9KTsKfQplbHNlCnsKICAgIGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwoKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICB9CgogICAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKSwgMjAwMCk7Cn0nAKCkqJUIzBcbYWJNYW5pZmVzdFN0YXRlQXdha2VPbkVudGVyAgQAoKSolQiSVokCQGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlID0gdHJ1ZTsKCmxldCBkaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwoKaWYgKCFkaW1lbnNpb24pCnsKICAgIHJldHVybjsKfQoKdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IGRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiAwLCB5OiAwfX0pOwoKc2hvdXQoIm9uQUJBd2FrZSIpOycAoKSolQjMFwxvbkFueUJvdERyYWcCBACgpKiVCJxY1gtAaWYgKHRoYXQuYm90ICE9IGxpbmtzLmFiQm90KSByZXR1cm47CgppZiAobGlua3MuaW5wdXQpIHsKICAgIGxpbmtzLmlucHV0LmFiQ2hhdEJhckNsb3NlKCk7Cn0KCmlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gbGlua3MuYWJCb3QuaWQpCnsKICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgogICAgcmV0dXJuOwp9CgppZiAobGlua3MuYWJCb3QudGFncy5hcm0pCnsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQoKaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQp7CiAgICB0aGlzQm90LmFiQ2xpY2soKTsKfQoKbGV0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKbGV0IGFybSA9IHt9OwoKYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbl0gPSB0cnVlOwphcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdID0gbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl07CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl0gPSBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXTsKYXJtLmNyZWF0b3IgPSBsaW5rcy5hYkJvdC5pZDsKYXJtLmRpbWVuc2lvbiA9IGxpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphcm0ubGluZUNvbG9yID0gbGlua3MuYWJCb3QudGFncy5zdHJva2VDb2xvcjsKYXJtLmxpbmVUbyA9IHRoYXQuYm90LmlkOwphcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOwpsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKYXJtLm9uRHJvcCA9IGBAIHNob3V0KCJvbkFCQXJtUGxhY2VkIiwge3g6IHRoYXQudG8ueCwgeTogdGhhdC50by55fSk7YAoKaWYgKHN0YXRlKQp7CiAgICBhcm0ubXVsdGlTZWxlY3QgPSB0cnVlOwogICAgYXJtLmZvcm0gPSAic3BoZXJlIjsKICAgIGFybS5jb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgbGlua3MuYWJCb3QubWFza3MuZHJhZ2dhYmxlID0gdHJ1ZTsKfQoKbGV0IG5ld0FybSA9IGF3YWl0IGNyZWF0ZShhcm0pOwoKbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOwoKb3MucmVwbGFjZURyYWdCb3QobmV3QXJtKTsnAKCkqJUIzBcRb25BbnlCb3REcm9wRW50ZXICBACgpKiVCO9j0whAaWYgKCF0YWdzLmFiQm90KSByZXR1cm47CmlmIChsaW5rcy5hYkJvdD8ubGlua3MuYXJtICE9IHRoYXQuZHJhZ0JvdCkgcmV0dXJuOwoKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmtzLmFiQm90LnRhZ3MubGluZVRvKSkKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8ucHVzaCh0aGF0LnRvLmJvdC5pZCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gW3RoYXQudG8uYm90LmlkXTsKICAgIH0KCiAgICBsZXQgbmV3TGluazsKCiAgICBpZiAoIWxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90cykKICAgIHsKICAgICAgICBuZXdMaW5rID0gZ2V0TGluayh0aGF0LnRvLmJvdCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGV0IHByZXZpb3VzTGlua0JvdHMgPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubGlua3Muc2VsZWN0ZWRCb3RzOwoKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJldmlvdXNMaW5rQm90cykpCiAgICAgICAgewogICAgICAgICAgICBwcmV2aW91c0xpbmtCb3RzID0gW3ByZXZpb3VzTGlua0JvdHNdCiAgICAgICAgfQoKICAgICAgICBwcmV2aW91c0xpbmtCb3RzLnB1c2godGhhdC50by5ib3QpOwoKICAgICAgICBuZXdMaW5rID0gZ2V0TGluayhwcmV2aW91c0xpbmtCb3RzKTsKICAgIH0KCiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHMgPSBuZXdMaW5rOwp9CmVsc2UKewogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLnN0cm9rZUNvbG9yID0gImNsZWFyIjsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5saW5lVG8gPSBmYWxzZTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gdGhhdC50by5ib3QuaWQ7Cn0nAKCkqJUIzBcQb25BbnlCb3REcm9wRXhpdAIEAKCkqJUIw2ycAkBpZiAoIWxpbmtzLmFiQm90KSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAoIWxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSBudWxsOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IG51bGw7CgogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbGlua3MuYWJCb3QubGlua3MuYXJtLmlkOwp9JwCgpKiVCMwXDG9uQW55Qm90RHJvcAIEAKCkqJUI4G6tB0BtYXNrcy5tdWx0aURyYWcgPSBudWxsOwoKaWYgKCF0YWdzLmFiQm90KSByZXR1cm47CmlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdC50YWdzLmFybSkgcmV0dXJuOwppZiAobGlua3MuYWJCb3QubGlua3MuYXJtICE9IHRoYXQuZHJhZ0JvdCkgcmV0dXJuOwoKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMgPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHM7CgogICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAibXVsdGlwbGVCb3QifSk7CiAgICAKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKCiAgICBzaG91dCgib25BQlNlbGVjdGVkQm90IiwgbGlua3MucmVtZW1iZXIubWFza3MuYWJNdWx0aXBsZUJvdEZvY3VzKTsKfQplbHNlIGlmICh0aGF0LnRvLmJvdCkKewogICAgaWYgKHRoYXQudG8uYm90ID09IGxpbmtzLmFiQm90KQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC50by5ib3QuaWQ7CgogICAgICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsKICAgIH0KICAgIAogICAgc2hvdXQoIm9uQUJTZWxlY3RlZEJvdCIsIHRoYXQudG8uYm90KTsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQplbHNlCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC50by5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwp9JwCgpKiVCMwXCGFiSWdub3JlAgQAoKSolQiMdgR0cnVlJwCgpKiVCMwXA2FzawIEAKCkqJUIkXYo8J+Ul2VjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNycAoKSolQjMFwlhc2tCdXR0b24CBACgpKiVCLh23AVAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSkKewogICAgcmV0dXJuOwp9CgpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLnJlbWVtYmVyID0gbGlua3MubWVudS50YWdzLnJlbWVtYmVyOwphYk1lbnVCdXR0b24ubWFuaWZlc3RhdGlvbiA9IGxpbmtzLm1lbnUudGFncy5tYW5pZmVzdGF0aW9uOwphYk1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKYWJNZW51QnV0dG9uLmJhc2VTa2lsbCA9ICLwn5SXIiArIGxpbmtzLmFzay5pZDsKYWJNZW51QnV0dG9uLmxhYmVsID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudUxhYmVsOwphYk1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51SWNvbjsKYWJNZW51QnV0dG9uLm9uQ3JlYXRlID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudU9uR2VuZXJhdGU7CmFiTWVudUJ1dHRvbi5hYk1lbnVTb3J0T3JkZXIgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51U29ydE9yZGVyOwphYk1lbnVCdXR0b24uY29sb3IgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51Q29sb3IgPyBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51Q29sb3IgOiBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24oYWJNZW51QnV0dG9uKTsnAKCkqJUIzBcJYWJCb3RDaGF0AgQAoKSolQiTfNULQGlmICghbGlua3MuYWJCb3QgJiYgIXRoYXQuYm90KQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IGJvdEJhc2UgPSB0aGF0LmJvdCA/IHRoYXQuYm90OiBsaW5rcy5hYkJvdDsKY29uc3QgZGltZW5zaW9uID0gIXRoYXQuYm90ID8gYm90QmFzZS50YWdzLmRpbWVuc2lvbiA6IHRoYXQuZGltZW5zaW9uID8gdGhhdC5kaW1lbnNpb24gOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlOwpjb25zdCBtZXNzYWdlVGltZSA9IHRoYXQudGltZSA/IHRoYXQudGltZSAqIDEwMDAgOiAxNjAwOyAKY29uc3QgbWVzc2FnZUJvdCA9IHt9OwoKbWVzc2FnZUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZXNzYWdlQm90LnRyYW5zZm9ybWVyID0gYm90QmFzZS5pZDsKbWVzc2FnZUJvdC5mb3JtID0gInNwcml0ZSI7Cm1lc3NhZ2VCb3QuY29sb3IgPSAiIzAwMDAwMCI7Cm1lc3NhZ2VCb3QubGFiZWwgPSBtZXNzYWdlOwptZXNzYWdlQm90LmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lc3NhZ2VCb3QubGFiZWxTaXplID0gMTsKbWVzc2FnZUJvdC5zY2FsZVggPSBtZXNzYWdlLmxlbmd0aCAvIDUgPiAxMCA/IDEwIDogbWVzc2FnZS5sZW5ndGggPCAxMCA/IDIgOiBtZXNzYWdlLmxlbmd0aCAvIDU7Cm1lc3NhZ2VCb3Quc2NhbGVZID0gKG1lc3NhZ2UubGVuZ3RoIC8gNTApID4gMSA/IE1hdGgucm91bmQobWVzc2FnZS5sZW5ndGggLyA1MCkgOiAxLjMzOwptZXNzYWdlQm90LnNjYWxlWiA9IDAuMTsKbWVzc2FnZUJvdC5vcmllbnRhdGlvbk1vZGUgPSAiYmlsbGJvYXJkIjsKbWVzc2FnZUJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKbWVzc2FnZUJvdC5kaW1lbnNpb24gPSBkaW1lbnNpb247Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlgiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlkiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIloiXSA9IGJvdEJhc2UudGFncy5zY2FsZSA/IGJvdEJhc2UudGFncy5zY2FsZSAvIDIgKyAyIDogMjsKbWVzc2FnZUJvdC5vbkZhZGUgPSBgQCBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAxLAogICAgICAgIGxhYmVsT3BhY2l0eTogMSwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMCwKICAgICAgICBsYWJlbE9wYWNpdHk6IDAsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0gKyA1CiAgICB9LAogICAgZHVyYXRpb246ICR7dGhhdC5kdXJhdGlvbiA/PyAzfQp9KS5jYXRjaCh7fSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpjb25zdCBhY3RpdmVNZXNzYWdlID0gY3JlYXRlKG1lc3NhZ2VCb3QpOwoKc2V0VGltZW91dCgoKT0+IGFjdGl2ZU1lc3NhZ2Uub25GYWRlKCksIG1lc3NhZ2VUaW1lKTsnAKCkqJUIzBcQb25BbnlCb3REcmFnZ2luZwIEAKCkqJUI6YcBiRBAaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgIGxldCBkcmFnQ29vcmRpbmF0b3JCb3QgPSBsaW5rcy5kcmFnQ29vcmQ7CiAgICAKICAgIGlmICghZHJhZ0Nvb3JkaW5hdG9yQm90KQogICAgewogICAgICAgIGNvbnN0IGRyYWdDb29yZGluYXRvckJvdE1vZCA9IHt9OwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLmRpbWVuc2lvbiA9IGFjdGl2ZURpbWVuc2lvbjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uXSA9IHRydWU7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJYIl0gPSAwOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWSJdID0gMDsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIloiXSA9IC0xOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5wb2ludGFibGUgPSBmYWxzZTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QuY29sb3IgPSAiY2xlYXIiOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5vbkFueUJvdFBvaW50ZXJVcCA9IGBAIGxpbmtzLm1hbmFnZXIubWFza3MuZHJhZ0Nvb3JkID0gbnVsbDsgc2hvdXQoJ2FiU3RvcERyYWcnLCB7eDogdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YLCB5OiB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVl9KTsgZGVzdHJveSh0aGlzQm90KTtgOwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3QgPSBjcmVhdGUoZHJhZ0Nvb3JkaW5hdG9yQm90TW9kKTsKCiAgICAgICAgbWFza3MuZHJhZ0Nvb3JkID0gZ2V0TGluayhkcmFnQ29vcmRpbmF0b3JCb3QpOwoKICAgICAgICBjb25zdCBkcmFnQm90cyA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1czsKCiAgICAgICAgbGlua3MuYWJCb3QubWFza3MudHJhbnNmb3JtZXIgPSBkcmFnQ29vcmRpbmF0b3JCb3QuaWQ7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MuYWJTdG9wRHJhZyA9IGBAIG1hc2tzLnRyYW5zZm9ybWVyID0gbnVsbDsgbWFza3MuYWJTdG9wRHJhZyA9IG51bGw7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCArIHRoYXQueDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZICsgdGhhdC55YDsKCiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgInRyYW5zZm9ybWVyIiwgZHJhZ0Nvb3JkaW5hdG9yQm90LmlkLCAidGVtcExvY2FsIik7CiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgImFiU3RvcERyYWciLCBgQCBtYXNrcy50cmFuc2Zvcm1lciA9IG51bGw7IG1hc2tzLmFiU3RvcERyYWcgPSBudWxsOyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggKyB0aGF0Lng7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSArIHRoYXQueWAsICJ0ZW1wTG9jYWwiKTsKICAgIH0KCiAgICBjb25zdCB4Q2hhbmdlID0gdGhhdC50by54IC0gdGhhdC5mcm9tLng7CiAgICBjb25zdCB5Q2hhbmdlID0gdGhhdC50by55IC0gdGhhdC5mcm9tLnk7CgogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIlgiXSA9IHhDaGFuZ2U7CiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWSJdID0geUNoYW5nZTsKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJaIl0gPSAtMTsKfScAoKSolQjMFwlhYlZlcnNpb24CBACgpKiVCPOXAQQxMC40JwCgpKiVCMwXEWFiSW5pdGlhbE1hbmlmZXN0AgQAoKSolQj4lwGVCUBsZXQgc2tpbGxBcnJheSA9IFsiYWJJbnRlcmZhY2UiLCAiYWJBY3Rpb24iLCAiYWJUZXN0cyJdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBza2lsbEFycmF5Lmxlbmd0aDsgaSsrKSAKewogICAgYXdhaXQgbGlua3MubGVhcm4uYWJBZGFwdChza2lsbEFycmF5W2ldKTsKfQoKYXdhaXQgb3Muc2xlZXAoMzAwKTsKCi8vYW5pbWF0aW9uIGlmIGFwcGxpY2FibGUKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsQW5pbWF0aW9uKQp7CiAgICBhd2FpdCBsaW5rcy5hbmltYXRpb25bbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxBbmltYXRpb25dKCk7Cn0KCi8va2VlcCBhYiBhd2FrZQpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IHRydWU7CgppZiAoY29uZmlnQm90LnRhZ3MucGF0dGVybikgCnsKICAgIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYmFzZUFCID0gY29uZmlnQm90LnRhZ3MucGF0dGVybjsKfQplbHNlIAp7CiAgICBsaW5rcy5yZW1lbWJlci50YWdzLmJhc2VBQiA9IHV1aWQoKTsKfQoKY2hhbmdlU3RhdGUobGlua3MubWFuaWZlc3RhdGlvbiwgIkF3YWtlIiwgImFiTWFuaWZlc3RTdGF0ZSIpOwoKdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246ICJob21lIiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CgovL21lc3NhZ2UgaWYgYXBwbGljYWJsZQppZiAobGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKQp7CiAgICBzaG91dCgic2hvd0NvbnNvbGUiKTsKCiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpKQogICAgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2VbaV0pOwoKICAgICAgICAgICAgYXdhaXQgb3Muc2xlZXAoMjAwMCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKTsKICAgIH0KfScAoKSolQjMFwlhbmltYXRpb24CBACgpKiVCI6hASjwn5SXYjI2ZTEwODktMTcyZC00NWE5LThkMjItMDVjM2Y1OGMyYmY3JwCgpKiVCMwXD2FiTWFuaWZlc3RTdGF0ZQIEAKCkqJUItaEBBkFzbGVlcCcAoKSolQjMFw9vbkFueUJvdENsaWNrZWQCBACgpKiVCLyhAfwQQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCAgJiYgIXRoYXQuYm90LnRhZ3MuYWJSaWdodENsaWNrSWdub3JlICYmIHRoYXQubW9kYWxpdHkgPT0gIm1vdXNlIiAmJiB0aGF0LmJ1dHRvbklkID09ICJyaWdodCIpIHsNCg0KICAgIGlmICh0YWdzLmFiTWFuaWZlc3RTdGF0ZSA9PSAiQXNsZWVwIikgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy9hYiBzZWxlY3RlZA0KICAgIGlmICh0aGF0LmJvdCA9PSBsaW5rcy5hYkJvdCkNCiAgICB7DQogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8vR2V0IHJpZCBvZiBhbnkgb3RoZXIgb25lcw0KICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkgew0KICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7DQogICAgfQ0KDQogICAgLy9hbmltYXRpb25zDQogICAgaWYgKCFsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKSB7DQogICAgICAgIHRoaXNCb3QuYWJDbGljaygpOw0KICAgIH0NCg0KICAgIC8vQ3JlYXRlIGFybQ0KICAgIGxldCBhcm0gPSB7fTsNCg0KICAgIGFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbl0gPSB0cnVlOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXTsNCiAgICBhcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5ib3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl07DQogICAgYXJtLmNyZWF0b3IgPSBsaW5rcy5hYkJvdC5pZDsNCiAgICBhcm0uZGltZW5zaW9uID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb247DQogICAgYXJtLnNjYWxlID0gMC45Ow0KICAgIGFybS5zY2FsZVogPSAwLjAxOw0KICAgIGFybS5jb2xvciA9ICJjbGVhciI7DQogICAgYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsNCiAgICBhcm0ubGluZUNvbG9yID0gbGlua3MuYWJCb3QudGFncy5zdHJva2VDb2xvcjsNCiAgICBhcm0ubGluZVRvID0gbGlua3MuYWJCb3QuaWQ7DQogICAgYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOw0KICAgIGFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsNCiAgICAgICAgICAgICAgICAgICAgc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsNCg0KICAgIGxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsNCg0KICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsNCg0KICAgIHRoaXNCb3Qub25BbnlCb3REcm9wRW50ZXIoew0KICAgICAgICBkcmFnQm90OiBsaW5rcy5hYkJvdC5saW5rcy5hcm0sDQogICAgICAgIHRvOiB7DQogICAgICAgICAgICBib3Q6IHRoYXQuYm90LA0KICAgICAgICAgICAgeDogdGhhdC5ib3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24NCiAgICAgICAgfSwNCiAgICAgICAgZnJvbTogew0KICAgICAgICAgICAgeDogbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24NCiAgICAgICAgfQ0KICAgIH0pDQoNCiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC5ib3QuaWQ7DQoNCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJib3QifSk7DQoNCiAgICByZXR1cm47DQp9JwCgpKiVCMwXBWlucHV0AgQAoKSolQizsgEo8J+Ul2Y4NjAyODc4LWMyZWYtNDhiZC04NWEwLThkNjM1MWViNDEyMCcAoKSolQjMFw1hYlBlcnNvbmFsaXR5AgQAoKSolQjasgEEdHJ1ZScAoKSolQjMFwtwZXJzb25hbGl0eQIEAKCkqJUI37IBKPCflJdiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGIA"}]}