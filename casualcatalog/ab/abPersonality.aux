{"version":2,"updates":[{"id":0,"timestamp":1756329738682,"update":"AacBnvG9qwIAJwEEYm90cyQxNjU1NGJjMS1lOTNlLTRhMGItOGNkMy1kZmQ3NzIzMTk2NzIBJwCe8b2rAgAJYWJWZXJzaW9uAgQAnvG9qwIBBDEwLjYnAJ7xvasCAAZzeXN0ZW0CBACe8b2rAgYWYWIucGVyc29uYWxpdHkudmVyc2lvbicAnvG9qwIAGWFiUGVyc29uYWxpdHlNYWpvclZlcnNpb24CBACe8b2rAh0BMScAnvG9qwIADW9uU2tpbGxVcGRhdGUCBACe8b2rAh+tAUBjb25zdCB2ZXJzaW9uU3RyaW5nID0gdGFncy5hYlBlcnNvbmFsaXR5TWFqb3JWZXJzaW9uICsgIi4iICsgdGFncy5hYlBlcnNvbmFsaXR5TWlub3JWZXJzaW9uOwoKY29uc29sZS5sb2coIltBQlBlcnNvbmFsaXR5XSBMb2FkZWQgQUIgUGVyc29uYWxpdHkgdmVyc2lvbiAiICsgdmVyc2lvblN0cmluZyk7JwCe8b2rAgANYWJQZXJzb25hbGl0eQIEAJ7xvasCzQEEdHJ1ZScAnvG9qwIACGFiSWdub3JlAgQAnvG9qwLSAQR0cnVlJwCe8b2rAgAEZm9ybQIEAJ7xvasC1wEHbm90aGluZycAnvG9qwIAGWFiUGVyc29uYWxpdHlNaW5vclZlcnNpb24CBACe8b2rAt8BAjEzJwEEYm90cyRiMjZlMTA4OS0xNzJkLTQ1YTktOGQyMi0wNWMzZjU4YzJiZjcBJwCe8b2rAuIBBnN5c3RlbQIEAJ7xvasC4wEYYWIucGVyc29uYWxpdHkuYW5pbWF0aW9uJwCe8b2rAuIBBGZvcm0CBACe8b2rAvwBB25vdGhpbmcnAJ7xvasC4gEIYWJJZ25vcmUCBACe8b2rAoQCBHRydWUnAJ7xvasC4gENbWFuaWZlc3RhdGlvbgIEAJ7xvasCiQIo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAnvG9qwLiAQhyZW1lbWJlcgIEAJ7xvasCsAIo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAnvG9qwLiARhhbmltYXRpb25fYWJHcmlkTWFuaWZlc3QCBACe8b2rAtcC6g5Ac2hvdXQoInJlc2V0Iik7Cgpjb25zdCBwb3NpdGlvblggPSB0aGF0Py5wb3NpdGlvbi54ID8/IDA7CmNvbnN0IHBvc2l0aW9uWSA9IHRoYXQ/LnBvc2l0aW9uLnkgPz8gMDsKY29uc3QgZGltZW5zaW9uID0gdGhhdD8uZGltZW5zaW9uID8/ICJob21lIjsKY29uc3QgZ3JpZFNjYWxlID0gdGhhdD8uc2NhbGUgPz8gNTsKY29uc3QgbW9tZW50Q291bnQgPSAwOwpjb25zdCBncmlkQm90ID0ge307CgpncmlkQm90LnNwYWNlID0gInRlbXBMb2NhbCI7CmdyaWRCb3QuY29sb3IgPSAiY2xlYXIiOwpncmlkQm90LnN0cm9rZUNvbG9yID0gYWJQZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpncmlkQm90LnNjYWxlID0gMC4wMDE7CmdyaWRCb3Quc2NhbGVaID0gMC4xOwpncmlkQm90LnJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpncmlkQm90W2RpbWVuc2lvbl0gPSB0cnVlOwpncmlkQm90LnBvaW50YWJsZSA9IGZhbHNlOwpncmlkQm90LmtpbGxUaW1lciA9ICJAIGF3YWl0IG9zLnNsZWVwKDQwMCk7IGRlc3Ryb3kodGhpc0JvdCk7IjsKCmxldCByb3VuZEJvdHM7Cgpmb3IgKGxldCBpID0gZ3JpZFNjYWxlOyBpID4gMDsgaS0tKQp7CiAgICBjb25zdCBib3RDb3VudCA9IGkgKiA4OwoKICAgIGxldCBzaWRlQ291bnQgPSAwOwogICAgbGV0IHBoYXNlRmFjdG9yID0gMDsKCiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvdENvdW50OyBqKyspCiAgICB7CiAgICAgICAgaWYgKHBoYXNlRmFjdG9yID09IDApCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpICsgc2lkZUNvdW50OwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSBpICsgcG9zaXRpb25ZOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwaGFzZUZhY3RvciA9PSAxKQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gaSArIHBvc2l0aW9uWDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKGkgKyBwb3NpdGlvblkpIC0gc2lkZUNvdW50OyAgCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBoYXNlRmFjdG9yID09IDIpCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoaSArIHBvc2l0aW9uWCkgLSBzaWRlQ291bnQ7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9ICgoaSArIHBvc2l0aW9uWSkgKiAtMSkgOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpIDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKChpICsgcG9zaXRpb25ZKSAqIC0xKSArIHNpZGVDb3VudDsgIAogICAgICAgIH0KCiAgICAgICAgY29uc3QgbmV3R3JpZEJvdCA9IGF3YWl0IGNyZWF0ZShncmlkQm90KTsKCiAgICAgICAgYW5pbWF0ZVRhZyhuZXdHcmlkQm90LCAic2NhbGUiLCB7CiAgICAgICAgICAgIHRvVmFsdWU6IDEsCiAgICAgICAgICAgIGVhc2luZzogewogICAgICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICAgICAgbW9kZTogIm91dCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHVyYXRpb246IDAuMDEKICAgICAgICB9KTsKCiAgICAgICAgbmV3R3JpZEJvdC5raWxsVGltZXIoKTsKCiAgICAgICAgc2lkZUNvdW50Kys7CgogICAgICAgIGlmIChzaWRlQ291bnQgPT0gYm90Q291bnQgLyA0KQogICAgICAgIHsKICAgICAgICAgICAgc2lkZUNvdW50ID0gMDsKCiAgICAgICAgICAgIHBoYXNlRmFjdG9yKys7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCBvcy5zbGVlcCg4KTsKICAgIH0KfScAnvG9qwLiAQlhYlZlcnNpb24CBACe8b2rAsIRBDEwLjYnAJ7xvasC4gEGb25DaGF0AgQAnvG9qwLHEVVALy8gaWYgKHRoYXQubWVzc2FnZSA9PSAiQHRlc3QiKQovLyB7Ci8vICAgICB0aGlzQm90LmFuaW1hdGlvbl9hYkdyaWRNYW5pZmVzdCgpOwovLyB9JwCe8b2rAuIBC3BlcnNvbmFsaXR5AgQAnvG9qwKdEijwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwCe8b2rAuIBDWFiUGVyc29uYWxpdHkCBACe8b2rAsQSBHRydWUnAQRib3RzJGI3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYgEnAJ7xvasCyRIGc3lzdGVtAgQAnvG9qwLKEhVhYi5wZXJzb25hbGl0eS5jb25maWcnAJ7xvasCyRIIYWJJZ25vcmUCBACe8b2rAuASBHRydWUnAJ7xvasCyRIEZm9ybQIEAJ7xvasC5RIHbm90aGluZycAnvG9qwLJEgthYkJhc2VDb2xvcgIEAJ7xvasC7RIHIzAwRDlDRCcAnvG9qwLJEhFhYkJhc2VTdHJva2VDb2xvcgIEAJ7xvasC9RIHIzAwRDlDRCcAnvG9qwLJEhBhYkJsdWVwcmludENvbG9yAgQAnvG9qwL9EgcjMDA4MjdCJwCe8b2rAskSCHJlbWVtYmVyAgQAnvG9qwKFEyjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwCe8b2rAskSEWFiQnVpbGRlcklkZW50aXR5AgQAnvG9qwKsEwpjYXN1YWwuYm90JwCe8b2rAskSCWFiVmVyc2lvbgIEAJ7xvasCtxMEMTAuNicAnvG9qwLJEhdjaGFuZ2VQZXJzb25hbGl0eUNvbmZpZwIEAJ7xvasCvBPAEUBpZiAoIXRoYXQpIHsNCiAgICByZXR1cm47DQp9DQoNCmlmICghYXV0aEJvdCkgew0KICAgIGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7DQp9DQoNCmlmICghYXV0aEJvdCkgew0KICAgIHJldHVybjsNCn0NCg0KYXdhaXQgb3MuZ3JhbnRJbnN0QWRtaW5QZXJtaXNzaW9uKGF1dGhCb3QuaWQpOw0KDQpsZXQgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhd2FpdCBvcy5nZXREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIik7DQoNCmlmIChhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5zdWNjZXNzID09IGZhbHNlKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSB7fTsNCn0gZWxzZSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5kYXRhOw0KfQ0KDQppZiAodGhhdC5uYW1lKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQnVpbGRlcklkZW50aXR5Il0gPSB0aGF0Lm5hbWU7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCdWlsZGVySWRlbnRpdHkiLCB0aGF0Lm5hbWUsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5jb2xvcikgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJhc2VDb2xvciJdID0gdGhhdC5jb2xvcjsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlU3Ryb2tlQ29sb3IiXSA9IHRoYXQuY29sb3I7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlQ29sb3IiLCB0aGF0LmNvbG9yLCAibG9jYWwiKTsNCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYkJhc2VTdHJva2VDb2xvciIsIHRoYXQuY29sb3IsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5wb3J0YWxDb2xvcikgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJhc2VHcmlkUG9ydGFsQ29sb3IiXSA9IHRoYXQucG9ydGFsQ29sb3I7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlR3JpZFBvcnRhbENvbG9yIiwgdGhhdC5wb3J0YWxDb2xvciwgImxvY2FsIik7DQp9DQoNCmlmICh0aGF0Lm1lbnVDb2xvcikgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJhc2VNZW51Q29sb3IiXSA9IHRoYXQubWVudUNvbG9yOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQmFzZU1lbnVDb2xvciIsIHRoYXQubWVudUNvbG9yLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQubWVudUxhYmVsQ29sb3IpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlTGFiZWxDb2xvciJdID0gdGhhdC5tZW51TGFiZWxDb2xvcjsNCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYkJhc2VMYWJlbENvbG9yIiwgdGhhdC5tZW51TGFiZWxDb2xvciwgImxvY2FsIik7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQmFzZVNoYWRvd0NvbG9yIl0gPSB0aGF0Lm1lbnVMYWJlbENvbG9yOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQmFzZVNoYWRvd0NvbG9yIiwgdGhhdC5tZW51TGFiZWxDb2xvciwgImxvY2FsIik7DQp9DQoNCmlmICh0aGF0LmZvcm0pIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJGb3JtIl0gPSB0aGF0LmZvcm07DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJGb3JtIiwgdGhhdC5mb3JtLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQuYWlNb2RlbCkgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYlByZWZlcnJlZEFJTW9kZWwiXSA9IHRoYXQuYWlNb2RlbDsNCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYlByZWZlcnJlZEFJTW9kZWwiLCB0aGF0LmFpTW9kZWwsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5kZWZhdWx0UGVyc29uYWxpdHkpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IHt9Ow0KICAgIHRoaXNCb3QudXBkYXRlUGVyc29uYWxpdHkoe30pOw0KfQ0KDQppZiAodGhhdC5tYXBCYXNlbWFwKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiTWFwUG9ydGFsQmFzZSJdID0gdGhhdC5tYXBCYXNlbWFwOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiTWFwUG9ydGFsQmFzZSIsIHRoYXQubWFwQmFzZW1hcCwgImxvY2FsIik7DQp9DQoNCmF3YWl0IG9zLnJlY29yZERhdGEoYXV0aEJvdC5pZCwgImFiUGVyc29uYWxpdHlDb25maWciLCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSk7DQoNCnNob3V0KCdvbkFCUGVyc29uYWxpdHlDaGFuZ2VkJywgeyBib3Q6IHRoaXNCb3QgfSk7JwCe8b2rAskSD2FiQmFzZU1lbnVDb2xvcgIEAJ7xvasC/SQHIzAwRDlDRCcAnvG9qwLJEhF1cGRhdGVQZXJzb25hbGl0eQIEAJ7xvasChSX3DUBsZXQgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGE7DQoNCmlmICh0aGF0ICYmIHRoYXQgPT0ge30pIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IHt9Ow0KfSBlbHNlIHsNCiAgICBpZiAoIWF1dGhCb3QpIHsNCiAgICAgICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsNCiAgICB9DQoNCiAgICBpZiAoYXV0aEJvdCkgew0KICAgICAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IGF3YWl0IG9zLmdldERhdGEoYXV0aEJvdC5pZCwgImFiUGVyc29uYWxpdHlDb25maWciKTsNCiAgICAgICAgaWYgKCFsaW5rcy5yZW1lbWJlciAmJiBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5zdWNjZXNzID09IGZhbHNlKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5kYXRhOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovL2FiQmx1ZVByaW50Q29sb3INCi8vYWJCYXNlQWNjZW50Q29sb3INCmNvbnN0IGFiVGFncyA9IFsNCiAgICAiYWJCYXNlQ29sb3IiLA0KICAgICJhYkJhc2VNZW51Q29sb3IiLA0KICAgICJhYkJ1aWxkZXJJZGVudGl0eSIsDQogICAgImFiQmFzZVN0cm9rZUNvbG9yIiwNCiAgICAiYWJCYXNlR3JpZFBvcnRhbENvbG9yIiwNCiAgICAiYWJCYXNlTGFiZWxDb2xvciIsDQogICAgImFiQmFzZVNoYWRvd0NvbG9yIiwNCiAgICAiYWJQcmVmZXJyZWRBSU1vZGVsIiwNCiAgICAiYWJDYXRhbG9nTmFtZSIsDQogICAgImFiTWFwUG9ydGFsQmFzZSINCl07DQoNCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7DQoNCmZvciAobGV0IGkgPSAwOyBpIDwgYWJUYWdzLmxlbmd0aDsgKytpKSB7DQogICAgaWYgKGFiUGVyc29uYWxpdHlDb25maWdEYXRhICYmIGFiUGVyc29uYWxpdHlDb25maWdEYXRhW2FiVGFnc1tpXV0pIHsNCiAgICAgICAgaWYgKHRhZ3NbYWJUYWdzW2ldXSAhPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dKSB7DQogICAgICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIGFiVGFnc1tpXSwgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbYWJUYWdzW2ldXSwgImxvY2FsIik7DQogICAgICAgIH0NCiAgICB9IGVsc2UgaWYgKGxpbmtzLnJlbWVtYmVyICYmIGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSkgew0KICAgICAgICBpZiAobGlua3MucmVtZW1iZXIudGFnc1thYlRhZ3NbaV1dICE9IHRhZ3NbYWJUYWdzW2ldXSkgew0KICAgICAgICAgICAgc2V0VGFnTWFzayh0aGlzQm90LCBhYlRhZ3NbaV0sIGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSwgImxvY2FsIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoYWJUYWdzW2ldID09ICJhYkJhc2VHcmlkUG9ydGFsQ29sb3IiKSB7DQogICAgICAgIGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDb2xvciA9IHRhZ3MuYWJCYXNlR3JpZFBvcnRhbENvbG9yOw0KICAgIH0NCg0KICAgIGlmIChhYlRhZ3NbaV0gPT0gImFiTWFwUG9ydGFsQmFzZSIpIHsNCiAgICAgICAgbWFwUG9ydGFsQm90LnRhZ3MubWFwUG9ydGFsQmFzZW1hcCA9IHRhZ3MuYWJNYXBQb3J0YWxCYXNlOw0KICAgICAgICBtaW5pTWFwUG9ydGFsQm90LnRhZ3MubWFwUG9ydGFsQmFzZW1hcCA9IHRhZ3MuYWJNYXBQb3J0YWxCYXNlOw0KICAgIH0NCn0NCg0Kc2hvdXQoJ29uQUJQZXJzb25hbGl0eVVwZGF0ZWQnLCB7IGJvdDogdGhpc0JvdCB9KTsnAJ7xvasCyRINYWJQZXJzb25hbGl0eQIEAJ7xvasC/TIEdHJ1ZScAnvG9qwLJEg1vblNraWxsVXBkYXRlAgQAnvG9qwKCMx1AdGhpc0JvdC51cGRhdGVQZXJzb25hbGl0eSgpOycAnvG9qwLJEhFhYkJhc2VTaGFkb3dDb2xvcgIEAJ7xvasCoDMFYmxhY2snAJ7xvasCyRIQYWJCYXNlTGFiZWxDb2xvcgIEAJ7xvasCpjMFYmxhY2snAJ7xvasCyRIKbWFwT3B0aW9ucwIEAJ7xvasCrDOeB/Cfp6xbDQogICAgew0KICAgICAgICAibmFtZSI6ICAic2F0ZWxsaXRlIiwNCiAgICAgICAgImlkIjogInNhdGVsbGl0ZSINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgImh5YnJpZCIsDQogICAgICAgICJpZCI6ICJoeWJyaWQiDQogICAgfSwNCiAgICB7DQogICAgICAgICJuYW1lIjogICJvY2VhbnMiLA0KICAgICAgICAiaWQiOiAib2NlYW5zIg0KICAgIH0sDQogICAgew0KICAgICAgICAibmFtZSI6ICAib3BlbiBzdHJlZXQgbWFwIiwNCiAgICAgICAgImlkIjogIm9zbSINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgInRlcnJhaW4iLA0KICAgICAgICAiaWQiOiAidGVycmFpbiINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgImRhcmsgZ3JheSBjYW52YXMiLA0KICAgICAgICAiaWQiOiAiZGFyay1ncmF5Ig0KICAgIH0sDQogICAgew0KICAgICAgICAibmFtZSI6ICAiZ3JheSBjYW52YXMiLA0KICAgICAgICAiaWQiOiAiZ3JheSINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgInN0cmVldHMiLA0KICAgICAgICAiaWQiOiAic3RyZWV0cyINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgInN0cmVldHMgKGRhcmspIiwNCiAgICAgICAgImlkIjogInN0cmVldHMtbmlnaHQtdmVjdG9yIg0KICAgIH0sDQogICAgew0KICAgICAgICAibmFtZSI6ICAic3RyZWV0cyAobmF2aWdhdGlvbikiLA0KICAgICAgICAiaWQiOiAic3RyZWV0cy1uYXZpZ2F0aW9uLXZlY3RvciINCiAgICB9LA0KICAgIHsNCiAgICAgICAgIm5hbWUiOiAgInRvcG9ncmFwaGljIiwNCiAgICAgICAgImlkIjogInRvcG8iDQogICAgfSwNCiAgICB7DQogICAgICAgICJuYW1lIjogICJzdHJlZXRzIChyZWxpZWYpIiwNCiAgICAgICAgImlkIjogInN0cmVldHMtcmVsaWVmLXZlY3RvciINCiAgICB9DQpdJwCe8b2rAskSFHNob3dBQkJhc2VtYXBPcHRpb25zAgQAnvG9qwLJOsQFQHNob3V0KCJjbGVhckFCQmFzZW1hcE9wdGlvbnNNZW51Iik7DQoNCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7DQpjb25maWdCb3QudGFncy5tZW51UG9ydGFsID0gJ2FiQmFzZW1hcE9wdGlvbnNNZW51JzsNCg0KZm9yIChjb25zdCBvcHRpb24gb2YgdGFncy5tYXBPcHRpb25zKSB7DQogICAgaWYgKG9wdGlvbi5pZCA9PSBtYXBQb3J0YWxCb3QudGFncy5tYXBQb3J0YWxCYXNlbWFwKSB7DQogICAgICAgIGNvbnRpbnVlOw0KICAgIH0NCiAgICBjb25zdCBvcHRpb25PYmogPSANCiAgICB7DQogICAgICAgIGFiQmFzZW1hcE9wdGlvbnNNZW51OiB0cnVlLA0KICAgICAgICBjbGVhckFCQmFzZW1hcE9wdGlvbnNNZW51OiBgQGRlc3Ryb3kodGhpc0JvdCk7YCwNCiAgICAgICAgbWFwSUQ6IG9wdGlvbi5pZCwNCiAgICAgICAgbGFiZWw6IG9wdGlvbi5uYW1lLA0KICAgICAgICBvbkNsaWNrOiBgQA0KICAgICAgICAgICAgbWFwUG9ydGFsQm90LnRhZ3MubWFwUG9ydGFsQmFzZW1hcCA9IHRhZ3MubWFwSUQ7DQogICAgICAgICAgICBzaG91dCgnY2hhbmdlUGVyc29uYWxpdHlDb25maWcnLCB7J21hcEJhc2VtYXAnOiB0YWdzLm1hcElEfSk7IA0KICAgICAgICAgICAgc2hvdXQoImNsZWFyQUJCYXNlbWFwT3B0aW9uc01lbnUiKTsNCiAgICAgICAgYA0KICAgIH0NCg0KICAgIGFiLmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKG9wdGlvbk9iaik7DQp9JwCe8b2rAskSC29uR3JpZENsaWNrAgQAnvG9qwKOQCZAc2hvdXQoImNsZWFyQUJCYXNlbWFwT3B0aW9uc01lbnUiKTsNCicBBGJvdHMkYjliODI4MTktMWYxNC00MzkyLTg4YTktNTJmNjdhOWY4ZTU1AScAnvG9qwK1QAZzeXN0ZW0CBACe8b2rArZAGGFiLnBlcnNvbmFsaXR5LmFybV9udWRnZScAnvG9qwK1QA1vbkFCQXJtUGxhY2VkAgQAnvG9qwLPQDhAc2V0VGFnTWFzayh0aGlzQm90LCAnaGFzQXJtQmVlblBsYWNlZCcsIHRydWUsICdsb2NhbCcpOycAnvG9qwK1QAlvbkFCQXdha2UCBACe8b2rAohBMEBhd2FpdCBvcy5zbGVlcCgyNTApOwp0aGlzQm90LmFiU3RhcnRBcm1OdWRnZSgpOycAnvG9qwK1QAhhYklnbm9yZQIEAJ7xvasCuUEEdHJ1ZScAnvG9qwK1QA1hYlBlcnNvbmFsaXR5AgQAnvG9qwK+QQR0cnVlJwCe8b2rArVABGZvcm0CBACe8b2rAsNBB25vdGhpbmcnAJ7xvasCtUAFbGVhcm4CBACe8b2rAstBKPCflJc2NjU3Yjg2NS1lOTgzLTQ0MDEtOWZjOS1mNTQxOGQxOGE3ZjcnAJ7xvasCtUANbWFuaWZlc3RhdGlvbgIEAJ7xvasC8kEo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAnvG9qwK1QAhyZW1lbWJlcgIEAJ7xvasCmUIo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAnvG9qwK1QAVkZWJ1ZwIEAJ7xvasCwEIFZmFsc2UnAJ7xvasCtUAOYXJtTnVkZ2VXYWl0TVMCBACe8b2rAsZCBDUwMDAnAJ7xvasCtUAPb25BQkluaXRpYWxpemVkAgQAnvG9qwLLQhtAdGhpc0JvdC5hYlN0YXJ0QXJtTnVkZ2UoKTsnAJ7xvasCtUAPYWJTdGFydEFybU51ZGdlAgQAnvG9qwLnQuIbQGlmICh0aGlzQm90LnZhcnMubnVkZ2VBY3RpdmUpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSB0aGVyZSBpcyBhbHJlYWR5IGEgbnVkZ2UgaW4gcHJvZ3Jlc3MuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCnRoaXNCb3QudmFycy5udWRnZUFjdGl2ZSA9IHRydWU7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzdGFydGluZyBudWRnZS4uLmApCn0KCmZ1bmN0aW9uIGNhbk51ZGdlKCk6IGJvb2xlYW4gewogICAgLy8gQ2FuJ3QgaGF2ZSBwbGFjZWQgdGhlIGFybSBhbHJlYWR5LgogICAgaWYgKHRhZ3MuaGFzQXJtQmVlblBsYWNlZCkgewogICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2Fubm90IG51ZGdlOiBhcm0gcGxhY2VtZW50IGhhcyBhbHJlYWR5IG9jY3VyZWQuYCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBBQiBtYW5pZmVzdGF0aW9uIGJvdCBtdXN0IGJlIGFjdGl2ZS4KICAgIGlmICghbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCkgewogICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2Fubm90IG51ZGdlOiBhYiBtYW5pZmVzdGF0aW9uIGJvdCBpcyBpbmFjdGl2ZS5gKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIFRoZSBpbnN0IG11c3QgYmUgZW1wdHkgb2YgYWxsIGJvdHMuIFRoZSBleGNlcHRpb25zIGFyZSBhYiBib3RzIGFuZCBidWlsdC1pbiBib3RzLgogICAgY29uc3QgdXNlck1hZGVCb3QgPSBnZXRCb3QoKGIpID0+IHsKICAgICAgICByZXR1cm4gIWIudGFncy5zeXN0ZW0/LnN0YXJ0c1dpdGgoJ2FiLicpICYmCiAgICAgICAgICAgICAgICBiLnNwYWNlID09PSAnc2hhcmVkJyAmJgogICAgICAgICAgICAgICAgIWIudGFncy5hYkVnZyAvLyBEb24ndCBpbmNsdWRlIGFiRWdnIGJvdHMgYXMgInVzZXIgbWFkZSIuCiAgICB9KQogICAgCiAgICBpZiAodXNlck1hZGVCb3QpIHsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBpZiAodGFncy5kZWJ1Z1VzZXJNYWRlQm90cykgewogICAgICAgICAgICAgICAgY29uc3QgdXNlck1hZGVCb3RzID0gZ2V0Qm90cygoYikgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhYi50YWdzLnN5c3RlbT8uc3RhcnRzV2l0aCgnYWIuJykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuc3BhY2UgPT09ICdzaGFyZWQnICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhYi50YWdzLmFiRWdnIC8vIERvbid0IGluY2x1ZGUgYWJFZ2cgYm90cyBhcyAidXNlciBtYWRlIi4KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGNhbm5vdCBudWRnZTogaW5zdCBjb250YWlucyB1c2VyIG1hZGUgYm90cy5gLCB1c2VyTWFkZUJvdHMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5ub3QgbnVkZ2U6IGluc3QgY29udGFpbnMgdXNlciBtYWRlIGJvdHMuYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIE1lbnUgcG9ydGFsIG11c3QgZWl0aGVyIGJlIGluYWN0aXZlIG9yIG5vdCBoYXZlIGFueSBib3RzIGluIHRoZSBjdXJyZW50bHkgYWN0aXZlIG1lbnUgcG9ydGFsLgogICAgaWYgKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwpIHsKICAgICAgICBjb25zdCBib3RJbk1lbnVQb3J0YWwgPSBnZXRCb3QoKGIpID0+IHsKICAgICAgICAgICAgcmV0dXJuIGIudGFnc1tjb25maWdCb3QudGFncy5tZW51UG9ydGFsXSA9PT0gdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBpZiAoYm90SW5NZW51UG9ydGFsKSB7CiAgICAgICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGNhbm5vdCBudWRnZTogbWVudVBvcnRhbCBpcyBjdXJyZW50bHkgb3BlbiBhbmQgaGFzIGJvdHMgaW4gaXQuYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKfQoKaWYgKGNhbk51ZGdlKCkpIHsKICAgIC8vIFN0YXJ0IG51ZGdlIGZvciBhcm0gcGxhY2VtZW50LgogICAgYXdhaXQgb3Muc2xlZXAodGFncy5hcm1OdWRnZVdhaXRNUyk7CgogICAgaWYgKGNhbk51ZGdlKCkpIHsKICAgICAgICBjb25zdCBhYlBvc2l0aW9uWCA9IGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QudGFnc1tsaW5rcy5yZW1lbWJlci50YWdzLmFiQWN0aXZlRGltZW5zaW9uICsgJ1gnXTsKICAgICAgICBjb25zdCBhYlBvc2l0aW9uWSA9IGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QudGFnc1tsaW5rcy5yZW1lbWJlci50YWdzLmFiQWN0aXZlRGltZW5zaW9uICsgJ1knXTsKCiAgICAgICAgY29uc3QgZ3JpZENsaWNrUGFyYW1zID0gewogICAgICAgICAgICBkaW1lbnNpb246IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBY3RpdmVEaW1lbnNpb24sCiAgICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IGFiUG9zaXRpb25YICsgNSwgeTogYWJQb3NpdGlvblkgfSwKICAgICAgICAgICAgZm9yY2VBcm1QbGFjZW1lbnQ6IHRydWUsCiAgICAgICAgfQoKICAgICAgICBpZiAoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID09PSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQWN0aXZlRGltZW5zaW9uKSB7CiAgICAgICAgICAgIC8vIE1hcCBwb3J0YWwgaXMgaW4gZGlmZmVyZW50IGNvb3JkaW5hdGUgc3BhY2UgYW5kIHNjYWxlLgogICAgICAgICAgICBncmlkQ2xpY2tQYXJhbXMucG9zaXRpb24ueCA9IGFiUG9zaXRpb25YICsgMC4wMDAzNTc0MzQwNjg0MDUzODIzOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSB3aGlzcGVyaW5nIG9uR3JpZENsaWNrIHRvIHRoZSBhYiBtYW5pZmVzdGF0aW9uIGJvdCB3aXRoIHRoZSBwYXJhbXM6YCwgZ3JpZENsaWNrUGFyYW1zKQogICAgICAgIH0KCiAgICAgICAgLy8gRm9yY2UgYWIgYXJtIHBsYWNlbWVudCB1c2luZyB0aGUgb25HcmlkQ2xpY2sgbGlzdGVuZXIgb2YgdGhlIG1hbmlmZXN0YXRpb24gYm90LgogICAgICAgIHdoaXNwZXIobGlua3MubWFuaWZlc3RhdGlvbiwgJ29uR3JpZENsaWNrJywgZ3JpZENsaWNrUGFyYW1zKTsKICAgIH0KfQoKdGhpc0JvdC52YXJzLm51ZGdlQWN0aXZlID0gZmFsc2U7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBkb25lYCk7Cn0nAJ7xvasCtUAJYWJWZXJzaW9uAgQAnvG9qwLKXgQxMC42JwCe8b2rArVAD29uUG9ydGFsQ2hhbmdlZAIEAJ7xvasCz16FAUBjb25zdCB7IHBvcnRhbCwgZGltZW5zaW9uIH0gPSB0aGF0OwoKaWYgKHBvcnRhbCA9PT0gJ21lbnVQb3J0YWwnKSB7CiAgICBpZiAoIWRpbWVuc2lvbikgewogICAgICAgIHRoaXNCb3QuYWJTdGFydEFybU51ZGdlKCk7CiAgICB9Cn0nAJ7xvasCtUANYWJNZW51UmVmcmVzaAIEAJ7xvasC1V8bQHRoaXNCb3QuYWJTdGFydEFybU51ZGdlKCk7JwCe8b2rArVAEWRlYnVnVXNlck1hZGVCb3RzAgQAnvG9qwLxXwVmYWxzZScBBGJvdHMkZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkAScAnvG9qwL3XwZzeXN0ZW0CBACe8b2rAvhfHGFiLnBlcnNvbmFsaXR5Lm1hbmlmZXN0YXRpb24nAJ7xvasC918EZm9ybQIEAJ7xvasClWAHbm90aGluZycAnvG9qwL3XwtkZXNjcmlwdGlvbgIEAJ7xvasCnWA4VGhpcyBza2lsbCBjb250cm9scyB0aGUgYWN0dWFsIGJvdCBmb3IgdGhlIGFiIGludGVyZmFjZS4nAJ7xvasC918FbGVhcm4CBACe8b2rAtZgKPCflJc2NjU3Yjg2NS1lOTgzLTQ0MDEtOWZjOS1mNTQxOGQxOGE3ZjcnAJ7xvasC918Pb25Qb3J0YWxDaGFuZ2VkAgQAnvG9qwL9YPgvQGNvbnN0IFBPUlRBTFNfVEhBVF9ISURFID0gbmV3IFNldChbCiAgICAic3lzdGVtUG9ydGFsIiwKICAgICJzaGVldFBvcnRhbCIKXSkKCmNvbnN0IFBPUlRBTFNfVEhBVF9NQU5JRkVTVCA9IG5ldyBTZXQoWwogICAgIm1pbmlHcmlkUG9ydGFsIiwKICAgICJncmlkUG9ydGFsIiwKICAgICJtYXBQb3J0YWwiLAogICAgIm1pbmlNYXBQb3J0YWwiLAogICAgImxlZnRXcmlzdFBvcnRhbCIsCiAgICAicmlnaHRXcmlzdFBvcnRhbCIKXSk7Cgpjb25zdCBNQVBfTE9BRF9XQUlUX1RJTUUgPSAxMDAwOwoKZm9yIChjb25zdCBwb3J0YWwgb2YgUE9SVEFMU19USEFUX0hJREUpIHsKICAgIGlmIChjb25maWdCb3QudGFnc1twb3J0YWxdICE9IG51bGwpIHsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGEgcG9ydGFsIHRoYXQgaGlkZXMgYWIgaXMgb3BlbiAtIGhpZGluZyBhYkJvdCBhbmQgaWdub3JpbmcuYCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGFncy5hYkJvdCkgewogICAgICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKICAgICAgICB9CgogICAgICAgIHJldHVybjsKICAgIH0KfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsICE9IG51bGwgfHwgY29uZmlnQm90LnRhZ3Muc3lzdGVtUG9ydGFsICE9IG51bGwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzaGVldCBwb3J0YWwgb3Igc3lzdGVtIHBvcnRhbCBvcGVuZWQgLSBoaWRpbmcgYWJCb3QgYW5kIGlnbm9yaW5nLmApOwogICAgfQoKICAgIGlmICh0YWdzLmFiQm90KSB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdCk7CiAgICB9CgogICAgcmV0dXJuOwp9CgppZiAoIXRhZ3MuYWJBd2FrZSkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGFiIGlzIG5vdCBhd2FrZSAtIGlnbm9yaW5nLmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAodGhhdC5wb3J0YWwgPT0gInRhZ1BvcnRhbCIpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSB0YWdQb3J0YWwgY2hhbmdlZCAtIGlnbm9yaW5nLmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAodGhhdC5wb3J0YWwgPT0gIm1lbnVQb3J0YWwiKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gbWVudVBvcnRhbCBjaGFuZ2VkIC0gaWdub3JpbmcuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICh0aGF0LnBvcnRhbCA9PSAiZ3JpZFBvcnRhbCIgJiYgY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gZ3JpZFBvcnRhbCBjaGFuZ2VkLCBidXQgYWxzbyBhbHJlYWR5IGluIHRoZSBtYXBQb3J0YWwgLSBpZ25vcmluZy5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gdGhhdDpgLCB0aGF0KTsKfQoKLy8gVGhlIG1hcCBwb3J0YWwgaXMgdG91Z2guIEl0IHNlZW1zIHRvIHZhcnkgaW4gbG9hZGluZyBzcGVlZCBvbgovLyB2YXJpb3VzIGhhcmR3YXJlIGFuZCBuZXR3b3JrcyBhbmQgaGFzIGJ5IHRoZSB0aW1lIG9uUG9ydGFsQ2hhbmdlZCBpcyBjYWxsZWQgaXQgZG9lc250Ci8vIHNlZW0gZ3VhcmVudGVlZCB0byBiZSBhY3R1YWxseSByZWFkeS4gQWRkaW5nIGEgaGFyZGNvZGVkIHdhaXQgdGltZSB0byBnaXZlIHRoZSBwb3J0YWwgc3BhY2UgdG8gZ2V0Ci8vIHRoZSBtYXAgcG9ydGFsIGZ1bGx5IGxvYWRlZCBiZWZvcmUgY29udGludWluZyB3aXRoIG1hbmlmZXN0aW5nIGFiLgovLwovLyBBdCBzb21lIHBvaW50IHRoaXMgY2FuIGdvIGF3YXkgaWYgd2UgZXZlciBnZXQgYSBzaG91dCBvciBzb21lIG90aGVyIGdhdXJlbnRlZSB0aGF0IHRoZSBtYXAgcG9ydGFsIGlzIGxvYWRlZC9yZWFkeS4KaWYgKHRoYXQucG9ydGFsID09PSAnbWFwUG9ydGFsJykgewogICAgaWYgKHRoYXQuZGltZW5zaW9uKSB7CiAgICAgICAgaWYgKCF0aGlzQm90LnZhcnMubWFwUG9ydGFsTG9hZGVkKSB7CiAgICAgICAgICAgIGlmICghdGhpc0JvdC52YXJzLm1hcFBvcnRhbExvYWRXYWl0ZXIpIHsKICAgICAgICAgICAgICAgIHRoaXNCb3QudmFycy5tYXBQb3J0YWxMb2FkV2FpdGVyID0gb3Muc2xlZXAoTUFQX0xPQURfV0FJVF9USU1FKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSB3YWl0aW5nIGZvciBtYXAgcG9ydGFsIHRvIGZpbmlzaCBsb2FkaW5nOiAke01BUF9MT0FEX1dBSVRfVElNRX1tc2ApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhd2FpdCB0aGlzQm90LnZhcnMubWFwUG9ydGFsTG9hZFdhaXRlcjsKICAgICAgICAgICAgdGhpc0JvdC52YXJzLm1hcFBvcnRhbExvYWRXYWl0ZXIgPSBudWxsOwogICAgICAgICAgICB0aGlzQm90LnZhcnMubWFwUG9ydGFsTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBtYXAgcG9ydGFsIGlzIGFscmVhZHkgbG9hZGVkLmApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICB0aGlzQm90LnZhcnMubWFwUG9ydGFsTG9hZGVkID0gZmFsc2U7CiAgICAgICAgdGhpc0JvdC52YXJzLm1hcFBvcnRhbExvYWRXYWl0ZXIgPSBudWxsOwoKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1hcCBwb3J0YWwgaGFzIGJlZW4gdW5sb2FkZWQuYCk7CiAgICAgICAgfQogICAgfQp9CgovLyBTdGFydCBjaGVja3MgZm9yIGlmL3doZXJlIHdlIG5lZWQgdG8gbWFuaWZlc3QgYWIuCmxldCBuZXdBQiA9IGZhbHNlOwpsZXQgbmV3QUJQb3J0YWw7CmxldCBuZXdBQlBvc2l0aW9uOwoKaWYgKFBPUlRBTFNfVEhBVF9NQU5JRkVTVC5oYXModGhhdC5wb3J0YWwpICYmIHRoYXQuZGltZW5zaW9uKSB7CiAgICAvLyBBIHBvcnRhbCB0aGF0IG1hbmlmZXN0cyBhYiBoYXMganVzdCBjaGFuZ2VkIGRpbWVuc2lvbi4KICAgIC8vIE1hbmlmZXN0IGFiIGluIHRoZSBuZXcgZGltZW5zaW9uLgogICAgaWYgKHRoYXQucG9ydGFsID09ICJtYXBQb3J0YWwiIHx8IHRoYXQucG9ydGFsID09ICJtaW5pTWFwUG9ydGFsIikgezsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1hbmlmZXN0aW5nIGFiIGJvdCBpbiBtYXAgcG9ydGFsIGRpbWVuc2lvbiAnJHt0aGF0LmRpbWVuc2lvbn0nLmApOwogICAgICAgIH0KCiAgICAgICAgbmV3QUJQb3NpdGlvbiA9IHsgeDogbGlua3MucmVtZW1iZXIudGFncy5tYXBab29tUG9zaXRpb24/LnggfHwgLTg1LjY3NjE4OTQ4MjI0MzQsIHk6IGxpbmtzLnJlbWVtYmVyLnRhZ3MubWFwWm9vbVBvc2l0aW9uPy55IHx8IDQyLjk2NTY3NTY3NTY3NTYgfTsKICAgICAgICBuZXdBQlBvcnRhbCA9IHRoYXQucG9ydGFsOwogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHsgZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IG5ld0FCUG9zaXRpb24gfSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1hbmlmZXN0aW5nIGFiIGJvdCBkaW1lbnNpb24gJyR7dGhhdC5kaW1lbnNpb259Jy5gKTsKICAgICAgICB9CgogICAgICAgIG5ld0FCUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTsKICAgICAgICBuZXdBQlBvcnRhbCA9IHRoYXQucG9ydGFsOwogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHsgZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IG5ld0FCUG9zaXRpb24gfSk7CiAgICB9Cn0gZWxzZSBpZiAoKFBPUlRBTFNfVEhBVF9NQU5JRkVTVC5oYXModGhhdC5wb3J0YWwpIHx8IFBPUlRBTFNfVEhBVF9ISURFLmhhcyh0aGF0LnBvcnRhbCkpICYmIAogICAgICAgICAgICF0aGF0LmRpbWVuc2lvbiAmJiAKICAgICAgICAgICAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCB8fCBjb25maWdCb3QudGFncy5tYXBQb3J0YWwpCikgewogICAgLy8gQSBwb3J0YWwgdGhhdCB0eXBpY2FsbHkgaGlkZXMgb3IgcmUtbWFuaWZlc3RzIGFiIGp1c3QgY2xvc2VkLCBidXQgZWl0aGVyIHRoZSBncmlkIG9yIG1hcCBwb3J0YWwgYXJlIHN0aWxsIG9wZW4uCiAgICAvLyBTdW1tb24gYWIgaW4gZWl0aGVyIHRoZSBtYXBQb3J0YWwgb3IgZ3JpZFBvcnRhbC4KICAgIGxldCBzdW1tb25EaW1lbnNpb247CgogICAgaWYgKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCkgewogICAgICAgIHN1bW1vbkRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbDsKICAgICAgICBuZXdBQlBvcnRhbCA9ICdtYXBQb3J0YWwnOwogICAgICAgIG5ld0FCUG9zaXRpb24gPSB7IHg6IGxpbmtzLnJlbWVtYmVyLnRhZ3MubWFwWm9vbVBvc2l0aW9uPy54IHx8IC04NS42NzYxODk0ODIyNDM0LCB5OiBsaW5rcy5yZW1lbWJlci50YWdzLm1hcFpvb21Qb3NpdGlvbj8ueSB8fCA0Mi45NjU2NzU2NzU2NzU2IH07CiAgICB9IGVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwpIHsKICAgICAgICBzdW1tb25EaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwogICAgICAgIG5ld0FCUG9ydGFsID0gJ2dyaWRQb3J0YWwnOwogICAgICAgIG5ld0FCUG9zaXRpb24gPSB7IHg6IDAsIHk6IDAgfTsKICAgIH0KCiAgICBpZiAoc3VtbW9uRGltZW5zaW9uKSB7CiAgICAgICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzdW1tb25pbmcgYWIgYm90IGluICR7bmV3QUJQb3J0YWx9IGRpbWVuc2lvbiAnJHtzdW1tb25EaW1lbnNpb259Jy5gKTsKICAgICAgICB9CgogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHsgZGltZW5zaW9uOiBzdW1tb25EaW1lbnNpb24sIHBvc2l0aW9uOiBuZXdBQlBvc2l0aW9uIH0pOwogICAgfSBlbHNlIHsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGJvdGggdGhlIG1hcCBhbmQgZ3JpZCBwb3J0YWwgYXJlIGJvdGggY2xvc2VkLCBjYW5ub3Qgc3VtbW9uIGFiIGluIGVpdGhlci5gKTsKICAgICAgICB9CiAgICB9Cn0gZWxzZSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gdW5hYmxlIHRvIGRldGVybWluZSBob3cgdG8gcmVzcG9uZCB0byBwb3J0YWwgLyBkaW1lbnNpb24gY2hhbmdlLmAsIHRoYXQpOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAobmV3QUIpIHsKICAgIGxldCB6b29tID0gMTA7CgogICAgaWYgKG5ld0FCUG9ydGFsID09PSAnbWFwUG9ydGFsJyB8fCBuZXdBQlBvcnRhbCA9PT0gJ21pbmlNYXBQb3J0YWwnKSB7CiAgICAgICAgem9vbSA9IDIwMDA7CiAgICB9CiAgICB0cnkgewogICAgICAgIG9zLmZvY3VzT24obmV3QUJQb3NpdGlvbiwgeyB6b29tLCByb3RhdGlvbjogeyB4OiA0NSwgeTogNDUgfSwgcG9ydGFsOiBuZXdBQlBvcnRhbCB9KTsKICAgIH0gY2F0Y2ggewogICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGZvY3VzT24gZXJyb3Igb2NjdXJlZDpgLCBlKTsKICAgICAgICB9CiAgICB9YGAKfScAnvG9qwL3XwhyZW1lbWJlcgIEAJ7xvasC9pABKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAJ7xvasC918NYWJNYW5pZmVzdEJvdAIEAJ7xvasCnZEB7BFAaWYgKHRhZ3MuYWJCb3QpCnsKICAgIGF3YWl0IGRlc3Ryb3kobGlua3MuYWJCb3QpOwp9CgpsZXQgYWIgPSB7fTsKCmFiLnNwYWNlID0gInRlbXBMb2NhbCI7CmFiLmNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VDb2xvcjsKYWIuZm9ybU9wYWNpdHkgPSAiMC4zMyI7CmFiLmxhYmVsID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VMYWJlbDsKYWIubGFiZWxQb3NpdGlvbiA9ICJmcm9udCI7CmFiLmxhYmVsQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5sYWJlbFNpemUgPSAwLjYxOwphYi5vbkNsaWNrID0gIkAgaWYgKHRoYXQubW9kYWxpdHkgPT0gJ21vdXNlJyAmJiB0aGF0LmJ1dHRvbklkID09ICdyaWdodCcpIHtyZXR1cm47fSBsaW5rcy5tYW5hZ2VyLmFiQ2xpY2soKTsiOwphYi5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKYWJbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKYWJbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwphYlt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CmFiLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKLy9hYi5saW5lQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKYWIuYW5pbWF0ZUJvdCA9IGBAIGlmIChjb25maWdCb3QudGFncy5hYk9wdGltaXplZCkKewogICAgcmV0dXJuOwp9Cgpjb25zdCByb3RaID0gdGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKbGV0IHRhcmdldFNjYWxlID0gMC42NTsKCi8vIGlmICh0YWdzLnNjYWxlIDw9IDAuNjUxKQovLyB7Ci8vICAgICB0YXJnZXRTY2FsZSA9IDAuOTU7Ci8vIH0KCmF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwKewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgW3JvdFpdOiAwLAogICAgICAgIC8vc2NhbGU6IHRhZ3Muc2NhbGUKICAgIH0sCiAgICB0b1ZhbHVlOiB7CiAgICAgICAgW3JvdFpdOiA2LjMsCiAgICAgICAgLy9zY2FsZTogdGFyZ2V0U2NhbGUKICAgIH0sCiAgICBlYXNpbmc6IHsKICAgICAgICB0eXBlOiAic2ludXNvaWRhbCIsCiAgICAgICAgbW9kZTogImlub3V0IgogICAgfSwKICAgIGR1cmF0aW9uOiAyCn0pLmNhdGNoKGUgPT4ge30pOwpgOwphYi5vbkNyZWF0ZSA9IGBACgp0aGlzQm90LmFuaW1hdGVCb3QoKTsKCm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5hbmltYXRlQm90KCksIDIwMDApOwpgOwphYi5vbkRlc3Ryb3kgPSBgQApjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKYDsKYWIuZHJhZ2dhYmxlID0gZmFsc2U7CmFiLnNjYWxlID0gMC45OwoKbGV0IGFiTWFuaWZlc3RlZCA9IGF3YWl0IGNyZWF0ZShhYik7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYlNlY29uZGFyeUxhYmVsKQp7CiAgICBsZXQgYWJMYWJlbEJvdCA9IHt9OwoKICAgIGFiTGFiZWxCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb24gKyAiWiJdID0gLTE7CiAgICBhYkxhYmVsQm90LmNyZWF0b3IgPSBhYk1hbmlmZXN0ZWQuaWQ7CiAgICBhYkxhYmVsQm90LnRyYW5zZm9ybWVyID0gYWJNYW5pZmVzdGVkLmlkOwogICAgYWJMYWJlbEJvdC5wb2ludGFibGUgPSBmYWxzZTsKICAgIGFiTGFiZWxCb3QuY29sb3IgPSAiY2xlYXIiOwogICAgYWJMYWJlbEJvdC5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJTZWNvbmRhcnlMYWJlbDsKICAgIGFiTGFiZWxCb3QubGFiZWxQb3NpdGlvbiA9ICJsZWZ0IjsKICAgIGFiTGFiZWxCb3QubGFiZWxTaXplID0gMC43OwogICAgYWJMYWJlbEJvdC5sYWJlbENvbG9yID0gYWJNYW5pZmVzdGVkLnRhZ3MubGFiZWxDb2xvcjsKCiAgICBjcmVhdGUoYWJMYWJlbEJvdCk7Cn0KCm1hc2tzLmFiQm90ID0gIvCflJciICsgYWJNYW5pZmVzdGVkLmlkOwoKbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKCnNob3V0KCJvbkFCTW92ZWQiLCB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgeDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9KTsKCnJldHVybiBhYk1hbmlmZXN0ZWQ7CgoKCmlmIChjb25maWdCb3QudGFncy5hYk9wdGltaXplZCkKewogICAgcmV0dXJuOwp9JwCe8b2rAvdfC29uR3JpZENsaWNrAgQAnvG9qwKGowHtE0BpZiAoIXRhZ3MuYWJBd2FrZSkKewogICAgcmV0dXJuOwp9CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uc3Qgc2hpZnRDaGVjayA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAodGFncy5hYkJvdCAmJiAoc2hpZnRDaGVjayB8fCAodGhhdC5tb2RhbGl0eSA9PSAibW91c2UiICYmIHRoYXQuYnV0dG9uSWQgPT0gInJpZ2h0IiAmJiAhbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCkgfHwgdGhhdC5mb3JjZUFybVBsYWNlbWVudCkpCnsKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbnVsbDsKICAgIH0KICAgIAogICAgbGV0IGFybSA9IHt9OwoKICAgIGFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CiAgICBhcm1bdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwogICAgYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKICAgIGFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKICAgIGFybS5zY2FsZSA9IDAuOTsKICAgIGFybS5zY2FsZVogPSAwLjAxOwogICAgYXJtLmNvbG9yID0gImNsZWFyIjsKICAgIGFybS5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBhcm0ubGluZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsKICAgIGFybS5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKICAgIGFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKICAgIHNob3V0KCJvbkFCRm9vdENsaWNrZWQiLCB7IGRpbWVuc2lvbjogdGFncy5kaW1lbnNpb24gfSk7CiAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKCiAgICBsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgogICAgc2hvdXQoIm9uQUJBcm1QbGFjZWQiLCB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgeDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9KTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7CgogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7CgogICAgcmV0dXJuOwp9CgpsZXQgZm9vdHByaW50ID0ge307Cgpmb290cHJpbnQuc3BhY2UgPSAidGVtcExvY2FsIjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmZvb3RwcmludC5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKZm9vdHByaW50LnNjYWxlWiA9IDAuMDE7CmZvb3RwcmludC5vbkNsaWNrID0gYEAgdGFnc1t0YWdzLmRpbWVuc2lvbl0gPSBmYWxzZTsKc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIsIHsgZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiB9KTsKbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHRhZ3MucG9zaXRpb25JbmZvKTsKYDsKZm9vdHByaW50LnBvc2l0aW9uSW5mbyA9IHRoYXQ7CmZvb3RwcmludC5jb2xvciA9ICJjbGVhciI7CmZvb3RwcmludC5wZXJzb25hbGl0eSA9IHRhZ3MucGVyc29uYWxpdHk7CmZvb3RwcmludC5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmZvb3RwcmludC5kcmFnZ2FibGUgPSBmYWxzZTsKZm9vdHByaW50Lm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwpmb290cHJpbnQub25DcmVhdGUgPSBgQCBzZXRUaW1lb3V0KCgpID0+IGRlc3Ryb3kodGhpc0JvdCksIDgwMCk7CgogICAgYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgIHNjYWxlWDogMC4xLAogICAgICAgICAgICBzY2FsZVk6IDAuMQogICAgICAgIH0sCiAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICBzY2FsZVg6IDEuMSwKICAgICAgICAgICAgc2NhbGVZOiAxLjEKICAgICAgICB9LAogICAgICAgIGR1cmF0aW9uOiAwLjUsCiAgICAgICAgZWFzaW5nOiB7CiAgICAgICAgICAgIHR5cGU6ICJlbGFzdGljIiwKICAgICAgICAgICAgbW9kZTogIm91dCIKICAgICAgICB9CiAgICB9KS5jYXRjaChlID0+IHt9KTsKYDsKCmNyZWF0ZShmb290cHJpbnQpOycAnvG9qwL3XwRtZW51AgQAnvG9qwLutgEo8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicAnvG9qwL3XwdhYkNsaWNrAgQAnvG9qwKVtwH/C0BpZiAoIWxpbmtzLmFiQm90KSB7CiAgICByZXR1cm47Cn0KCmlmIChsaW5rcy5pbnB1dCkgewogICAgbGlua3MuaW5wdXQuYWJDaGF0QmFyQ2xvc2UoKTsKfQoKY29uc3QgcmVzZXQgPSB0aGF0ID8gdGhhdC5yZXNldCA6IGZhbHNlOwpjb25zdCBtZW51ID0gdGhhdCA/IHRoYXQubWVudSA6ICJjb3JlIjsKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKCFyZXNldCAmJiAobGlua3MuYWJCb3QudGFncy5pbnRlcnZhbCB8fCBzdGF0ZSkpIHsKICAgIGNvbnN0IGFiTWVudUJvdHMgPSBnZXRCb3RzKCJhYk1lbnUiLCB0cnVlKTsKCiAgICB3aGlzcGVyKGFiTWVudUJvdHMsICJhYk1lbnVSZWZyZXNoIik7CgogICAgY2xlYXJJbnRlcnZhbChsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IG51bGw7CgogICAgY2xlYXJBbmltYXRpb25zKGxpbmtzLmFiQm90KTsKCiAgICBjb25zdCByb3RaID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKCiAgICBpZiAoc3RhdGUgJiYgbWVudSA9PSAiY29yZSIpIHsKICAgICAgICBsaW5rcy5tZW51LmFiRW52aXJvbm1lbnRNZW51KCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBsaW5rcy5tZW51LmFiT3Blbk1lbnUobWVudSk7CiAgICB9CgogICAgdHJ5IHsKICAgICAgICBhbmltYXRlVGFnKGxpbmtzLmFiQm90LCB7CiAgICAgICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICAgICAgW3JvdFpdOiBsaW5rcy5hYkJvdC50YWdzW3JvdFpdLAogICAgICAgICAgICAgICAgc2NhbGU6IGxpbmtzLmFiQm90LnRhZ3Muc2NhbGUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICAgICAgW3JvdFpdOiAwLAogICAgICAgICAgICAgICAgc2NhbGU6IDAuOQogICAgICAgICAgICB9LAogICAgICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzaW51c29pZGFsIiwKICAgICAgICAgICAgICAgIG1vZGU6ICJpbm91dCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHVyYXRpb246IDAuNQogICAgICAgIH0pCiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gRG8gbm90aGluZy4KICAgIH0KfQplbHNlIHsKICAgIGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwoKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKICAgIH0KCiAgICBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gbGlua3MuYWJCb3QuYW5pbWF0ZUJvdCgpLCAyMDAwKTsKfQoKc2hvdXQoJ29uQUJDbGljaycsIHsgYWJCb3Q6IGxpbmtzLmFiQm90LCBkaW1lbnNpb246IGxpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uLCBtZW51LCBzaGlmdEtleTogISFzdGF0ZSwgcmVzZXQgfSk7JwCe8b2rAvdfDG9uQW55Qm90RHJhZwIEAJ7xvasClcMBkAxAaWYgKHRoYXQuYm90ICE9IGxpbmtzLmFiQm90KSByZXR1cm47CgppZiAobGlua3MuaW5wdXQpIHsKICAgIGxpbmtzLmlucHV0LmFiQ2hhdEJhckNsb3NlKCk7Cn0KCmlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gbGlua3MuYWJCb3QuaWQpCnsKICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgogICAgcmV0dXJuOwp9CgppZiAobGlua3MuYWJCb3QudGFncy5hcm0pCnsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQoKaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQp7CiAgICB0aGlzQm90LmFiQ2xpY2soKTsKfQoKbGV0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKbGV0IGFybSA9IHt9OwoKYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbl0gPSB0cnVlOwphcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdID0gbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl07CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl0gPSBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXTsKYXJtLmNyZWF0b3IgPSBsaW5rcy5hYkJvdC5pZDsKYXJtLmRpbWVuc2lvbiA9IGxpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphcm0ubGluZUNvbG9yID0gbGlua3MuYWJCb3QudGFncy5zdHJva2VDb2xvcjsKYXJtLmxpbmVUbyA9IHRoYXQuYm90LmlkOwphcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIsIHsgZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiB9KTsKbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRhZ3MuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CmFybS5vbkRyb3AgPSBgQCBzaG91dCgib25BQkFybVBsYWNlZCIsIHtkaW1lbnNpb246IHRhZ3MuZGltZW5zaW9uLCB4OiB0aGF0LnRvLngsIHk6IHRoYXQudG8ueX0pO2AKCmlmIChzdGF0ZSkKewogICAgYXJtLm11bHRpU2VsZWN0ID0gdHJ1ZTsKICAgIGFybS5mb3JtID0gInNwaGVyZSI7CiAgICBhcm0uY29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmRyYWdnYWJsZSA9IHRydWU7Cn0KCmxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCmxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsKCm9zLnJlcGxhY2VEcmFnQm90KG5ld0FybSk7JwCe8b2rAvdfEW9uQW55Qm90RHJvcEVudGVyAgQAnvG9qwKizwHYCUBpZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90Py5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QudGFncy5saW5lVG8pKQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUby5wdXNoKHRoYXQudG8uYm90LmlkKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBbdGhhdC50by5ib3QuaWRdOwogICAgfQoKICAgIGxldCBuZXdMaW5rOwoKICAgIGlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQogICAgewogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHRoYXQudG8uYm90KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsZXQgcHJldmlvdXNMaW5rQm90cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHM7CgogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmV2aW91c0xpbmtCb3RzKSkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMgPSBbcHJldmlvdXNMaW5rQm90c10KICAgICAgICB9CgogICAgICAgIGNvbnN0IGFscmVhZHlBZGRlZCA9IHByZXZpb3VzTGlua0JvdHMuc29tZShiID0+IGIuaWQgPT09IHRoYXQudG8uYm90LmlkKTsKICAgICAgICBpZiAoIWFscmVhZHlBZGRlZCkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMucHVzaCh0aGF0LnRvLmJvdCk7CiAgICAgICAgfQoKICAgICAgICBuZXdMaW5rID0gZ2V0TGluayhwcmV2aW91c0xpbmtCb3RzKTsKICAgIH0KCiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHMgPSBuZXdMaW5rOwp9CmVsc2UKewogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLnN0cm9rZUNvbG9yID0gImNsZWFyIjsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5saW5lVG8gPSBmYWxzZTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gdGhhdC50by5ib3QuaWQ7Cn0nAJ7xvasC918Qb25BbnlCb3REcm9wRXhpdAIEAJ7xvasC+9gBnAJAaWYgKCFsaW5rcy5hYkJvdCkgcmV0dXJuOwppZiAobGlua3MuYWJCb3QubGlua3MuYXJtICE9IHRoYXQuZHJhZ0JvdCkgcmV0dXJuOwoKaWYgKCFsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5tdWx0aVNlbGVjdCkKewogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLnN0cm9rZUNvbG9yID0gbnVsbDsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5saW5lVG8gPSBudWxsOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5pZDsKfScAnvG9qwL3XwxvbkFueUJvdERyb3ACBACe8b2rApjbAe4LQG1hc2tzLm11bHRpRHJhZyA9IG51bGw7CgppZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdCkgcmV0dXJuOwppZiAoIWxpbmtzLmFiQm90LnRhZ3MuYXJtKSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QgJiYgbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQp7CiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMgPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHM7CgogICAgLy9jaGVjayBpZiBvbmx5IG9uZSBib3QgaXMgc2VsZWN0ZWQgaW4gbXVsdGlzZWxlY3QgbW9kZQogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QubGlua3MuYXJtLmxpbmtzLnNlbGVjdGVkQm90cykpIHsKICAgICAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJtdWx0aXBsZUJvdCJ9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHMuaWQgPT0gbGlua3MuYWJCb3QuaWQpCiAgICAgICAgewogICAgICAgICAgICBsaW5rcy5tZW51LmFiRW52aXJvbm1lbnRNZW51KCk7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IGxpbmtzLmFiQm90LnRhZ3MubGluZVRvWzBdOwogICAgICAgICAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgbGlua3MuYWJCb3QubGlua3MuYXJtLmxpbmtzLnNlbGVjdGVkQm90cy5pZDsKCiAgICAgICAgICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsKICAgICAgICB9CiAgICB9IAogICAgCiAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICBzaG91dCgib25BQlNlbGVjdGVkQm90IiwgbGlua3MucmVtZW1iZXIubWFza3MuYWJNdWx0aXBsZUJvdEZvY3VzKTsKfQplbHNlIGlmICh0aGF0LnRvLmJvdCkKewogICAgaWYgKHRoYXQudG8uYm90ID09IGxpbmtzLmFiQm90KQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC50by5ib3QuaWQ7CgogICAgICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsKICAgIH0KICAgIAogICAgc2hvdXQoIm9uQUJTZWxlY3RlZEJvdCIsIHRoYXQudG8uYm90KTsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQplbHNlCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC50by5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwp9JwCe8b2rAvdfCGFiSWdub3JlAgQAnvG9qwKD5wEEdHJ1ZScAnvG9qwL3XwNhc2sCBACe8b2rAojnASjwn5SXZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3JwCe8b2rAvdfCWFza0J1dHRvbgIEAJ7xvasCr+cByAVAaWYgKCF0YWdzLmFiQXdha2UpCnsKICAgIHJldHVybjsKfQoKbGV0IGFiTWVudUJ1dHRvbiA9IHt9OwoKYWJNZW51QnV0dG9uLmFiTWVudSA9IHRydWU7CmFiTWVudUJ1dHRvbi5yZW1lbWJlciA9IGxpbmtzLm1lbnUudGFncy5yZW1lbWJlcjsKYWJNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSBsaW5rcy5tZW51LnRhZ3MubWFuaWZlc3RhdGlvbjsKYWJNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CmFiTWVudUJ1dHRvbi5iYXNlU2tpbGwgPSAi8J+UlyIgKyBsaW5rcy5hc2suaWQ7CmFiTWVudUJ1dHRvbi5sYWJlbCA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVMYWJlbDsKYWJNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudUljb247CmFiTWVudUJ1dHRvbi5vbkNyZWF0ZSA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVPbkdlbmVyYXRlOwphYk1lbnVCdXR0b24uYWJNZW51U29ydE9yZGVyID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudVNvcnRPcmRlcjsKYWJNZW51QnV0dG9uLmNvbG9yID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudUNvbG9yID8gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudUNvbG9yIDogbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCmxpbmtzLm1lbnUuYWJDcmVhdGVNZW51QnV0dG9uKGFiTWVudUJ1dHRvbik7JwCe8b2rAvdfCWFiQm90Q2hhdAIEAJ7xvasC9uwB1QtAaWYgKCFsaW5rcy5hYkJvdCAmJiAhdGhhdC5ib3QpCnsKICAgIHJldHVybjsKfQoKY29uc3QgYm90QmFzZSA9IHRoYXQuYm90ID8gdGhhdC5ib3Q6IGxpbmtzLmFiQm90Owpjb25zdCBkaW1lbnNpb24gPSAhdGhhdC5ib3QgPyBib3RCYXNlLnRhZ3MuZGltZW5zaW9uIDogdGhhdC5kaW1lbnNpb24gPyB0aGF0LmRpbWVuc2lvbiA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmNvbnN0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2U7CmNvbnN0IG1lc3NhZ2VUaW1lID0gdGhhdC50aW1lID8gdGhhdC50aW1lICogMTAwMCA6IDE2MDA7IApjb25zdCBtZXNzYWdlQm90ID0ge307CgptZXNzYWdlQm90LnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lc3NhZ2VCb3QudHJhbnNmb3JtZXIgPSBib3RCYXNlLmlkOwptZXNzYWdlQm90LmZvcm0gPSAic3ByaXRlIjsKbWVzc2FnZUJvdC5jb2xvciA9ICIjMDAwMDAwIjsKbWVzc2FnZUJvdC5sYWJlbCA9IG1lc3NhZ2U7Cm1lc3NhZ2VCb3QubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKbWVzc2FnZUJvdC5sYWJlbFNpemUgPSAxOwptZXNzYWdlQm90LnNjYWxlWCA9IG1lc3NhZ2UubGVuZ3RoIC8gNSA+IDEwID8gMTAgOiBtZXNzYWdlLmxlbmd0aCA8IDEwID8gMiA6IG1lc3NhZ2UubGVuZ3RoIC8gNTsKbWVzc2FnZUJvdC5zY2FsZVkgPSAobWVzc2FnZS5sZW5ndGggLyA1MCkgPiAxID8gTWF0aC5yb3VuZChtZXNzYWdlLmxlbmd0aCAvIDUwKSA6IDEuMzM7Cm1lc3NhZ2VCb3Quc2NhbGVaID0gMC4xOwptZXNzYWdlQm90Lm9yaWVudGF0aW9uTW9kZSA9ICJiaWxsYm9hcmQiOwptZXNzYWdlQm90W2RpbWVuc2lvbl0gPSB0cnVlOwptZXNzYWdlQm90LmRpbWVuc2lvbiA9IGRpbWVuc2lvbjsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWCJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWSJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWiJdID0gYm90QmFzZS50YWdzLnNjYWxlID8gYm90QmFzZS50YWdzLnNjYWxlIC8gMiArIDIgOiAyOwptZXNzYWdlQm90Lm9uRmFkZSA9IGBAIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDEsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAxLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAwLAogICAgICAgIGxhYmVsT3BhY2l0eTogMCwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXSArIDUKICAgIH0sCiAgICBkdXJhdGlvbjogJHt0aGF0LmR1cmF0aW9uID8/IDN9Cn0pLmNhdGNoKHt9KTsKCmRlc3Ryb3kodGhpc0JvdCk7YDsKCmNvbnN0IGFjdGl2ZU1lc3NhZ2UgPSBjcmVhdGUobWVzc2FnZUJvdCk7CgpzZXRUaW1lb3V0KCgpPT4gYWN0aXZlTWVzc2FnZS5vbkZhZGUoKSwgbWVzc2FnZVRpbWUpOycAnvG9qwL3XxBvbkFueUJvdERyYWdnaW5nAgQAnvG9qwLM+AGJEEBpZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzICYmIHRoYXQuYm90LmlkID09IGxpbmtzLmFiQm90LmlkKQp7CiAgICBjb25zdCBhY3RpdmVEaW1lbnNpb24gPSBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkFjdGl2ZURpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwogICAgbGV0IGRyYWdDb29yZGluYXRvckJvdCA9IGxpbmtzLmRyYWdDb29yZDsKICAgIAogICAgaWYgKCFkcmFnQ29vcmRpbmF0b3JCb3QpCiAgICB7CiAgICAgICAgY29uc3QgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kID0ge307CgogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QuZGltZW5zaW9uID0gYWN0aXZlRGltZW5zaW9uOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb25dID0gdHJ1ZTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIlgiXSA9IDA7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJZIl0gPSAwOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWiJdID0gLTE7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLnBvaW50YWJsZSA9IGZhbHNlOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5jb2xvciA9ICJjbGVhciI7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLm9uQW55Qm90UG9pbnRlclVwID0gYEAgbGlua3MubWFuYWdlci5tYXNrcy5kcmFnQ29vcmQgPSBudWxsOyBzaG91dCgnYWJTdG9wRHJhZycsIHt4OiB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVgsIHk6IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WX0pOyBkZXN0cm95KHRoaXNCb3QpO2A7CgogICAgICAgIGRyYWdDb29yZGluYXRvckJvdCA9IGNyZWF0ZShkcmFnQ29vcmRpbmF0b3JCb3RNb2QpOwoKICAgICAgICBtYXNrcy5kcmFnQ29vcmQgPSBnZXRMaW5rKGRyYWdDb29yZGluYXRvckJvdCk7CgogICAgICAgIGNvbnN0IGRyYWdCb3RzID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzOwoKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy50cmFuc2Zvcm1lciA9IGRyYWdDb29yZGluYXRvckJvdC5pZDsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5hYlN0b3BEcmFnID0gYEAgbWFza3MudHJhbnNmb3JtZXIgPSBudWxsOyBtYXNrcy5hYlN0b3BEcmFnID0gbnVsbDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YICsgdGhhdC54OyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgKyB0aGF0LnlgOwoKICAgICAgICBzZXRUYWdNYXNrKGRyYWdCb3RzLCAidHJhbnNmb3JtZXIiLCBkcmFnQ29vcmRpbmF0b3JCb3QuaWQsICJ0ZW1wTG9jYWwiKTsKICAgICAgICBzZXRUYWdNYXNrKGRyYWdCb3RzLCAiYWJTdG9wRHJhZyIsIGBAIG1hc2tzLnRyYW5zZm9ybWVyID0gbnVsbDsgbWFza3MuYWJTdG9wRHJhZyA9IG51bGw7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCArIHRoYXQueDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZICsgdGhhdC55YCwgInRlbXBMb2NhbCIpOwogICAgfQoKICAgIGNvbnN0IHhDaGFuZ2UgPSB0aGF0LnRvLnggLSB0aGF0LmZyb20ueDsKICAgIGNvbnN0IHlDaGFuZ2UgPSB0aGF0LnRvLnkgLSB0aGF0LmZyb20ueTsKCiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWCJdID0geENoYW5nZTsKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJZIl0gPSB5Q2hhbmdlOwogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIloiXSA9IC0xOwp9JwCe8b2rAvdfCWFiVmVyc2lvbgIEAJ7xvasC1ogCBDEwLjYnAJ7xvasC918JYW5pbWF0aW9uAgQAnvG9qwLbiAIo8J+Ul2IyNmUxMDg5LTE3MmQtNDVhOS04ZDIyLTA1YzNmNThjMmJmNycAnvG9qwL3Xw9vbkFueUJvdENsaWNrZWQCBACe8b2rAoKJAogRQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCAgJiYgIXRoYXQuYm90LnRhZ3MuYWJSaWdodENsaWNrSWdub3JlICYmIHRoYXQubW9kYWxpdHkgPT0gIm1vdXNlIiAmJiB0aGF0LmJ1dHRvbklkID09ICJyaWdodCIpIHsNCg0KICAgIGlmICghdGFncy5hYkF3YWtlKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvL2FiIHNlbGVjdGVkDQogICAgaWYgKHRoYXQuYm90ID09IGxpbmtzLmFiQm90KQ0KICAgIHsNCiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy9HZXQgcmlkIG9mIGFueSBvdGhlciBvbmVzDQogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKSB7DQogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsNCiAgICB9DQoNCiAgICAvL2FuaW1hdGlvbnMNCiAgICBpZiAoIWxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwpIHsNCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKCk7DQogICAgfQ0KDQogICAgLy9DcmVhdGUgYXJtDQogICAgbGV0IGFybSA9IHt9Ow0KDQogICAgYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uXSA9IHRydWU7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQuYm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXTsNCiAgICBhcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOw0KICAgIGFybS5kaW1lbnNpb24gPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsNCiAgICBhcm0uc2NhbGUgPSAwLjk7DQogICAgYXJtLnNjYWxlWiA9IDAuMDE7DQogICAgYXJtLmNvbG9yID0gImNsZWFyIjsNCiAgICBhcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lQ29sb3IgPSBsaW5rcy5hYkJvdC50YWdzLnN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsNCiAgICBhcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7DQogICAgYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOw0KICAgICAgICAgICAgICAgICAgICBzaG91dCgib25BQkZvb3RDbGlja2VkIiwgeyBkaW1lbnNpb246IHRhZ3MuZGltZW5zaW9uIH0pOw0KICAgICAgICAgICAgICAgICAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsNCg0KICAgIGxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsNCg0KICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsNCg0KICAgIHRoaXNCb3Qub25BbnlCb3REcm9wRW50ZXIoew0KICAgICAgICBkcmFnQm90OiBsaW5rcy5hYkJvdC5saW5rcy5hcm0sDQogICAgICAgIHRvOiB7DQogICAgICAgICAgICBib3Q6IHRoYXQuYm90LA0KICAgICAgICAgICAgeDogdGhhdC5ib3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24NCiAgICAgICAgfSwNCiAgICAgICAgZnJvbTogew0KICAgICAgICAgICAgeDogbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24NCiAgICAgICAgfQ0KICAgIH0pDQoNCiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC5ib3QuaWQ7DQoNCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJib3QifSk7DQoNCiAgICByZXR1cm47DQp9JwCe8b2rAvdfBWlucHV0AgQAnvG9qwKFmgIo8J+Ul2Y4NjAyODc4LWMyZWYtNDhiZC04NWEwLThkNjM1MWViNDEyMCcAnvG9qwL3XwtwZXJzb25hbGl0eQIEAJ7xvasCrJoCKPCflJdiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGInAJ7xvasC918NYWJQZXJzb25hbGl0eQIEAJ7xvasC05oCBHRydWUnAJ7xvasC918KYWJTZXRBd2FrZQIEAJ7xvasC2JoCnxJAbGV0IGF3YWtlID0gdGhhdD8uYXdha2U7CmxldCBpbml0aWFsID0gdGhhdD8uaW5pdGlhbCA/PyBmYWxzZTsKCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHRoYXQ6YCwgdGhhdCk7Cn0KCmFzc2VydCh0eXBlb2YgYXdha2UgPT09ICdib29sZWFuJywgYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBhd2FrZSBpcyBhIHJlcXVpcmVkIGJvb2xlYW4gcGFyYW1ldGVyLmApOwoKaWYgKGNvbmZpZ0JvdC50YWdzLmFiU3RheUF3YWtlKSB7CiAgICAvLyBJZiBhYlN0YXlBd2FrZSBpcyBlbmFibGVkLCBvdmVycmlkZSB0aGUgaW5jb21pbmcgYXdha2UgcGFyYW1ldGVyIGFuZCBuZXZlciBsZXQgYWIgYmUgcHV0IHRvIHNsZWVwLgogICAgYXdha2UgPSB0cnVlOwp9CgppZiAodGFncy5hYkF3YWtlICE9PSBhd2FrZSkgewogICAgaWYgKGluaXRpYWwpIHsKICAgICAgICAvLyBMb2FkIHVwIHNvbWUgY29yZSBhYiBza2lsbHMuCiAgICAgICAgY29uc3Qgc2tpbGxBcnJheSA9IFsiYWJQZXJzb25hbGl0eSIsICJhYkludGVyZmFjZSIsICJhYkFjdGlvbiIsICJhYlRlc3RzIl07CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2tpbGxBcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhd2FpdCBsaW5rcy5sZWFybi5hYkFkYXB0KHNraWxsQXJyYXlbaV0pOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgb3Muc2xlZXAoMzAwKTsKCiAgICAgICAgaWYgKGNvbmZpZ0JvdC50YWdzLnBhdHRlcm4pIHsKICAgICAgICAgICAgbGlua3MucmVtZW1iZXIudGFncy5iYXNlQUIgPSBjb25maWdCb3QudGFncy5wYXR0ZXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYmFzZUFCID0gdXVpZCgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBQbGF5IGluaXRpYWwgYW5pbWF0aW9uIGlmIG9uZSBpcyBkZWZpbmVkIG9uIGFiQ29uZmlnLgogICAgICAgIGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbEFuaW1hdGlvbikgewogICAgICAgICAgICBhd2FpdCBsaW5rcy5hbmltYXRpb25bbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxBbmltYXRpb25dKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFNob3cgaW5pdGlhbCBtZXNzYWdlIGlmIG9uZSBpcyBkZWZpbmVkIG9uIGFiQ29uZmlnLgogICAgICAgIGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpIHsKICAgICAgICAgICAgc2hvdXQoInNob3dDb25zb2xlIik7CgogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsTWVzc2FnZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGFiLmxvZyhsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsTWVzc2FnZVtpXSk7CgogICAgICAgICAgICAgICAgICAgIGF3YWl0IG9zLnNsZWVwKDIwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgYWIubG9nKGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBVcGRhdGUgYWJBd2FrZSBzaGFyZWQgdGFnIG1hc2suCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICdhYkF3YWtlJywgYXdha2UsICdzaGFyZWQnKTsKICAgIAogICAgaWYgKGF3YWtlKSB7CiAgICAgICAgbGV0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CgogICAgICAgIGlmICghZGltZW5zaW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7IGRpbWVuc2lvbiwgcG9zaXRpb246IHsgeDogMCwgeTogMCB9IH0pOwoKICAgICAgICBzaG91dCgib25BQkF3YWtlIiwgeyBkaW1lbnNpb24sIHBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfSB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdCk7CgogICAgICAgIHNob3V0KCJhYk1lbnVSZWZyZXNoIik7CiAgICAgICAgc2hvdXQoIm9uQUJTbGVlcCIpOwogICAgfQp9JwCe8b2rAvdfBWRlYnVnAgQAnvG9qwL4rAIFZmFsc2UA"}]}