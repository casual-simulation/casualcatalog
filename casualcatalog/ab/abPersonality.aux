{"version":2,"updates":[{"id":0,"timestamp":1752181942164,"update":"AW3r/5TRCAAnAQRib3RzJGIyNmUxMDg5LTE3MmQtNDVhOS04ZDIyLTA1YzNmNThjMmJmNwEnAOv/lNEIAAZzeXN0ZW0CBADr/5TRCAEYYWIucGVyc29uYWxpdHkuYW5pbWF0aW9uJwDr/5TRCAAEZm9ybQIEAOv/lNEIGgdub3RoaW5nJwDr/5TRCAAIYWJJZ25vcmUCBADr/5TRCCIEdHJ1ZScA6/+U0QgADW1hbmlmZXN0YXRpb24CBADr/5TRCCco8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcA6/+U0QgACHJlbWVtYmVyAgQA6/+U0QhOKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOv/lNEIABhhbmltYXRpb25fYWJHcmlkTWFuaWZlc3QCBADr/5TRCHXqDkBzaG91dCgicmVzZXQiKTsKCmNvbnN0IHBvc2l0aW9uWCA9IHRoYXQ/LnBvc2l0aW9uLnggPz8gMDsKY29uc3QgcG9zaXRpb25ZID0gdGhhdD8ucG9zaXRpb24ueSA/PyAwOwpjb25zdCBkaW1lbnNpb24gPSB0aGF0Py5kaW1lbnNpb24gPz8gImhvbWUiOwpjb25zdCBncmlkU2NhbGUgPSB0aGF0Py5zY2FsZSA/PyA1Owpjb25zdCBtb21lbnRDb3VudCA9IDA7CmNvbnN0IGdyaWRCb3QgPSB7fTsKCmdyaWRCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKZ3JpZEJvdC5jb2xvciA9ICJjbGVhciI7CmdyaWRCb3Quc3Ryb2tlQ29sb3IgPSBhYlBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmdyaWRCb3Quc2NhbGUgPSAwLjAwMTsKZ3JpZEJvdC5zY2FsZVogPSAwLjE7CmdyaWRCb3QucmVzZXQgPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CmdyaWRCb3RbZGltZW5zaW9uXSA9IHRydWU7CmdyaWRCb3QucG9pbnRhYmxlID0gZmFsc2U7CmdyaWRCb3Qua2lsbFRpbWVyID0gIkAgYXdhaXQgb3Muc2xlZXAoNDAwKTsgZGVzdHJveSh0aGlzQm90KTsiOwoKbGV0IHJvdW5kQm90czsKCmZvciAobGV0IGkgPSBncmlkU2NhbGU7IGkgPiAwOyBpLS0pCnsKICAgIGNvbnN0IGJvdENvdW50ID0gaSAqIDg7CgogICAgbGV0IHNpZGVDb3VudCA9IDA7CiAgICBsZXQgcGhhc2VGYWN0b3IgPSAwOwoKICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm90Q291bnQ7IGorKykKICAgIHsKICAgICAgICBpZiAocGhhc2VGYWN0b3IgPT0gMCkKICAgICAgICB7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlgiXSA9ICgoaSArIHBvc2l0aW9uWCkgKiAtMSkgKyBzaWRlQ291bnQ7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9IGkgKyBwb3NpdGlvblk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBoYXNlRmFjdG9yID09IDEpCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSBpICsgcG9zaXRpb25YOwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSAoaSArIHBvc2l0aW9uWSkgLSBzaWRlQ291bnQ7ICAKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAocGhhc2VGYWN0b3IgPT0gMikKICAgICAgICB7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlgiXSA9IChpICsgcG9zaXRpb25YKSAtIHNpZGVDb3VudDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKChpICsgcG9zaXRpb25ZKSAqIC0xKSA7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlgiXSA9ICgoaSArIHBvc2l0aW9uWCkgKiAtMSkgOwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSAoKGkgKyBwb3NpdGlvblkpICogLTEpICsgc2lkZUNvdW50OyAgCiAgICAgICAgfQoKICAgICAgICBjb25zdCBuZXdHcmlkQm90ID0gYXdhaXQgY3JlYXRlKGdyaWRCb3QpOwoKICAgICAgICBhbmltYXRlVGFnKG5ld0dyaWRCb3QsICJzY2FsZSIsIHsKICAgICAgICAgICAgdG9WYWx1ZTogMSwKICAgICAgICAgICAgZWFzaW5nOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAiZWxhc3RpYyIsCiAgICAgICAgICAgICAgICBtb2RlOiAib3V0IgogICAgICAgICAgICB9LAogICAgICAgICAgICBkdXJhdGlvbjogMC4wMQogICAgICAgIH0pOwoKICAgICAgICBuZXdHcmlkQm90LmtpbGxUaW1lcigpOwoKICAgICAgICBzaWRlQ291bnQrKzsKCiAgICAgICAgaWYgKHNpZGVDb3VudCA9PSBib3RDb3VudCAvIDQpCiAgICAgICAgewogICAgICAgICAgICBzaWRlQ291bnQgPSAwOwoKICAgICAgICAgICAgcGhhc2VGYWN0b3IrKzsKICAgICAgICB9CgogICAgICAgIGF3YWl0IG9zLnNsZWVwKDgpOwogICAgfQp9JwDr/5TRCAAJYWJWZXJzaW9uAgQA6/+U0QjgDwQxMC40JwDr/5TRCAAGb25DaGF0AgQA6/+U0QjlD1VALy8gaWYgKHRoYXQubWVzc2FnZSA9PSAiQHRlc3QiKQovLyB7Ci8vICAgICB0aGlzQm90LmFuaW1hdGlvbl9hYkdyaWRNYW5pZmVzdCgpOwovLyB9JwDr/5TRCAALcGVyc29uYWxpdHkCBADr/5TRCLsQKPCflJdiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGInAOv/lNEIAA1hYlBlcnNvbmFsaXR5AgQA6/+U0QjiEAR0cnVlJwEEYm90cyRiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGIBJwDr/5TRCOcQBnN5c3RlbQIEAOv/lNEI6BAVYWIucGVyc29uYWxpdHkuY29uZmlnJwDr/5TRCOcQCGFiSWdub3JlAgQA6/+U0Qj+EAR0cnVlJwDr/5TRCOcQBGZvcm0CBADr/5TRCIMRB25vdGhpbmcnAOv/lNEI5xALYWJCYXNlQ29sb3ICBADr/5TRCIsRByMwMEQ5Q0QnAOv/lNEI5xARYWJCYXNlU3Ryb2tlQ29sb3ICBADr/5TRCJMRByMwMEQ5Q0QnAOv/lNEI5xAQYWJCbHVlcHJpbnRDb2xvcgIEAOv/lNEImxEHIzAwODI3QicA6/+U0QjnEAhyZW1lbWJlcgIEAOv/lNEIoxEo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA6/+U0QjnEBFhYkJ1aWxkZXJJZGVudGl0eQIEAOv/lNEIyhEKY2FzdWFsLmJvdCcA6/+U0QjnEAlhYlZlcnNpb24CBADr/5TRCNURBDEwLjQnAOv/lNEI5xAXY2hhbmdlUGVyc29uYWxpdHlDb25maWcCBADr/5TRCNoRgApAaWYgKCF0aGF0KSB7DQogICAgcmV0dXJuOw0KfQ0KDQppZiAoIWF1dGhCb3QpIHsNCiAgICBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdEluQmFja2dyb3VuZCgpOw0KfQ0KDQppZiAoIWF1dGhCb3QpIHsNCiAgICByZXR1cm47DQp9DQoNCmF3YWl0IG9zLmdyYW50SW5zdEFkbWluUGVybWlzc2lvbihhdXRoQm90LmlkKTsNCg0KbGV0IGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0gYXdhaXQgb3MuZ2V0RGF0YShhdXRoQm90LmlkLCAiYWJQZXJzb25hbGl0eUNvbmZpZyIpOw0KY29uc29sZS5sb2coInRlc3RlciIsIGFiUGVyc29uYWxpdHlDb25maWdEYXRhKQ0KDQppZiAoYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2VzcyA9PSBmYWxzZSkgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0ge307DQp9IGVsc2Ugew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0gYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuZGF0YTsNCn0NCg0KaWYgKHRoYXQubmFtZSkgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJ1aWxkZXJJZGVudGl0eSJdID0gdGhhdC5uYW1lOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQnVpbGRlcklkZW50aXR5IiwgdGhhdC5uYW1lLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQuY29sb3IpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlQ29sb3IiXSA9IHRoYXQuY29sb3I7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQmFzZVN0cm9rZUNvbG9yIl0gPSB0aGF0LmNvbG9yOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiQmFzZUNvbG9yIiwgdGhhdC5jb2xvciwgImxvY2FsIik7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlU3Ryb2tlQ29sb3IiLCB0aGF0LmNvbG9yLCAibG9jYWwiKTsNCn0NCg0KaWYgKHRoYXQubWVudUNvbG9yKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQmFzZU1lbnVDb2xvciJdID0gdGhhdC5tZW51Q29sb3I7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlTWVudUNvbG9yIiwgdGhhdC5tZW51Q29sb3IsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5mb3JtKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiRm9ybSJdID0gdGhhdC5mb3JtOw0KICAgIHNldFRhZ01hc2sodGhpc0JvdCwgImFiRm9ybSIsIHRoYXQuZm9ybSwgImxvY2FsIik7DQp9DQphd2FpdCBvcy5yZWNvcmREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIiwgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEpOycA6/+U0QjnEA9hYkJhc2VNZW51Q29sb3ICBADr/5TRCNsbByMwMEQ5Q0QnAOv/lNEI5xARdXBkYXRlUGVyc29uYWxpdHkCBADr/5TRCOMb4gdAaWYgKCFhdXRoQm90KSB7DQogICAgYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsNCn0NCg0KaWYgKCFhdXRoQm90KSB7DQogICAgcmV0dXJuOw0KfQ0KDQpsZXQgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhd2FpdCBvcy5nZXREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIik7DQoNCmlmICghbGlua3MucmVtZW1iZXIgJiYgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2VzcyA9PSBmYWxzZSkgew0KICAgIHJldHVybjsNCn0NCg0KYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5kYXRhOw0KDQovL2FiQmx1ZVByaW50Q29sb3INCi8vYWJCYXNlTGFiZWxDb2xvcg0KLy9hYkJhc2VBY2NlbnRDb2xvcg0KLy9hYk1lbnVTaGFkb3dDb2xvcj8NCmNvbnN0IGFiVGFncyA9IFsiYWJCYXNlQ29sb3IiLCAiYWJCYXNlTWVudUNvbG9yIiwgImFiQnVpbGRlcklkZW50aXR5IiwgImFiQmFzZVN0cm9rZUNvbG9yIl07DQoNCmZvciAobGV0IGkgPSAwOyBpIDwgYWJUYWdzLmxlbmd0aDsgKytpKSB7DQogICAgaWYgKGFiUGVyc29uYWxpdHlDb25maWdEYXRhW2FiVGFnc1tpXV0pIHsNCiAgICAgICAgaWYgKHRhZ3NbYWJUYWdzW2ldXSAhPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dKSB7DQogICAgICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIGFiVGFnc1tpXSwgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbYWJUYWdzW2ldXSwgImxvY2FsIik7DQogICAgICAgIH0NCiAgICB9IGVsc2UgaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSkgew0KICAgICAgICBpZiAobGlua3MucmVtZW1iZXIudGFnc1thYlRhZ3NbaV1dICE9IHRhZ3NbYWJUYWdzW2ldXSkgew0KICAgICAgICAgICAgc2V0VGFnTWFzayh0aGlzQm90LCBhYlRhZ3NbaV0sIGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSwgImxvY2FsIik7DQogICAgICAgIH0NCiAgICB9DQp9JwDr/5TRCOcQDWFiUGVyc29uYWxpdHkCBADr/5TRCMYjBHRydWUnAOv/lNEI5xANb25Ta2lsbFVwZGF0ZQIEAOv/lNEIyyMdQHRoaXNCb3QudXBkYXRlUGVyc29uYWxpdHkoKTsnAQRib3RzJGRjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZAEnAOv/lNEI6SMGc3lzdGVtAgQA6/+U0QjqIxxhYi5wZXJzb25hbGl0eS5tYW5pZmVzdGF0aW9uJwDr/5TRCOkjBGZvcm0CBADr/5TRCIckB25vdGhpbmcnAOv/lNEI6SMLZGVzY3JpcHRpb24CBADr/5TRCI8kOFRoaXMgc2tpbGwgY29udHJvbHMgdGhlIGFjdHVhbCBib3QgZm9yIHRoZSBhYiBpbnRlcmZhY2UuJwDr/5TRCOkjBWxlYXJuAgQA6/+U0QjIJCjwn5SXNjY1N2I4NjUtZTk4My00NDAxLTlmYzktZjU0MThkMThhN2Y3JwDr/5TRCOkjD29uUG9ydGFsQ2hhbmdlZAIEAOv/lNEI7yS8DUBpZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwgIT0gbnVsbCB8fCBjb25maWdCb3QudGFncy5zeXN0ZW1Qb3J0YWwgIT0gbnVsbCkKewogICAgaWYgKHRhZ3MuYWJCb3QpCiAgICB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdCk7CiAgICB9CgogICAgcmV0dXJuOwp9CgppZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlIHx8IHRoYXQucG9ydGFsID09ICJ0YWdQb3J0YWwiIHx8IHRoYXQucG9ydGFsID09ICJtZW51UG9ydGFsIiB8fCAodGhhdC5wb3J0YWwgPT0gImdyaWRQb3J0YWwiICYmIGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCkpCnsKICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuYWJCb3QpCnsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QpOwp9Cgpjb25zdCBwb3J0YWxBcnJheSA9IFsibWluaUdyaWRQb3J0YWwiLCAiZ3JpZFBvcnRhbCIsICJtYXBQb3J0YWwiLCAibWluaU1hcFBvcnRhbCIsICJsZWZ0V3Jpc3RQb3J0YWwiLCAicmlnaHRXcmlzdFBvcnRhbCJdOwoKbGV0IG1hcFBvcnRhbENoZWNrID0gZmFsc2U7CmxldCBuZXdBQiA9IGZhbHNlOwoKaWYgKHBvcnRhbEFycmF5LmluZGV4T2YodGhhdC5wb3J0YWwpICE9IC0xICYmIHRoYXQuZGltZW5zaW9uICYmICFjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCkKewogICAgaWYgKHRoYXQucG9ydGFsID09ICJtYXBQb3J0YWwiKQogICAgewogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHsgZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiAtODUuNjc2MTg5NDgyMjQzNCwgeTogNDIuOTY1Njc1Njc1Njc1Nn19KTsKCiAgICAgICAgbWFwUG9ydGFsQ2hlY2sgPSB0cnVlOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDowLHk6MH19KTsKICAgIH0KfQplbHNlIGlmIChwb3J0YWxBcnJheS5pbmRleE9mKHRoYXQucG9ydGFsKSA9PSAtMSAmJiAhdGhhdC5kaW1lbnNpb24pCnsKICAgIGNvbnN0IHN1bW1vbkRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CiAgICAKICAgIG1hcFBvcnRhbENoZWNrID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gdHJ1ZSA6IGZhbHNlOwoKICAgIGlmIChtYXBQb3J0YWxDaGVjaykKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7IGRpbWVuc2lvbjogc3VtbW9uRGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IC04NS42NzYxODk0ODIyNDM0LCB5OiA0Mi45NjU2NzU2NzU2NzU2fX0pOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIG5ld0FCID0gYXdhaXQgdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHN1bW1vbkRpbWVuc2lvbiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CiAgICB9Cn0KZWxzZQp7CiAgICByZXR1cm47Cn0KCmlmIChuZXdBQikKewogICAgYXdhaXQgb3Muc2xlZXAoNTAwKQoKICAgIGNvbnN0IHpvb21WYXJpYW5jZSA9IG1hcFBvcnRhbENoZWNrID8gMjAwMCA6IDEwOwoKICAgIGF3YWl0IG9zLmZvY3VzT24obGlua3MuYWJCb3QsIHt6b29tOiB6b29tVmFyaWFuY2UsIHJvdGF0aW9uOiB7eDogNDUsIHk6IDQ1fX0pLmNhdGNoKGUgPT4ge30pOwp9JwDr/5TRCOkjCHJlbWVtYmVyAgQA6/+U0QisMijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDr/5TRCOkjDWFiTWFuaWZlc3RCb3QCBADr/5TRCNMy0RFAaWYgKHRhZ3MuYWJCb3QpCnsKICAgIGF3YWl0IGRlc3Ryb3kobGlua3MuYWJCb3QpOwp9CgpsZXQgYWIgPSB7fTsKCmFiLnNwYWNlID0gInRlbXBMb2NhbCI7CmFiLmNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VDb2xvcjsKYWIuZm9ybU9wYWNpdHkgPSAiMC4zMyI7CmFiLmxhYmVsID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VMYWJlbDsKYWIubGFiZWxQb3NpdGlvbiA9ICJmcm9udCI7CmFiLmxhYmVsQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5sYWJlbFNpemUgPSAwLjYxOwphYi5vbkNsaWNrID0gIkAgaWYgKHRoYXQubW9kYWxpdHkgPT0gJ21vdXNlJyAmJiB0aGF0LmJ1dHRvbklkID09ICdyaWdodCcpIHtyZXR1cm47fSBsaW5rcy5tYW5hZ2VyLmFiQ2xpY2soKTsiOwphYi5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKYWJbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKYWJbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwphYlt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CmFiLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKLy9hYi5saW5lQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKYWIuYW5pbWF0ZUJvdCA9IGBAIGlmIChjb25maWdCb3QudGFncy5hYk9wdGltaXplZCkKewogICAgcmV0dXJuOwp9Cgpjb25zdCByb3RaID0gdGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKbGV0IHRhcmdldFNjYWxlID0gMC42NTsKCi8vIGlmICh0YWdzLnNjYWxlIDw9IDAuNjUxKQovLyB7Ci8vICAgICB0YXJnZXRTY2FsZSA9IDAuOTU7Ci8vIH0KCmF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwKewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgW3JvdFpdOiAwLAogICAgICAgIC8vc2NhbGU6IHRhZ3Muc2NhbGUKICAgIH0sCiAgICB0b1ZhbHVlOiB7CiAgICAgICAgW3JvdFpdOiA2LjMsCiAgICAgICAgLy9zY2FsZTogdGFyZ2V0U2NhbGUKICAgIH0sCiAgICBlYXNpbmc6IHsKICAgICAgICB0eXBlOiAic2ludXNvaWRhbCIsCiAgICAgICAgbW9kZTogImlub3V0IgogICAgfSwKICAgIGR1cmF0aW9uOiAyCn0pLmNhdGNoKGUgPT4ge30pOwpgOwphYi5vbkNyZWF0ZSA9IGBACgp0aGlzQm90LmFuaW1hdGVCb3QoKTsKCm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5hbmltYXRlQm90KCksIDIwMDApOwpgOwphYi5vbkRlc3Ryb3kgPSBgQApjbGVhckludGVydmFsKHRhZ3MuaW50ZXJ2YWwpOwoKc2hvdXQoImFiTWVudVJlZnJlc2giKTsKYDsKYWIuZHJhZ2dhYmxlID0gZmFsc2U7CmFiLnNjYWxlID0gMC45OwoKbGV0IGFiTWFuaWZlc3RlZCA9IGF3YWl0IGNyZWF0ZShhYik7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYlNlY29uZGFyeUxhYmVsKQp7CiAgICBsZXQgYWJMYWJlbEJvdCA9IHt9OwoKICAgIGFiTGFiZWxCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIGFiTGFiZWxCb3RbdGhhdC5kaW1lbnNpb24gKyAiWiJdID0gLTE7CiAgICBhYkxhYmVsQm90LmNyZWF0b3IgPSBhYk1hbmlmZXN0ZWQuaWQ7CiAgICBhYkxhYmVsQm90LnRyYW5zZm9ybWVyID0gYWJNYW5pZmVzdGVkLmlkOwogICAgYWJMYWJlbEJvdC5wb2ludGFibGUgPSBmYWxzZTsKICAgIGFiTGFiZWxCb3QuY29sb3IgPSAiY2xlYXIiOwogICAgYWJMYWJlbEJvdC5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJTZWNvbmRhcnlMYWJlbDsKICAgIGFiTGFiZWxCb3QubGFiZWxQb3NpdGlvbiA9ICJsZWZ0IjsKICAgIGFiTGFiZWxCb3QubGFiZWxTaXplID0gMC43OwogICAgYWJMYWJlbEJvdC5sYWJlbENvbG9yID0gYWJNYW5pZmVzdGVkLnRhZ3MubGFiZWxDb2xvcjsKCiAgICBjcmVhdGUoYWJMYWJlbEJvdCk7Cn0KCm1hc2tzLmFiQm90ID0gIvCflJciICsgYWJNYW5pZmVzdGVkLmlkOwoKbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKCnNob3V0KCJvbkFCTW92ZWQiLCB7eDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9KTsKCnJldHVybiBhYk1hbmlmZXN0ZWQ7CgoKCmlmIChjb25maWdCb3QudGFncy5hYk9wdGltaXplZCkKewogICAgcmV0dXJuOwp9JwDr/5TRCOkjHGFiTWFuaWZlc3RTdGF0ZUFzbGVlcE9uRW50ZXICBADr/5TRCKFEb0BkZXN0cm95KGxpbmtzLmFiQm90KTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IGZhbHNlOwoKc2hvdXQoIm9uQUJTbGVlcCIpOycA6/+U0QjpIwtvbkdyaWRDbGljawIEAOv/lNEIkUWOE0BpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlKQp7CiAgICByZXR1cm47Cn0KCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7Cgpjb25zdCBzaGlmdENoZWNrID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmICh0YWdzLmFiQm90ICYmIChzaGlmdENoZWNrIHx8ICh0aGF0Lm1vZGFsaXR5ID09ICJtb3VzZSIgJiYgdGhhdC5idXR0b25JZCA9PSAicmlnaHQiICYmICFsaW5rcy5yZW1lbWJlci50YWdzLmFiUmlnaHRDbGlja0Rpc2FibGVkKSkpCnsKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbnVsbDsKICAgIH0KICAgIAogICAgbGV0IGFybSA9IHt9OwoKICAgIGFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CiAgICBhcm1bdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54OwogICAgYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKICAgIGFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKICAgIGFybS5zY2FsZSA9IDAuOTsKICAgIGFybS5zY2FsZVogPSAwLjAxOwogICAgYXJtLmNvbG9yID0gImNsZWFyIjsKICAgIGFybS5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBhcm0ubGluZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsKICAgIGFybS5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKICAgIGFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKICAgIHNob3V0KCJvbkFCRm9vdENsaWNrZWQiKTsKICAgIGxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOwoKICAgIGxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCiAgICBzaG91dCgib25BQkFybVBsYWNlZCIsIHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX0pOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsKCiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkdyaWRGb2N1cyA9IHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IHRoYXQucG9zaXRpb24ueCwgeTogdGhhdC5wb3NpdGlvbi55fX07CgogICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAiZ3JpZCJ9KTsKCiAgICByZXR1cm47Cn0KCmxldCBmb290cHJpbnQgPSB7fTsKCmZvb3RwcmludC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpmb290cHJpbnRbdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKZm9vdHByaW50LmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwpmb290cHJpbnRbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5wb3NpdGlvbi54Owpmb290cHJpbnRbdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5wb3NpdGlvbi55Owpmb290cHJpbnQuc2NhbGVaID0gMC4wMTsKZm9vdHByaW50Lm9uQ2xpY2sgPSBgQCB0YWdzW3RhZ3MuZGltZW5zaW9uXSA9IGZhbHNlOwpzaG91dCgib25BQkZvb3RDbGlja2VkIik7CmxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh0YWdzLnBvc2l0aW9uSW5mbyk7CmA7CmZvb3RwcmludC5wb3NpdGlvbkluZm8gPSB0aGF0Owpmb290cHJpbnQuY29sb3IgPSAiY2xlYXIiOwpmb290cHJpbnQucGVyc29uYWxpdHkgPSB0YWdzLnBlcnNvbmFsaXR5Owpmb290cHJpbnQuc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpmb290cHJpbnQuZHJhZ2dhYmxlID0gZmFsc2U7CmZvb3RwcmludC5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKZm9vdHByaW50Lm9uQ3JlYXRlID0gYEAgc2V0VGltZW91dCgoKSA9PiBkZXN0cm95KHRoaXNCb3QpLCA4MDApOwoKICAgIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICBzY2FsZVg6IDAuMSwKICAgICAgICAgICAgc2NhbGVZOiAwLjEKICAgICAgICB9LAogICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgc2NhbGVYOiAxLjEsCiAgICAgICAgICAgIHNjYWxlWTogMS4xCiAgICAgICAgfSwKICAgICAgICBkdXJhdGlvbjogMC41LAogICAgICAgIGVhc2luZzogewogICAgICAgICAgICB0eXBlOiAiZWxhc3RpYyIsCiAgICAgICAgICAgIG1vZGU6ICJvdXQiCiAgICAgICAgfQogICAgfSkuY2F0Y2goZSA9PiB7fSk7CmA7CgpjcmVhdGUoZm9vdHByaW50KTsnAOv/lNEI6SMEbWVudQIEAOv/lNEImlgo8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA6/+U0QjpIwdhYkNsaWNrAgQA6/+U0QjBWJcKQGlmICghbGlua3MuYWJCb3QpCnsKICAgIHJldHVybjsKfQoKaWYgKGxpbmtzLmlucHV0KSB7CiAgICBsaW5rcy5pbnB1dC5hYkNoYXRCYXJDbG9zZSgpOwp9Cgpjb25zdCBtZW51VHlwZSA9IHRoYXQgPyB0aGF0Lm1lbnUgOiAiY29yZSI7CmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmIChsaW5rcy5hYkJvdC50YWdzLmludGVydmFsIHx8IHN0YXRlKQp7CiAgICBjb25zdCBhYk1lbnVCb3RzID0gZ2V0Qm90cygiYWJNZW51IiwgdHJ1ZSk7CgogICAgd2hpc3BlcihhYk1lbnVCb3RzLCAiYWJNZW51UmVmcmVzaCIpOwogICAgCiAgICBjbGVhckludGVydmFsKGxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmludGVydmFsID0gbnVsbDsKCiAgICBjbGVhckFuaW1hdGlvbnMobGlua3MuYWJCb3QpOwoKICAgIGNvbnN0IHJvdFogPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJSb3RhdGlvbloiOwoKICAgIGlmIChzdGF0ZSAmJiBtZW51VHlwZSA9PSAiY29yZSIpCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJPcGVuTWVudShtZW51VHlwZSk7CiAgICB9CgogICAgYXdhaXQgYW5pbWF0ZVRhZyhsaW5rcy5hYkJvdCwKICAgIHsKICAgICAgICBmcm9tVmFsdWU6IHsKICAgICAgICAgICAgW3JvdFpdOiBsaW5rcy5hYkJvdC50YWdzW3JvdFpdLAogICAgICAgICAgICBzY2FsZTogbGlua3MuYWJCb3QudGFncy5zY2FsZQogICAgICAgIH0sCiAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICBbcm90Wl06IDAsCiAgICAgICAgICAgIHNjYWxlOiAwLjkKICAgICAgICB9LAogICAgICAgIGVhc2luZzogewogICAgICAgICAgICB0eXBlOiAic2ludXNvaWRhbCIsCiAgICAgICAgICAgIG1vZGU6ICJpbm91dCIKICAgICAgICB9LAogICAgICAgIGR1cmF0aW9uOiAwLjUKICAgIH0pLmNhdGNoKGUgPT4ge30pOwp9CmVsc2UKewogICAgbGlua3MuYWJCb3QuYW5pbWF0ZUJvdCgpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IG51bGw7CgogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKICAgIH0KCiAgICBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gbGlua3MuYWJCb3QuYW5pbWF0ZUJvdCgpLCAyMDAwKTsKfScA6/+U0QjpIxthYk1hbmlmZXN0U3RhdGVBd2FrZU9uRW50ZXICBADr/5TRCNliiQJAbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSB0cnVlOwoKbGV0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CgppZiAoIWRpbWVuc2lvbikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogZGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IDAsIHk6IDB9fSk7CgpzaG91dCgib25BQkF3YWtlIik7JwDr/5TRCOkjDG9uQW55Qm90RHJhZwIEAOv/lNEI42TWC0BpZiAodGhhdC5ib3QgIT0gbGlua3MuYWJCb3QpIHJldHVybjsKCmlmIChsaW5rcy5pbnB1dCkgewogICAgbGlua3MuaW5wdXQuYWJDaGF0QmFyQ2xvc2UoKTsKfQoKaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgb3MuZW5hYmxlQ3VzdG9tRHJhZ2dpbmcoKTsKCiAgICByZXR1cm47Cn0KCmlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKewogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CgppZiAoIXRoYXQuYm90LnRhZ3MuaW50ZXJ2YWwpCnsKICAgIHRoaXNCb3QuYWJDbGljaygpOwp9CgpsZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uXSA9IHRydWU7CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0gPSBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXTsKYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSA9IGxpbmtzLmFiQm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOwphcm0uZGltZW5zaW9uID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb247CmFybS5zY2FsZSA9IDAuOTsKYXJtLnNjYWxlWiA9IDAuMDE7CmFybS5jb2xvciA9ICJjbGVhciI7CmFybS5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFybS5saW5lQ29sb3IgPSBsaW5rcy5hYkJvdC50YWdzLnN0cm9rZUNvbG9yOwphcm0ubGluZVRvID0gdGhhdC5ib3QuaWQ7CmFybS5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwpzaG91dCgib25BQkZvb3RDbGlja2VkIik7CmxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOwphcm0ub25Ecm9wID0gYEAgc2hvdXQoIm9uQUJBcm1QbGFjZWQiLCB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9KTtgCgppZiAoc3RhdGUpCnsKICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7CiAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwogICAgYXJtLmNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwp9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgpsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycA6/+U0QjpIxFvbkFueUJvdERyb3BFbnRlcgIEAOv/lNEItnDTCEBpZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90Py5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QudGFncy5saW5lVG8pKQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUby5wdXNoKHRoYXQudG8uYm90LmlkKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBbdGhhdC50by5ib3QuaWRdOwogICAgfQoKICAgIGxldCBuZXdMaW5rOwoKICAgIGlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQogICAgewogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHRoYXQudG8uYm90KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsZXQgcHJldmlvdXNMaW5rQm90cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHM7CgogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmV2aW91c0xpbmtCb3RzKSkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMgPSBbcHJldmlvdXNMaW5rQm90c10KICAgICAgICB9CgogICAgICAgIHByZXZpb3VzTGlua0JvdHMucHVzaCh0aGF0LnRvLmJvdCk7CgogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHByZXZpb3VzTGlua0JvdHMpOwogICAgfQoKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90cyA9IG5ld0xpbms7Cn0KZWxzZQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSAiY2xlYXIiOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IGZhbHNlOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKfScA6/+U0QjpIxBvbkFueUJvdERyb3BFeGl0AgQA6/+U0QiKeZwCQGlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5zdHJva2VDb2xvciA9IG51bGw7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3MubGluZVRvID0gbnVsbDsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0uaWQ7Cn0nAOv/lNEI6SMMb25BbnlCb3REcm9wAgQA6/+U0Qine60HQG1hc2tzLm11bHRpRHJhZyA9IG51bGw7CgppZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdCkgcmV0dXJuOwppZiAoIWxpbmtzLmFiQm90LnRhZ3MuYXJtKSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiTXVsdGlwbGVCb3RGb2N1cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90czsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJtdWx0aXBsZUJvdCJ9KTsKICAgIAogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwoKICAgIHNob3V0KCJvbkFCU2VsZWN0ZWRCb3QiLCBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMpOwp9CmVsc2UgaWYgKHRoYXQudG8uYm90KQp7CiAgICBpZiAodGhhdC50by5ib3QgPT0gbGlua3MuYWJCb3QpCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyB0aGF0LnRvLmJvdC5pZDsKCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAiYm90In0pOwogICAgfQogICAgCiAgICBzaG91dCgib25BQlNlbGVjdGVkQm90IiwgdGhhdC50by5ib3QpOwogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CmVsc2UKewogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LnRvLmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnRvLngsIHk6IHRoYXQudG8ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7Cn0nAOv/lNEI6SMIYWJJZ25vcmUCBADr/5TRCNOCAQR0cnVlJwDr/5TRCOkjA2FzawIEAOv/lNEI2IIBKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAOv/lNEI6SMJYXNrQnV0dG9uAgQA6/+U0Qj/ggHcBUBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlKQp7CiAgICByZXR1cm47Cn0KCmxldCBhYk1lbnVCdXR0b24gPSB7fTsKCmFiTWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSBsaW5rcy5tZW51LnRhZ3MucmVtZW1iZXI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gbGlua3MubWVudS50YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24uYmFzZVNraWxsID0gIvCflJciICsgbGlua3MuYXNrLmlkOwphYk1lbnVCdXR0b24ubGFiZWwgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51TGFiZWw7CmFiTWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVJY29uOwphYk1lbnVCdXR0b24ub25DcmVhdGUgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51T25HZW5lcmF0ZTsKYWJNZW51QnV0dG9uLmFiTWVudVNvcnRPcmRlciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVTb3J0T3JkZXI7CmFiTWVudUJ1dHRvbi5jb2xvciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA/IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA6IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihhYk1lbnVCdXR0b24pOycA6/+U0QjpIwlhYkJvdENoYXQCBADr/5TRCNqIAdULQGlmICghbGlua3MuYWJCb3QgJiYgIXRoYXQuYm90KQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IGJvdEJhc2UgPSB0aGF0LmJvdCA/IHRoYXQuYm90OiBsaW5rcy5hYkJvdDsKY29uc3QgZGltZW5zaW9uID0gIXRoYXQuYm90ID8gYm90QmFzZS50YWdzLmRpbWVuc2lvbiA6IHRoYXQuZGltZW5zaW9uID8gdGhhdC5kaW1lbnNpb24gOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlOwpjb25zdCBtZXNzYWdlVGltZSA9IHRoYXQudGltZSA/IHRoYXQudGltZSAqIDEwMDAgOiAxNjAwOyAKY29uc3QgbWVzc2FnZUJvdCA9IHt9OwoKbWVzc2FnZUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZXNzYWdlQm90LnRyYW5zZm9ybWVyID0gYm90QmFzZS5pZDsKbWVzc2FnZUJvdC5mb3JtID0gInNwcml0ZSI7Cm1lc3NhZ2VCb3QuY29sb3IgPSAiIzAwMDAwMCI7Cm1lc3NhZ2VCb3QubGFiZWwgPSBtZXNzYWdlOwptZXNzYWdlQm90LmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lc3NhZ2VCb3QubGFiZWxTaXplID0gMTsKbWVzc2FnZUJvdC5zY2FsZVggPSBtZXNzYWdlLmxlbmd0aCAvIDUgPiAxMCA/IDEwIDogbWVzc2FnZS5sZW5ndGggPCAxMCA/IDIgOiBtZXNzYWdlLmxlbmd0aCAvIDU7Cm1lc3NhZ2VCb3Quc2NhbGVZID0gKG1lc3NhZ2UubGVuZ3RoIC8gNTApID4gMSA/IE1hdGgucm91bmQobWVzc2FnZS5sZW5ndGggLyA1MCkgOiAxLjMzOwptZXNzYWdlQm90LnNjYWxlWiA9IDAuMTsKbWVzc2FnZUJvdC5vcmllbnRhdGlvbk1vZGUgPSAiYmlsbGJvYXJkIjsKbWVzc2FnZUJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKbWVzc2FnZUJvdC5kaW1lbnNpb24gPSBkaW1lbnNpb247Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlgiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlkiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIloiXSA9IGJvdEJhc2UudGFncy5zY2FsZSA/IGJvdEJhc2UudGFncy5zY2FsZSAvIDIgKyAyIDogMjsKbWVzc2FnZUJvdC5vbkZhZGUgPSBgQCBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAxLAogICAgICAgIGxhYmVsT3BhY2l0eTogMSwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMCwKICAgICAgICBsYWJlbE9wYWNpdHk6IDAsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0gKyA1CiAgICB9LAogICAgZHVyYXRpb246ICR7dGhhdC5kdXJhdGlvbiA/PyAzfQp9KS5jYXRjaCh7fSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpjb25zdCBhY3RpdmVNZXNzYWdlID0gY3JlYXRlKG1lc3NhZ2VCb3QpOwoKc2V0VGltZW91dCgoKT0+IGFjdGl2ZU1lc3NhZ2Uub25GYWRlKCksIG1lc3NhZ2VUaW1lKTsnAOv/lNEI6SMQb25BbnlCb3REcmFnZ2luZwIEAOv/lNEIsJQBiRBAaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgIGxldCBkcmFnQ29vcmRpbmF0b3JCb3QgPSBsaW5rcy5kcmFnQ29vcmQ7CiAgICAKICAgIGlmICghZHJhZ0Nvb3JkaW5hdG9yQm90KQogICAgewogICAgICAgIGNvbnN0IGRyYWdDb29yZGluYXRvckJvdE1vZCA9IHt9OwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2Quc3BhY2UgPSAidGVtcExvY2FsIjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLmRpbWVuc2lvbiA9IGFjdGl2ZURpbWVuc2lvbjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uXSA9IHRydWU7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJYIl0gPSAwOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWSJdID0gMDsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIloiXSA9IC0xOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5wb2ludGFibGUgPSBmYWxzZTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QuY29sb3IgPSAiY2xlYXIiOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5vbkFueUJvdFBvaW50ZXJVcCA9IGBAIGxpbmtzLm1hbmFnZXIubWFza3MuZHJhZ0Nvb3JkID0gbnVsbDsgc2hvdXQoJ2FiU3RvcERyYWcnLCB7eDogdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YLCB5OiB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVl9KTsgZGVzdHJveSh0aGlzQm90KTtgOwoKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3QgPSBjcmVhdGUoZHJhZ0Nvb3JkaW5hdG9yQm90TW9kKTsKCiAgICAgICAgbWFza3MuZHJhZ0Nvb3JkID0gZ2V0TGluayhkcmFnQ29vcmRpbmF0b3JCb3QpOwoKICAgICAgICBjb25zdCBkcmFnQm90cyA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1czsKCiAgICAgICAgbGlua3MuYWJCb3QubWFza3MudHJhbnNmb3JtZXIgPSBkcmFnQ29vcmRpbmF0b3JCb3QuaWQ7CiAgICAgICAgbGlua3MuYWJCb3QubWFza3MuYWJTdG9wRHJhZyA9IGBAIG1hc2tzLnRyYW5zZm9ybWVyID0gbnVsbDsgbWFza3MuYWJTdG9wRHJhZyA9IG51bGw7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCArIHRoYXQueDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZICsgdGhhdC55YDsKCiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgInRyYW5zZm9ybWVyIiwgZHJhZ0Nvb3JkaW5hdG9yQm90LmlkLCAidGVtcExvY2FsIik7CiAgICAgICAgc2V0VGFnTWFzayhkcmFnQm90cywgImFiU3RvcERyYWciLCBgQCBtYXNrcy50cmFuc2Zvcm1lciA9IG51bGw7IG1hc2tzLmFiU3RvcERyYWcgPSBudWxsOyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggKyB0aGF0Lng7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSArIHRoYXQueWAsICJ0ZW1wTG9jYWwiKTsKICAgIH0KCiAgICBjb25zdCB4Q2hhbmdlID0gdGhhdC50by54IC0gdGhhdC5mcm9tLng7CiAgICBjb25zdCB5Q2hhbmdlID0gdGhhdC50by55IC0gdGhhdC5mcm9tLnk7CgogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIlgiXSA9IHhDaGFuZ2U7CiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWSJdID0geUNoYW5nZTsKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJaIl0gPSAtMTsKfScA6/+U0QjpIwlhYlZlcnNpb24CBADr/5TRCLqkAQQxMC40JwDr/5TRCOkjEWFiSW5pdGlhbE1hbmlmZXN0AgQA6/+U0Qi/pAGjCUBsZXQgc2tpbGxBcnJheSA9IFsiYWJJbnRlcmZhY2UiLCAiYWJBY3Rpb24iLCAiYWJUZXN0cyJdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBza2lsbEFycmF5Lmxlbmd0aDsgaSsrKSAKewogICAgYXdhaXQgbGlua3MubGVhcm4uYWJBZGFwdChza2lsbEFycmF5W2ldKTsKfQoKYXdhaXQgb3Muc2xlZXAoMzAwKTsKCi8vYW5pbWF0aW9uIGlmIGFwcGxpY2FibGUKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsQW5pbWF0aW9uKQp7CiAgICBhd2FpdCBsaW5rcy5hbmltYXRpb25bbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxBbmltYXRpb25dKCk7Cn0KCi8va2VlcCBhYiBhd2FrZQpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IHRydWU7CgppZiAoY29uZmlnQm90LnRhZ3MucGF0dGVybikgCnsKICAgIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYmFzZUFCID0gY29uZmlnQm90LnRhZ3MucGF0dGVybjsKfQplbHNlIAp7CiAgICBsaW5rcy5yZW1lbWJlci50YWdzLmJhc2VBQiA9IHV1aWQoKTsKfQoKY2hhbmdlU3RhdGUobGlua3MubWFuaWZlc3RhdGlvbiwgIkF3YWtlIiwgImFiTWFuaWZlc3RTdGF0ZSIpOwoKdGhpc0JvdC5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246ICJob21lIiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CgovL21lc3NhZ2UgaWYgYXBwbGljYWJsZQppZiAobGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKQp7CiAgICBzaG91dCgic2hvd0NvbnNvbGUiKTsKCiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpKQogICAgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgYWIubG9nKGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlW2ldKTsKCiAgICAgICAgICAgIGF3YWl0IG9zLnNsZWVwKDIwMDApOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBhYi5sb2cobGlua3MucGVyc29uYWxpdHkudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbE1lc3NhZ2UpOwogICAgfQp9JwDr/5TRCOkjCWFuaW1hdGlvbgIEAOv/lNEI460BKPCflJdiMjZlMTA4OS0xNzJkLTQ1YTktOGQyMi0wNWMzZjU4YzJiZjcnAOv/lNEI6SMPYWJNYW5pZmVzdFN0YXRlAgQA6/+U0QiKrgEGQXNsZWVwJwDr/5TRCOkjD29uQW55Qm90Q2xpY2tlZAIEAOv/lNEIka4B/BBAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiUmlnaHRDbGlja0Rpc2FibGVkICAmJiAhdGhhdC5ib3QudGFncy5hYlJpZ2h0Q2xpY2tJZ25vcmUgJiYgdGhhdC5tb2RhbGl0eSA9PSAibW91c2UiICYmIHRoYXQuYnV0dG9uSWQgPT0gInJpZ2h0Iikgew0KDQogICAgaWYgKHRhZ3MuYWJNYW5pZmVzdFN0YXRlID09ICJBc2xlZXAiKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvL2FiIHNlbGVjdGVkDQogICAgaWYgKHRoYXQuYm90ID09IGxpbmtzLmFiQm90KQ0KICAgIHsNCiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy9HZXQgcmlkIG9mIGFueSBvdGhlciBvbmVzDQogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKSB7DQogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsNCiAgICB9DQoNCiAgICAvL2FuaW1hdGlvbnMNCiAgICBpZiAoIWxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwpIHsNCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKCk7DQogICAgfQ0KDQogICAgLy9DcmVhdGUgYXJtDQogICAgbGV0IGFybSA9IHt9Ow0KDQogICAgYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uXSA9IHRydWU7DQogICAgYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQuYm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWCJdOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXTsNCiAgICBhcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOw0KICAgIGFybS5kaW1lbnNpb24gPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsNCiAgICBhcm0uc2NhbGUgPSAwLjk7DQogICAgYXJtLnNjYWxlWiA9IDAuMDE7DQogICAgYXJtLmNvbG9yID0gImNsZWFyIjsNCiAgICBhcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lQ29sb3IgPSBsaW5rcy5hYkJvdC50YWdzLnN0cm9rZUNvbG9yOw0KICAgIGFybS5saW5lVG8gPSBsaW5rcy5hYkJvdC5pZDsNCiAgICBhcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7DQogICAgYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOw0KICAgICAgICAgICAgICAgICAgICBzaG91dCgib25BQkZvb3RDbGlja2VkIik7DQogICAgICAgICAgICAgICAgICAgIGxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOw0KDQogICAgbGV0IG5ld0FybSA9IGF3YWl0IGNyZWF0ZShhcm0pOw0KDQogICAgbGlua3MuYWJCb3QubWFza3MuYXJtID0gIvCflJciICsgbmV3QXJtLmlkOw0KDQogICAgdGhpc0JvdC5vbkFueUJvdERyb3BFbnRlcih7DQogICAgICAgIGRyYWdCb3Q6IGxpbmtzLmFiQm90LmxpbmtzLmFybSwNCiAgICAgICAgdG86IHsNCiAgICAgICAgICAgIGJvdDogdGhhdC5ib3QsDQogICAgICAgICAgICB4OiB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSwNCiAgICAgICAgICAgIHk6IHRoYXQuYm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdLA0KICAgICAgICAgICAgZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbg0KICAgICAgICB9LA0KICAgICAgICBmcm9tOiB7DQogICAgICAgICAgICB4OiBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXSwNCiAgICAgICAgICAgIHk6IGxpbmtzLmFiQm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdLA0KICAgICAgICAgICAgZGltZW5zaW9uOiBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbg0KICAgICAgICB9DQogICAgfSkNCg0KICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyB0aGF0LmJvdC5pZDsNCg0KICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsNCg0KICAgIHJldHVybjsNCn0nAOv/lNEI6SMFaW5wdXQCBADr/5TRCIi/ASjwn5SXZjg2MDI4NzgtYzJlZi00OGJkLTg1YTAtOGQ2MzUxZWI0MTIwJwDr/5TRCOkjC3BlcnNvbmFsaXR5AgQA6/+U0QivvwEo8J+Ul2I3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYicA6/+U0QjpIw1hYlBlcnNvbmFsaXR5AgQA6/+U0QjWvwEEdHJ1ZQA="}]}