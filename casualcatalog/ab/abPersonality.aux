{"version":2,"updates":[{"id":0,"timestamp":1752593876377,"update":"AX6N0Nq+DwAnAQRib3RzJDE2NTU0YmMxLWU5M2UtNGEwYi04Y2QzLWRmZDc3MjMxOTY3MgEnAI3Q2r4PAAlhYlZlcnNpb24CBACN0Nq+DwEEMTAuNCcAjdDavg8ABnN5c3RlbQIEAI3Q2r4PBhZhYi5wZXJzb25hbGl0eS52ZXJzaW9uJwCN0Nq+DwAZYWJQZXJzb25hbGl0eU1ham9yVmVyc2lvbgIEAI3Q2r4PHQExJwCN0Nq+DwAZYWJQZXJzb25hbGl0eU1pbm9yVmVyc2lvbgIEAI3Q2r4PHwEzJwCN0Nq+DwANb25Ta2lsbFVwZGF0ZQIEAI3Q2r4PIa0BQGNvbnN0IHZlcnNpb25TdHJpbmcgPSB0YWdzLmFiUGVyc29uYWxpdHlNYWpvclZlcnNpb24gKyAiLiIgKyB0YWdzLmFiUGVyc29uYWxpdHlNaW5vclZlcnNpb247Cgpjb25zb2xlLmxvZygiW0FCUGVyc29uYWxpdHldIExvYWRlZCBBQiBQZXJzb25hbGl0eSB2ZXJzaW9uICIgKyB2ZXJzaW9uU3RyaW5nKTsnAI3Q2r4PAA1hYlBlcnNvbmFsaXR5AgQAjdDavg/PAQR0cnVlJwCN0Nq+DwAIYWJJZ25vcmUCBACN0Nq+D9QBBHRydWUnAI3Q2r4PAARmb3JtAgQAjdDavg/ZAQdub3RoaW5nJwEEYm90cyRiMjZlMTA4OS0xNzJkLTQ1YTktOGQyMi0wNWMzZjU4YzJiZjcBJwCN0Nq+D+EBBnN5c3RlbQIEAI3Q2r4P4gEYYWIucGVyc29uYWxpdHkuYW5pbWF0aW9uJwCN0Nq+D+EBBGZvcm0CBACN0Nq+D/sBB25vdGhpbmcnAI3Q2r4P4QEIYWJJZ25vcmUCBACN0Nq+D4MCBHRydWUnAI3Q2r4P4QENbWFuaWZlc3RhdGlvbgIEAI3Q2r4PiAIo8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAjdDavg/hAQhyZW1lbWJlcgIEAI3Q2r4PrwIo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAjdDavg/hARhhbmltYXRpb25fYWJHcmlkTWFuaWZlc3QCBACN0Nq+D9YC6g5Ac2hvdXQoInJlc2V0Iik7Cgpjb25zdCBwb3NpdGlvblggPSB0aGF0Py5wb3NpdGlvbi54ID8/IDA7CmNvbnN0IHBvc2l0aW9uWSA9IHRoYXQ/LnBvc2l0aW9uLnkgPz8gMDsKY29uc3QgZGltZW5zaW9uID0gdGhhdD8uZGltZW5zaW9uID8/ICJob21lIjsKY29uc3QgZ3JpZFNjYWxlID0gdGhhdD8uc2NhbGUgPz8gNTsKY29uc3QgbW9tZW50Q291bnQgPSAwOwpjb25zdCBncmlkQm90ID0ge307CgpncmlkQm90LnNwYWNlID0gInRlbXBMb2NhbCI7CmdyaWRCb3QuY29sb3IgPSAiY2xlYXIiOwpncmlkQm90LnN0cm9rZUNvbG9yID0gYWJQZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpncmlkQm90LnNjYWxlID0gMC4wMDE7CmdyaWRCb3Quc2NhbGVaID0gMC4xOwpncmlkQm90LnJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpncmlkQm90W2RpbWVuc2lvbl0gPSB0cnVlOwpncmlkQm90LnBvaW50YWJsZSA9IGZhbHNlOwpncmlkQm90LmtpbGxUaW1lciA9ICJAIGF3YWl0IG9zLnNsZWVwKDQwMCk7IGRlc3Ryb3kodGhpc0JvdCk7IjsKCmxldCByb3VuZEJvdHM7Cgpmb3IgKGxldCBpID0gZ3JpZFNjYWxlOyBpID4gMDsgaS0tKQp7CiAgICBjb25zdCBib3RDb3VudCA9IGkgKiA4OwoKICAgIGxldCBzaWRlQ291bnQgPSAwOwogICAgbGV0IHBoYXNlRmFjdG9yID0gMDsKCiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvdENvdW50OyBqKyspCiAgICB7CiAgICAgICAgaWYgKHBoYXNlRmFjdG9yID09IDApCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpICsgc2lkZUNvdW50OwogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJZIl0gPSBpICsgcG9zaXRpb25ZOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwaGFzZUZhY3RvciA9PSAxKQogICAgICAgIHsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWCJdID0gaSArIHBvc2l0aW9uWDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKGkgKyBwb3NpdGlvblkpIC0gc2lkZUNvdW50OyAgCiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHBoYXNlRmFjdG9yID09IDIpCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoaSArIHBvc2l0aW9uWCkgLSBzaWRlQ291bnQ7CiAgICAgICAgICAgIGdyaWRCb3RbZGltZW5zaW9uICsgIlkiXSA9ICgoaSArIHBvc2l0aW9uWSkgKiAtMSkgOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBncmlkQm90W2RpbWVuc2lvbiArICJYIl0gPSAoKGkgKyBwb3NpdGlvblgpICogLTEpIDsKICAgICAgICAgICAgZ3JpZEJvdFtkaW1lbnNpb24gKyAiWSJdID0gKChpICsgcG9zaXRpb25ZKSAqIC0xKSArIHNpZGVDb3VudDsgIAogICAgICAgIH0KCiAgICAgICAgY29uc3QgbmV3R3JpZEJvdCA9IGF3YWl0IGNyZWF0ZShncmlkQm90KTsKCiAgICAgICAgYW5pbWF0ZVRhZyhuZXdHcmlkQm90LCAic2NhbGUiLCB7CiAgICAgICAgICAgIHRvVmFsdWU6IDEsCiAgICAgICAgICAgIGVhc2luZzogewogICAgICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICAgICAgbW9kZTogIm91dCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHVyYXRpb246IDAuMDEKICAgICAgICB9KTsKCiAgICAgICAgbmV3R3JpZEJvdC5raWxsVGltZXIoKTsKCiAgICAgICAgc2lkZUNvdW50Kys7CgogICAgICAgIGlmIChzaWRlQ291bnQgPT0gYm90Q291bnQgLyA0KQogICAgICAgIHsKICAgICAgICAgICAgc2lkZUNvdW50ID0gMDsKCiAgICAgICAgICAgIHBoYXNlRmFjdG9yKys7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCBvcy5zbGVlcCg4KTsKICAgIH0KfScAjdDavg/hAQlhYlZlcnNpb24CBACN0Nq+D8ERBDEwLjQnAI3Q2r4P4QEGb25DaGF0AgQAjdDavg/GEVVALy8gaWYgKHRoYXQubWVzc2FnZSA9PSAiQHRlc3QiKQovLyB7Ci8vICAgICB0aGlzQm90LmFuaW1hdGlvbl9hYkdyaWRNYW5pZmVzdCgpOwovLyB9JwCN0Nq+D+EBC3BlcnNvbmFsaXR5AgQAjdDavg+cEijwn5SXYjc2ZGZiYzQtODU0Yi00ZjZkLWE5MWYtYTk0ODY5NDc3NGRiJwCN0Nq+D+EBDWFiUGVyc29uYWxpdHkCBACN0Nq+D8MSBHRydWUnAQRib3RzJGI3NmRmYmM0LTg1NGItNGY2ZC1hOTFmLWE5NDg2OTQ3NzRkYgEnAI3Q2r4PyBIGc3lzdGVtAgQAjdDavg/JEhVhYi5wZXJzb25hbGl0eS5jb25maWcnAI3Q2r4PyBIIYWJJZ25vcmUCBACN0Nq+D98SBHRydWUnAI3Q2r4PyBIEZm9ybQIEAI3Q2r4P5BIHbm90aGluZycAjdDavg/IEgthYkJhc2VDb2xvcgIEAI3Q2r4P7BIHIzAwRDlDRCcAjdDavg/IEhFhYkJhc2VTdHJva2VDb2xvcgIEAI3Q2r4P9BIHIzAwRDlDRCcAjdDavg/IEhBhYkJsdWVwcmludENvbG9yAgQAjdDavg/8EgcjMDA4MjdCJwCN0Nq+D8gSCHJlbWVtYmVyAgQAjdDavg+EEyjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwCN0Nq+D8gSEWFiQnVpbGRlcklkZW50aXR5AgQAjdDavg+rEwpjYXN1YWwuYm90JwCN0Nq+D8gSCWFiVmVyc2lvbgIEAI3Q2r4PthMEMTAuNCcAjdDavg/IEhdjaGFuZ2VQZXJzb25hbGl0eUNvbmZpZwIEAI3Q2r4PuxPQCUBpZiAoIXRoYXQpIHsNCiAgICByZXR1cm47DQp9DQoNCmlmICghYXV0aEJvdCkgew0KICAgIGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7DQp9DQoNCmlmICghYXV0aEJvdCkgew0KICAgIHJldHVybjsNCn0NCg0KYXdhaXQgb3MuZ3JhbnRJbnN0QWRtaW5QZXJtaXNzaW9uKGF1dGhCb3QuaWQpOw0KDQpsZXQgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhd2FpdCBvcy5nZXREYXRhKGF1dGhCb3QuaWQsICJhYlBlcnNvbmFsaXR5Q29uZmlnIik7DQoNCmlmIChhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5zdWNjZXNzID09IGZhbHNlKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSB7fTsNCn0gZWxzZSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEgPSBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5kYXRhOw0KfQ0KDQppZiAodGhhdC5uYW1lKSB7DQogICAgYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbImFiQnVpbGRlcklkZW50aXR5Il0gPSB0aGF0Lm5hbWU7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCdWlsZGVySWRlbnRpdHkiLCB0aGF0Lm5hbWUsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5jb2xvcikgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhWyJhYkJhc2VDb2xvciJdID0gdGhhdC5jb2xvcjsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlU3Ryb2tlQ29sb3IiXSA9IHRoYXQuY29sb3I7DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJCYXNlQ29sb3IiLCB0aGF0LmNvbG9yLCAibG9jYWwiKTsNCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYkJhc2VTdHJva2VDb2xvciIsIHRoYXQuY29sb3IsICJsb2NhbCIpOw0KfQ0KDQppZiAodGhhdC5tZW51Q29sb3IpIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJCYXNlTWVudUNvbG9yIl0gPSB0aGF0Lm1lbnVDb2xvcjsNCiAgICBzZXRUYWdNYXNrKHRoaXNCb3QsICJhYkJhc2VNZW51Q29sb3IiLCB0aGF0Lm1lbnVDb2xvciwgImxvY2FsIik7DQp9DQoNCmlmICh0aGF0LmZvcm0pIHsNCiAgICBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVsiYWJGb3JtIl0gPSB0aGF0LmZvcm07DQogICAgc2V0VGFnTWFzayh0aGlzQm90LCAiYWJGb3JtIiwgdGhhdC5mb3JtLCAibG9jYWwiKTsNCn0NCmF3YWl0IG9zLnJlY29yZERhdGEoYXV0aEJvdC5pZCwgImFiUGVyc29uYWxpdHlDb25maWciLCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSk7JwCN0Nq+D8gSD2FiQmFzZU1lbnVDb2xvcgIEAI3Q2r4PjB0HIzAwRDlDRCcAjdDavg/IEhF1cGRhdGVQZXJzb25hbGl0eQIEAI3Q2r4PlB2+CEBpZiAoIWF1dGhCb3QpIHsNCiAgICBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdEluQmFja2dyb3VuZCgpOw0KfQ0KDQppZiAoIWF1dGhCb3QpIHsNCiAgICByZXR1cm47DQp9DQoNCmxldCBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSA9IGF3YWl0IG9zLmdldERhdGEoYXV0aEJvdC5pZCwgImFiUGVyc29uYWxpdHlDb25maWciKTsNCg0KaWYgKCFsaW5rcy5yZW1lbWJlciAmJiBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YS5zdWNjZXNzID09IGZhbHNlKSB7DQogICAgcmV0dXJuOw0KfQ0KDQppZiAoYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuc3VjY2Vzcykgew0KICAgIGFiUGVyc29uYWxpdHlDb25maWdEYXRhID0gYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGEuZGF0YTsNCn0NCg0KLy9hYkJsdWVQcmludENvbG9yDQovL2FiQmFzZUxhYmVsQ29sb3INCi8vYWJCYXNlQWNjZW50Q29sb3INCi8vYWJNZW51U2hhZG93Q29sb3I/DQpjb25zdCBhYlRhZ3MgPSBbImFiQmFzZUNvbG9yIiwgImFiQmFzZU1lbnVDb2xvciIsICJhYkJ1aWxkZXJJZGVudGl0eSIsICJhYkJhc2VTdHJva2VDb2xvciJdOw0KDQpmb3IgKGxldCBpID0gMDsgaSA8IGFiVGFncy5sZW5ndGg7ICsraSkgew0KICAgIGlmIChhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YSAmJiBhYlBlcnNvbmFsaXR5Q29uZmlnRGF0YVthYlRhZ3NbaV1dKSB7DQogICAgICAgIGlmICh0YWdzW2FiVGFnc1tpXV0gIT0gYWJQZXJzb25hbGl0eUNvbmZpZ0RhdGFbYWJUYWdzW2ldXSkgew0KICAgICAgICAgICAgc2V0VGFnTWFzayh0aGlzQm90LCBhYlRhZ3NbaV0sIGFiUGVyc29uYWxpdHlDb25maWdEYXRhW2FiVGFnc1tpXV0sICJsb2NhbCIpOw0KICAgICAgICB9DQogICAgfSBlbHNlIGlmIChsaW5rcy5yZW1lbWJlciAmJiBsaW5rcy5yZW1lbWJlci50YWdzW2FiVGFnc1tpXV0pIHsNCiAgICAgICAgaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3NbYWJUYWdzW2ldXSAhPSB0YWdzW2FiVGFnc1tpXV0pIHsNCiAgICAgICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgYWJUYWdzW2ldLCBsaW5rcy5yZW1lbWJlci50YWdzW2FiVGFnc1tpXV0sICJsb2NhbCIpOw0KICAgICAgICB9DQogICAgfQ0KfScAjdDavg/IEg1hYlBlcnNvbmFsaXR5AgQAjdDavg/TJQR0cnVlJwCN0Nq+D8gSDW9uU2tpbGxVcGRhdGUCBACN0Nq+D9glHUB0aGlzQm90LnVwZGF0ZVBlcnNvbmFsaXR5KCk7JwEEYm90cyRkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQBJwCN0Nq+D/YlBnN5c3RlbQIEAI3Q2r4P9yUcYWIucGVyc29uYWxpdHkubWFuaWZlc3RhdGlvbicAjdDavg/2JQRmb3JtAgQAjdDavg+UJgdub3RoaW5nJwCN0Nq+D/YlC2Rlc2NyaXB0aW9uAgQAjdDavg+cJjhUaGlzIHNraWxsIGNvbnRyb2xzIHRoZSBhY3R1YWwgYm90IGZvciB0aGUgYWIgaW50ZXJmYWNlLicAjdDavg/2JQVsZWFybgIEAI3Q2r4P1SYo8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycAjdDavg/2JQ9vblBvcnRhbENoYW5nZWQCBACN0Nq+D/wmvA1AaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsICE9IG51bGwgfHwgY29uZmlnQm90LnRhZ3Muc3lzdGVtUG9ydGFsICE9IG51bGwpCnsKICAgIGlmICh0YWdzLmFiQm90KQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QpOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSB8fCB0aGF0LnBvcnRhbCA9PSAidGFnUG9ydGFsIiB8fCB0aGF0LnBvcnRhbCA9PSAibWVudVBvcnRhbCIgfHwgKHRoYXQucG9ydGFsID09ICJncmlkUG9ydGFsIiAmJiBjb25maWdCb3QudGFncy5tYXBQb3J0YWwpKQp7CiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmFiQm90KQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKfQoKY29uc3QgcG9ydGFsQXJyYXkgPSBbIm1pbmlHcmlkUG9ydGFsIiwgImdyaWRQb3J0YWwiLCAibWFwUG9ydGFsIiwgIm1pbmlNYXBQb3J0YWwiLCAibGVmdFdyaXN0UG9ydGFsIiwgInJpZ2h0V3Jpc3RQb3J0YWwiXTsKCmxldCBtYXBQb3J0YWxDaGVjayA9IGZhbHNlOwpsZXQgbmV3QUIgPSBmYWxzZTsKCmlmIChwb3J0YWxBcnJheS5pbmRleE9mKHRoYXQucG9ydGFsKSAhPSAtMSAmJiB0aGF0LmRpbWVuc2lvbiAmJiAhY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpCnsKICAgIGlmICh0aGF0LnBvcnRhbCA9PSAibWFwUG9ydGFsIikKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7IGRpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogLTg1LjY3NjE4OTQ4MjI0MzQsIHk6IDQyLjk2NTY3NTY3NTY3NTZ9fSk7CgogICAgICAgIG1hcFBvcnRhbENoZWNrID0gdHJ1ZTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246e3g6MCx5OjB9fSk7CiAgICB9Cn0KZWxzZSBpZiAocG9ydGFsQXJyYXkuaW5kZXhPZih0aGF0LnBvcnRhbCkgPT0gLTEgJiYgIXRoYXQuZGltZW5zaW9uKQp7CiAgICBjb25zdCBzdW1tb25EaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwogICAgCiAgICBtYXBQb3J0YWxDaGVjayA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IHRydWUgOiBmYWxzZTsKCiAgICBpZiAobWFwUG9ydGFsQ2hlY2spCiAgICB7CiAgICAgICAgbmV3QUIgPSBhd2FpdCB0aGlzQm90LmFiTWFuaWZlc3RCb3QoeyBkaW1lbnNpb246IHN1bW1vbkRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiAtODUuNjc2MTg5NDgyMjQzNCwgeTogNDIuOTY1Njc1Njc1Njc1Nn19KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBuZXdBQiA9IGF3YWl0IHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiBzdW1tb25EaW1lbnNpb24sIHBvc2l0aW9uOnt4OjAseTowfX0pOwogICAgfQp9CmVsc2UKewogICAgcmV0dXJuOwp9CgppZiAobmV3QUIpCnsKICAgIGF3YWl0IG9zLnNsZWVwKDUwMCkKCiAgICBjb25zdCB6b29tVmFyaWFuY2UgPSBtYXBQb3J0YWxDaGVjayA/IDIwMDAgOiAxMDsKCiAgICBhd2FpdCBvcy5mb2N1c09uKGxpbmtzLmFiQm90LCB7em9vbTogem9vbVZhcmlhbmNlLCByb3RhdGlvbjoge3g6IDQ1LCB5OiA0NX19KS5jYXRjaChlID0+IHt9KTsKfScAjdDavg/2JQhyZW1lbWJlcgIEAI3Q2r4PuTQo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAjdDavg/2JQ1hYk1hbmlmZXN0Qm90AgQAjdDavg/gNNERQGlmICh0YWdzLmFiQm90KQp7CiAgICBhd2FpdCBkZXN0cm95KGxpbmtzLmFiQm90KTsKfQoKbGV0IGFiID0ge307CgphYi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphYi5jb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlQ29sb3I7CmFiLmZvcm1PcGFjaXR5ID0gIjAuMzMiOwphYi5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlTGFiZWw7CmFiLmxhYmVsUG9zaXRpb24gPSAiZnJvbnQiOwphYi5sYWJlbENvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubGFiZWxTaXplID0gMC42MTsKYWIub25DbGljayA9ICJAIGlmICh0aGF0Lm1vZGFsaXR5ID09ICdtb3VzZScgJiYgdGhhdC5idXR0b25JZCA9PSAncmlnaHQnKSB7cmV0dXJuO30gbGlua3MubWFuYWdlci5hYkNsaWNrKCk7IjsKYWIuZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CmFiW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFiW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKYWJbdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5wb3NpdGlvbi55OwphYi5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7Ci8vYWIubGluZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmFiLmFuaW1hdGVCb3QgPSBgQCBpZiAoY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQpCnsKICAgIHJldHVybjsKfQoKY29uc3Qgcm90WiA9IHRhZ3MuZGltZW5zaW9uICsgIlJvdGF0aW9uWiI7CmxldCB0YXJnZXRTY2FsZSA9IDAuNjU7CgovLyBpZiAodGFncy5zY2FsZSA8PSAwLjY1MSkKLy8gewovLyAgICAgdGFyZ2V0U2NhbGUgPSAwLjk1OwovLyB9Cgphd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsCnsKICAgIGZyb21WYWx1ZTogewogICAgICAgIFtyb3RaXTogMCwKICAgICAgICAvL3NjYWxlOiB0YWdzLnNjYWxlCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIFtyb3RaXTogNi4zLAogICAgICAgIC8vc2NhbGU6IHRhcmdldFNjYWxlCiAgICB9LAogICAgZWFzaW5nOiB7CiAgICAgICAgdHlwZTogInNpbnVzb2lkYWwiLAogICAgICAgIG1vZGU6ICJpbm91dCIKICAgIH0sCiAgICBkdXJhdGlvbjogMgp9KS5jYXRjaChlID0+IHt9KTsKYDsKYWIub25DcmVhdGUgPSBgQAoKdGhpc0JvdC5hbmltYXRlQm90KCk7CgptYXNrcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHRoaXNCb3QuYW5pbWF0ZUJvdCgpLCAyMDAwKTsKYDsKYWIub25EZXN0cm95ID0gYEAKY2xlYXJJbnRlcnZhbCh0YWdzLmludGVydmFsKTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CmA7CmFiLmRyYWdnYWJsZSA9IGZhbHNlOwphYi5zY2FsZSA9IDAuOTsKCmxldCBhYk1hbmlmZXN0ZWQgPSBhd2FpdCBjcmVhdGUoYWIpOwoKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJTZWNvbmRhcnlMYWJlbCkKewogICAgbGV0IGFiTGFiZWxCb3QgPSB7fTsKCiAgICBhYkxhYmVsQm90LnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICBhYkxhYmVsQm90W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CiAgICBhYkxhYmVsQm90W3RoYXQuZGltZW5zaW9uICsgIloiXSA9IC0xOwogICAgYWJMYWJlbEJvdC5jcmVhdG9yID0gYWJNYW5pZmVzdGVkLmlkOwogICAgYWJMYWJlbEJvdC50cmFuc2Zvcm1lciA9IGFiTWFuaWZlc3RlZC5pZDsKICAgIGFiTGFiZWxCb3QucG9pbnRhYmxlID0gZmFsc2U7CiAgICBhYkxhYmVsQm90LmNvbG9yID0gImNsZWFyIjsKICAgIGFiTGFiZWxCb3QubGFiZWwgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiU2Vjb25kYXJ5TGFiZWw7CiAgICBhYkxhYmVsQm90LmxhYmVsUG9zaXRpb24gPSAibGVmdCI7CiAgICBhYkxhYmVsQm90LmxhYmVsU2l6ZSA9IDAuNzsKICAgIGFiTGFiZWxCb3QubGFiZWxDb2xvciA9IGFiTWFuaWZlc3RlZC50YWdzLmxhYmVsQ29sb3I7CgogICAgY3JlYXRlKGFiTGFiZWxCb3QpOwp9CgptYXNrcy5hYkJvdCA9ICLwn5SXIiArIGFiTWFuaWZlc3RlZC5pZDsKCmxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQWN0aXZlRGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CgpzaG91dCgib25BQk1vdmVkIiwge3g6IHRoYXQucG9zaXRpb24ueCwgeTogdGhhdC5wb3NpdGlvbi55fSk7CgpyZXR1cm4gYWJNYW5pZmVzdGVkOwoKCgppZiAoY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQpCnsKICAgIHJldHVybjsKfScAjdDavg/2JRxhYk1hbmlmZXN0U3RhdGVBc2xlZXBPbkVudGVyAgQAjdDavg+uRm9AZGVzdHJveShsaW5rcy5hYkJvdCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSBmYWxzZTsKCnNob3V0KCJvbkFCU2xlZXAiKTsnAI3Q2r4P9iULb25HcmlkQ2xpY2sCBACN0Nq+D55HjhNAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSkKewogICAgcmV0dXJuOwp9CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uc3Qgc2hpZnRDaGVjayA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAodGFncy5hYkJvdCAmJiAoc2hpZnRDaGVjayB8fCAodGhhdC5tb2RhbGl0eSA9PSAibW91c2UiICYmIHRoYXQuYnV0dG9uSWQgPT0gInJpZ2h0IiAmJiAhbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCkpKQp7CiAgICBpZiAobGlua3MuYWJCb3QudGFncy5hcm0pCiAgICB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IG51bGw7CiAgICB9CiAgICAKICAgIGxldCBhcm0gPSB7fTsKCiAgICBhcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKICAgIGFybVt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwogICAgYXJtW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKICAgIGFybVt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSB0aGF0LnBvc2l0aW9uLnk7CiAgICBhcm0uZGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb247CiAgICBhcm0uc2NhbGUgPSAwLjk7CiAgICBhcm0uc2NhbGVaID0gMC4wMTsKICAgIGFybS5jb2xvciA9ICJjbGVhciI7CiAgICBhcm0uc3Ryb2tlQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgYXJtLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CiAgICBhcm0ubGluZVRvID0gbGlua3MuYWJCb3QuaWQ7CiAgICBhcm0ubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CiAgICBhcm0ub25DbGljayA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7CiAgICBzaG91dCgib25BQkZvb3RDbGlja2VkIik7CiAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKCiAgICBsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgogICAgc2hvdXQoIm9uQUJBcm1QbGFjZWQiLCB7eDogdGhhdC5wb3NpdGlvbi54LCB5OiB0aGF0LnBvc2l0aW9uLnl9KTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7CgogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7CgogICAgcmV0dXJuOwp9CgpsZXQgZm9vdHByaW50ID0ge307Cgpmb290cHJpbnQuc3BhY2UgPSAidGVtcExvY2FsIjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmZvb3RwcmludC5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKZm9vdHByaW50LnNjYWxlWiA9IDAuMDE7CmZvb3RwcmludC5vbkNsaWNrID0gYEAgdGFnc1t0YWdzLmRpbWVuc2lvbl0gPSBmYWxzZTsKc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOwpsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3QodGFncy5wb3NpdGlvbkluZm8pOwpgOwpmb290cHJpbnQucG9zaXRpb25JbmZvID0gdGhhdDsKZm9vdHByaW50LmNvbG9yID0gImNsZWFyIjsKZm9vdHByaW50LnBlcnNvbmFsaXR5ID0gdGFncy5wZXJzb25hbGl0eTsKZm9vdHByaW50LnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKZm9vdHByaW50LmRyYWdnYWJsZSA9IGZhbHNlOwpmb290cHJpbnQubWFuYWdlciA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CmZvb3RwcmludC5vbkNyZWF0ZSA9IGBAIHNldFRpbWVvdXQoKCkgPT4gZGVzdHJveSh0aGlzQm90KSwgODAwKTsKCiAgICBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgICAgICBmcm9tVmFsdWU6IHsKICAgICAgICAgICAgc2NhbGVYOiAwLjEsCiAgICAgICAgICAgIHNjYWxlWTogMC4xCiAgICAgICAgfSwKICAgICAgICB0b1ZhbHVlOiB7CiAgICAgICAgICAgIHNjYWxlWDogMS4xLAogICAgICAgICAgICBzY2FsZVk6IDEuMQogICAgICAgIH0sCiAgICAgICAgZHVyYXRpb246IDAuNSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogImVsYXN0aWMiLAogICAgICAgICAgICBtb2RlOiAib3V0IgogICAgICAgIH0KICAgIH0pLmNhdGNoKGUgPT4ge30pOwpgOwoKY3JlYXRlKGZvb3RwcmludCk7JwCN0Nq+D/YlBG1lbnUCBACN0Nq+D6daKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAI3Q2r4P9iUHYWJDbGljawIEAI3Q2r4PzlrMCkBpZiAoIWxpbmtzLmFiQm90KQp7CiAgICByZXR1cm47Cn0KCmlmIChsaW5rcy5pbnB1dCkgewogICAgbGlua3MuaW5wdXQuYWJDaGF0QmFyQ2xvc2UoKTsKfQoKY29uc3QgcmVzZXQgPSB0aGF0ID8gdGhhdC5yZXNldCA6IGZhbHNlOwpjb25zdCBtZW51VHlwZSA9IHRoYXQgPyB0aGF0Lm1lbnUgOiAiY29yZSI7CmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmICghcmVzZXQgJiYgKGxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwgfHwgc3RhdGUpKQp7CiAgICBjb25zdCBhYk1lbnVCb3RzID0gZ2V0Qm90cygiYWJNZW51IiwgdHJ1ZSk7CgogICAgd2hpc3BlcihhYk1lbnVCb3RzLCAiYWJNZW51UmVmcmVzaCIpOwogICAgCiAgICBjbGVhckludGVydmFsKGxpbmtzLmFiQm90LnRhZ3MuaW50ZXJ2YWwpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmludGVydmFsID0gbnVsbDsKCiAgICBjbGVhckFuaW1hdGlvbnMobGlua3MuYWJCb3QpOwoKICAgIGNvbnN0IHJvdFogPSBsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJSb3RhdGlvbloiOwoKICAgIGlmIChzdGF0ZSAmJiBtZW51VHlwZSA9PSAiY29yZSIpCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJPcGVuTWVudShtZW51VHlwZSk7CiAgICB9CgogICAgYXdhaXQgYW5pbWF0ZVRhZyhsaW5rcy5hYkJvdCwKICAgIHsKICAgICAgICBmcm9tVmFsdWU6IHsKICAgICAgICAgICAgW3JvdFpdOiBsaW5rcy5hYkJvdC50YWdzW3JvdFpdLAogICAgICAgICAgICBzY2FsZTogbGlua3MuYWJCb3QudGFncy5zY2FsZQogICAgICAgIH0sCiAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICBbcm90Wl06IDAsCiAgICAgICAgICAgIHNjYWxlOiAwLjkKICAgICAgICB9LAogICAgICAgIGVhc2luZzogewogICAgICAgICAgICB0eXBlOiAic2ludXNvaWRhbCIsCiAgICAgICAgICAgIG1vZGU6ICJpbm91dCIKICAgICAgICB9LAogICAgICAgIGR1cmF0aW9uOiAwLjUKICAgIH0pLmNhdGNoKGUgPT4ge30pOwp9CmVsc2UKewogICAgbGlua3MuYWJCb3QuYW5pbWF0ZUJvdCgpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IG51bGw7CgogICAgaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQogICAgewogICAgICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKICAgIH0KCiAgICBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gbGlua3MuYWJCb3QuYW5pbWF0ZUJvdCgpLCAyMDAwKTsKfScAjdDavg/2JRthYk1hbmlmZXN0U3RhdGVBd2FrZU9uRW50ZXICBACN0Nq+D5tliQJAbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSB0cnVlOwoKbGV0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CgppZiAoIWRpbWVuc2lvbikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogZGltZW5zaW9uLCBwb3NpdGlvbjoge3g6IDAsIHk6IDB9fSk7CgpzaG91dCgib25BQkF3YWtlIik7JwCN0Nq+D/YlDG9uQW55Qm90RHJhZwIEAI3Q2r4PpWfWC0BpZiAodGhhdC5ib3QgIT0gbGlua3MuYWJCb3QpIHJldHVybjsKCmlmIChsaW5rcy5pbnB1dCkgewogICAgbGlua3MuaW5wdXQuYWJDaGF0QmFyQ2xvc2UoKTsKfQoKaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgb3MuZW5hYmxlQ3VzdG9tRHJhZ2dpbmcoKTsKCiAgICByZXR1cm47Cn0KCmlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKewogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CgppZiAoIXRoYXQuYm90LnRhZ3MuaW50ZXJ2YWwpCnsKICAgIHRoaXNCb3QuYWJDbGljaygpOwp9CgpsZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uXSA9IHRydWU7CmFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0gPSBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXTsKYXJtW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSA9IGxpbmtzLmFiQm90LnRhZ3NbbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOwphcm0uZGltZW5zaW9uID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb247CmFybS5zY2FsZSA9IDAuOTsKYXJtLnNjYWxlWiA9IDAuMDE7CmFybS5jb2xvciA9ICJjbGVhciI7CmFybS5zdHJva2VDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFybS5saW5lQ29sb3IgPSBsaW5rcy5hYkJvdC50YWdzLnN0cm9rZUNvbG9yOwphcm0ubGluZVRvID0gdGhhdC5ib3QuaWQ7CmFybS5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwpzaG91dCgib25BQkZvb3RDbGlja2VkIik7CmxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOwphcm0ub25Ecm9wID0gYEAgc2hvdXQoIm9uQUJBcm1QbGFjZWQiLCB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9KTtgCgppZiAoc3RhdGUpCnsKICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7CiAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwogICAgYXJtLmNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwp9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgpsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycAjdDavg/2JRFvbkFueUJvdERyb3BFbnRlcgIEAI3Q2r4P+HLYCUBpZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90Py5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAobGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVDb2xvciA9IGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QudGFncy5saW5lVG8pKQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUby5wdXNoKHRoYXQudG8uYm90LmlkKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBbdGhhdC50by5ib3QuaWRdOwogICAgfQoKICAgIGxldCBuZXdMaW5rOwoKICAgIGlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQogICAgewogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHRoYXQudG8uYm90KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsZXQgcHJldmlvdXNMaW5rQm90cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHM7CgogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmV2aW91c0xpbmtCb3RzKSkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMgPSBbcHJldmlvdXNMaW5rQm90c10KICAgICAgICB9CgogICAgICAgIGNvbnN0IGFscmVhZHlBZGRlZCA9IHByZXZpb3VzTGlua0JvdHMuc29tZShiID0+IGIuaWQgPT09IHRoYXQudG8uYm90LmlkKTsKICAgICAgICBpZiAoIWFscmVhZHlBZGRlZCkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMucHVzaCh0aGF0LnRvLmJvdCk7CiAgICAgICAgfQoKICAgICAgICBuZXdMaW5rID0gZ2V0TGluayhwcmV2aW91c0xpbmtCb3RzKTsKICAgIH0KCiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHMgPSBuZXdMaW5rOwp9CmVsc2UKewogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLnN0cm9rZUNvbG9yID0gImNsZWFyIjsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5saW5lVG8gPSBmYWxzZTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lQ29sb3IgPSBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gdGhhdC50by5ib3QuaWQ7Cn0nAI3Q2r4P9iUQb25BbnlCb3REcm9wRXhpdAIEAI3Q2r4P0XycAkBpZiAoIWxpbmtzLmFiQm90KSByZXR1cm47CmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0gIT0gdGhhdC5kcmFnQm90KSByZXR1cm47CgppZiAoIWxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSBudWxsOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IG51bGw7CgogICAgbGlua3MuYWJCb3QubWFza3MubGluZVRvID0gbGlua3MuYWJCb3QubGlua3MuYXJtLmlkOwp9JwCN0Nq+D/YlDG9uQW55Qm90RHJvcAIEAI3Q2r4P7n6tB0BtYXNrcy5tdWx0aURyYWcgPSBudWxsOwoKaWYgKCF0YWdzLmFiQm90KSByZXR1cm47CmlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdC50YWdzLmFybSkgcmV0dXJuOwppZiAobGlua3MuYWJCb3QubGlua3MuYXJtICE9IHRoYXQuZHJhZ0JvdCkgcmV0dXJuOwoKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMgPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHM7CgogICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAibXVsdGlwbGVCb3QifSk7CiAgICAKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKCiAgICBzaG91dCgib25BQlNlbGVjdGVkQm90IiwgbGlua3MucmVtZW1iZXIubWFza3MuYWJNdWx0aXBsZUJvdEZvY3VzKTsKfQplbHNlIGlmICh0aGF0LnRvLmJvdCkKewogICAgaWYgKHRoYXQudG8uYm90ID09IGxpbmtzLmFiQm90KQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC50by5ib3QuaWQ7CgogICAgICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImJvdCJ9KTsKICAgIH0KICAgIAogICAgc2hvdXQoIm9uQUJTZWxlY3RlZEJvdCIsIHRoYXQudG8uYm90KTsKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQplbHNlCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC50by5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwp9JwCN0Nq+D/YlCGFiSWdub3JlAgQAjdDavg+ahgEEdHJ1ZScAjdDavg/2JQNhc2sCBACN0Nq+D5+GASjwn5SXZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3JwCN0Nq+D/YlCWFza0J1dHRvbgIEAI3Q2r4PxoYB3AVAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSkKewogICAgcmV0dXJuOwp9CgpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLnJlbWVtYmVyID0gbGlua3MubWVudS50YWdzLnJlbWVtYmVyOwphYk1lbnVCdXR0b24ubWFuaWZlc3RhdGlvbiA9IGxpbmtzLm1lbnUudGFncy5tYW5pZmVzdGF0aW9uOwphYk1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKYWJNZW51QnV0dG9uLmJhc2VTa2lsbCA9ICLwn5SXIiArIGxpbmtzLmFzay5pZDsKYWJNZW51QnV0dG9uLmxhYmVsID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudUxhYmVsOwphYk1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51SWNvbjsKYWJNZW51QnV0dG9uLm9uQ3JlYXRlID0gbGlua3MuYXNrLnRhZ3MuYWJDb3JlTWVudU9uR2VuZXJhdGU7CmFiTWVudUJ1dHRvbi5hYk1lbnVTb3J0T3JkZXIgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51U29ydE9yZGVyOwphYk1lbnVCdXR0b24uY29sb3IgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51Q29sb3IgPyBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51Q29sb3IgOiBsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24oYWJNZW51QnV0dG9uKTsnAI3Q2r4P9iUJYWJCb3RDaGF0AgQAjdDavg+hjAHVC0BpZiAoIWxpbmtzLmFiQm90ICYmICF0aGF0LmJvdCkKewogICAgcmV0dXJuOwp9Cgpjb25zdCBib3RCYXNlID0gdGhhdC5ib3QgPyB0aGF0LmJvdDogbGlua3MuYWJCb3Q7CmNvbnN0IGRpbWVuc2lvbiA9ICF0aGF0LmJvdCA/IGJvdEJhc2UudGFncy5kaW1lbnNpb24gOiB0aGF0LmRpbWVuc2lvbiA/IHRoYXQuZGltZW5zaW9uIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKY29uc3QgbWVzc2FnZSA9IHRoYXQubWVzc2FnZTsKY29uc3QgbWVzc2FnZVRpbWUgPSB0aGF0LnRpbWUgPyB0aGF0LnRpbWUgKiAxMDAwIDogMTYwMDsgCmNvbnN0IG1lc3NhZ2VCb3QgPSB7fTsKCm1lc3NhZ2VCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbWVzc2FnZUJvdC50cmFuc2Zvcm1lciA9IGJvdEJhc2UuaWQ7Cm1lc3NhZ2VCb3QuZm9ybSA9ICJzcHJpdGUiOwptZXNzYWdlQm90LmNvbG9yID0gIiMwMDAwMDAiOwptZXNzYWdlQm90LmxhYmVsID0gbWVzc2FnZTsKbWVzc2FnZUJvdC5sYWJlbENvbG9yID0gIiNmZmZmZmYiOwptZXNzYWdlQm90LmxhYmVsU2l6ZSA9IDE7Cm1lc3NhZ2VCb3Quc2NhbGVYID0gbWVzc2FnZS5sZW5ndGggLyA1ID4gMTAgPyAxMCA6IG1lc3NhZ2UubGVuZ3RoIDwgMTAgPyAyIDogbWVzc2FnZS5sZW5ndGggLyA1OwptZXNzYWdlQm90LnNjYWxlWSA9IChtZXNzYWdlLmxlbmd0aCAvIDUwKSA+IDEgPyBNYXRoLnJvdW5kKG1lc3NhZ2UubGVuZ3RoIC8gNTApIDogMS4zMzsKbWVzc2FnZUJvdC5zY2FsZVogPSAwLjE7Cm1lc3NhZ2VCb3Qub3JpZW50YXRpb25Nb2RlID0gImJpbGxib2FyZCI7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uXSA9IHRydWU7Cm1lc3NhZ2VCb3QuZGltZW5zaW9uID0gZGltZW5zaW9uOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJYIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJZIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJaIl0gPSBib3RCYXNlLnRhZ3Muc2NhbGUgPyBib3RCYXNlLnRhZ3Muc2NhbGUgLyAyICsgMiA6IDI7Cm1lc3NhZ2VCb3Qub25GYWRlID0gYEAgYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMSwKICAgICAgICBsYWJlbE9wYWNpdHk6IDEsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0KICAgIH0sCiAgICB0b1ZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDAsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAwLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdICsgNQogICAgfSwKICAgIGR1cmF0aW9uOiAke3RoYXQuZHVyYXRpb24gPz8gM30KfSkuY2F0Y2goe30pOwoKZGVzdHJveSh0aGlzQm90KTtgOwoKY29uc3QgYWN0aXZlTWVzc2FnZSA9IGNyZWF0ZShtZXNzYWdlQm90KTsKCnNldFRpbWVvdXQoKCk9PiBhY3RpdmVNZXNzYWdlLm9uRmFkZSgpLCBtZXNzYWdlVGltZSk7JwCN0Nq+D/YlEG9uQW55Qm90RHJhZ2dpbmcCBACN0Nq+D/eXAYkQQGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gbGlua3MuYWJCb3QuaWQpCnsKICAgIGNvbnN0IGFjdGl2ZURpbWVuc2lvbiA9IGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQWN0aXZlRGltZW5zaW9uID8/IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CiAgICBsZXQgZHJhZ0Nvb3JkaW5hdG9yQm90ID0gbGlua3MuZHJhZ0Nvb3JkOwogICAgCiAgICBpZiAoIWRyYWdDb29yZGluYXRvckJvdCkKICAgIHsKICAgICAgICBjb25zdCBkcmFnQ29vcmRpbmF0b3JCb3RNb2QgPSB7fTsKCiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5kaW1lbnNpb24gPSBhY3RpdmVEaW1lbnNpb247CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbl0gPSB0cnVlOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWCJdID0gMDsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIlkiXSA9IDA7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJaIl0gPSAtMTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QucG9pbnRhYmxlID0gZmFsc2U7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLmNvbG9yID0gImNsZWFyIjsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2Qub25BbnlCb3RQb2ludGVyVXAgPSBgQCBsaW5rcy5tYW5hZ2VyLm1hc2tzLmRyYWdDb29yZCA9IG51bGw7IHNob3V0KCdhYlN0b3BEcmFnJywge3g6IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCwgeTogdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZfSk7IGRlc3Ryb3kodGhpc0JvdCk7YDsKCiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90ID0gY3JlYXRlKGRyYWdDb29yZGluYXRvckJvdE1vZCk7CgogICAgICAgIG1hc2tzLmRyYWdDb29yZCA9IGdldExpbmsoZHJhZ0Nvb3JkaW5hdG9yQm90KTsKCiAgICAgICAgY29uc3QgZHJhZ0JvdHMgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXM7CgogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLnRyYW5zZm9ybWVyID0gZHJhZ0Nvb3JkaW5hdG9yQm90LmlkOwogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFiU3RvcERyYWcgPSBgQCBtYXNrcy50cmFuc2Zvcm1lciA9IG51bGw7IG1hc2tzLmFiU3RvcERyYWcgPSBudWxsOyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVggKyB0aGF0Lng7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WSArIHRoYXQueWA7CgogICAgICAgIHNldFRhZ01hc2soZHJhZ0JvdHMsICJ0cmFuc2Zvcm1lciIsIGRyYWdDb29yZGluYXRvckJvdC5pZCwgInRlbXBMb2NhbCIpOwogICAgICAgIHNldFRhZ01hc2soZHJhZ0JvdHMsICJhYlN0b3BEcmFnIiwgYEAgbWFza3MudHJhbnNmb3JtZXIgPSBudWxsOyBtYXNrcy5hYlN0b3BEcmFnID0gbnVsbDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YICsgdGhhdC54OyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgKyB0aGF0LnlgLCAidGVtcExvY2FsIik7CiAgICB9CgogICAgY29uc3QgeENoYW5nZSA9IHRoYXQudG8ueCAtIHRoYXQuZnJvbS54OwogICAgY29uc3QgeUNoYW5nZSA9IHRoYXQudG8ueSAtIHRoYXQuZnJvbS55OwoKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJYIl0gPSB4Q2hhbmdlOwogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIlkiXSA9IHlDaGFuZ2U7CiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWiJdID0gLTE7Cn0nAI3Q2r4P9iUJYWJWZXJzaW9uAgQAjdDavg+BqAEEMTAuNCcAjdDavg/2JRFhYkluaXRpYWxNYW5pZmVzdAIEAI3Q2r4PhqgBowlAbGV0IHNraWxsQXJyYXkgPSBbImFiSW50ZXJmYWNlIiwgImFiQWN0aW9uIiwgImFiVGVzdHMiXTsKCmZvciAobGV0IGkgPSAwOyBpIDwgc2tpbGxBcnJheS5sZW5ndGg7IGkrKykgCnsKICAgIGF3YWl0IGxpbmtzLmxlYXJuLmFiQWRhcHQoc2tpbGxBcnJheVtpXSk7Cn0KCmF3YWl0IG9zLnNsZWVwKDMwMCk7CgovL2FuaW1hdGlvbiBpZiBhcHBsaWNhYmxlCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiSW5pdGlhbEFuaW1hdGlvbikKewogICAgYXdhaXQgbGlua3MuYW5pbWF0aW9uW2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsQW5pbWF0aW9uXSgpOwp9CgovL2tlZXAgYWIgYXdha2UKbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgPSB0cnVlOwoKaWYgKGNvbmZpZ0JvdC50YWdzLnBhdHRlcm4pIAp7CiAgICBsaW5rcy5yZW1lbWJlci50YWdzLmJhc2VBQiA9IGNvbmZpZ0JvdC50YWdzLnBhdHRlcm47Cn0KZWxzZSAKewogICAgbGlua3MucmVtZW1iZXIudGFncy5iYXNlQUIgPSB1dWlkKCk7Cn0KCmNoYW5nZVN0YXRlKGxpbmtzLm1hbmlmZXN0YXRpb24sICJBd2FrZSIsICJhYk1hbmlmZXN0U3RhdGUiKTsKCnRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiAiaG9tZSIsIHBvc2l0aW9uOnt4OjAseTowfX0pOwoKLy9tZXNzYWdlIGlmIGFwcGxpY2FibGUKaWYgKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsTWVzc2FnZSkKewogICAgc2hvdXQoInNob3dDb25zb2xlIik7CgogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKSkKICAgIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsTWVzc2FnZS5sZW5ndGg7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGFiLmxvZyhsaW5rcy5wZXJzb25hbGl0eS50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogIiArIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJJbml0aWFsTWVzc2FnZVtpXSk7CgogICAgICAgICAgICBhd2FpdCBvcy5zbGVlcCgyMDAwKTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgYWIubG9nKGxpbmtzLnBlcnNvbmFsaXR5LnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkluaXRpYWxNZXNzYWdlKTsKICAgIH0KfScAjdDavg/2JQlhbmltYXRpb24CBACN0Nq+D6qxASjwn5SXYjI2ZTEwODktMTcyZC00NWE5LThkMjItMDVjM2Y1OGMyYmY3JwCN0Nq+D/YlD2FiTWFuaWZlc3RTdGF0ZQIEAI3Q2r4P0bEBBkFzbGVlcCcAjdDavg/2JQ9vbkFueUJvdENsaWNrZWQCBACN0Nq+D9ixAfwQQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYlJpZ2h0Q2xpY2tEaXNhYmxlZCAgJiYgIXRoYXQuYm90LnRhZ3MuYWJSaWdodENsaWNrSWdub3JlICYmIHRoYXQubW9kYWxpdHkgPT0gIm1vdXNlIiAmJiB0aGF0LmJ1dHRvbklkID09ICJyaWdodCIpIHsNCg0KICAgIGlmICh0YWdzLmFiTWFuaWZlc3RTdGF0ZSA9PSAiQXNsZWVwIikgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy9hYiBzZWxlY3RlZA0KICAgIGlmICh0aGF0LmJvdCA9PSBsaW5rcy5hYkJvdCkNCiAgICB7DQogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8vR2V0IHJpZCBvZiBhbnkgb3RoZXIgb25lcw0KICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkgew0KICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7DQogICAgfQ0KDQogICAgLy9hbmltYXRpb25zDQogICAgaWYgKCFsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKSB7DQogICAgICAgIHRoaXNCb3QuYWJDbGljaygpOw0KICAgIH0NCg0KICAgIC8vQ3JlYXRlIGFybQ0KICAgIGxldCBhcm0gPSB7fTsNCg0KICAgIGFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbl0gPSB0cnVlOw0KICAgIGFybVtsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlgiXTsNCiAgICBhcm1bbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5ib3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJZIl07DQogICAgYXJtLmNyZWF0b3IgPSBsaW5rcy5hYkJvdC5pZDsNCiAgICBhcm0uZGltZW5zaW9uID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb247DQogICAgYXJtLnNjYWxlID0gMC45Ow0KICAgIGFybS5zY2FsZVogPSAwLjAxOw0KICAgIGFybS5jb2xvciA9ICJjbGVhciI7DQogICAgYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucGVyc29uYWxpdHkudGFncy5hYkJhc2VTdHJva2VDb2xvcjsNCiAgICBhcm0ubGluZUNvbG9yID0gbGlua3MuYWJCb3QudGFncy5zdHJva2VDb2xvcjsNCiAgICBhcm0ubGluZVRvID0gbGlua3MuYWJCb3QuaWQ7DQogICAgYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOw0KICAgIGFybS5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsNCiAgICAgICAgICAgICAgICAgICAgc2hvdXQoIm9uQUJGb290Q2xpY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsNCg0KICAgIGxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsNCg0KICAgIGxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsNCg0KICAgIHRoaXNCb3Qub25BbnlCb3REcm9wRW50ZXIoew0KICAgICAgICBkcmFnQm90OiBsaW5rcy5hYkJvdC5saW5rcy5hcm0sDQogICAgICAgIHRvOiB7DQogICAgICAgICAgICBib3Q6IHRoYXQuYm90LA0KICAgICAgICAgICAgeDogdGhhdC5ib3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiB0aGF0LmJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24NCiAgICAgICAgfSwNCiAgICAgICAgZnJvbTogew0KICAgICAgICAgICAgeDogbGlua3MuYWJCb3QudGFnc1tsaW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbiArICJYIl0sDQogICAgICAgICAgICB5OiBsaW5rcy5hYkJvdC50YWdzW2xpbmtzLmFiQm90LnRhZ3MuZGltZW5zaW9uICsgIlkiXSwNCiAgICAgICAgICAgIGRpbWVuc2lvbjogbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24NCiAgICAgICAgfQ0KICAgIH0pDQoNCiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgdGhhdC5ib3QuaWQ7DQoNCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJib3QifSk7DQoNCiAgICByZXR1cm47DQp9JwCN0Nq+D/YlBWlucHV0AgQAjdDavg/PwgEo8J+Ul2Y4NjAyODc4LWMyZWYtNDhiZC04NWEwLThkNjM1MWViNDEyMCcAjdDavg/2JQtwZXJzb25hbGl0eQIEAI3Q2r4P9sIBKPCflJdiNzZkZmJjNC04NTRiLTRmNmQtYTkxZi1hOTQ4Njk0Nzc0ZGInAI3Q2r4P9iUNYWJQZXJzb25hbGl0eQIEAI3Q2r4PncMBBHRydWUA"}]}