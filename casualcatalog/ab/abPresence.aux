{"version":2,"updates":[{"id":0,"timestamp":1767034667352,"update":"ATTjpJGlDAAnAQRib3RzJDdkM2ExNzAzLTBhMDEtNDY2Yi05NzRmLWFlOWYxMDAxYWM3OAEnAOOkkaUMAAZzeXN0ZW0CBADjpJGlDAETYWIucHJlc2VuY2UudmVyc2lvbicA46SRpQwAFmFiUHJlc2VuY2VNaW5vclZlcnNpb24CBADjpJGlDBUBMycA46SRpQwAFmFiUHJlc2VuY2VNYWpvclZlcnNpb24CBADjpJGlDBcBMCcA46SRpQwACGFiSWdub3JlAgQA46SRpQwZBHRydWUnAOOkkaUMAAphYlByZXNlbmNlAgQA46SRpQweBHRydWUnAOOkkaUMAARmb3JtAgQA46SRpQwjB25vdGhpbmcnAOOkkaUMAA1vblNraWxsVXBkYXRlAgQA46SRpQwrngFAY29uc3QgdmVyc2lvblN0cmluZyA9IHRhZ3MuYWJQcmVzZW5jZU1ham9yVmVyc2lvbiArICIuIiArIHRhZ3MuYWJQcmVzZW5jZU1pbm9yVmVyc2lvbjsKCmNvbnNvbGUubG9nKCJbQUJQcmVzZW5jZV0gTG9hZGVkIEFCIHNoZWxsIHZlcnNpb24gIiArIHZlcnNpb25TdHJpbmcpOycA46SRpQwACWFiVmVyc2lvbgIEAOOkkaUMygEFMTAuMzUnAQRib3RzJDg3ZTk1MzQyLWU0NTYtNGI2My05ODkxLWQ3YTkyMWFkM2VlNwEnAOOkkaUM0AEGc3lzdGVtAgQA46SRpQzRARJhYi5wcmVzZW5jZS5jYW1lcmEnAOOkkaUM0AEKYWJQcmVzZW5jZQIEAOOkkaUM5AEEdHJ1ZScA46SRpQzQAQhhYklnbm9yZQIEAOOkkaUM6QEEdHJ1ZScA46SRpQzQAQRmb3JtAgQA46SRpQzuAQdub3RoaW5nJwDjpJGlDNABCm9uQm90QWRkZWQCBADjpJGlDPYBR0BpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkgJiYgdGFncy5lbmFibGVkKSB7CiAgICB0aGlzQm90LnN0YXJ0VGljaygpOwp9JwDjpJGlDNABBHRpY2sCBADjpJGlDL4CtR5AaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnRgKTsKfQoKaWYgKCFjb25maWdCb3QpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBjb25maWdCb3QgdG8gYmUgcmVhZHkuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghZ2xvYmFsVGhpcy5hYikgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgZm9yIGFiIHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHNoZWV0IHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gbGVhdmUgc3lzdGVtIHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gVGhlIG5hbWUgdGhhdCB0aGlzIHJlbW90ZSBpcyB0byBiZSBrbm93biBhcyB0byBvdGhlciB1c2Vycy4KbGV0IHJlbW90ZU5hbWUgPSBjb25maWdCb3QuaWQuc3Vic3RyaW5nKDAsNSk7CmlmIChhdXRoQm90ICYmIGF1dGhCb3QudGFncy5uYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYXV0aEJvdC50YWdzLm5hbWU7Cn0gZWxzZSBpZiAoYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lOwp9CgovLyBHZXQgbGlzdCBvZiByZWxldmFudCBjYW1lcmFzIGZyb20gcG9ydGFscyAmIGRpbWVuc2lvbnMgdGhhdCB0aGUgdXNlciBpcyBhY3RpdmUgaW4uCmNvbnN0IGNhbWVyYURhdGFUb0VtaXQ6IEFCVXNlckNhbWVyYURhdGFbXSA9IFtdOwoKaWYgKCFtYXNrcy5jYW1lcmFDb2xvcikgewogICAgbWF0aC5zZXRSYW5kb21TZWVkKGNvbmZpZ0JvdC5pZCk7CiAgICBtYXNrcy5jYW1lcmFDb2xvciA9IGByZ2IoJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSlgOwp9CgoKLy8gTWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgZ3JpZCBwb3J0YWwgc28gb25seSBzZW5kIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goewogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtYXAnLAogICAgICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScsCiAgICAgICAgY29sb3I6IG1hc2tzLmNhbWVyYUNvbG9yLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgfSk7Cn0gZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ2dyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDYW1lcmFUeXBlID8/ICdvcnRob2dyYXBoaWMnLAogICAgICAgIGNvbG9yOiBtYXNrcy5jYW1lcmFDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgICAgICB6b29tOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhWm9vbSwKICAgIH0pOwp9CgovLyBNaW5pIG1hcCBwb3J0YWwgc2l0cyBvbiB0b3AgdGhlIG1pbmkgbWFwIHBvcnRhbCBzbyBvbmx5IHNlbmQgbWluaSBtYXAgcG9ydGFsIGNhbWVyYSBpZiBpdHMgZW5hYmxlZC4KaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwpIHsKICAgIGNhbWVyYURhdGFUb0VtaXQucHVzaCh7IAogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtaW5pTWFwJywKICAgICAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnLAogICAgICAgIGNvbG9yOiBtYXNrcy5jYW1lcmFDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IG1pbmlNYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgIH0pOwp9IGVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWluaUdyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA/PyAnb3J0aG9ncmFwaGljJywKICAgICAgICBjb2xvcjogbWFza3MuY2FtZXJhQ29sb3IsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCmlmIChjYW1lcmFEYXRhVG9FbWl0Lmxlbmd0aCA9PT0gMCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gYmUgaW4gYSBwb3J0YWwgd2l0aCBhIGNhbWVyYS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YVRvRW1pdDpgLCBjYW1lcmFEYXRhVG9FbWl0KTsKfQoKY29uc3Qgb3RoZXJSZW1vdGVzID0gKGF3YWl0IG9zLnJlbW90ZXMoKSkuZmlsdGVyKGlkID0+IGlkICE9PSBjb25maWdCb3QuaWQpOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gb3RoZXJSZW1vdGVzOmAsIG90aGVyUmVtb3Rlcyk7Cn0KCmlmIChvdGhlclJlbW90ZXMubGVuZ3RoID4gMCkgewogICAgc2VuZFJlbW90ZURhdGEob3RoZXJSZW1vdGVzLCAnYWJfdXNlcl9jYW1lcmFfZGF0YScsIGNhbWVyYURhdGFUb0VtaXQpOwp9CicA46SRpQzQAQlzdGFydFRpY2sCBADjpJGlDOogygRAaWYgKG1hc2tzLnRpY2tJbnRlcnZhbElkKSB7CiAgICByZXR1cm47Cn0KCmlmICghb3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgdGhlIGluc3QgbXVzdCBiZSBjb2xsYWJvcmF0aXZlLmApOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgY2FtZXJhIHByZXNlbmVjZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0YXJ0IGludGVydmFsYCk7Cn0KCm1hc2tzLnRpY2tJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gd2hpc3Blcih0aGlzQm90LCAndGljaycpLCB0YWdzLnRpY2tJbnRlcnZhbE1TKTsKdGhpc0JvdC50aWNrKCk7JwDjpJGlDNABCHN0b3BUaWNrAgQA46SRpQyxJccBQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0b3AgaW50ZXJ2YWxgKTsKICAgIH0KCiAgICBjbGVhckludGVydmFsKG1hc2tzLnRpY2tJbnRlcnZhbElkKTsKICAgIG1hc2tzLnRpY2tJbnRlcnZhbElkID0gbnVsbDsKfScA46SRpQzQAQ50aWNrSW50ZXJ2YWxNUwIEAOOkkaUM+SYEMTUwMCcA46SRpQzQAQVkZWJ1ZwIEAOOkkaUM/iYFZmFsc2UnAOOkkaUM0AEMb25Cb3RDaGFuZ2VkAgQA46SRpQyEJ6oCQGlmICh0aGF0LnRhZ3MuaW5jbHVkZXMoJ3RpY2tJbnRlcnZhbE1TJykpIHsKICAgIHRoaXNCb3Quc3RvcFRpY2soKTsKCiAgICBpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkgJiYgdGFncy5lbmFibGVkKSB7CiAgICAgICAgdGhpc0JvdC5zdGFydFRpY2soKTsKICAgIH0KfSBlbHNlIGlmICh0aGF0LnRhZ3MuaW5jbHVkZXMoJ2VuYWJsZWQnKSkgewogICAgaWYgKHRhZ3MuZW5hYmxlZCkgewogICAgICAgIHRoaXNCb3Quc3RhcnRUaWNrKCk7CiAgICB9IGVsc2UgewogICAgICAgIHRoaXNCb3Quc3RvcFRpY2soKTsKICAgIH0KfScA46SRpQzQAQxvblJlbW90ZURhdGECBADjpJGlDK8p3gNAaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIHJldHVybjsKfQoKaWYgKHRoYXQubmFtZSA9PT0gJ2FiX3VzZXJfY2FtZXJhX2RhdGEnKSB7CiAgICBjb25zdCBkYXRhOiBBQlVzZXJDYW1lcmFEYXRhIHwgQUJVc2VyQ2FtZXJhRGF0YVtdID0gdGhhdC50aGF0OwoKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBhYl91c2VyX2NhbWVyYV9kYXRhIGRhdGE6YCwgZGF0YSk7CiAgICB9CgogICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhW2ldKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHRoaXNCb3Qub25BQlVzZXJDYW1lcmFEYXRhUmVjZWl2ZWQoZGF0YSk7CiAgICB9Cn0KJwDjpJGlDNABBXR5cGVzAgQA46SRpQyOLeUG8J+ThGludGVyZmFjZSBBQlVzZXJDYW1lcmFEYXRhIHsKICAgIC8qKiBUaGUgcmVtb3RlIGlkIG9mIHRoZSB1c2VyIHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICovCiAgICByZW1vdGVJZDogc3RyaW5nOwoKICAgIC8qKiBDYW4gZWl0aGVyIGJlIHVzZXIncyBkaXNwbGF5IG5hbWUgb3IgYSBzaG9ydGVuZWQgbG9jYWwgdXNlciBpZC4gKiovCiAgICByZW1vdGVOYW1lOiBzdHJpbmc7CgogICAgLyoqIFRoZSBwb3J0YWwgdGhhdCB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqLwogICAgcG9ydGFsOiBzdHJpbmc7CiAgICAKICAgIC8qKiBUaGUgZGltZW5zaW9uIHRoYXQgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKiovCiAgICBkaW1lbnNpb246IHN0cmluZzsKCiAgICAvKiogVGhlIGNvbG9yIG9mIHRoZSB1c2VyIGNhbWVyYS4gKi8KICAgIGNvbG9yOiBzdHJpbmc7CgogICAgLyoqIFRoZSB0eXBlIG9mIHRoZSBjYW1lcmEgdGhhdCB0aGUgZGF0YSBpcyBmb3IuICovCiAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnIHwgJ29ydGhvZ3JhcGhpYyc7CiAgICAKICAgIC8qKiBUaGUgcG9zaXRpb24gb2YgdGhlIGNhbWVyYS4gKiovCiAgICBwb3NpdGlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyIH07CgogICAgLyoqIFRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uIG9mIHRoZSBjYW1lcmEuICoqLwogICAgcXVhdGVybmlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIgfTsKCiAgICAvKiogVGhlIHpvb20gdmxhdWUgdGhhdCB0aGUgY2FtZXJhIGlzIGF0LiBUaGlzIGlzIG9ubHkgcmVsZXZhbnQgZm9yIG9ydGhvZ3JhcGhpYyBjYW1lcmFzLiAgKi8KICAgIHpvb20/OiBudW1iZXI7Cn0nAOOkkaUM0AEHZW5hYmxlZAIEAOOkkaUM8jMFZmFsc2UnAOOkkaUM0AEab25BQlVzZXJDYW1lcmFEYXRhUmVjZWl2ZWQCBADjpJGlDPgzzTBAY29uc3QgY2FtZXJhRGF0YTogQUJVc2VyQ2FtZXJhRGF0YSA9IHRoYXQ7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW1lcmFEYXRhOmAsIGNhbWVyYURhdGEpCn0KCmNvbnN0IHNob3V0UmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChzaG91dCgnb25BQlVzZXJDYW1lcmFVcGRhdGUnLCBjYW1lcmFEYXRhKSk7CmNvbnN0IGNhbWVyYVVwZGF0ZWQgPSBzaG91dFJlc3VsdHMubGVuZ3RoID4gMCAmJiBzaG91dFJlc3VsdHMuc29tZShyID0+IHIudmFsdWUgPT09IHRydWUpOwoKaWYgKCFjYW1lcmFVcGRhdGVkKSB7CiAgICAvLyBUaGVyZSB3YXMgbm8gdXNlciBjYW1lcmEgdGhhdCBhY2NlcHRlZCB0aGUgdXBkYXRlLCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBvbmUuCgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1ha2UgdXNlciBjYW1lcmE6YCwgY2FtZXJhRGF0YSk7CiAgICB9CgogICAgY29uc3QgdXNlckNhbWVyYUJvdCA9IGNyZWF0ZSh7CiAgICAgICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgICAgIGFiQm90OiB0cnVlLAogICAgICAgIGFiVXNlckNhbWVyYTogdHJ1ZSwKICAgICAgICBtYW5hZ2VyOiBnZXRMaW5rKHRoaXNCb3QpLAogICAgICAgIGZvcm06ICdmcnVzdHVtJywKICAgICAgICBhbmNob3JQb2ludDogJ2NlbnRlcicsCiAgICAgICAgcmVtb3RlSWQ6IGNhbWVyYURhdGEucmVtb3RlSWQsCiAgICAgICAgcmVtb3RlTmFtZTogY2FtZXJhRGF0YS5yZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogY2FtZXJhRGF0YS5wb3J0YWwsCiAgICAgICAgZGltZW5zaW9uOiBjYW1lcmFEYXRhLmRpbWVuc2lvbiwKICAgICAgICBbY2FtZXJhRGF0YS5kaW1lbnNpb25dOiB0cnVlLAogICAgICAgIHBvaW50YWJsZTogZmFsc2UsCiAgICAgICAgbGFiZWxQb3NpdGlvbjogJ2Zsb2F0aW5nQmlsbGJvYXJkJywKICAgICAgICAvLyBsYWJlbFNpemU6IDAuMjgsCiAgICAgICAgLy8gbGFiZWxTaXplTW9kZTogJ2F1dG8nLAogICAgICAgIG9uQ3JlYXRlOiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkFCVXNlckNhbWVyYVVwZGF0ZTogTGlzdGVuZXJTdHJpbmcoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjYW1lcmFEYXRhOiBBQlVzZXJDYW1lcmFEYXRhID0gdGhhdDsKCiAgICAgICAgICAgIGlmICh0YWdzLmxhYmVsICE9PSBjYW1lcmFEYXRhLnJlbW90ZU5hbWUpIHsKICAgICAgICAgICAgICAgIHRhZ3MubGFiZWwgPSBjYW1lcmFEYXRhLnJlbW90ZU5hbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmNvbG9yICE9PSBjYW1lcmFEYXRhLmNvbG9yKSB7CiAgICAgICAgICAgICAgICB0YWdzLmNvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRhZ3MubGFiZWxGbG9hdGluZ0JhY2tncm91bmRDb2xvciAhPT0gY2FtZXJhRGF0YS5jb2xvcil7IAogICAgICAgICAgICAgICAgdGFncy5sYWJlbEZsb2F0aW5nQmFja2dyb3VuZENvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGluY29taW5nIHVwZGF0ZSBpcyBmb3IgdGhpcyBib3QuCiAgICAgICAgICAgIGlmIChjYW1lcmFEYXRhLnJlbW90ZUlkICE9PSB0YWdzLnJlbW90ZUlkIHx8CiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnBvcnRhbCAhPT0gdGFncy5wb3J0YWwgfHwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEuZGltZW5zaW9uICE9PSB0YWdzLmRpbWVuc2lvbgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ2xlYXIgb2xkIHRpbWVvdXQuCiAgICAgICAgICAgIGlmICh0aGlzQm90LnZhcnMudGltZW91dElkKSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc0JvdC52YXJzLnRpbWVvdXRJZCk7CiAgICAgICAgICAgICAgICB0aGlzQm90LnZhcnMudGltZW91dElkID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFthYlVzZXJDYW1lcmEuJHt0YWdOYW1lfSAoJHt0YWdzLnJlbW90ZU5hbWV9KV0gY2FtZXJhRGF0YTpgLCBjYW1lcmFEYXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2xhbXAwMSh0OiBudW1iZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21Ub1Qoem9vbTogbnVtYmVyLCB6b29tTWluOiBudW1iZXIsIHpvb21NYXg6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4sIHQ9MSBhdCB6b29tTWF4CiAgICAgICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5tYXgoem9vbSwgMWUtNik7CiAgICAgICAgICAgICAgICBjb25zdCBhID0gTWF0aC5sb2coem9vbU1pbik7CiAgICAgICAgICAgICAgICBjb25zdCBiID0gTWF0aC5sb2coem9vbU1heCk7CiAgICAgICAgICAgICAgICBjb25zdCB2ID0gKE1hdGgubG9nKHopIC0gYSkgLyAoYiAtIGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wMDEodik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxlcnAoYTogbnVtYmVyLCBiOiBudW1iZXIsIHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gT3B0aW9uYWwgc21vb3RoaW5nIHNvIGl0IGRvZXNu4oCZdCBmZWVsIGxpbmVhciAvIGhhcnNoOgogICAgICAgICAgICBmdW5jdGlvbiBzbW9vdGhzdGVwKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogKDMgLSAyICogdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHQ9MCBhdCB6b29tTWluICh6b29tZWQgb3V0KSwgdD0xIGF0IHpvb21NYXggKHpvb21lZCBpbikKICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlFYXNlKHQ6IG51bWJlciwgZXhwb25lbnQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gZXhwb25lbnQgPCAxIHNsb3dzIGRvd24gdGhlIOKAnG1vdmUgYXdheeKAnSB3aGVuIHpvb21pbmcgb3V0CiAgICAgICAgICAgICAgICAvLyAobWFrZXMgY3VydmUgZ2VudGxlciBuZWFyIHQ9MCkKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhzbW9vdGhzdGVwKHQpLCBleHBvbmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldFZpekNhbWVyYVBvc2UoCiAgICAgICAgICAgICAgICBjYW1lcmFQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH0sCiAgICAgICAgICAgICAgICBjYW1lcmFSb3RhdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyOyB3OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVR5cGU6ICdvcnRob2dyYXBoaWMnIHwgJ3BlcnNwZWN0aXZlJywKICAgICAgICAgICAgICAgIGNhbWVyYVpvb206IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICB6b29tTWluID0gMC40LAogICAgICAgICAgICAgICAgem9vbU1heCA9IDgwLAogICAgICAgICAgICAgICAgZmFyRGlzdCA9IDMwLAogICAgICAgICAgICAgICAgbmVhckRpc3QgPSAyLAogICAgICAgICAgICAgICAgZXhwb25lbnQgPSAwLjUsCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFZlY3RvcjMoY2FtZXJhUG9zaXRpb24ueCwgY2FtZXJhUG9zaXRpb24ueSwgY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCByb3Q7CiAgICAgICAgICAgICAgICBpZiAoKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24gfHwgY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24pICYmIGNhbWVyYVR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHsgCiAgICAgICAgICAgICAgICAgICAgcm90ID0gYXdhaXQgYWIubGlua3MudXRpbHMuY2FsY01hcFJvdGF0aW9uKHsgbWFwUG9zaXRpb246IGNhbWVyYVBvc2l0aW9uLCBhdXhSb3RhdGlvbjogbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSl9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcm90ID0gbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgZm9yd2FyZCA9IHJvdC5yb3RhdGVWZWN0b3IzKG5ldyBWZWN0b3IzKDAsIDEsIDApKS5ub3JtYWxpemUoKTsKCiAgICAgICAgICAgICAgICBpZiAoY2FtZXJhVHlwZSA9PT0gJ3BlcnNwZWN0aXZlJykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiBwb3MsIHJvdGF0aW9uOiByb3QgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCB6b29tID0gTWF0aC5tYXgoY2FtZXJhWm9vbSA/PyAxMCwgMWUtNik7CgogICAgICAgICAgICAgICAgbGV0IHQgPSB6b29tVG9UKHpvb20sIHpvb21NaW4sIHpvb21NYXgpOwogICAgICAgICAgICAgICAgdCA9IGFwcGx5RWFzZSh0LCBleHBvbmVudCk7CgogICAgICAgICAgICAgICAgY29uc3QgZCA9IGxlcnAoZmFyRGlzdCwgbmVhckRpc3QsIHQpOwogICAgICAgICAgICAgICAgY29uc3Qgdml6UG9zID0gcG9zLnN1YnRyYWN0KGZvcndhcmQubXVsdGlwbHlTY2FsYXIoZCkpOwoKICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiB2aXpQb3MsIHJvdGF0aW9uOiByb3QsIGRlYnVnOiB7IHQsIGQsIHpvb20gfSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBwb3NlID0gYXdhaXQgZ2V0Vml6Q2FtZXJhUG9zZSgKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucG9zaXRpb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnF1YXRlcm5pb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmNhbWVyYVR5cGUsCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnpvb20sCiAgICAgICAgICAgICAgICAwLjQsCiAgICAgICAgICAgICAgICA4MCwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAtNDI3LAogICAgICAgICAgICAgICAgMC4xLAogICAgICAgICAgICApOwoKICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBwb3NlLnBvc2l0aW9uOwogICAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IHBvc2Uucm90YXRpb247CgogICAgICAgICAgICB0YWdzW3RhZ3MuZGltZW5zaW9uICsgJ1Bvc2l0aW9uJ10gPSBwb3NpdGlvbjsKICAgICAgICAgICAgdGFnc1t0YWdzLmRpbWVuc2lvbiArICdSb3RhdGlvbiddID0gcm90YXRpb247CgogICAgICAgICAgICAvLyBTZXQgbmV3IHRpbWVvdXQuCiAgICAgICAgICAgIHRoaXNCb3QudmFycy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGRlc3Ryb3kodGhpc0JvdCksIGxpbmtzLm1hbmFnZXIudGFncy5jYW1lcmFCb3RUaW1lb3V0TVMpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSksCiAgICAgICAgb25EZXN0cm95OiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSkKCiAgICAvLyBEaXJlY3RseSBjYWxsIG9uQUJVc2VyQ2FtZXJhVXBkYXRlIHRoZSBmaXJzdCB0aW1lIHdlIG1ha2UgYSBuZXcgdXNlciBjYW1lcmEgYm90LgogICAgYXdhaXQgdXNlckNhbWVyYUJvdC5vbkFCVXNlckNhbWVyYVVwZGF0ZShjYW1lcmFEYXRhKTsKfScA46SRpQzQARJjYW1lcmFCb3RUaW1lb3V0TVMCBADjpJGlDMBkBDMwMDAnAOOkkaUM0AEJYWJWZXJzaW9uAgQA46SRpQzFZAUxMC4zNQA="}]}