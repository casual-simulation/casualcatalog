{"version":2,"updates":[{"id":0,"timestamp":1766178416896,"update":"ATSSl5HaCAAnAQRib3RzJDdkM2ExNzAzLTBhMDEtNDY2Yi05NzRmLWFlOWYxMDAxYWM3OAEnAJKXkdoIAAZzeXN0ZW0CBACSl5HaCAETYWIucHJlc2VuY2UudmVyc2lvbicAkpeR2ggAFmFiUHJlc2VuY2VNaW5vclZlcnNpb24CBACSl5HaCBUBMicAkpeR2ggAFmFiUHJlc2VuY2VNYWpvclZlcnNpb24CBACSl5HaCBcBMCcAkpeR2ggACGFiSWdub3JlAgQAkpeR2ggZBHRydWUnAJKXkdoIAAphYlByZXNlbmNlAgQAkpeR2ggeBHRydWUnAJKXkdoIAARmb3JtAgQAkpeR2ggjB25vdGhpbmcnAJKXkdoIAA1vblNraWxsVXBkYXRlAgQAkpeR2ggrngFAY29uc3QgdmVyc2lvblN0cmluZyA9IHRhZ3MuYWJQcmVzZW5jZU1ham9yVmVyc2lvbiArICIuIiArIHRhZ3MuYWJQcmVzZW5jZU1pbm9yVmVyc2lvbjsKCmNvbnNvbGUubG9nKCJbQUJQcmVzZW5jZV0gTG9hZGVkIEFCIHNoZWxsIHZlcnNpb24gIiArIHZlcnNpb25TdHJpbmcpOycAkpeR2ggACWFiVmVyc2lvbgIEAJKXkdoIygEFMTAuMzUnAQRib3RzJDg3ZTk1MzQyLWU0NTYtNGI2My05ODkxLWQ3YTkyMWFkM2VlNwEnAJKXkdoI0AEGc3lzdGVtAgQAkpeR2gjRARJhYi5wcmVzZW5jZS5jYW1lcmEnAJKXkdoI0AEKYWJQcmVzZW5jZQIEAJKXkdoI5AEEdHJ1ZScAkpeR2gjQAQhhYklnbm9yZQIEAJKXkdoI6QEEdHJ1ZScAkpeR2gjQAQRmb3JtAgQAkpeR2gjuAQdub3RoaW5nJwCSl5HaCNABCm9uQm90QWRkZWQCBACSl5HaCPYBR0BpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkgJiYgdGFncy5lbmFibGVkKSB7CiAgICB0aGlzQm90LnN0YXJ0VGljaygpOwp9JwCSl5HaCNABBHRpY2sCBACSl5HaCL4C+RtAaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnRgKTsKfQoKaWYgKCFjb25maWdCb3QpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBjb25maWdCb3QgdG8gYmUgcmVhZHkuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghZ2xvYmFsVGhpcy5hYikgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgZm9yIGFiIHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHNoZWV0IHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gbGVhdmUgc3lzdGVtIHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gVGhlIG5hbWUgdGhhdCB0aGlzIHJlbW90ZSBpcyB0byBiZSBrbm93biBhcyB0byBvdGhlciB1c2Vycy4KbGV0IHJlbW90ZU5hbWUgPSBjb25maWdCb3QuaWQuc3Vic3RyaW5nKDAsNSk7CmlmIChhdXRoQm90ICYmIGF1dGhCb3QudGFncy5uYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYXV0aEJvdC50YWdzLm5hbWU7Cn0gZWxzZSBpZiAoYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lOwp9CgovLyBHZXQgbGlzdCBvZiByZWxldmFudCBjYW1lcmFzIGZyb20gcG9ydGFscyAmIGRpbWVuc2lvbnMgdGhhdCB0aGUgdXNlciBpcyBhY3RpdmUgaW4uCmNvbnN0IGNhbWVyYURhdGFUb0VtaXQ6IEFCVXNlckNhbWVyYURhdGFbXSA9IFtdOwoKLy8gTWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgZ3JpZCBwb3J0YWwgc28gb25seSBzZW5kIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goewogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtYXAnLAogICAgICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5tYXBQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IG1hcFBvcnRhbEJvdC50YWdzLmNhbWVyYU1hcFBvc2l0aW9uLAogICAgICAgIHF1YXRlcm5pb246IG1hcFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICB9KTsKfSBlbHNlIGlmIChjb25maWdCb3QudGFncy5ncmlkUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnZ3JpZCcsCiAgICAgICAgY2FtZXJhVHlwZTogZ3JpZFBvcnRhbEJvdC50YWdzLnBvcnRhbENhbWVyYVR5cGUgPz8gJ29ydGhvZ3JhcGhpYycsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUG9zaXRpb24sCiAgICAgICAgcXVhdGVybmlvbjogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVpvb20sCiAgICB9KTsKfQoKLy8gTWluaSBtYXAgcG9ydGFsIHNpdHMgb24gdG9wIHRoZSBtaW5pIG1hcCBwb3J0YWwgc28gb25seSBzZW5kIG1pbmkgbWFwIHBvcnRhbCBjYW1lcmEgaWYgaXRzIGVuYWJsZWQuCmlmIChjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWluaU1hcCcsCiAgICAgICAgY2FtZXJhVHlwZTogJ3BlcnNwZWN0aXZlJywKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IG1pbmlNYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgIH0pOwp9IGVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWluaUdyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA/PyAnb3J0aG9ncmFwaGljJywKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVBvc2l0aW9uLAogICAgICAgIHF1YXRlcm5pb246IG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgICAgICB6b29tOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVpvb20sCiAgICB9KTsKfQoKaWYgKGNhbWVyYURhdGFUb0VtaXQubGVuZ3RoID09PSAwKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyB0byBiZSBpbiBhIHBvcnRhbCB3aXRoIGEgY2FtZXJhLmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW1lcmFEYXRhVG9FbWl0OmAsIGNhbWVyYURhdGFUb0VtaXQpOwp9Cgpjb25zdCBvdGhlclJlbW90ZXMgPSAoYXdhaXQgb3MucmVtb3RlcygpKS5maWx0ZXIoaWQgPT4gaWQgIT09IGNvbmZpZ0JvdC5pZCk7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBvdGhlclJlbW90ZXM6YCwgb3RoZXJSZW1vdGVzKTsKfQoKaWYgKG90aGVyUmVtb3Rlcy5sZW5ndGggPiAwKSB7CiAgICBzZW5kUmVtb3RlRGF0YShvdGhlclJlbW90ZXMsICdhYl91c2VyX2NhbWVyYV9kYXRhJywgY2FtZXJhRGF0YVRvRW1pdCk7Cn0KJwCSl5HaCNABCXN0YXJ0VGljawIEAJKXkdoIrh7KBEBpZiAobWFza3MudGlja0ludGVydmFsSWQpIHsKICAgIHJldHVybjsKfQoKaWYgKCFvcy5pc0NvbGxhYm9yYXRpdmUoKSkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGNhbmNlbGluZyB0aWNrIHN0YXJ0IOKAlCB0aGUgaW5zdCBtdXN0IGJlIGNvbGxhYm9yYXRpdmUuYCk7CiAgICB9CgogICAgcmV0dXJuOwp9CgppZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGNhbmNlbGluZyB0aWNrIHN0YXJ0IOKAlCBjYW1lcmEgcHJlc2VuZWNlIGlzIGRpc2FibGVkLmApOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnQgaW50ZXJ2YWxgKTsKfQoKbWFza3MudGlja0ludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB3aGlzcGVyKHRoaXNCb3QsICd0aWNrJyksIHRhZ3MudGlja0ludGVydmFsTVMpOwp0aGlzQm90LnRpY2soKTsnAJKXkdoI0AEIc3RvcFRpY2sCBACSl5HaCPUixwFAaWYgKG1hc2tzLnRpY2tJbnRlcnZhbElkKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RvcCBpbnRlcnZhbGApOwogICAgfQoKICAgIGNsZWFySW50ZXJ2YWwobWFza3MudGlja0ludGVydmFsSWQpOwogICAgbWFza3MudGlja0ludGVydmFsSWQgPSBudWxsOwp9JwCSl5HaCNABDnRpY2tJbnRlcnZhbE1TAgQAkpeR2gi9JAQxNTAwJwCSl5HaCNABBWRlYnVnAgQAkpeR2gjCJAVmYWxzZScAkpeR2gjQAQxvbkJvdENoYW5nZWQCBACSl5HaCMgkqgJAaWYgKHRoYXQudGFncy5pbmNsdWRlcygndGlja0ludGVydmFsTVMnKSkgewogICAgdGhpc0JvdC5zdG9wVGljaygpOwoKICAgIGlmIChvcy5pc0NvbGxhYm9yYXRpdmUoKSAmJiB0YWdzLmVuYWJsZWQpIHsKICAgICAgICB0aGlzQm90LnN0YXJ0VGljaygpOwogICAgfQp9IGVsc2UgaWYgKHRoYXQudGFncy5pbmNsdWRlcygnZW5hYmxlZCcpKSB7CiAgICBpZiAodGFncy5lbmFibGVkKSB7CiAgICAgICAgdGhpc0JvdC5zdGFydFRpY2soKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5zdG9wVGljaygpOwogICAgfQp9JwCSl5HaCNABDG9uUmVtb3RlRGF0YQIEAJKXkdoI8ybeA0BpZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5uYW1lID09PSAnYWJfdXNlcl9jYW1lcmFfZGF0YScpIHsKICAgIGNvbnN0IGRhdGE6IEFCVXNlckNhbWVyYURhdGEgfCBBQlVzZXJDYW1lcmFEYXRhW10gPSB0aGF0LnRoYXQ7CgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGFiX3VzZXJfY2FtZXJhX2RhdGEgZGF0YTpgLCBkYXRhKTsKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGlzQm90Lm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkKGRhdGFbaV0pOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhKTsKICAgIH0KfQonAJKXkdoI0AEFdHlwZXMCBACSl5HaCNIqqAbwn5OEaW50ZXJmYWNlIEFCVXNlckNhbWVyYURhdGEgewogICAgLyoqIFRoZSByZW1vdGUgaWQgb2YgdGhlIHVzZXIgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKi8KICAgIHJlbW90ZUlkOiBzdHJpbmc7CgogICAgLyoqIENhbiBlaXRoZXIgYmUgdXNlcidzIGRpc3BsYXkgbmFtZSBvciBhIHNob3J0ZW5lZCBsb2NhbCB1c2VyIGlkLiAqKi8KICAgIHJlbW90ZU5hbWU6IHN0cmluZzsKCiAgICAvKiogVGhlIHBvcnRhbCB0aGF0IHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICovCiAgICBwb3J0YWw6IHN0cmluZzsKICAgIAogICAgLyoqIFRoZSBkaW1lbnNpb24gdGhhdCB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqKi8KICAgIGRpbWVuc2lvbjogc3RyaW5nOwoKICAgIC8qKiBUaGUgdHlwZSBvZiB0aGUgY2FtZXJhIHRoYXQgdGhlIGRhdGEgaXMgZm9yLiAqLwogICAgY2FtZXJhVHlwZTogJ3BlcnNwZWN0aXZlJyB8ICdvcnRob2dyYXBoaWMnOwogICAgCiAgICAvKiogVGhlIHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEuICoqLwogICAgcG9zaXRpb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciB9OwoKICAgIC8qKiBUaGUgcm90YXRpb24gcXVhdGVybmlvbiBvZiB0aGUgY2FtZXJhLiAqKi8KICAgIHF1YXRlcm5pb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgdzogbnVtYmVyIH07CgogICAgLyoqIFRoZSB6b29tIHZsYXVlIHRoYXQgdGhlIGNhbWVyYSBpcyBhdC4gVGhpcyBpcyBvbmx5IHJlbGV2YW50IGZvciBvcnRob2dyYXBoaWMgY2FtZXJhcy4gICovCiAgICB6b29tPzogbnVtYmVyOwp9JwCSl5HaCNABB2VuYWJsZWQCBACSl5HaCPkwBWZhbHNlJwCSl5HaCNABGm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkAgQAkpeR2gj/MLUuQGNvbnN0IGNhbWVyYURhdGE6IEFCVXNlckNhbWVyYURhdGEgPSB0aGF0OwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YTpgLCBjYW1lcmFEYXRhKQp9Cgpjb25zdCBzaG91dFJlc3VsdHMgPSBzaG91dCgnb25BQlVzZXJDYW1lcmFVcGRhdGUnLCBjYW1lcmFEYXRhKTsKY29uc3QgY2FtZXJhVXBkYXRlZCA9IHNob3V0UmVzdWx0cy5sZW5ndGggPiAwICYmIHNob3V0UmVzdWx0cy5zb21lKHIgPT4gciA9PT0gdHJ1ZSk7CgppZiAoIWNhbWVyYVVwZGF0ZWQpIHsKICAgIC8vIFRoZXJlIHdhcyBubyB1c2VyIGNhbWVyYSB0aGF0IGFjY2VwdGVkIHRoZSB1cGRhdGUsIG5lZWQgdG8gY3JlYXRlIGEgbmV3IG9uZS4KCiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gbWFrZSB1c2VyIGNhbWVyYTpgLCBjYW1lcmFEYXRhKTsKICAgIH0KCiAgICAvLyBTZXQgcmFuZG9tIHNlZWQgc28gdGhhdCB0aGUgInJhbmRvbSIgZ2VuZXJhdGVkIGNvbG9yIGlzIGRldGVybWluaXN0aWMgYmFzZWQgb24gcmVtb3RlSWQuCiAgICBtYXRoLnNldFJhbmRvbVNlZWQoY2FtZXJhRGF0YS5yZW1vdGVJZCk7CgogICAgY29uc3QgdXNlckNhbWVyYUJvdCA9IGNyZWF0ZSh7CiAgICAgICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgICAgIGFiQm90OiB0cnVlLAogICAgICAgIGFiVXNlckNhbWVyYTogdHJ1ZSwKICAgICAgICBmb3JtOiAnZnJ1c3R1bScsCiAgICAgICAgY29sb3I6IGByZ2IoJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSlgLAogICAgICAgIGFuY2hvclBvaW50OiAnY2VudGVyJywKICAgICAgICBkZWJ1ZzogdGFncy5kZWJ1ZywKICAgICAgICByZW1vdGVJZDogY2FtZXJhRGF0YS5yZW1vdGVJZCwKICAgICAgICByZW1vdGVOYW1lOiBjYW1lcmFEYXRhLnJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiBjYW1lcmFEYXRhLnBvcnRhbCwKICAgICAgICBkaW1lbnNpb246IGNhbWVyYURhdGEuZGltZW5zaW9uLAogICAgICAgIFtjYW1lcmFEYXRhLmRpbWVuc2lvbl06IHRydWUsCiAgICAgICAgcG9pbnRhYmxlOiBmYWxzZSwKICAgICAgICB0aW1lb3V0TVM6IHRhZ3MuY2FtZXJhQm90VGltZW91dE1TLAogICAgICAgIG9uQ3JlYXRlOiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FiVXNlckNhbWVyYS4ke3RhZ05hbWV9ICgke3RhZ3MucmVtb3RlTmFtZX0pXWApOwogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgb25BQlVzZXJDYW1lcmFVcGRhdGU6IExpc3RlbmVyU3RyaW5nKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgY2FtZXJhRGF0YTogQUJVc2VyQ2FtZXJhRGF0YSA9IHRoYXQ7CgogICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaW5jb21pbmcgdXBkYXRlIGlzIGZvciB0aGlzIGJvdC4KICAgICAgICAgICAgaWYgKGNhbWVyYURhdGEucmVtb3RlSWQgIT09IHRhZ3MucmVtb3RlSWQgfHwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucG9ydGFsICE9PSB0YWdzLnBvcnRhbCB8fAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5kaW1lbnNpb24gIT09IHRhZ3MuZGltZW5zaW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDbGVhciBvbGQgdGltZW91dC4KICAgICAgICAgICAgaWYgKHRoaXNCb3QudmFycy50aW1lb3V0SWQpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzQm90LnZhcnMudGltZW91dElkKTsKICAgICAgICAgICAgICAgIHRoaXNCb3QudmFycy50aW1lb3V0SWQgPSBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFthYlVzZXJDYW1lcmEuJHt0YWdOYW1lfSAoJHt0YWdzLnJlbW90ZU5hbWV9KV0gY2FtZXJhRGF0YTpgLCBjYW1lcmFEYXRhKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2xhbXAwMSh0OiBudW1iZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21Ub1Qoem9vbTogbnVtYmVyLCB6b29tTWluOiBudW1iZXIsIHpvb21NYXg6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4sIHQ9MSBhdCB6b29tTWF4CiAgICAgICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5tYXgoem9vbSwgMWUtNik7CiAgICAgICAgICAgICAgICBjb25zdCBhID0gTWF0aC5sb2coem9vbU1pbik7CiAgICAgICAgICAgICAgICBjb25zdCBiID0gTWF0aC5sb2coem9vbU1heCk7CiAgICAgICAgICAgICAgICBjb25zdCB2ID0gKE1hdGgubG9nKHopIC0gYSkgLyAoYiAtIGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wMDEodik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxlcnAoYTogbnVtYmVyLCBiOiBudW1iZXIsIHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gT3B0aW9uYWwgc21vb3RoaW5nIHNvIGl0IGRvZXNu4oCZdCBmZWVsIGxpbmVhciAvIGhhcnNoOgogICAgICAgICAgICBmdW5jdGlvbiBzbW9vdGhzdGVwKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogKDMgLSAyICogdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHQ9MCBhdCB6b29tTWluICh6b29tZWQgb3V0KSwgdD0xIGF0IHpvb21NYXggKHpvb21lZCBpbikKICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlFYXNlKHQ6IG51bWJlciwgZXhwb25lbnQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gZXhwb25lbnQgPCAxIHNsb3dzIGRvd24gdGhlIOKAnG1vdmUgYXdheeKAnSB3aGVuIHpvb21pbmcgb3V0CiAgICAgICAgICAgICAgICAvLyAobWFrZXMgY3VydmUgZ2VudGxlciBuZWFyIHQ9MCkKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhzbW9vdGhzdGVwKHQpLCBleHBvbmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldFZpekNhbWVyYVBvc2UoCiAgICAgICAgICAgICAgICBjYW1lcmFQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH0sCiAgICAgICAgICAgICAgICBjYW1lcmFSb3RhdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyOyB3OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVR5cGU6ICdvcnRob2dyYXBoaWMnIHwgJ3BlcnNwZWN0aXZlJywKICAgICAgICAgICAgICAgIGNhbWVyYVpvb206IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICB6b29tTWluID0gMC40LAogICAgICAgICAgICAgICAgem9vbU1heCA9IDgwLAogICAgICAgICAgICAgICAgZmFyRGlzdCA9IDMwLAogICAgICAgICAgICAgICAgbmVhckRpc3QgPSAyLAogICAgICAgICAgICAgICAgZXhwb25lbnQgPSAwLjUsCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFZlY3RvcjMoY2FtZXJhUG9zaXRpb24ueCwgY2FtZXJhUG9zaXRpb24ueSwgY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCByb3Q7CiAgICAgICAgICAgICAgICBpZiAoKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24gfHwgY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24pICYmIGNhbWVyYVR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHsgCiAgICAgICAgICAgICAgICAgICAgcm90ID0gYXdhaXQgYWIubGlua3MudXRpbHMuY2FsY01hcFJvdGF0aW9uKHsgbWFwUG9zaXRpb246IGNhbWVyYVBvc2l0aW9uLCBhdXhSb3RhdGlvbjogbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSl9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcm90ID0gbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYHJvdDpgICxyb3QpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGZvcndhcmQgPSByb3Qucm90YXRlVmVjdG9yMyhuZXcgVmVjdG9yMygwLCAxLCAwKSkubm9ybWFsaXplKCk7CgogICAgICAgICAgICAgICAgaWYgKGNhbWVyYVR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogcG9zLCByb3RhdGlvbjogcm90IH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3Qgem9vbSA9IE1hdGgubWF4KGNhbWVyYVpvb20gPz8gMTAsIDFlLTYpOwoKICAgICAgICAgICAgICAgIGxldCB0ID0gem9vbVRvVCh6b29tLCB6b29tTWluLCB6b29tTWF4KTsKICAgICAgICAgICAgICAgIHQgPSBhcHBseUVhc2UodCwgZXhwb25lbnQpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBsZXJwKGZhckRpc3QsIG5lYXJEaXN0LCB0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHZpelBvcyA9IHBvcy5zdWJ0cmFjdChmb3J3YXJkLm11bHRpcGx5U2NhbGFyKGQpKTsKCiAgICAgICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogdml6UG9zLCByb3RhdGlvbjogcm90LCBkZWJ1ZzogeyB0LCBkLCB6b29tIH0gfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgcG9zZSA9IGF3YWl0IGdldFZpekNhbWVyYVBvc2UoCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5xdWF0ZXJuaW9uLAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5jYW1lcmFUeXBlLAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS56b29tLAogICAgICAgICAgICAgICAgMC40LAogICAgICAgICAgICAgICAgODAsCiAgICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgICAgLTQyNywKICAgICAgICAgICAgICAgIDAuMSwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcG9zZS5wb3NpdGlvbjsKICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSBwb3NlLnJvdGF0aW9uOwoKICAgICAgICAgICAgdGFnc1t0YWdzLmRpbWVuc2lvbiArICdQb3NpdGlvbiddID0gcG9zaXRpb247CiAgICAgICAgICAgIHRhZ3NbdGFncy5kaW1lbnNpb24gKyAnUm90YXRpb24nXSA9IHJvdGF0aW9uOwoKICAgICAgICAgICAgLy8gU2V0IG5ldyB0aW1lb3V0LgogICAgICAgICAgICB0aGlzQm90LnZhcnMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBkZXN0cm95KHRoaXNCb3QpLCB0YWdzLnRpbWVvdXRNUyk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KSwKICAgICAgICBvbkRlc3Ryb3k6IExpc3RlbmVyU3RyaW5nKCgpID0+IHsKICAgICAgICAgICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSkKCiAgICAvLyBEaXJlY3RseSBjYWxsIG9uQUJVc2VyQ2FtZXJhVXBkYXRlIHRoZSBmaXJzdCB0aW1lIHdlIG1ha2UgYSBuZXcgdXNlciBjYW1lcmEgYm90LgogICAgdXNlckNhbWVyYUJvdC5vbkFCVXNlckNhbWVyYVVwZGF0ZShjYW1lcmFEYXRhKTsKfScAkpeR2gjQARJjYW1lcmFCb3RUaW1lb3V0TVMCBACSl5HaCK9fBDMwMDAnAJKXkdoI0AEJYWJWZXJzaW9uAgQAkpeR2gi0XwUxMC4zNQA="}]}