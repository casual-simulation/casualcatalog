{"version":2,"updates":[{"id":0,"timestamp":1767033023066,"update":"ATTBpPaqAgAnAQRib3RzJDdkM2ExNzAzLTBhMDEtNDY2Yi05NzRmLWFlOWYxMDAxYWM3OAEnAMGk9qoCAAZzeXN0ZW0CBADBpPaqAgETYWIucHJlc2VuY2UudmVyc2lvbicAwaT2qgIAFmFiUHJlc2VuY2VNYWpvclZlcnNpb24CBADBpPaqAhUBMCcAwaT2qgIACGFiSWdub3JlAgQAwaT2qgIXBHRydWUnAMGk9qoCAAphYlByZXNlbmNlAgQAwaT2qgIcBHRydWUnAMGk9qoCAARmb3JtAgQAwaT2qgIhB25vdGhpbmcnAMGk9qoCAA1vblNraWxsVXBkYXRlAgQAwaT2qgIpngFAY29uc3QgdmVyc2lvblN0cmluZyA9IHRhZ3MuYWJQcmVzZW5jZU1ham9yVmVyc2lvbiArICIuIiArIHRhZ3MuYWJQcmVzZW5jZU1pbm9yVmVyc2lvbjsKCmNvbnNvbGUubG9nKCJbQUJQcmVzZW5jZV0gTG9hZGVkIEFCIHNoZWxsIHZlcnNpb24gIiArIHZlcnNpb25TdHJpbmcpOycAwaT2qgIACWFiVmVyc2lvbgIEAMGk9qoCyAEFMTAuMzUnAMGk9qoCABZhYlByZXNlbmNlTWlub3JWZXJzaW9uAgQAwaT2qgLOAQEzJwEEYm90cyQ4N2U5NTM0Mi1lNDU2LTRiNjMtOTg5MS1kN2E5MjFhZDNlZTcBJwDBpPaqAtABBnN5c3RlbQIEAMGk9qoC0QESYWIucHJlc2VuY2UuY2FtZXJhJwDBpPaqAtABCmFiUHJlc2VuY2UCBADBpPaqAuQBBHRydWUnAMGk9qoC0AEIYWJJZ25vcmUCBADBpPaqAukBBHRydWUnAMGk9qoC0AEEZm9ybQIEAMGk9qoC7gEHbm90aGluZycAwaT2qgLQAQpvbkJvdEFkZGVkAgQAwaT2qgL2AUdAaWYgKG9zLmlzQ29sbGFib3JhdGl2ZSgpICYmIHRhZ3MuZW5hYmxlZCkgewogICAgdGhpc0JvdC5zdGFydFRpY2soKTsKfScAwaT2qgLQAQR0aWNrAgQAwaT2qgK+AvkbQGlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0YXJ0YCk7Cn0KCmlmICghY29uZmlnQm90KSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyBmb3IgY29uZmlnQm90IHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoIWdsb2JhbFRoaXMuYWIpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBhYiB0byBiZSByZWFkeS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyB0byBsZWF2ZSBzaGVldCBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmIChjb25maWdCb3QudGFncy5zeXN0ZW1Qb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHN5c3RlbSBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCi8vIFRoZSBuYW1lIHRoYXQgdGhpcyByZW1vdGUgaXMgdG8gYmUga25vd24gYXMgdG8gb3RoZXIgdXNlcnMuCmxldCByZW1vdGVOYW1lID0gY29uZmlnQm90LmlkLnN1YnN0cmluZygwLDUpOwppZiAoYXV0aEJvdCAmJiBhdXRoQm90LnRhZ3MubmFtZSkgewogICAgcmVtb3RlTmFtZSA9IGF1dGhCb3QudGFncy5uYW1lOwp9IGVsc2UgaWYgKGFiLmxpbmtzLmNvbnNvbGUubWFza3MucHJlZmVycmVkTmFtZSkgewogICAgcmVtb3RlTmFtZSA9IGFiLmxpbmtzLmNvbnNvbGUubWFza3MucHJlZmVycmVkTmFtZTsKfQoKLy8gR2V0IGxpc3Qgb2YgcmVsZXZhbnQgY2FtZXJhcyBmcm9tIHBvcnRhbHMgJiBkaW1lbnNpb25zIHRoYXQgdGhlIHVzZXIgaXMgYWN0aXZlIGluLgpjb25zdCBjYW1lcmFEYXRhVG9FbWl0OiBBQlVzZXJDYW1lcmFEYXRhW10gPSBbXTsKCi8vIE1hcCBwb3J0YWwgc2l0cyBvbiB0b3AgdGhlIGdyaWQgcG9ydGFsIHNvIG9ubHkgc2VuZCBtYXAgcG9ydGFsIGNhbWVyYSBpZiBpdHMgZW5hYmxlZC4KaWYgKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWFwJywKICAgICAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgfSk7Cn0gZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ2dyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDYW1lcmFUeXBlID8/ICdvcnRob2dyYXBoaWMnLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVBvc2l0aW9uLAogICAgICAgIHF1YXRlcm5pb246IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgICAgIHpvb206IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCi8vIE1pbmkgbWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgbWluaSBtYXAgcG9ydGFsIHNvIG9ubHkgc2VuZCBtaW5pIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ21pbmlNYXAnLAogICAgICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhTWFwUG9zaXRpb24sCiAgICAgICAgcXVhdGVybmlvbjogbWluaU1hcFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICB9KTsKfSBlbHNlIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ21pbmlHcmlkJywKICAgICAgICBjYW1lcmFUeXBlOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLnBvcnRhbENhbWVyYVR5cGUgPz8gJ29ydGhvZ3JhcGhpYycsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCmlmIChjYW1lcmFEYXRhVG9FbWl0Lmxlbmd0aCA9PT0gMCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gYmUgaW4gYSBwb3J0YWwgd2l0aCBhIGNhbWVyYS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YVRvRW1pdDpgLCBjYW1lcmFEYXRhVG9FbWl0KTsKfQoKY29uc3Qgb3RoZXJSZW1vdGVzID0gKGF3YWl0IG9zLnJlbW90ZXMoKSkuZmlsdGVyKGlkID0+IGlkICE9PSBjb25maWdCb3QuaWQpOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gb3RoZXJSZW1vdGVzOmAsIG90aGVyUmVtb3Rlcyk7Cn0KCmlmIChvdGhlclJlbW90ZXMubGVuZ3RoID4gMCkgewogICAgc2VuZFJlbW90ZURhdGEob3RoZXJSZW1vdGVzLCAnYWJfdXNlcl9jYW1lcmFfZGF0YScsIGNhbWVyYURhdGFUb0VtaXQpOwp9CicAwaT2qgLQAQlzdGFydFRpY2sCBADBpPaqAq4eygRAaWYgKG1hc2tzLnRpY2tJbnRlcnZhbElkKSB7CiAgICByZXR1cm47Cn0KCmlmICghb3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgdGhlIGluc3QgbXVzdCBiZSBjb2xsYWJvcmF0aXZlLmApOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgY2FtZXJhIHByZXNlbmVjZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0YXJ0IGludGVydmFsYCk7Cn0KCm1hc2tzLnRpY2tJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gd2hpc3Blcih0aGlzQm90LCAndGljaycpLCB0YWdzLnRpY2tJbnRlcnZhbE1TKTsKdGhpc0JvdC50aWNrKCk7JwDBpPaqAtABCHN0b3BUaWNrAgQAwaT2qgL1IscBQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0b3AgaW50ZXJ2YWxgKTsKICAgIH0KCiAgICBjbGVhckludGVydmFsKG1hc2tzLnRpY2tJbnRlcnZhbElkKTsKICAgIG1hc2tzLnRpY2tJbnRlcnZhbElkID0gbnVsbDsKfScAwaT2qgLQAQ50aWNrSW50ZXJ2YWxNUwIEAMGk9qoCvSQEMTUwMCcAwaT2qgLQAQxvbkJvdENoYW5nZWQCBADBpPaqAsIkqgJAaWYgKHRoYXQudGFncy5pbmNsdWRlcygndGlja0ludGVydmFsTVMnKSkgewogICAgdGhpc0JvdC5zdG9wVGljaygpOwoKICAgIGlmIChvcy5pc0NvbGxhYm9yYXRpdmUoKSAmJiB0YWdzLmVuYWJsZWQpIHsKICAgICAgICB0aGlzQm90LnN0YXJ0VGljaygpOwogICAgfQp9IGVsc2UgaWYgKHRoYXQudGFncy5pbmNsdWRlcygnZW5hYmxlZCcpKSB7CiAgICBpZiAodGFncy5lbmFibGVkKSB7CiAgICAgICAgdGhpc0JvdC5zdGFydFRpY2soKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5zdG9wVGljaygpOwogICAgfQp9JwDBpPaqAtABDG9uUmVtb3RlRGF0YQIEAMGk9qoC7SbeA0BpZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5uYW1lID09PSAnYWJfdXNlcl9jYW1lcmFfZGF0YScpIHsKICAgIGNvbnN0IGRhdGE6IEFCVXNlckNhbWVyYURhdGEgfCBBQlVzZXJDYW1lcmFEYXRhW10gPSB0aGF0LnRoYXQ7CgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGFiX3VzZXJfY2FtZXJhX2RhdGEgZGF0YTpgLCBkYXRhKTsKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGlzQm90Lm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkKGRhdGFbaV0pOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhKTsKICAgIH0KfQonAMGk9qoC0AEFdHlwZXMCBADBpPaqAswqqAbwn5OEaW50ZXJmYWNlIEFCVXNlckNhbWVyYURhdGEgewogICAgLyoqIFRoZSByZW1vdGUgaWQgb2YgdGhlIHVzZXIgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKi8KICAgIHJlbW90ZUlkOiBzdHJpbmc7CgogICAgLyoqIENhbiBlaXRoZXIgYmUgdXNlcidzIGRpc3BsYXkgbmFtZSBvciBhIHNob3J0ZW5lZCBsb2NhbCB1c2VyIGlkLiAqKi8KICAgIHJlbW90ZU5hbWU6IHN0cmluZzsKCiAgICAvKiogVGhlIHBvcnRhbCB0aGF0IHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICovCiAgICBwb3J0YWw6IHN0cmluZzsKICAgIAogICAgLyoqIFRoZSBkaW1lbnNpb24gdGhhdCB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqKi8KICAgIGRpbWVuc2lvbjogc3RyaW5nOwoKICAgIC8qKiBUaGUgdHlwZSBvZiB0aGUgY2FtZXJhIHRoYXQgdGhlIGRhdGEgaXMgZm9yLiAqLwogICAgY2FtZXJhVHlwZTogJ3BlcnNwZWN0aXZlJyB8ICdvcnRob2dyYXBoaWMnOwogICAgCiAgICAvKiogVGhlIHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEuICoqLwogICAgcG9zaXRpb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciB9OwoKICAgIC8qKiBUaGUgcm90YXRpb24gcXVhdGVybmlvbiBvZiB0aGUgY2FtZXJhLiAqKi8KICAgIHF1YXRlcm5pb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgdzogbnVtYmVyIH07CgogICAgLyoqIFRoZSB6b29tIHZsYXVlIHRoYXQgdGhlIGNhbWVyYSBpcyBhdC4gVGhpcyBpcyBvbmx5IHJlbGV2YW50IGZvciBvcnRob2dyYXBoaWMgY2FtZXJhcy4gICovCiAgICB6b29tPzogbnVtYmVyOwp9JwDBpPaqAtABB2VuYWJsZWQCBADBpPaqAvMwBWZhbHNlJwDBpPaqAtABGm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkAgQAwaT2qgL5MKouQGNvbnN0IGNhbWVyYURhdGE6IEFCVXNlckNhbWVyYURhdGEgPSB0aGF0OwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YTpgLCBjYW1lcmFEYXRhKQp9Cgpjb25zdCBzaG91dFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoc2hvdXQoJ29uQUJVc2VyQ2FtZXJhVXBkYXRlJywgY2FtZXJhRGF0YSkpOwpjb25zdCBjYW1lcmFVcGRhdGVkID0gc2hvdXRSZXN1bHRzLmxlbmd0aCA+IDAgJiYgc2hvdXRSZXN1bHRzLnNvbWUociA9PiByLnZhbHVlID09PSB0cnVlKTsKCmlmICghY2FtZXJhVXBkYXRlZCkgewogICAgLy8gVGhlcmUgd2FzIG5vIHVzZXIgY2FtZXJhIHRoYXQgYWNjZXB0ZWQgdGhlIHVwZGF0ZSwgbmVlZCB0byBjcmVhdGUgYSBuZXcgb25lLgoKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBtYWtlIHVzZXIgY2FtZXJhOmAsIGNhbWVyYURhdGEpOwogICAgfQoKICAgIC8vIFNldCByYW5kb20gc2VlZCBzbyB0aGF0IHRoZSAicmFuZG9tIiBnZW5lcmF0ZWQgY29sb3IgaXMgZGV0ZXJtaW5pc3RpYyBiYXNlZCBvbiByZW1vdGVJZC4KICAgIG1hdGguc2V0UmFuZG9tU2VlZChjYW1lcmFEYXRhLnJlbW90ZUlkKTsKCiAgICBjb25zdCB1c2VyQ2FtZXJhQm90ID0gY3JlYXRlKHsKICAgICAgICBzcGFjZTogJ3RlbXBMb2NhbCcsCiAgICAgICAgYWJCb3Q6IHRydWUsCiAgICAgICAgYWJVc2VyQ2FtZXJhOiB0cnVlLAogICAgICAgIGZvcm06ICdmcnVzdHVtJywKICAgICAgICBjb2xvcjogYHJnYigke21hdGgucmFuZG9tSW50KDAsIDI1NSl9LCAke21hdGgucmFuZG9tSW50KDAsIDI1NSl9LCAke21hdGgucmFuZG9tSW50KDAsIDI1NSl9KWAsCiAgICAgICAgYW5jaG9yUG9pbnQ6ICdjZW50ZXInLAogICAgICAgIGRlYnVnOiB0YWdzLmRlYnVnLAogICAgICAgIHJlbW90ZUlkOiBjYW1lcmFEYXRhLnJlbW90ZUlkLAogICAgICAgIHJlbW90ZU5hbWU6IGNhbWVyYURhdGEucmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6IGNhbWVyYURhdGEucG9ydGFsLAogICAgICAgIGRpbWVuc2lvbjogY2FtZXJhRGF0YS5kaW1lbnNpb24sCiAgICAgICAgW2NhbWVyYURhdGEuZGltZW5zaW9uXTogdHJ1ZSwKICAgICAgICBwb2ludGFibGU6IGZhbHNlLAogICAgICAgIHRpbWVvdXRNUzogdGFncy5jYW1lcmFCb3RUaW1lb3V0TVMsCiAgICAgICAgb25DcmVhdGU6IExpc3RlbmVyU3RyaW5nKCgpID0+IHsKICAgICAgICAgICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkFCVXNlckNhbWVyYVVwZGF0ZTogTGlzdGVuZXJTdHJpbmcoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjYW1lcmFEYXRhOiBBQlVzZXJDYW1lcmFEYXRhID0gdGhhdDsKCiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbmNvbWluZyB1cGRhdGUgaXMgZm9yIHRoaXMgYm90LgogICAgICAgICAgICBpZiAoY2FtZXJhRGF0YS5yZW1vdGVJZCAhPT0gdGFncy5yZW1vdGVJZCB8fAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5wb3J0YWwgIT09IHRhZ3MucG9ydGFsIHx8CiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmRpbWVuc2lvbiAhPT0gdGFncy5kaW1lbnNpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENsZWFyIG9sZCB0aW1lb3V0LgogICAgICAgICAgICBpZiAodGhpc0JvdC52YXJzLnRpbWVvdXRJZCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNCb3QudmFycy50aW1lb3V0SWQpOwogICAgICAgICAgICAgICAgdGhpc0JvdC52YXJzLnRpbWVvdXRJZCA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FiVXNlckNhbWVyYS4ke3RhZ05hbWV9ICgke3RhZ3MucmVtb3RlTmFtZX0pXSBjYW1lcmFEYXRhOmAsIGNhbWVyYURhdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjbGFtcDAxKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gem9vbVRvVCh6b29tOiBudW1iZXIsIHpvb21NaW46IG51bWJlciwgem9vbU1heDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICAvLyB0PTAgYXQgem9vbU1pbiwgdD0xIGF0IHpvb21NYXgKICAgICAgICAgICAgICAgIGNvbnN0IHogPSBNYXRoLm1heCh6b29tLCAxZS02KTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBNYXRoLmxvZyh6b29tTWluKTsKICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBNYXRoLmxvZyh6b29tTWF4KTsKICAgICAgICAgICAgICAgIGNvbnN0IHYgPSAoTWF0aC5sb2coeikgLSBhKSAvIChiIC0gYSk7CiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAwMSh2KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgdDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYSArIChiIC0gYSkgKiB0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBPcHRpb25hbCBzbW9vdGhpbmcgc28gaXQgZG9lc27igJl0IGZlZWwgbGluZWFyIC8gaGFyc2g6CiAgICAgICAgICAgIGZ1bmN0aW9uIHNtb290aHN0ZXAodDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCAqIHQgKiAoMyAtIDIgKiB0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4gKHpvb21lZCBvdXQpLCB0PTEgYXQgem9vbU1heCAoem9vbWVkIGluKQogICAgICAgICAgICBmdW5jdGlvbiBhcHBseUVhc2UodDogbnVtYmVyLCBleHBvbmVudDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICAvLyBleHBvbmVudCA8IDEgc2xvd3MgZG93biB0aGUg4oCcbW92ZSBhd2F54oCdIHdoZW4gem9vbWluZyBvdXQKICAgICAgICAgICAgICAgIC8vIChtYWtlcyBjdXJ2ZSBnZW50bGVyIG5lYXIgdD0wKQogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KHNtb290aHN0ZXAodCksIGV4cG9uZW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0Vml6Q2FtZXJhUG9zZSgKICAgICAgICAgICAgICAgIGNhbWVyYVBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVJvdGF0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXI7IHc6IG51bWJlciB9LAogICAgICAgICAgICAgICAgY2FtZXJhVHlwZTogJ29ydGhvZ3JhcGhpYycgfCAncGVyc3BlY3RpdmUnLAogICAgICAgICAgICAgICAgY2FtZXJhWm9vbTogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHpvb21NaW4gPSAwLjQsCiAgICAgICAgICAgICAgICB6b29tTWF4ID0gODAsCiAgICAgICAgICAgICAgICBmYXJEaXN0ID0gMzAsCiAgICAgICAgICAgICAgICBuZWFyRGlzdCA9IDIsCiAgICAgICAgICAgICAgICBleHBvbmVudCA9IDAuNSwKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjdG9yMyhjYW1lcmFQb3NpdGlvbi54LCBjYW1lcmFQb3NpdGlvbi55LCBjYW1lcmFQb3NpdGlvbi56KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHJvdDsKICAgICAgICAgICAgICAgIGlmICgoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID09PSB0YWdzLmRpbWVuc2lvbiB8fCBjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsID09PSB0YWdzLmRpbWVuc2lvbikgJiYgY2FtZXJhVHlwZSA9PT0gJ3BlcnNwZWN0aXZlJykgeyAKICAgICAgICAgICAgICAgICAgICByb3QgPSBhd2FpdCBhYi5saW5rcy51dGlscy5jYWxjTWFwUm90YXRpb24oeyBtYXBQb3NpdGlvbjogY2FtZXJhUG9zaXRpb24sIGF1eFJvdGF0aW9uOiBuZXcgUm90YXRpb24oeyBxdWF0ZXJuaW9uOiBjYW1lcmFSb3RhdGlvbiB9KX0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByb3QgPSBuZXcgUm90YXRpb24oeyBxdWF0ZXJuaW9uOiBjYW1lcmFSb3RhdGlvbiB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBmb3J3YXJkID0gcm90LnJvdGF0ZVZlY3RvcjMobmV3IFZlY3RvcjMoMCwgMSwgMCkpLm5vcm1hbGl6ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChjYW1lcmFUeXBlID09PSAncGVyc3BlY3RpdmUnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcG9zaXRpb246IHBvcywgcm90YXRpb246IHJvdCB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnN0IHpvb20gPSBNYXRoLm1heChjYW1lcmFab29tID8/IDEwLCAxZS02KTsKCiAgICAgICAgICAgICAgICBsZXQgdCA9IHpvb21Ub1Qoem9vbSwgem9vbU1pbiwgem9vbU1heCk7CiAgICAgICAgICAgICAgICB0ID0gYXBwbHlFYXNlKHQsIGV4cG9uZW50KTsKCiAgICAgICAgICAgICAgICBjb25zdCBkID0gbGVycChmYXJEaXN0LCBuZWFyRGlzdCwgdCk7CiAgICAgICAgICAgICAgICBjb25zdCB2aXpQb3MgPSBwb3Muc3VidHJhY3QoZm9yd2FyZC5tdWx0aXBseVNjYWxhcihkKSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsgcG9zaXRpb246IHZpelBvcywgcm90YXRpb246IHJvdCwgZGVidWc6IHsgdCwgZCwgem9vbSB9IH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IHBvc2UgPSBhd2FpdCBnZXRWaXpDYW1lcmFQb3NlKAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucXVhdGVybmlvbiwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEuY2FtZXJhVHlwZSwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEuem9vbSwKICAgICAgICAgICAgICAgIDAuNCwKICAgICAgICAgICAgICAgIDgwLAogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIC00MjcsCiAgICAgICAgICAgICAgICAwLjEsCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHBvc2UucG9zaXRpb247CiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gcG9zZS5yb3RhdGlvbjsKCiAgICAgICAgICAgIHRhZ3NbdGFncy5kaW1lbnNpb24gKyAnUG9zaXRpb24nXSA9IHBvc2l0aW9uOwogICAgICAgICAgICB0YWdzW3RhZ3MuZGltZW5zaW9uICsgJ1JvdGF0aW9uJ10gPSByb3RhdGlvbjsKCiAgICAgICAgICAgIC8vIFNldCBuZXcgdGltZW91dC4KICAgICAgICAgICAgdGhpc0JvdC52YXJzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gZGVzdHJveSh0aGlzQm90KSwgdGFncy50aW1lb3V0TVMpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSksCiAgICAgICAgb25EZXN0cm95OiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FiVXNlckNhbWVyYS4ke3RhZ05hbWV9ICgke3RhZ3MucmVtb3RlTmFtZX0pXWApOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0pCgogICAgLy8gRGlyZWN0bHkgY2FsbCBvbkFCVXNlckNhbWVyYVVwZGF0ZSB0aGUgZmlyc3QgdGltZSB3ZSBtYWtlIGEgbmV3IHVzZXIgY2FtZXJhIGJvdC4KICAgIHVzZXJDYW1lcmFCb3Qub25BQlVzZXJDYW1lcmFVcGRhdGUoY2FtZXJhRGF0YSk7Cn0nAMGk9qoC0AESY2FtZXJhQm90VGltZW91dE1TAgQAwaT2qgKeXwQzMDAwJwDBpPaqAtABCWFiVmVyc2lvbgIEAMGk9qoCo18FMTAuMzUnAMGk9qoC0AEFZGVidWcCBADBpPaqAqlfBWZhbHNlAA=="}]}