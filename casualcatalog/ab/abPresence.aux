{"version":2,"updates":[{"id":0,"timestamp":1767649671838,"update":"AXXKh9tdACcBBGJvdHMkMmYxNjE0MzYtNmU0Ny00YTdkLTk0MmUtZDYwMjIwMTU1MTVjAScAyofbXQAGc3lzdGVtAgQAyofbXQESYWIucHJlc2VuY2UuY3Vyc29yJwDKh9tdAAhhYklnbm9yZQIEAMqH210UBHRydWUnAMqH210ACmFiUHJlc2VuY2UCBADKh9tdGQR0cnVlJwDKh9tdAAVkZWJ1ZwIEAMqH210eBWZhbHNlJwDKh9tdAAdlbmFibGVkAgQAyofbXSQFZmFsc2UnAMqH210ABmNvbmZpZwIEAMqH210qKPCflJdjZjcyZmVjNi1jMjNlLTQ1MmUtYmY3Yi1iYjhjZWNjNGJjZjAnAMqH210ABm9uVGljawIEAMqH211R3AdAaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnRgKTsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCBjdXJzb3IgcHJlc2VuY2UgaXMgZGlzYWJsZWQuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghY29uZmlnQm90KSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyBmb3IgY29uZmlnQm90IHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoIWdsb2JhbFRoaXMuYWIpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBhYiB0byBiZSByZWFkeS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyB0byBsZWF2ZSBzaGVldCBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmIChjb25maWdCb3QudGFncy5zeXN0ZW1Qb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHN5c3RlbSBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmNvbnNvbGUud2FybihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIFRPRE86IGVtaXQgY3Vyc29yc2ApJwDKh9tdAARmb3JtAgQAyofbXaQIB25vdGhpbmcnAMqH210AC2ludGVycG9sYXRlAgQAyofbXawIBWZhbHNlJwDKh9tdABJjdXJzb3JCb3RUaW1lb3V0TVMCBADKh9tdsggEMzAwMCcAyofbXQAGdGlja2VyAgQAyofbXbcIKPCflJc1YzE5YmM5Zi1jNjhkLTQzYzctYmUzNC0zNjAyMWY3ZTRkZDMnAMqH210ACWFiVmVyc2lvbgIEAMqH213eCAUxMC4zNScBBGJvdHMkNWMxOWJjOWYtYzY4ZC00M2M3LWJlMzQtMzYwMjFmN2U0ZGQzAScAyofbXeQIBnN5c3RlbQIEAMqH213lCBBhYi5wcmVzZW5jZS50aWNrJwDKh9td5AgKYWJQcmVzZW5jZQIEAMqH2132CAR0cnVlJwDKh9td5AgIYWJJZ25vcmUCBADKh9td+wgEdHJ1ZScAyofbXeQIBGZvcm0CBADKh9tdgAkHbm90aGluZycAyofbXeQIBWRlYnVnAgQAyofbXYgJBWZhbHNlJwDKh9td5AgJc3RhcnRUaWNrAgQAyofbXY4J5QVAaWYgKG1hc2tzLnRpY2tJbnRlcnZhbElkKSB7CiAgICByZXR1cm47Cn0KCmlmICghb3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgdGhlIGluc3QgbXVzdCBiZSBjb2xsYWJvcmF0aXZlLmApOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgY2FtZXJhIHByZXNlbmVjZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0YXJ0IGludGVydmFsYCk7Cn0KCmNvbnN0IHRhcmdldHMgPSBbbGlua3MuY29uZmlnLCBsaW5rcy5jYW1lcmEsIGxpbmtzLmN1cnNvcl07CgpmdW5jdGlvbiB0aWNrKCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19XSB0aWNrYCk7CiAgICB9CgogICAgd2hpc3Blcih0YXJnZXRzLCAnb25UaWNrJyk7Cn0KCm1hc2tzLnRpY2tJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodGljaywgdGFncy50aWNrSW50ZXJ2YWxNUyk7CnRpY2soKTsnAMqH213kCAhzdG9wVGljawIEAMqH213wDscBQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0b3AgaW50ZXJ2YWxgKTsKICAgIH0KCiAgICBjbGVhckludGVydmFsKG1hc2tzLnRpY2tJbnRlcnZhbElkKTsKICAgIG1hc2tzLnRpY2tJbnRlcnZhbElkID0gbnVsbDsKfScAyofbXeQIBmNhbWVyYQIEAMqH2124ECjwn5SXODdlOTUzNDItZTQ1Ni00YjYzLTk4OTEtZDdhOTIxYWQzZWU3JwDKh9td5AgGY3Vyc29yAgQAyofbXd8QKPCflJcyZjE2MTQzNi02ZTQ3LTRhN2QtOTQyZS1kNjAyMjAxNTUxNWMnAMqH213kCApvbkJvdEFkZGVkAgQAyofbXYYRN0BpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIHRoaXNCb3Quc3RhcnRUaWNrKCk7Cn0nAMqH213kCAZjb25maWcCBADKh9tdvhEo8J+Ul2NmNzJmZWM2LWMyM2UtNDUyZS1iZjdiLWJiOGNlY2M0YmNmMCcAyofbXeQIDG9uQm90Q2hhbmdlZAIEAMqH213lEaoCQGlmICh0aGF0LnRhZ3MuaW5jbHVkZXMoJ3RpY2tJbnRlcnZhbE1TJykpIHsKICAgIHRoaXNCb3Quc3RvcFRpY2soKTsKCiAgICBpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkgJiYgdGFncy5lbmFibGVkKSB7CiAgICAgICAgdGhpc0JvdC5zdGFydFRpY2soKTsKICAgIH0KfSBlbHNlIGlmICh0aGF0LnRhZ3MuaW5jbHVkZXMoJ2VuYWJsZWQnKSkgewogICAgaWYgKHRhZ3MuZW5hYmxlZCkgewogICAgICAgIHRoaXNCb3Quc3RhcnRUaWNrKCk7CiAgICB9IGVsc2UgewogICAgICAgIHRoaXNCb3Quc3RvcFRpY2soKTsKICAgIH0KfScAyofbXeQIB2VuYWJsZWQCBADKh9tdkBQEdHJ1ZScAyofbXeQIDnRpY2tJbnRlcnZhbE1TAgQAyofbXZUUAzMwMCcAyofbXeQICWFiVmVyc2lvbgIEAMqH212ZFAUxMC4zNScBBGJvdHMkN2QzYTE3MDMtMGEwMS00NjZiLTk3NGYtYWU5ZjEwMDFhYzc4AScAyofbXZ8UBnN5c3RlbQIEAMqH212gFBNhYi5wcmVzZW5jZS52ZXJzaW9uJwDKh9tdnxQWYWJQcmVzZW5jZU1pbm9yVmVyc2lvbgIEAMqH2120FAE3JwDKh9tdnxQWYWJQcmVzZW5jZU1ham9yVmVyc2lvbgIEAMqH2122FAEwJwDKh9tdnxQIYWJJZ25vcmUCBADKh9tduBQEdHJ1ZScAyofbXZ8UCmFiUHJlc2VuY2UCBADKh9tdvRQEdHJ1ZScAyofbXZ8UBGZvcm0CBADKh9tdwhQHbm90aGluZycAyofbXZ8UDW9uU2tpbGxVcGRhdGUCBADKh9tdyhSeAUBjb25zdCB2ZXJzaW9uU3RyaW5nID0gdGFncy5hYlByZXNlbmNlTWFqb3JWZXJzaW9uICsgIi4iICsgdGFncy5hYlByZXNlbmNlTWlub3JWZXJzaW9uOwoKY29uc29sZS5sb2coIltBQlByZXNlbmNlXSBMb2FkZWQgQUIgc2hlbGwgdmVyc2lvbiAiICsgdmVyc2lvblN0cmluZyk7JwDKh9tdnxQJYWJWZXJzaW9uAgQAyofbXekVBTEwLjM1JwEEYm90cyQ4N2U5NTM0Mi1lNDU2LTRiNjMtOTg5MS1kN2E5MjFhZDNlZTcBJwDKh9td7xUGY29uZmlnAgQAyofbXfAVKPCflJdjZjcyZmVjNi1jMjNlLTQ1MmUtYmY3Yi1iYjhjZWNjNGJjZjAnAMqH213vFQZvblRpY2sCBADKh9tdlxbPHEBpZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzdGFydGApOwp9CgppZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIGNhbWVyYSBwcmVzZW5jZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKCFjb25maWdCb3QpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBjb25maWdCb3QgdG8gYmUgcmVhZHkuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghZ2xvYmFsVGhpcy5hYikgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgZm9yIGFiIHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHNoZWV0IHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gbGVhdmUgc3lzdGVtIHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gR2V0IGxpc3Qgb2YgcmVsZXZhbnQgY2FtZXJhcyBmcm9tIHBvcnRhbHMgJiBkaW1lbnNpb25zIHRoYXQgdGhlIHVzZXIgaXMgYWN0aXZlIGluLgpjb25zdCBjYW1lcmFEYXRhVG9FbWl0OiBBQlVzZXJDYW1lcmFEYXRhW10gPSBbXTsKCmNvbnN0IHJlbW90ZU5hbWUgPSBsaW5rcy5jb25maWcuZ2V0UmVtb3RlTmFtZSgpOwpjb25zdCByZW1vdGVDb2xvciA9IGxpbmtzLmNvbmZpZy5nZXRSZW1vdGVDb2xvcigpOwoKLy8gTWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgZ3JpZCBwb3J0YWwgc28gb25seSBzZW5kIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goewogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtYXAnLAogICAgICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScsCiAgICAgICAgY29sb3I6IHJlbW90ZUNvbG9yLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgfSk7Cn0gZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ2dyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDYW1lcmFUeXBlID8/ICdvcnRob2dyYXBoaWMnLAogICAgICAgIGNvbG9yOiByZW1vdGVDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgICAgICB6b29tOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhWm9vbSwKICAgIH0pOwp9CgovLyBNaW5pIG1hcCBwb3J0YWwgc2l0cyBvbiB0b3AgdGhlIG1pbmkgbWFwIHBvcnRhbCBzbyBvbmx5IHNlbmQgbWluaSBtYXAgcG9ydGFsIGNhbWVyYSBpZiBpdHMgZW5hYmxlZC4KaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwpIHsKICAgIGNhbWVyYURhdGFUb0VtaXQucHVzaCh7IAogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtaW5pTWFwJywKICAgICAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnLAogICAgICAgIGNvbG9yOiByZW1vdGVDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IG1pbmlNYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgIH0pOwp9IGVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWluaUdyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA/PyAnb3J0aG9ncmFwaGljJywKICAgICAgICBjb2xvcjogcmVtb3RlQ29sb3IsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCmlmIChjYW1lcmFEYXRhVG9FbWl0Lmxlbmd0aCA9PT0gMCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gYmUgaW4gYSBwb3J0YWwgd2l0aCBhIGNhbWVyYS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YVRvRW1pdDpgLCBjYW1lcmFEYXRhVG9FbWl0KTsKfQoKY29uc3Qgb3RoZXJSZW1vdGVzID0gKGF3YWl0IG9zLnJlbW90ZXMoKSkuZmlsdGVyKGlkID0+IGlkICE9PSBjb25maWdCb3QuaWQpOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gb3RoZXJSZW1vdGVzOmAsIG90aGVyUmVtb3Rlcyk7Cn0KCmlmIChvdGhlclJlbW90ZXMubGVuZ3RoID4gMCkgewogICAgc2VuZFJlbW90ZURhdGEob3RoZXJSZW1vdGVzLCAnYWJfdXNlcl9jYW1lcmFfZGF0YScsIGNhbWVyYURhdGFUb0VtaXQpOwp9CicAyofbXe8VBnN5c3RlbQIEAMqH213bMhJhYi5wcmVzZW5jZS5jYW1lcmEnAMqH213vFQphYlByZXNlbmNlAgQAyofbXe4yBHRydWUnAMqH213vFQhhYklnbm9yZQIEAMqH213zMgR0cnVlJwDKh9td7xUEZm9ybQIEAMqH2134Mgdub3RoaW5nJwDKh9td7xUFZGVidWcCBADKh9tdgDMFZmFsc2UnAMqH213vFQxvblJlbW90ZURhdGECBADKh9tdhjPrA0BpZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5uYW1lID09PSAnYWJfdXNlcl9jYW1lcmFfZGF0YScpIHsKICAgIGNvbnN0IGRhdGE6IEFCVXNlckNhbWVyYURhdGEgfCBBQlVzZXJDYW1lcmFEYXRhW10gPSB0aGF0LnRoYXQ7CgogICAgaWYgKGxpbmtzLmNvbmZpZy50YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBhYl91c2VyX2NhbWVyYV9kYXRhIGRhdGE6YCwgZGF0YSk7CiAgICB9CgogICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhW2ldKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHRoaXNCb3Qub25BQlVzZXJDYW1lcmFEYXRhUmVjZWl2ZWQoZGF0YSk7CiAgICB9Cn0KJwDKh9td7xUFdHlwZXMCBADKh9td8jblBvCfk4RpbnRlcmZhY2UgQUJVc2VyQ2FtZXJhRGF0YSB7CiAgICAvKiogVGhlIHJlbW90ZSBpZCBvZiB0aGUgdXNlciB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqLwogICAgcmVtb3RlSWQ6IHN0cmluZzsKCiAgICAvKiogQ2FuIGVpdGhlciBiZSB1c2VyJ3MgZGlzcGxheSBuYW1lIG9yIGEgc2hvcnRlbmVkIGxvY2FsIHVzZXIgaWQuICoqLwogICAgcmVtb3RlTmFtZTogc3RyaW5nOwoKICAgIC8qKiBUaGUgcG9ydGFsIHRoYXQgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKi8KICAgIHBvcnRhbDogc3RyaW5nOwogICAgCiAgICAvKiogVGhlIGRpbWVuc2lvbiB0aGF0IHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICoqLwogICAgZGltZW5zaW9uOiBzdHJpbmc7CgogICAgLyoqIFRoZSBjb2xvciBvZiB0aGUgdXNlciBjYW1lcmEuICovCiAgICBjb2xvcjogc3RyaW5nOwoKICAgIC8qKiBUaGUgdHlwZSBvZiB0aGUgY2FtZXJhIHRoYXQgdGhlIGRhdGEgaXMgZm9yLiAqLwogICAgY2FtZXJhVHlwZTogJ3BlcnNwZWN0aXZlJyB8ICdvcnRob2dyYXBoaWMnOwogICAgCiAgICAvKiogVGhlIHBvc2l0aW9uIG9mIHRoZSBjYW1lcmEuICoqLwogICAgcG9zaXRpb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciB9OwoKICAgIC8qKiBUaGUgcm90YXRpb24gcXVhdGVybmlvbiBvZiB0aGUgY2FtZXJhLiAqKi8KICAgIHF1YXRlcm5pb246IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgdzogbnVtYmVyIH07CgogICAgLyoqIFRoZSB6b29tIHZsYXVlIHRoYXQgdGhlIGNhbWVyYSBpcyBhdC4gVGhpcyBpcyBvbmx5IHJlbGV2YW50IGZvciBvcnRob2dyYXBoaWMgY2FtZXJhcy4gICovCiAgICB6b29tPzogbnVtYmVyOwp9JwDKh9td7xUHZW5hYmxlZAIEAMqH213WPQVmYWxzZScAyofbXe8VGm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkAgQAyofbXdw9gjZAY29uc3QgY2FtZXJhRGF0YTogQUJVc2VyQ2FtZXJhRGF0YSA9IHRoYXQ7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW1lcmFEYXRhOmAsIGNhbWVyYURhdGEpCn0KCmNvbnN0IHNob3V0UmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChzaG91dCgnb25BQlVzZXJDYW1lcmFVcGRhdGUnLCBjYW1lcmFEYXRhKSk7CmNvbnN0IGNhbWVyYVVwZGF0ZWQgPSBzaG91dFJlc3VsdHMubGVuZ3RoID4gMCAmJiBzaG91dFJlc3VsdHMuc29tZShyID0+IHIudmFsdWUgPT09IHRydWUpOwoKaWYgKCFjYW1lcmFVcGRhdGVkKSB7CiAgICAvLyBUaGVyZSB3YXMgbm8gdXNlciBjYW1lcmEgdGhhdCBhY2NlcHRlZCB0aGUgdXBkYXRlLCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBvbmUuCgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1ha2UgdXNlciBjYW1lcmE6YCwgY2FtZXJhRGF0YSk7CiAgICB9CgogICAgY29uc3QgdXNlckNhbWVyYUJvdCA9IGNyZWF0ZSh7CiAgICAgICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgICAgIGFiQm90OiB0cnVlLAogICAgICAgIGFiVXNlckNhbWVyYTogdHJ1ZSwKICAgICAgICBtYW5hZ2VyOiBnZXRMaW5rKHRoaXNCb3QpLAogICAgICAgIGZvcm06ICdmcnVzdHVtJywKICAgICAgICBhbmNob3JQb2ludDogJ2NlbnRlcicsCiAgICAgICAgcmVtb3RlSWQ6IGNhbWVyYURhdGEucmVtb3RlSWQsCiAgICAgICAgcmVtb3RlTmFtZTogY2FtZXJhRGF0YS5yZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogY2FtZXJhRGF0YS5wb3J0YWwsCiAgICAgICAgZGltZW5zaW9uOiBjYW1lcmFEYXRhLmRpbWVuc2lvbiwKICAgICAgICBbY2FtZXJhRGF0YS5kaW1lbnNpb25dOiB0cnVlLAogICAgICAgIHBvaW50YWJsZTogZmFsc2UsCiAgICAgICAgbGFiZWxQb3NpdGlvbjogJ2Zsb2F0aW5nQmlsbGJvYXJkJywKICAgICAgICAvLyBsYWJlbFNpemU6IDAuMjgsCiAgICAgICAgLy8gbGFiZWxTaXplTW9kZTogJ2F1dG8nLAogICAgICAgIG9uQ3JlYXRlOiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkFCVXNlckNhbWVyYVVwZGF0ZTogTGlzdGVuZXJTdHJpbmcoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjYW1lcmFEYXRhOiBBQlVzZXJDYW1lcmFEYXRhID0gdGhhdDsKCiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbmNvbWluZyB1cGRhdGUgaXMgZm9yIHRoaXMgYm90LgogICAgICAgICAgICBpZiAoY2FtZXJhRGF0YS5yZW1vdGVJZCAhPT0gdGFncy5yZW1vdGVJZCB8fAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5wb3J0YWwgIT09IHRhZ3MucG9ydGFsIHx8CiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmRpbWVuc2lvbiAhPT0gdGFncy5kaW1lbnNpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENsZWFyIG9sZCB0aW1lb3V0LgogICAgICAgICAgICBpZiAodGhpc0JvdC52YXJzLnRpbWVvdXRJZCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNCb3QudmFycy50aW1lb3V0SWQpOwogICAgICAgICAgICAgICAgdGhpc0JvdC52YXJzLnRpbWVvdXRJZCA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldIGNhbWVyYURhdGE6YCwgY2FtZXJhRGF0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmxhYmVsICE9PSBjYW1lcmFEYXRhLnJlbW90ZU5hbWUpIHsKICAgICAgICAgICAgICAgIHRhZ3MubGFiZWwgPSBjYW1lcmFEYXRhLnJlbW90ZU5hbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmNvbG9yICE9PSBjYW1lcmFEYXRhLmNvbG9yKSB7CiAgICAgICAgICAgICAgICB0YWdzLmNvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRhZ3MubGFiZWxGbG9hdGluZ0JhY2tncm91bmRDb2xvciAhPT0gY2FtZXJhRGF0YS5jb2xvcil7IAogICAgICAgICAgICAgICAgdGFncy5sYWJlbEZsb2F0aW5nQmFja2dyb3VuZENvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2xhbXAwMSh0OiBudW1iZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21Ub1Qoem9vbTogbnVtYmVyLCB6b29tTWluOiBudW1iZXIsIHpvb21NYXg6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4sIHQ9MSBhdCB6b29tTWF4CiAgICAgICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5tYXgoem9vbSwgMWUtNik7CiAgICAgICAgICAgICAgICBjb25zdCBhID0gTWF0aC5sb2coem9vbU1pbik7CiAgICAgICAgICAgICAgICBjb25zdCBiID0gTWF0aC5sb2coem9vbU1heCk7CiAgICAgICAgICAgICAgICBjb25zdCB2ID0gKE1hdGgubG9nKHopIC0gYSkgLyAoYiAtIGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wMDEodik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxlcnAoYTogbnVtYmVyLCBiOiBudW1iZXIsIHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gT3B0aW9uYWwgc21vb3RoaW5nIHNvIGl0IGRvZXNu4oCZdCBmZWVsIGxpbmVhciAvIGhhcnNoOgogICAgICAgICAgICBmdW5jdGlvbiBzbW9vdGhzdGVwKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogKDMgLSAyICogdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHQ9MCBhdCB6b29tTWluICh6b29tZWQgb3V0KSwgdD0xIGF0IHpvb21NYXggKHpvb21lZCBpbikKICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlFYXNlKHQ6IG51bWJlciwgZXhwb25lbnQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gZXhwb25lbnQgPCAxIHNsb3dzIGRvd24gdGhlIOKAnG1vdmUgYXdheeKAnSB3aGVuIHpvb21pbmcgb3V0CiAgICAgICAgICAgICAgICAvLyAobWFrZXMgY3VydmUgZ2VudGxlciBuZWFyIHQ9MCkKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhzbW9vdGhzdGVwKHQpLCBleHBvbmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldFZpekNhbWVyYVBvc2UoCiAgICAgICAgICAgICAgICBjYW1lcmFQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH0sCiAgICAgICAgICAgICAgICBjYW1lcmFSb3RhdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyOyB3OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVR5cGU6ICdvcnRob2dyYXBoaWMnIHwgJ3BlcnNwZWN0aXZlJywKICAgICAgICAgICAgICAgIGNhbWVyYVpvb206IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICB6b29tTWluID0gMC40LAogICAgICAgICAgICAgICAgem9vbU1heCA9IDgwLAogICAgICAgICAgICAgICAgZmFyRGlzdCA9IDMwLAogICAgICAgICAgICAgICAgbmVhckRpc3QgPSAyLAogICAgICAgICAgICAgICAgZXhwb25lbnQgPSAwLjUsCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFZlY3RvcjMoY2FtZXJhUG9zaXRpb24ueCwgY2FtZXJhUG9zaXRpb24ueSwgY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCByb3Q7CiAgICAgICAgICAgICAgICBpZiAoKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24gfHwgY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24pICYmIGNhbWVyYVR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHsgCiAgICAgICAgICAgICAgICAgICAgcm90ID0gYXdhaXQgYWIubGlua3MudXRpbHMuY2FsY01hcFJvdGF0aW9uKHsgbWFwUG9zaXRpb246IGNhbWVyYVBvc2l0aW9uLCBhdXhSb3RhdGlvbjogbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSl9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcm90ID0gbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgZm9yd2FyZCA9IHJvdC5yb3RhdGVWZWN0b3IzKG5ldyBWZWN0b3IzKDAsIDEsIDApKS5ub3JtYWxpemUoKTsKCiAgICAgICAgICAgICAgICBpZiAoY2FtZXJhVHlwZSA9PT0gJ3BlcnNwZWN0aXZlJykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiBwb3MsIHJvdGF0aW9uOiByb3QgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCB6b29tID0gTWF0aC5tYXgoY2FtZXJhWm9vbSA/PyAxMCwgMWUtNik7CgogICAgICAgICAgICAgICAgbGV0IHQgPSB6b29tVG9UKHpvb20sIHpvb21NaW4sIHpvb21NYXgpOwogICAgICAgICAgICAgICAgdCA9IGFwcGx5RWFzZSh0LCBleHBvbmVudCk7CgogICAgICAgICAgICAgICAgY29uc3QgZCA9IGxlcnAoZmFyRGlzdCwgbmVhckRpc3QsIHQpOwogICAgICAgICAgICAgICAgY29uc3Qgdml6UG9zID0gcG9zLnN1YnRyYWN0KGZvcndhcmQubXVsdGlwbHlTY2FsYXIoZCkpOwoKICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiB2aXpQb3MsIHJvdGF0aW9uOiByb3QsIGRlYnVnOiB7IHQsIGQsIHpvb20gfSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBwb3NlID0gYXdhaXQgZ2V0Vml6Q2FtZXJhUG9zZSgKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucG9zaXRpb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnF1YXRlcm5pb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmNhbWVyYVR5cGUsCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnpvb20sCiAgICAgICAgICAgICAgICAwLjQsCiAgICAgICAgICAgICAgICA4MCwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAtNDI3LAogICAgICAgICAgICAgICAgMC4xLAogICAgICAgICAgICApOwoKICAgICAgICAgICAgY29uc3QgcG9zVGFnTmFtZSA9IHRhZ3MuZGltZW5zaW9uICsgJ1Bvc2l0aW9uJzsKICAgICAgICAgICAgY29uc3Qgcm90VGFnTmFtZSA9IHRhZ3MuZGltZW5zaW9uICsgJ1JvdGF0aW9uJzsKCiAgICAgICAgICAgIGNsZWFyQW5pbWF0aW9ucyh0aGlzQm90LCBbcG9zVGFnTmFtZSwgcm90VGFnTmFtZV0pOwoKICAgICAgICAgICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy5pbnRlcnBvbGF0ZSAmJiB0YWdzW3Bvc1RhZ05hbWVdICYmIHRhZ3Nbcm90VGFnTmFtZV0pIHsKICAgICAgICAgICAgICAgIGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgICAgICAgICAgICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICAgICAgICAgICAgICBbcG9zVGFnTmFtZV06IHRhZ3NbcG9zVGFnTmFtZV0sCiAgICAgICAgICAgICAgICAgICAgICAgIFtyb3RUYWdOYW1lXTogdGFnc1tyb3RUYWdOYW1lXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgW3Bvc1RhZ05hbWVdOiBwb3NlLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBbcm90VGFnTmFtZV06IHBvc2Uucm90YXRpb24sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogbGlua3MubWFuYWdlci5saW5rcy50aWNrZXIudGFncy50aWNrSW50ZXJ2YWxNUyAvIDEwMDAsCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0YWdzW3Bvc1RhZ05hbWVdID0gcG9zZS5wb3NpdGlvbjsKICAgICAgICAgICAgICAgIHRhZ3Nbcm90VGFnTmFtZV0gPSBwb3NlLnJvdGF0aW9uOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBTZXQgbmV3IHRpbWVvdXQuCiAgICAgICAgICAgIHRoaXNCb3QudmFycy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGRlc3Ryb3kodGhpc0JvdCksIGxpbmtzLm1hbmFnZXIudGFncy5jYW1lcmFCb3RUaW1lb3V0TVMpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSksCiAgICAgICAgb25EZXN0cm95OiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSkKCiAgICAvLyBEaXJlY3RseSBjYWxsIG9uQUJVc2VyQ2FtZXJhVXBkYXRlIHRoZSBmaXJzdCB0aW1lIHdlIG1ha2UgYSBuZXcgdXNlciBjYW1lcmEgYm90LgogICAgYXdhaXQgdXNlckNhbWVyYUJvdC5vbkFCVXNlckNhbWVyYVVwZGF0ZShjYW1lcmFEYXRhKTsKfScAyofbXe8VEmNhbWVyYUJvdFRpbWVvdXRNUwIEAMqH213ZcwQzMDAwJwDKh9td7xULaW50ZXJwb2xhdGUCBADKh9td3nMEdHJ1ZScAyofbXe8VBnRpY2tlcgIEAMqH213jcyjwn5SXNWMxOWJjOWYtYzY4ZC00M2M3LWJlMzQtMzYwMjFmN2U0ZGQzJwDKh9td7xUJYWJWZXJzaW9uAgQAyofbXYp0BTEwLjM1JwEEYm90cyRjZjcyZmVjNi1jMjNlLTQ1MmUtYmY3Yi1iYjhjZWNjNGJjZjABJwDKh9tdkHQGc3lzdGVtAgQAyofbXZF0EmFiLnByZXNlbmNlLmNvbmZpZycAyofbXZB0CWFiVmVyc2lvbgIEAMqH212kdAUxMC4zNScAyofbXZB0CmFiUHJlc2VuY2UCBADKh9tdqnQEdHJ1ZScAyofbXZB0DWdldFJlbW90ZU5hbWUCBADKh9tdr3TPAkAvLyBUaGUgbmFtZSB0aGF0IHRoaXMgcmVtb3RlIGlzIHRvIGJlIGtub3duIGFzIHRvIG90aGVyIHVzZXJzLgpsZXQgcmVtb3RlTmFtZTsKCmlmIChhYi5saW5rcy5jb25zb2xlLm1hc2tzLnByZWZlcnJlZE5hbWUpIHsKICAgIHJlbW90ZU5hbWUgPSBhYi5saW5rcy5jb25zb2xlLm1hc2tzLnByZWZlcnJlZE5hbWU7Cn0gZWxzZSBpZiAoYXV0aEJvdCAmJiBhdXRoQm90LnRhZ3MubmFtZSkgewogICAgcmVtb3RlTmFtZSA9IGF1dGhCb3QudGFncy5uYW1lOwp9IGVsc2UgewogICAgcmVtb3RlTmFtZSA9IGNvbmZpZ0JvdC5pZC5zdWJzdHJpbmcoMCw1KTsKfQoKcmV0dXJuIHJlbW90ZU5hbWU7JwDKh9tdkHQOZ2V0UmVtb3RlQ29sb3ICBADKh9td/3bNAUBpZiAoIW1hc2tzLnJlbW90ZUNvbG9yKSB7CiAgICBtYXRoLnNldFJhbmRvbVNlZWQoY29uZmlnQm90LmlkKTsKICAgIG1hc2tzLnJlbW90ZUNvbG9yID0gYHJnYigke21hdGgucmFuZG9tSW50KDAsIDI1NSl9LCAke21hdGgucmFuZG9tSW50KDAsIDI1NSl9LCAke21hdGgucmFuZG9tSW50KDAsIDI1NSl9KWA7Cn0KCnJldHVybiBtYXNrcy5yZW1vdGVDb2xvcjsnAMqH212QdAhhYklnbm9yZQIEAMqH213NeAR0cnVlAA=="}]}