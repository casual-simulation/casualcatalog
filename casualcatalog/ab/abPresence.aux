{"version":2,"updates":[{"id":0,"timestamp":1767037028501,"update":"ATbHz5aGCQAnAQRib3RzJDdkM2ExNzAzLTBhMDEtNDY2Yi05NzRmLWFlOWYxMDAxYWM3OAEnAMfPloYJAAZzeXN0ZW0CBADHz5aGCQETYWIucHJlc2VuY2UudmVyc2lvbicAx8+WhgkAFmFiUHJlc2VuY2VNaW5vclZlcnNpb24CBADHz5aGCRUBMycAx8+WhgkAFmFiUHJlc2VuY2VNYWpvclZlcnNpb24CBADHz5aGCRcBMCcAx8+WhgkACGFiSWdub3JlAgQAx8+WhgkZBHRydWUnAMfPloYJAAphYlByZXNlbmNlAgQAx8+WhgkeBHRydWUnAMfPloYJAARmb3JtAgQAx8+WhgkjB25vdGhpbmcnAMfPloYJAA1vblNraWxsVXBkYXRlAgQAx8+WhgkrngFAY29uc3QgdmVyc2lvblN0cmluZyA9IHRhZ3MuYWJQcmVzZW5jZU1ham9yVmVyc2lvbiArICIuIiArIHRhZ3MuYWJQcmVzZW5jZU1pbm9yVmVyc2lvbjsKCmNvbnNvbGUubG9nKCJbQUJQcmVzZW5jZV0gTG9hZGVkIEFCIHNoZWxsIHZlcnNpb24gIiArIHZlcnNpb25TdHJpbmcpOycAx8+WhgkACWFiVmVyc2lvbgIEAMfPloYJygEFMTAuMzUnAQRib3RzJDg3ZTk1MzQyLWU0NTYtNGI2My05ODkxLWQ3YTkyMWFkM2VlNwEnAMfPloYJ0AEGc3lzdGVtAgQAx8+WhgnRARJhYi5wcmVzZW5jZS5jYW1lcmEnAMfPloYJ0AEKYWJQcmVzZW5jZQIEAMfPloYJ5AEEdHJ1ZScAx8+WhgnQAQhhYklnbm9yZQIEAMfPloYJ6QEEdHJ1ZScAx8+WhgnQAQRmb3JtAgQAx8+WhgnuAQdub3RoaW5nJwDHz5aGCdABCm9uQm90QWRkZWQCBADHz5aGCfYBR0BpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkgJiYgdGFncy5lbmFibGVkKSB7CiAgICB0aGlzQm90LnN0YXJ0VGljaygpOwp9JwDHz5aGCdABBHRpY2sCBADHz5aGCb4CtR5AaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnRgKTsKfQoKaWYgKCFjb25maWdCb3QpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBjb25maWdCb3QgdG8gYmUgcmVhZHkuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghZ2xvYmFsVGhpcy5hYikgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgZm9yIGFiIHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHNoZWV0IHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gbGVhdmUgc3lzdGVtIHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gVGhlIG5hbWUgdGhhdCB0aGlzIHJlbW90ZSBpcyB0byBiZSBrbm93biBhcyB0byBvdGhlciB1c2Vycy4KbGV0IHJlbW90ZU5hbWUgPSBjb25maWdCb3QuaWQuc3Vic3RyaW5nKDAsNSk7CmlmIChhdXRoQm90ICYmIGF1dGhCb3QudGFncy5uYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYXV0aEJvdC50YWdzLm5hbWU7Cn0gZWxzZSBpZiAoYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lOwp9CgovLyBHZXQgbGlzdCBvZiByZWxldmFudCBjYW1lcmFzIGZyb20gcG9ydGFscyAmIGRpbWVuc2lvbnMgdGhhdCB0aGUgdXNlciBpcyBhY3RpdmUgaW4uCmNvbnN0IGNhbWVyYURhdGFUb0VtaXQ6IEFCVXNlckNhbWVyYURhdGFbXSA9IFtdOwoKaWYgKCFtYXNrcy5jYW1lcmFDb2xvcikgewogICAgbWF0aC5zZXRSYW5kb21TZWVkKGNvbmZpZ0JvdC5pZCk7CiAgICBtYXNrcy5jYW1lcmFDb2xvciA9IGByZ2IoJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSlgOwp9CgoKLy8gTWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgZ3JpZCBwb3J0YWwgc28gb25seSBzZW5kIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goewogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtYXAnLAogICAgICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScsCiAgICAgICAgY29sb3I6IG1hc2tzLmNhbWVyYUNvbG9yLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgfSk7Cn0gZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ2dyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IGdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDYW1lcmFUeXBlID8/ICdvcnRob2dyYXBoaWMnLAogICAgICAgIGNvbG9yOiBtYXNrcy5jYW1lcmFDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgICAgICB6b29tOiBncmlkUG9ydGFsQm90LnRhZ3MuY2FtZXJhWm9vbSwKICAgIH0pOwp9CgovLyBNaW5pIG1hcCBwb3J0YWwgc2l0cyBvbiB0b3AgdGhlIG1pbmkgbWFwIHBvcnRhbCBzbyBvbmx5IHNlbmQgbWluaSBtYXAgcG9ydGFsIGNhbWVyYSBpZiBpdHMgZW5hYmxlZC4KaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwpIHsKICAgIGNhbWVyYURhdGFUb0VtaXQucHVzaCh7IAogICAgICAgIHJlbW90ZUlkOiBjb25maWdCb3QuaWQsCiAgICAgICAgcmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtaW5pTWFwJywKICAgICAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnLAogICAgICAgIGNvbG9yOiBtYXNrcy5jYW1lcmFDb2xvciwKICAgICAgICBkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLm1pbmlNYXBQb3J0YWwsCiAgICAgICAgcG9zaXRpb246IG1pbmlNYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhUm90YXRpb24ucXVhdGVybmlvbiwKICAgIH0pOwp9IGVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsKSB7CiAgICBjYW1lcmFEYXRhVG9FbWl0LnB1c2goeyAKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiAnbWluaUdyaWQnLAogICAgICAgIGNhbWVyYVR5cGU6IG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA/PyAnb3J0aG9ncmFwaGljJywKICAgICAgICBjb2xvcjogbWFza3MuY2FtZXJhQ29sb3IsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCmlmIChjYW1lcmFEYXRhVG9FbWl0Lmxlbmd0aCA9PT0gMCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gYmUgaW4gYSBwb3J0YWwgd2l0aCBhIGNhbWVyYS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YVRvRW1pdDpgLCBjYW1lcmFEYXRhVG9FbWl0KTsKfQoKY29uc3Qgb3RoZXJSZW1vdGVzID0gKGF3YWl0IG9zLnJlbW90ZXMoKSkuZmlsdGVyKGlkID0+IGlkICE9PSBjb25maWdCb3QuaWQpOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gb3RoZXJSZW1vdGVzOmAsIG90aGVyUmVtb3Rlcyk7Cn0KCmlmIChvdGhlclJlbW90ZXMubGVuZ3RoID4gMCkgewogICAgc2VuZFJlbW90ZURhdGEob3RoZXJSZW1vdGVzLCAnYWJfdXNlcl9jYW1lcmFfZGF0YScsIGNhbWVyYURhdGFUb0VtaXQpOwp9CicAx8+WhgnQAQlzdGFydFRpY2sCBADHz5aGCeogygRAaWYgKG1hc2tzLnRpY2tJbnRlcnZhbElkKSB7CiAgICByZXR1cm47Cn0KCmlmICghb3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgdGhlIGluc3QgbXVzdCBiZSBjb2xsYWJvcmF0aXZlLmApOwogICAgfQoKICAgIHJldHVybjsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW5jZWxpbmcgdGljayBzdGFydCDigJQgY2FtZXJhIHByZXNlbmVjZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0YXJ0IGludGVydmFsYCk7Cn0KCm1hc2tzLnRpY2tJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gd2hpc3Blcih0aGlzQm90LCAndGljaycpLCB0YWdzLnRpY2tJbnRlcnZhbE1TKTsKdGhpc0JvdC50aWNrKCk7JwDHz5aGCdABCHN0b3BUaWNrAgQAx8+WhgmxJccBQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0b3AgaW50ZXJ2YWxgKTsKICAgIH0KCiAgICBjbGVhckludGVydmFsKG1hc2tzLnRpY2tJbnRlcnZhbElkKTsKICAgIG1hc2tzLnRpY2tJbnRlcnZhbElkID0gbnVsbDsKfScAx8+WhgnQAQ50aWNrSW50ZXJ2YWxNUwIEAMfPloYJ+SYDMzAwJwDHz5aGCdABBWRlYnVnAgQAx8+Whgn9JgVmYWxzZScAx8+WhgnQAQxvbkJvdENoYW5nZWQCBADHz5aGCYMnqgJAaWYgKHRoYXQudGFncy5pbmNsdWRlcygndGlja0ludGVydmFsTVMnKSkgewogICAgdGhpc0JvdC5zdG9wVGljaygpOwoKICAgIGlmIChvcy5pc0NvbGxhYm9yYXRpdmUoKSAmJiB0YWdzLmVuYWJsZWQpIHsKICAgICAgICB0aGlzQm90LnN0YXJ0VGljaygpOwogICAgfQp9IGVsc2UgaWYgKHRoYXQudGFncy5pbmNsdWRlcygnZW5hYmxlZCcpKSB7CiAgICBpZiAodGFncy5lbmFibGVkKSB7CiAgICAgICAgdGhpc0JvdC5zdGFydFRpY2soKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5zdG9wVGljaygpOwogICAgfQp9JwDHz5aGCdABDG9uUmVtb3RlRGF0YQIEAMfPloYJrineA0BpZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5uYW1lID09PSAnYWJfdXNlcl9jYW1lcmFfZGF0YScpIHsKICAgIGNvbnN0IGRhdGE6IEFCVXNlckNhbWVyYURhdGEgfCBBQlVzZXJDYW1lcmFEYXRhW10gPSB0aGF0LnRoYXQ7CgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGFiX3VzZXJfY2FtZXJhX2RhdGEgZGF0YTpgLCBkYXRhKTsKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGlzQm90Lm9uQUJVc2VyQ2FtZXJhRGF0YVJlY2VpdmVkKGRhdGFbaV0pOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhKTsKICAgIH0KfQonAMfPloYJ0AEFdHlwZXMCBADHz5aGCY0t5Qbwn5OEaW50ZXJmYWNlIEFCVXNlckNhbWVyYURhdGEgewogICAgLyoqIFRoZSByZW1vdGUgaWQgb2YgdGhlIHVzZXIgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKi8KICAgIHJlbW90ZUlkOiBzdHJpbmc7CgogICAgLyoqIENhbiBlaXRoZXIgYmUgdXNlcidzIGRpc3BsYXkgbmFtZSBvciBhIHNob3J0ZW5lZCBsb2NhbCB1c2VyIGlkLiAqKi8KICAgIHJlbW90ZU5hbWU6IHN0cmluZzsKCiAgICAvKiogVGhlIHBvcnRhbCB0aGF0IHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICovCiAgICBwb3J0YWw6IHN0cmluZzsKICAgIAogICAgLyoqIFRoZSBkaW1lbnNpb24gdGhhdCB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqKi8KICAgIGRpbWVuc2lvbjogc3RyaW5nOwoKICAgIC8qKiBUaGUgY29sb3Igb2YgdGhlIHVzZXIgY2FtZXJhLiAqLwogICAgY29sb3I6IHN0cmluZzsKCiAgICAvKiogVGhlIHR5cGUgb2YgdGhlIGNhbWVyYSB0aGF0IHRoZSBkYXRhIGlzIGZvci4gKi8KICAgIGNhbWVyYVR5cGU6ICdwZXJzcGVjdGl2ZScgfCAnb3J0aG9ncmFwaGljJzsKICAgIAogICAgLyoqIFRoZSBwb3NpdGlvbiBvZiB0aGUgY2FtZXJhLiAqKi8KICAgIHBvc2l0aW9uOiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgfTsKCiAgICAvKiogVGhlIHJvdGF0aW9uIHF1YXRlcm5pb24gb2YgdGhlIGNhbWVyYS4gKiovCiAgICBxdWF0ZXJuaW9uOiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlciB9OwoKICAgIC8qKiBUaGUgem9vbSB2bGF1ZSB0aGF0IHRoZSBjYW1lcmEgaXMgYXQuIFRoaXMgaXMgb25seSByZWxldmFudCBmb3Igb3J0aG9ncmFwaGljIGNhbWVyYXMuICAqLwogICAgem9vbT86IG51bWJlcjsKfScAx8+WhgnQAQdlbmFibGVkAgQAx8+WhgnxMwVmYWxzZScAx8+WhgnQARpvbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZAIEAMfPloYJ9zP1NUBjb25zdCBjYW1lcmFEYXRhOiBBQlVzZXJDYW1lcmFEYXRhID0gdGhhdDsKCmlmICh0YWdzLmRlYnVnKSB7CiAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGNhbWVyYURhdGE6YCwgY2FtZXJhRGF0YSkKfQoKY29uc3Qgc2hvdXRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHNob3V0KCdvbkFCVXNlckNhbWVyYVVwZGF0ZScsIGNhbWVyYURhdGEpKTsKY29uc3QgY2FtZXJhVXBkYXRlZCA9IHNob3V0UmVzdWx0cy5sZW5ndGggPiAwICYmIHNob3V0UmVzdWx0cy5zb21lKHIgPT4gci52YWx1ZSA9PT0gdHJ1ZSk7CgppZiAoIWNhbWVyYVVwZGF0ZWQpIHsKICAgIC8vIFRoZXJlIHdhcyBubyB1c2VyIGNhbWVyYSB0aGF0IGFjY2VwdGVkIHRoZSB1cGRhdGUsIG5lZWQgdG8gY3JlYXRlIGEgbmV3IG9uZS4KCiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gbWFrZSB1c2VyIGNhbWVyYTpgLCBjYW1lcmFEYXRhKTsKICAgIH0KCiAgICBjb25zdCB1c2VyQ2FtZXJhQm90ID0gY3JlYXRlKHsKICAgICAgICBzcGFjZTogJ3RlbXBMb2NhbCcsCiAgICAgICAgYWJCb3Q6IHRydWUsCiAgICAgICAgYWJVc2VyQ2FtZXJhOiB0cnVlLAogICAgICAgIG1hbmFnZXI6IGdldExpbmsodGhpc0JvdCksCiAgICAgICAgZm9ybTogJ2ZydXN0dW0nLAogICAgICAgIGFuY2hvclBvaW50OiAnY2VudGVyJywKICAgICAgICByZW1vdGVJZDogY2FtZXJhRGF0YS5yZW1vdGVJZCwKICAgICAgICByZW1vdGVOYW1lOiBjYW1lcmFEYXRhLnJlbW90ZU5hbWUsCiAgICAgICAgcG9ydGFsOiBjYW1lcmFEYXRhLnBvcnRhbCwKICAgICAgICBkaW1lbnNpb246IGNhbWVyYURhdGEuZGltZW5zaW9uLAogICAgICAgIFtjYW1lcmFEYXRhLmRpbWVuc2lvbl06IHRydWUsCiAgICAgICAgcG9pbnRhYmxlOiBmYWxzZSwKICAgICAgICBsYWJlbFBvc2l0aW9uOiAnZmxvYXRpbmdCaWxsYm9hcmQnLAogICAgICAgIC8vIGxhYmVsU2l6ZTogMC4yOCwKICAgICAgICAvLyBsYWJlbFNpemVNb2RlOiAnYXV0bycsCiAgICAgICAgb25DcmVhdGU6IExpc3RlbmVyU3RyaW5nKCgpID0+IHsKICAgICAgICAgICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy5kZWJ1ZykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFthYlVzZXJDYW1lcmEuJHt0YWdOYW1lfSAoJHt0YWdzLnJlbW90ZU5hbWV9KV1gKTsKICAgICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIG9uQUJVc2VyQ2FtZXJhVXBkYXRlOiBMaXN0ZW5lclN0cmluZyhhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNhbWVyYURhdGE6IEFCVXNlckNhbWVyYURhdGEgPSB0aGF0OwoKICAgICAgICAgICAgaWYgKHRhZ3MubGFiZWwgIT09IGNhbWVyYURhdGEucmVtb3RlTmFtZSkgewogICAgICAgICAgICAgICAgdGFncy5sYWJlbCA9IGNhbWVyYURhdGEucmVtb3RlTmFtZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRhZ3MuY29sb3IgIT09IGNhbWVyYURhdGEuY29sb3IpIHsKICAgICAgICAgICAgICAgIHRhZ3MuY29sb3IgPSBjYW1lcmFEYXRhLmNvbG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGFncy5sYWJlbEZsb2F0aW5nQmFja2dyb3VuZENvbG9yICE9PSBjYW1lcmFEYXRhLmNvbG9yKXsgCiAgICAgICAgICAgICAgICB0YWdzLmxhYmVsRmxvYXRpbmdCYWNrZ3JvdW5kQ29sb3IgPSBjYW1lcmFEYXRhLmNvbG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaW5jb21pbmcgdXBkYXRlIGlzIGZvciB0aGlzIGJvdC4KICAgICAgICAgICAgaWYgKGNhbWVyYURhdGEucmVtb3RlSWQgIT09IHRhZ3MucmVtb3RlSWQgfHwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucG9ydGFsICE9PSB0YWdzLnBvcnRhbCB8fAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5kaW1lbnNpb24gIT09IHRhZ3MuZGltZW5zaW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDbGVhciBvbGQgdGltZW91dC4KICAgICAgICAgICAgaWYgKHRoaXNCb3QudmFycy50aW1lb3V0SWQpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzQm90LnZhcnMudGltZW91dElkKTsKICAgICAgICAgICAgICAgIHRoaXNCb3QudmFycy50aW1lb3V0SWQgPSBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobGlua3MubWFuYWdlci50YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FiVXNlckNhbWVyYS4ke3RhZ05hbWV9ICgke3RhZ3MucmVtb3RlTmFtZX0pXSBjYW1lcmFEYXRhOmAsIGNhbWVyYURhdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjbGFtcDAxKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gem9vbVRvVCh6b29tOiBudW1iZXIsIHpvb21NaW46IG51bWJlciwgem9vbU1heDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICAvLyB0PTAgYXQgem9vbU1pbiwgdD0xIGF0IHpvb21NYXgKICAgICAgICAgICAgICAgIGNvbnN0IHogPSBNYXRoLm1heCh6b29tLCAxZS02KTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBNYXRoLmxvZyh6b29tTWluKTsKICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBNYXRoLmxvZyh6b29tTWF4KTsKICAgICAgICAgICAgICAgIGNvbnN0IHYgPSAoTWF0aC5sb2coeikgLSBhKSAvIChiIC0gYSk7CiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAwMSh2KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gbGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgdDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYSArIChiIC0gYSkgKiB0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBPcHRpb25hbCBzbW9vdGhpbmcgc28gaXQgZG9lc27igJl0IGZlZWwgbGluZWFyIC8gaGFyc2g6CiAgICAgICAgICAgIGZ1bmN0aW9uIHNtb290aHN0ZXAodDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCAqIHQgKiAoMyAtIDIgKiB0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4gKHpvb21lZCBvdXQpLCB0PTEgYXQgem9vbU1heCAoem9vbWVkIGluKQogICAgICAgICAgICBmdW5jdGlvbiBhcHBseUVhc2UodDogbnVtYmVyLCBleHBvbmVudDogbnVtYmVyKSB7CiAgICAgICAgICAgICAgICAvLyBleHBvbmVudCA8IDEgc2xvd3MgZG93biB0aGUg4oCcbW92ZSBhd2F54oCdIHdoZW4gem9vbWluZyBvdXQKICAgICAgICAgICAgICAgIC8vIChtYWtlcyBjdXJ2ZSBnZW50bGVyIG5lYXIgdD0wKQogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KHNtb290aHN0ZXAodCksIGV4cG9uZW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0Vml6Q2FtZXJhUG9zZSgKICAgICAgICAgICAgICAgIGNhbWVyYVBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVJvdGF0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXI7IHc6IG51bWJlciB9LAogICAgICAgICAgICAgICAgY2FtZXJhVHlwZTogJ29ydGhvZ3JhcGhpYycgfCAncGVyc3BlY3RpdmUnLAogICAgICAgICAgICAgICAgY2FtZXJhWm9vbTogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHpvb21NaW4gPSAwLjQsCiAgICAgICAgICAgICAgICB6b29tTWF4ID0gODAsCiAgICAgICAgICAgICAgICBmYXJEaXN0ID0gMzAsCiAgICAgICAgICAgICAgICBuZWFyRGlzdCA9IDIsCiAgICAgICAgICAgICAgICBleHBvbmVudCA9IDAuNSwKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjdG9yMyhjYW1lcmFQb3NpdGlvbi54LCBjYW1lcmFQb3NpdGlvbi55LCBjYW1lcmFQb3NpdGlvbi56KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHJvdDsKICAgICAgICAgICAgICAgIGlmICgoY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID09PSB0YWdzLmRpbWVuc2lvbiB8fCBjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsID09PSB0YWdzLmRpbWVuc2lvbikgJiYgY2FtZXJhVHlwZSA9PT0gJ3BlcnNwZWN0aXZlJykgeyAKICAgICAgICAgICAgICAgICAgICByb3QgPSBhd2FpdCBhYi5saW5rcy51dGlscy5jYWxjTWFwUm90YXRpb24oeyBtYXBQb3NpdGlvbjogY2FtZXJhUG9zaXRpb24sIGF1eFJvdGF0aW9uOiBuZXcgUm90YXRpb24oeyBxdWF0ZXJuaW9uOiBjYW1lcmFSb3RhdGlvbiB9KX0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByb3QgPSBuZXcgUm90YXRpb24oeyBxdWF0ZXJuaW9uOiBjYW1lcmFSb3RhdGlvbiB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBmb3J3YXJkID0gcm90LnJvdGF0ZVZlY3RvcjMobmV3IFZlY3RvcjMoMCwgMSwgMCkpLm5vcm1hbGl6ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChjYW1lcmFUeXBlID09PSAncGVyc3BlY3RpdmUnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcG9zaXRpb246IHBvcywgcm90YXRpb246IHJvdCB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnN0IHpvb20gPSBNYXRoLm1heChjYW1lcmFab29tID8/IDEwLCAxZS02KTsKCiAgICAgICAgICAgICAgICBsZXQgdCA9IHpvb21Ub1Qoem9vbSwgem9vbU1pbiwgem9vbU1heCk7CiAgICAgICAgICAgICAgICB0ID0gYXBwbHlFYXNlKHQsIGV4cG9uZW50KTsKCiAgICAgICAgICAgICAgICBjb25zdCBkID0gbGVycChmYXJEaXN0LCBuZWFyRGlzdCwgdCk7CiAgICAgICAgICAgICAgICBjb25zdCB2aXpQb3MgPSBwb3Muc3VidHJhY3QoZm9yd2FyZC5tdWx0aXBseVNjYWxhcihkKSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsgcG9zaXRpb246IHZpelBvcywgcm90YXRpb246IHJvdCwgZGVidWc6IHsgdCwgZCwgem9vbSB9IH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IHBvc2UgPSBhd2FpdCBnZXRWaXpDYW1lcmFQb3NlKAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucXVhdGVybmlvbiwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEuY2FtZXJhVHlwZSwKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEuem9vbSwKICAgICAgICAgICAgICAgIDAuNCwKICAgICAgICAgICAgICAgIDgwLAogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIC00MjcsCiAgICAgICAgICAgICAgICAwLjEsCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBjb25zdCBwb3NUYWdOYW1lID0gdGFncy5kaW1lbnNpb24gKyAnUG9zaXRpb24nOwogICAgICAgICAgICBjb25zdCByb3RUYWdOYW1lID0gdGFncy5kaW1lbnNpb24gKyAnUm90YXRpb24nOwoKICAgICAgICAgICAgY2xlYXJBbmltYXRpb25zKHRoaXNCb3QsIFtwb3NUYWdOYW1lLCByb3RUYWdOYW1lXSk7CgogICAgICAgICAgICBpZiAobGlua3MubWFuYWdlci50YWdzLmludGVycG9sYXRlICYmIHRhZ3NbcG9zVGFnTmFtZV0gJiYgdGFnc1tyb3RUYWdOYW1lXSkgewogICAgICAgICAgICAgICAgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICAgICAgICAgICAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtwb3NUYWdOYW1lXTogdGFnc1twb3NUYWdOYW1lXSwKICAgICAgICAgICAgICAgICAgICAgICAgW3JvdFRhZ05hbWVdOiB0YWdzW3JvdFRhZ05hbWVdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdG9WYWx1ZTogewogICAgICAgICAgICAgICAgICAgICAgICBbcG9zVGFnTmFtZV06IHBvc2UucG9zaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIFtyb3RUYWdOYW1lXTogcG9zZS5yb3RhdGlvbiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBsaW5rcy5tYW5hZ2VyLnRhZ3MudGlja0ludGVydmFsTVMgLyAxMDAwLAogICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGFnc1twb3NUYWdOYW1lXSA9IHBvc2UucG9zaXRpb247CiAgICAgICAgICAgICAgICB0YWdzW3JvdFRhZ05hbWVdID0gcG9zZS5yb3RhdGlvbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gU2V0IG5ldyB0aW1lb3V0LgogICAgICAgICAgICB0aGlzQm90LnZhcnMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBkZXN0cm95KHRoaXNCb3QpLCBsaW5rcy5tYW5hZ2VyLnRhZ3MuY2FtZXJhQm90VGltZW91dE1TKTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pLAogICAgICAgIG9uRGVzdHJveTogTGlzdGVuZXJTdHJpbmcoKCkgPT4gewogICAgICAgICAgICBpZiAobGlua3MubWFuYWdlci50YWdzLmRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FiVXNlckNhbWVyYS4ke3RhZ05hbWV9ICgke3RhZ3MucmVtb3RlTmFtZX0pXWApOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0pCgogICAgLy8gRGlyZWN0bHkgY2FsbCBvbkFCVXNlckNhbWVyYVVwZGF0ZSB0aGUgZmlyc3QgdGltZSB3ZSBtYWtlIGEgbmV3IHVzZXIgY2FtZXJhIGJvdC4KICAgIGF3YWl0IHVzZXJDYW1lcmFCb3Qub25BQlVzZXJDYW1lcmFVcGRhdGUoY2FtZXJhRGF0YSk7Cn0nAMfPloYJ0AESY2FtZXJhQm90VGltZW91dE1TAgQAx8+WhgnnaQQzMDAwJwDHz5aGCdABC2ludGVycG9sYXRlAgQAx8+WhgnsaQR0cnVlJwDHz5aGCdABCWFiVmVyc2lvbgIEAMfPloYJ8WkFMTAuMzUA"}]}