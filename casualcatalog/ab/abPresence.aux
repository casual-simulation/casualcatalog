{"version":2,"updates":[{"id":0,"timestamp":1767649043558,"update":"AXHj3su6BgAnAQRib3RzJDJmMTYxNDM2LTZlNDctNGE3ZC05NDJlLWQ2MDIyMDE1NTE1YwEnAOPey7oGAAZzeXN0ZW0CBADj3su6BgESYWIucHJlc2VuY2UuY3Vyc29yJwDj3su6BgAIYWJJZ25vcmUCBADj3su6BhQEdHJ1ZScA497LugYACmFiUHJlc2VuY2UCBADj3su6BhkEdHJ1ZScA497LugYABWRlYnVnAgQA497LugYeBWZhbHNlJwDj3su6BgAHZW5hYmxlZAIEAOPey7oGJAVmYWxzZScA497LugYABmNvbmZpZwIEAOPey7oGKijwn5SXY2Y3MmZlYzYtYzIzZS00NTJlLWJmN2ItYmI4Y2VjYzRiY2YwJwDj3su6BgAGb25UaWNrAgQA497LugZR3AdAaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gc3RhcnRgKTsKfQoKaWYgKCF0YWdzLmVuYWJsZWQpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCBjdXJzb3IgcHJlc2VuY2UgaXMgZGlzYWJsZWQuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghY29uZmlnQm90KSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyBmb3IgY29uZmlnQm90IHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoIWdsb2JhbFRoaXMuYWIpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBhYiB0byBiZSByZWFkeS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyB0byBsZWF2ZSBzaGVldCBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmIChjb25maWdCb3QudGFncy5zeXN0ZW1Qb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHN5c3RlbSBwb3J0YWwuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmNvbnNvbGUud2FybihgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIFRPRE86IGVtaXQgY3Vyc29yc2ApJwDj3su6BgAEZm9ybQIEAOPey7oGpAgHbm90aGluZycA497LugYAC2ludGVycG9sYXRlAgQA497LugasCAVmYWxzZScA497LugYAEmN1cnNvckJvdFRpbWVvdXRNUwIEAOPey7oGsggEMzAwMCcA497LugYABnRpY2tlcgIEAOPey7oGtwgo8J+UlzVjMTliYzlmLWM2OGQtNDNjNy1iZTM0LTM2MDIxZjdlNGRkMycA497LugYACWFiVmVyc2lvbgIEAOPey7oG3ggFMTAuMzUnAQRib3RzJDVjMTliYzlmLWM2OGQtNDNjNy1iZTM0LTM2MDIxZjdlNGRkMwEnAOPey7oG5AgGc3lzdGVtAgQA497LugblCBBhYi5wcmVzZW5jZS50aWNrJwDj3su6BuQICmFiUHJlc2VuY2UCBADj3su6BvYIBHRydWUnAOPey7oG5AgIYWJJZ25vcmUCBADj3su6BvsIBHRydWUnAOPey7oG5AgEZm9ybQIEAOPey7oGgAkHbm90aGluZycA497LugbkCAVkZWJ1ZwIEAOPey7oGiAkFZmFsc2UnAOPey7oG5AgJc3RhcnRUaWNrAgQA497LugaOCeUFQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgcmV0dXJuOwp9CgppZiAoIW9zLmlzQ29sbGFib3JhdGl2ZSgpKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FuY2VsaW5nIHRpY2sgc3RhcnQg4oCUIHRoZSBpbnN0IG11c3QgYmUgY29sbGFib3JhdGl2ZS5gKTsKICAgIH0KCiAgICByZXR1cm47Cn0KCmlmICghdGFncy5lbmFibGVkKSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FuY2VsaW5nIHRpY2sgc3RhcnQg4oCUIGNhbWVyYSBwcmVzZW5lY2UgaXMgZGlzYWJsZWQuYCk7CiAgICB9CgogICAgcmV0dXJuOwp9CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzdGFydCBpbnRlcnZhbGApOwp9Cgpjb25zdCB0YXJnZXRzID0gW2xpbmtzLmNvbmZpZywgbGlua3MuY2FtZXJhLCBsaW5rcy5jdXJzb3JdOwoKZnVuY3Rpb24gdGljaygpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfV0gdGlja2ApOwogICAgfQoKICAgIHdoaXNwZXIodGFyZ2V0cywgJ29uVGljaycpOwp9CgptYXNrcy50aWNrSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHRpY2ssIHRhZ3MudGlja0ludGVydmFsTVMpOwp0aWNrKCk7JwDj3su6BuQICHN0b3BUaWNrAgQA497LugbwDscBQGlmIChtYXNrcy50aWNrSW50ZXJ2YWxJZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHN0b3AgaW50ZXJ2YWxgKTsKICAgIH0KCiAgICBjbGVhckludGVydmFsKG1hc2tzLnRpY2tJbnRlcnZhbElkKTsKICAgIG1hc2tzLnRpY2tJbnRlcnZhbElkID0gbnVsbDsKfScA497LugbkCAZjYW1lcmECBADj3su6BrgQKPCflJc4N2U5NTM0Mi1lNDU2LTRiNjMtOTg5MS1kN2E5MjFhZDNlZTcnAOPey7oG5AgGY3Vyc29yAgQA497LugbfECjwn5SXMmYxNjE0MzYtNmU0Ny00YTdkLTk0MmUtZDYwMjIwMTU1MTVjJwDj3su6BuQICm9uQm90QWRkZWQCBADj3su6BoYRN0BpZiAob3MuaXNDb2xsYWJvcmF0aXZlKCkpIHsKICAgIHRoaXNCb3Quc3RhcnRUaWNrKCk7Cn0nAOPey7oG5AgGY29uZmlnAgQA497Luga+ESjwn5SXY2Y3MmZlYzYtYzIzZS00NTJlLWJmN2ItYmI4Y2VjYzRiY2YwJwDj3su6BuQIDG9uQm90Q2hhbmdlZAIEAOPey7oG5RGqAkBpZiAodGhhdC50YWdzLmluY2x1ZGVzKCd0aWNrSW50ZXJ2YWxNUycpKSB7CiAgICB0aGlzQm90LnN0b3BUaWNrKCk7CgogICAgaWYgKG9zLmlzQ29sbGFib3JhdGl2ZSgpICYmIHRhZ3MuZW5hYmxlZCkgewogICAgICAgIHRoaXNCb3Quc3RhcnRUaWNrKCk7CiAgICB9Cn0gZWxzZSBpZiAodGhhdC50YWdzLmluY2x1ZGVzKCdlbmFibGVkJykpIHsKICAgIGlmICh0YWdzLmVuYWJsZWQpIHsKICAgICAgICB0aGlzQm90LnN0YXJ0VGljaygpOwogICAgfSBlbHNlIHsKICAgICAgICB0aGlzQm90LnN0b3BUaWNrKCk7CiAgICB9Cn0nAOPey7oG5AgHZW5hYmxlZAIEAOPey7oGkBQEdHJ1ZScA497LugbkCA50aWNrSW50ZXJ2YWxNUwIEAOPey7oGlRQDMzAwJwDj3su6BuQICWFiVmVyc2lvbgIEAOPey7oGmRQFMTAuMzUnAQRib3RzJDdkM2ExNzAzLTBhMDEtNDY2Yi05NzRmLWFlOWYxMDAxYWM3OAEnAOPey7oGnxQGc3lzdGVtAgQA497LugagFBNhYi5wcmVzZW5jZS52ZXJzaW9uJwDj3su6Bp8UFmFiUHJlc2VuY2VNaW5vclZlcnNpb24CBADj3su6BrQUATUnAOPey7oGnxQWYWJQcmVzZW5jZU1ham9yVmVyc2lvbgIEAOPey7oGthQBMCcA497LugafFAhhYklnbm9yZQIEAOPey7oGuBQEdHJ1ZScA497LugafFAphYlByZXNlbmNlAgQA497Luga9FAR0cnVlJwDj3su6Bp8UBGZvcm0CBADj3su6BsIUB25vdGhpbmcnAOPey7oGnxQNb25Ta2lsbFVwZGF0ZQIEAOPey7oGyhSeAUBjb25zdCB2ZXJzaW9uU3RyaW5nID0gdGFncy5hYlByZXNlbmNlTWFqb3JWZXJzaW9uICsgIi4iICsgdGFncy5hYlByZXNlbmNlTWlub3JWZXJzaW9uOwoKY29uc29sZS5sb2coIltBQlByZXNlbmNlXSBMb2FkZWQgQUIgc2hlbGwgdmVyc2lvbiAiICsgdmVyc2lvblN0cmluZyk7JwDj3su6Bp8UCWFiVmVyc2lvbgIEAOPey7oG6RUFMTAuMzUnAQRib3RzJDg3ZTk1MzQyLWU0NTYtNGI2My05ODkxLWQ3YTkyMWFkM2VlNwEnAOPey7oG7xUGY29uZmlnAgQA497LugbwFSjwn5SXY2Y3MmZlYzYtYzIzZS00NTJlLWJmN2ItYmI4Y2VjYzRiY2YwJwDj3su6Bu8VBm9uVGljawIEAOPey7oGlxayHUBpZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBzdGFydGApOwp9CgppZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIGNhbWVyYSBwcmVzZW5jZSBpcyBkaXNhYmxlZC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKCFjb25maWdCb3QpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBjb25maWdCb3QgdG8gYmUgcmVhZHkuYCk7CiAgICB9CiAgICByZXR1cm47Cn0KCmlmICghZ2xvYmFsVGhpcy5hYikgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgZm9yIGFiIHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIHRvIGxlYXZlIHNoZWV0IHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKGNvbmZpZ0JvdC50YWdzLnN5c3RlbVBvcnRhbCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gbGVhdmUgc3lzdGVtIHBvcnRhbC5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gR2V0IGxpc3Qgb2YgcmVsZXZhbnQgY2FtZXJhcyBmcm9tIHBvcnRhbHMgJiBkaW1lbnNpb25zIHRoYXQgdGhlIHVzZXIgaXMgYWN0aXZlIGluLgpjb25zdCBjYW1lcmFEYXRhVG9FbWl0OiBBQlVzZXJDYW1lcmFEYXRhW10gPSBbXTsKCi8vIE1hcCBwb3J0YWwgc2l0cyBvbiB0b3AgdGhlIGdyaWQgcG9ydGFsIHNvIG9ubHkgc2VuZCBtYXAgcG9ydGFsIGNhbWVyYSBpZiBpdHMgZW5hYmxlZC4KaWYgKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsKICAgICAgICByZW1vdGVJZDogY29uZmlnQm90LmlkLAogICAgICAgIHJlbW90ZU5hbWU6IGxpbmtzLmNvbmZpZy5tYXNrcy5yZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogJ21hcCcsCiAgICAgICAgY2FtZXJhVHlwZTogJ3BlcnNwZWN0aXZlJywKICAgICAgICBjb2xvcjogbGlua3MuY29uZmlnLm1hc2tzLnJlbW90ZUNvbG9yLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFNYXBQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtYXBQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgfSk7Cn0gZWxzZSBpZiAoY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lOiBsaW5rcy5jb25maWcubWFza3MucmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdncmlkJywKICAgICAgICBjYW1lcmFUeXBlOiBncmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ2FtZXJhVHlwZSA/PyAnb3J0aG9ncmFwaGljJywKICAgICAgICBjb2xvcjogbGlua3MuY29uZmlnLm1hc2tzLnJlbW90ZUNvbG9yLAogICAgICAgIGRpbWVuc2lvbjogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogZ3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVBvc2l0aW9uLAogICAgICAgIHF1YXRlcm5pb246IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFSb3RhdGlvbi5xdWF0ZXJuaW9uLAogICAgICAgIHpvb206IGdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCi8vIE1pbmkgbWFwIHBvcnRhbCBzaXRzIG9uIHRvcCB0aGUgbWluaSBtYXAgcG9ydGFsIHNvIG9ubHkgc2VuZCBtaW5pIG1hcCBwb3J0YWwgY2FtZXJhIGlmIGl0cyBlbmFibGVkLgppZiAoY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lOiBsaW5rcy5jb25maWcubWFza3MucmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtaW5pTWFwJywKICAgICAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnLAogICAgICAgIGNvbG9yOiBsaW5rcy5jb25maWcubWFza3MucmVtb3RlQ29sb3IsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pTWFwUG9ydGFsLAogICAgICAgIHBvc2l0aW9uOiBtaW5pTWFwUG9ydGFsQm90LnRhZ3MuY2FtZXJhTWFwUG9zaXRpb24sCiAgICAgICAgcXVhdGVybmlvbjogbWluaU1hcFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICB9KTsKfSBlbHNlIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCkgewogICAgY2FtZXJhRGF0YVRvRW1pdC5wdXNoKHsgCiAgICAgICAgcmVtb3RlSWQ6IGNvbmZpZ0JvdC5pZCwKICAgICAgICByZW1vdGVOYW1lOiBsaW5rcy5jb25maWcubWFza3MucmVtb3RlTmFtZSwKICAgICAgICBwb3J0YWw6ICdtaW5pR3JpZCcsCiAgICAgICAgY2FtZXJhVHlwZTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5wb3J0YWxDYW1lcmFUeXBlID8/ICdvcnRob2dyYXBoaWMnLAogICAgICAgIGNvbG9yOiBsaW5rcy5jb25maWcubWFza3MucmVtb3RlQ29sb3IsCiAgICAgICAgZGltZW5zaW9uOiBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCwKICAgICAgICBwb3NpdGlvbjogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFQb3NpdGlvbiwKICAgICAgICBxdWF0ZXJuaW9uOiBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLmNhbWVyYVJvdGF0aW9uLnF1YXRlcm5pb24sCiAgICAgICAgem9vbTogbWluaUdyaWRQb3J0YWxCb3QudGFncy5jYW1lcmFab29tLAogICAgfSk7Cn0KCmlmIChjYW1lcmFEYXRhVG9FbWl0Lmxlbmd0aCA9PT0gMCkgewogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIGlnbm9yaW5nIHRpY2sg4oCUIHdhaXRpbmcgdG8gYmUgaW4gYSBwb3J0YWwgd2l0aCBhIGNhbWVyYS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gY2FtZXJhRGF0YVRvRW1pdDpgLCBjYW1lcmFEYXRhVG9FbWl0KTsKfQoKY29uc3Qgb3RoZXJSZW1vdGVzID0gKGF3YWl0IG9zLnJlbW90ZXMoKSkuZmlsdGVyKGlkID0+IGlkICE9PSBjb25maWdCb3QuaWQpOwoKaWYgKHRhZ3MuZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gb3RoZXJSZW1vdGVzOmAsIG90aGVyUmVtb3Rlcyk7Cn0KCmlmIChvdGhlclJlbW90ZXMubGVuZ3RoID4gMCkgewogICAgc2VuZFJlbW90ZURhdGEob3RoZXJSZW1vdGVzLCAnYWJfdXNlcl9jYW1lcmFfZGF0YScsIGNhbWVyYURhdGFUb0VtaXQpOwp9CicA497LugbvFQZzeXN0ZW0CBADj3su6Br4zEmFiLnByZXNlbmNlLmNhbWVyYScA497LugbvFQphYlByZXNlbmNlAgQA497LugbRMwR0cnVlJwDj3su6Bu8VCGFiSWdub3JlAgQA497LugbWMwR0cnVlJwDj3su6Bu8VBGZvcm0CBADj3su6BtszB25vdGhpbmcnAOPey7oG7xUFZGVidWcCBADj3su6BuMzBWZhbHNlJwDj3su6Bu8VDG9uUmVtb3RlRGF0YQIEAOPey7oG6TPrA0BpZiAoIXRhZ3MuZW5hYmxlZCkgewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5uYW1lID09PSAnYWJfdXNlcl9jYW1lcmFfZGF0YScpIHsKICAgIGNvbnN0IGRhdGE6IEFCVXNlckNhbWVyYURhdGEgfCBBQlVzZXJDYW1lcmFEYXRhW10gPSB0aGF0LnRoYXQ7CgogICAgaWYgKGxpbmtzLmNvbmZpZy50YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBhYl91c2VyX2NhbWVyYV9kYXRhIGRhdGE6YCwgZGF0YSk7CiAgICB9CgogICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpc0JvdC5vbkFCVXNlckNhbWVyYURhdGFSZWNlaXZlZChkYXRhW2ldKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHRoaXNCb3Qub25BQlVzZXJDYW1lcmFEYXRhUmVjZWl2ZWQoZGF0YSk7CiAgICB9Cn0KJwDj3su6Bu8VBXR5cGVzAgQA497LugbVN+UG8J+ThGludGVyZmFjZSBBQlVzZXJDYW1lcmFEYXRhIHsKICAgIC8qKiBUaGUgcmVtb3RlIGlkIG9mIHRoZSB1c2VyIHRoZSBjYW1lcmEgZGF0YSBpcyBmb3IuICovCiAgICByZW1vdGVJZDogc3RyaW5nOwoKICAgIC8qKiBDYW4gZWl0aGVyIGJlIHVzZXIncyBkaXNwbGF5IG5hbWUgb3IgYSBzaG9ydGVuZWQgbG9jYWwgdXNlciBpZC4gKiovCiAgICByZW1vdGVOYW1lOiBzdHJpbmc7CgogICAgLyoqIFRoZSBwb3J0YWwgdGhhdCB0aGUgY2FtZXJhIGRhdGEgaXMgZm9yLiAqLwogICAgcG9ydGFsOiBzdHJpbmc7CiAgICAKICAgIC8qKiBUaGUgZGltZW5zaW9uIHRoYXQgdGhlIGNhbWVyYSBkYXRhIGlzIGZvci4gKiovCiAgICBkaW1lbnNpb246IHN0cmluZzsKCiAgICAvKiogVGhlIGNvbG9yIG9mIHRoZSB1c2VyIGNhbWVyYS4gKi8KICAgIGNvbG9yOiBzdHJpbmc7CgogICAgLyoqIFRoZSB0eXBlIG9mIHRoZSBjYW1lcmEgdGhhdCB0aGUgZGF0YSBpcyBmb3IuICovCiAgICBjYW1lcmFUeXBlOiAncGVyc3BlY3RpdmUnIHwgJ29ydGhvZ3JhcGhpYyc7CiAgICAKICAgIC8qKiBUaGUgcG9zaXRpb24gb2YgdGhlIGNhbWVyYS4gKiovCiAgICBwb3NpdGlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyIH07CgogICAgLyoqIFRoZSByb3RhdGlvbiBxdWF0ZXJuaW9uIG9mIHRoZSBjYW1lcmEuICoqLwogICAgcXVhdGVybmlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIgfTsKCiAgICAvKiogVGhlIHpvb20gdmxhdWUgdGhhdCB0aGUgY2FtZXJhIGlzIGF0LiBUaGlzIGlzIG9ubHkgcmVsZXZhbnQgZm9yIG9ydGhvZ3JhcGhpYyBjYW1lcmFzLiAgKi8KICAgIHpvb20/OiBudW1iZXI7Cn0nAOPey7oG7xUHZW5hYmxlZAIEAOPey7oGuT4FZmFsc2UnAOPey7oG7xUab25BQlVzZXJDYW1lcmFEYXRhUmVjZWl2ZWQCBADj3su6Br8+gjZAY29uc3QgY2FtZXJhRGF0YTogQUJVc2VyQ2FtZXJhRGF0YSA9IHRoYXQ7CgppZiAodGFncy5kZWJ1ZykgewogICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBjYW1lcmFEYXRhOmAsIGNhbWVyYURhdGEpCn0KCmNvbnN0IHNob3V0UmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChzaG91dCgnb25BQlVzZXJDYW1lcmFVcGRhdGUnLCBjYW1lcmFEYXRhKSk7CmNvbnN0IGNhbWVyYVVwZGF0ZWQgPSBzaG91dFJlc3VsdHMubGVuZ3RoID4gMCAmJiBzaG91dFJlc3VsdHMuc29tZShyID0+IHIudmFsdWUgPT09IHRydWUpOwoKaWYgKCFjYW1lcmFVcGRhdGVkKSB7CiAgICAvLyBUaGVyZSB3YXMgbm8gdXNlciBjYW1lcmEgdGhhdCBhY2NlcHRlZCB0aGUgdXBkYXRlLCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBvbmUuCgogICAgaWYgKHRhZ3MuZGVidWcpIHsKICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1ha2UgdXNlciBjYW1lcmE6YCwgY2FtZXJhRGF0YSk7CiAgICB9CgogICAgY29uc3QgdXNlckNhbWVyYUJvdCA9IGNyZWF0ZSh7CiAgICAgICAgc3BhY2U6ICd0ZW1wTG9jYWwnLAogICAgICAgIGFiQm90OiB0cnVlLAogICAgICAgIGFiVXNlckNhbWVyYTogdHJ1ZSwKICAgICAgICBtYW5hZ2VyOiBnZXRMaW5rKHRoaXNCb3QpLAogICAgICAgIGZvcm06ICdmcnVzdHVtJywKICAgICAgICBhbmNob3JQb2ludDogJ2NlbnRlcicsCiAgICAgICAgcmVtb3RlSWQ6IGNhbWVyYURhdGEucmVtb3RlSWQsCiAgICAgICAgcmVtb3RlTmFtZTogY2FtZXJhRGF0YS5yZW1vdGVOYW1lLAogICAgICAgIHBvcnRhbDogY2FtZXJhRGF0YS5wb3J0YWwsCiAgICAgICAgZGltZW5zaW9uOiBjYW1lcmFEYXRhLmRpbWVuc2lvbiwKICAgICAgICBbY2FtZXJhRGF0YS5kaW1lbnNpb25dOiB0cnVlLAogICAgICAgIHBvaW50YWJsZTogZmFsc2UsCiAgICAgICAgbGFiZWxQb3NpdGlvbjogJ2Zsb2F0aW5nQmlsbGJvYXJkJywKICAgICAgICAvLyBsYWJlbFNpemU6IDAuMjgsCiAgICAgICAgLy8gbGFiZWxTaXplTW9kZTogJ2F1dG8nLAogICAgICAgIG9uQ3JlYXRlOiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBvbkFCVXNlckNhbWVyYVVwZGF0ZTogTGlzdGVuZXJTdHJpbmcoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCBjYW1lcmFEYXRhOiBBQlVzZXJDYW1lcmFEYXRhID0gdGhhdDsKCiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbmNvbWluZyB1cGRhdGUgaXMgZm9yIHRoaXMgYm90LgogICAgICAgICAgICBpZiAoY2FtZXJhRGF0YS5yZW1vdGVJZCAhPT0gdGFncy5yZW1vdGVJZCB8fAogICAgICAgICAgICAgICAgY2FtZXJhRGF0YS5wb3J0YWwgIT09IHRhZ3MucG9ydGFsIHx8CiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmRpbWVuc2lvbiAhPT0gdGFncy5kaW1lbnNpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENsZWFyIG9sZCB0aW1lb3V0LgogICAgICAgICAgICBpZiAodGhpc0JvdC52YXJzLnRpbWVvdXRJZCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNCb3QudmFycy50aW1lb3V0SWQpOwogICAgICAgICAgICAgICAgdGhpc0JvdC52YXJzLnRpbWVvdXRJZCA9IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldIGNhbWVyYURhdGE6YCwgY2FtZXJhRGF0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmxhYmVsICE9PSBjYW1lcmFEYXRhLnJlbW90ZU5hbWUpIHsKICAgICAgICAgICAgICAgIHRhZ3MubGFiZWwgPSBjYW1lcmFEYXRhLnJlbW90ZU5hbWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdzLmNvbG9yICE9PSBjYW1lcmFEYXRhLmNvbG9yKSB7CiAgICAgICAgICAgICAgICB0YWdzLmNvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRhZ3MubGFiZWxGbG9hdGluZ0JhY2tncm91bmRDb2xvciAhPT0gY2FtZXJhRGF0YS5jb2xvcil7IAogICAgICAgICAgICAgICAgdGFncy5sYWJlbEZsb2F0aW5nQmFja2dyb3VuZENvbG9yID0gY2FtZXJhRGF0YS5jb2xvcjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2xhbXAwMSh0OiBudW1iZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21Ub1Qoem9vbTogbnVtYmVyLCB6b29tTWluOiBudW1iZXIsIHpvb21NYXg6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gdD0wIGF0IHpvb21NaW4sIHQ9MSBhdCB6b29tTWF4CiAgICAgICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5tYXgoem9vbSwgMWUtNik7CiAgICAgICAgICAgICAgICBjb25zdCBhID0gTWF0aC5sb2coem9vbU1pbik7CiAgICAgICAgICAgICAgICBjb25zdCBiID0gTWF0aC5sb2coem9vbU1heCk7CiAgICAgICAgICAgICAgICBjb25zdCB2ID0gKE1hdGgubG9nKHopIC0gYSkgLyAoYiAtIGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wMDEodik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGxlcnAoYTogbnVtYmVyLCBiOiBudW1iZXIsIHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgKyAoYiAtIGEpICogdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gT3B0aW9uYWwgc21vb3RoaW5nIHNvIGl0IGRvZXNu4oCZdCBmZWVsIGxpbmVhciAvIGhhcnNoOgogICAgICAgICAgICBmdW5jdGlvbiBzbW9vdGhzdGVwKHQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgKiB0ICogKDMgLSAyICogdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHQ9MCBhdCB6b29tTWluICh6b29tZWQgb3V0KSwgdD0xIGF0IHpvb21NYXggKHpvb21lZCBpbikKICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlFYXNlKHQ6IG51bWJlciwgZXhwb25lbnQ6IG51bWJlcikgewogICAgICAgICAgICAgICAgLy8gZXhwb25lbnQgPCAxIHNsb3dzIGRvd24gdGhlIOKAnG1vdmUgYXdheeKAnSB3aGVuIHpvb21pbmcgb3V0CiAgICAgICAgICAgICAgICAvLyAobWFrZXMgY3VydmUgZ2VudGxlciBuZWFyIHQ9MCkKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhzbW9vdGhzdGVwKHQpLCBleHBvbmVudCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldFZpekNhbWVyYVBvc2UoCiAgICAgICAgICAgICAgICBjYW1lcmFQb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH0sCiAgICAgICAgICAgICAgICBjYW1lcmFSb3RhdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyOyB3OiBudW1iZXIgfSwKICAgICAgICAgICAgICAgIGNhbWVyYVR5cGU6ICdvcnRob2dyYXBoaWMnIHwgJ3BlcnNwZWN0aXZlJywKICAgICAgICAgICAgICAgIGNhbWVyYVpvb206IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICB6b29tTWluID0gMC40LAogICAgICAgICAgICAgICAgem9vbU1heCA9IDgwLAogICAgICAgICAgICAgICAgZmFyRGlzdCA9IDMwLAogICAgICAgICAgICAgICAgbmVhckRpc3QgPSAyLAogICAgICAgICAgICAgICAgZXhwb25lbnQgPSAwLjUsCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFZlY3RvcjMoY2FtZXJhUG9zaXRpb24ueCwgY2FtZXJhUG9zaXRpb24ueSwgY2FtZXJhUG9zaXRpb24ueik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCByb3Q7CiAgICAgICAgICAgICAgICBpZiAoKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24gfHwgY29uZmlnQm90LnRhZ3MubWluaU1hcFBvcnRhbCA9PT0gdGFncy5kaW1lbnNpb24pICYmIGNhbWVyYVR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHsgCiAgICAgICAgICAgICAgICAgICAgcm90ID0gYXdhaXQgYWIubGlua3MudXRpbHMuY2FsY01hcFJvdGF0aW9uKHsgbWFwUG9zaXRpb246IGNhbWVyYVBvc2l0aW9uLCBhdXhSb3RhdGlvbjogbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSl9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcm90ID0gbmV3IFJvdGF0aW9uKHsgcXVhdGVybmlvbjogY2FtZXJhUm90YXRpb24gfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgZm9yd2FyZCA9IHJvdC5yb3RhdGVWZWN0b3IzKG5ldyBWZWN0b3IzKDAsIDEsIDApKS5ub3JtYWxpemUoKTsKCiAgICAgICAgICAgICAgICBpZiAoY2FtZXJhVHlwZSA9PT0gJ3BlcnNwZWN0aXZlJykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiBwb3MsIHJvdGF0aW9uOiByb3QgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCB6b29tID0gTWF0aC5tYXgoY2FtZXJhWm9vbSA/PyAxMCwgMWUtNik7CgogICAgICAgICAgICAgICAgbGV0IHQgPSB6b29tVG9UKHpvb20sIHpvb21NaW4sIHpvb21NYXgpOwogICAgICAgICAgICAgICAgdCA9IGFwcGx5RWFzZSh0LCBleHBvbmVudCk7CgogICAgICAgICAgICAgICAgY29uc3QgZCA9IGxlcnAoZmFyRGlzdCwgbmVhckRpc3QsIHQpOwogICAgICAgICAgICAgICAgY29uc3Qgdml6UG9zID0gcG9zLnN1YnRyYWN0KGZvcndhcmQubXVsdGlwbHlTY2FsYXIoZCkpOwoKICAgICAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiB2aXpQb3MsIHJvdGF0aW9uOiByb3QsIGRlYnVnOiB7IHQsIGQsIHpvb20gfSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBwb3NlID0gYXdhaXQgZ2V0Vml6Q2FtZXJhUG9zZSgKICAgICAgICAgICAgICAgIGNhbWVyYURhdGEucG9zaXRpb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnF1YXRlcm5pb24sCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLmNhbWVyYVR5cGUsCiAgICAgICAgICAgICAgICBjYW1lcmFEYXRhLnpvb20sCiAgICAgICAgICAgICAgICAwLjQsCiAgICAgICAgICAgICAgICA4MCwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAtNDI3LAogICAgICAgICAgICAgICAgMC4xLAogICAgICAgICAgICApOwoKICAgICAgICAgICAgY29uc3QgcG9zVGFnTmFtZSA9IHRhZ3MuZGltZW5zaW9uICsgJ1Bvc2l0aW9uJzsKICAgICAgICAgICAgY29uc3Qgcm90VGFnTmFtZSA9IHRhZ3MuZGltZW5zaW9uICsgJ1JvdGF0aW9uJzsKCiAgICAgICAgICAgIGNsZWFyQW5pbWF0aW9ucyh0aGlzQm90LCBbcG9zVGFnTmFtZSwgcm90VGFnTmFtZV0pOwoKICAgICAgICAgICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy5pbnRlcnBvbGF0ZSAmJiB0YWdzW3Bvc1RhZ05hbWVdICYmIHRhZ3Nbcm90VGFnTmFtZV0pIHsKICAgICAgICAgICAgICAgIGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgICAgICAgICAgICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICAgICAgICAgICAgICBbcG9zVGFnTmFtZV06IHRhZ3NbcG9zVGFnTmFtZV0sCiAgICAgICAgICAgICAgICAgICAgICAgIFtyb3RUYWdOYW1lXTogdGFnc1tyb3RUYWdOYW1lXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgW3Bvc1RhZ05hbWVdOiBwb3NlLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBbcm90VGFnTmFtZV06IHBvc2Uucm90YXRpb24sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogbGlua3MubWFuYWdlci5saW5rcy50aWNrZXIudGFncy50aWNrSW50ZXJ2YWxNUyAvIDEwMDAsCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0YWdzW3Bvc1RhZ05hbWVdID0gcG9zZS5wb3NpdGlvbjsKICAgICAgICAgICAgICAgIHRhZ3Nbcm90VGFnTmFtZV0gPSBwb3NlLnJvdGF0aW9uOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBTZXQgbmV3IHRpbWVvdXQuCiAgICAgICAgICAgIHRoaXNCb3QudmFycy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGRlc3Ryb3kodGhpc0JvdCksIGxpbmtzLm1hbmFnZXIudGFncy5jYW1lcmFCb3RUaW1lb3V0TVMpOwoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSksCiAgICAgICAgb25EZXN0cm95OiBMaXN0ZW5lclN0cmluZygoKSA9PiB7CiAgICAgICAgICAgIGlmIChsaW5rcy5tYW5hZ2VyLnRhZ3MuZGVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbYWJVc2VyQ2FtZXJhLiR7dGFnTmFtZX0gKCR7dGFncy5yZW1vdGVOYW1lfSldYCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSkKCiAgICAvLyBEaXJlY3RseSBjYWxsIG9uQUJVc2VyQ2FtZXJhVXBkYXRlIHRoZSBmaXJzdCB0aW1lIHdlIG1ha2UgYSBuZXcgdXNlciBjYW1lcmEgYm90LgogICAgYXdhaXQgdXNlckNhbWVyYUJvdC5vbkFCVXNlckNhbWVyYVVwZGF0ZShjYW1lcmFEYXRhKTsKfScA497LugbvFRJjYW1lcmFCb3RUaW1lb3V0TVMCBADj3su6Brx0BDMwMDAnAOPey7oG7xULaW50ZXJwb2xhdGUCBADj3su6BsF0BHRydWUnAOPey7oG7xUGdGlja2VyAgQA497LugbGdCjwn5SXNWMxOWJjOWYtYzY4ZC00M2M3LWJlMzQtMzYwMjFmN2U0ZGQzJwDj3su6Bu8VCWFiVmVyc2lvbgIEAOPey7oG7XQFMTAuMzUnAQRib3RzJGNmNzJmZWM2LWMyM2UtNDUyZS1iZjdiLWJiOGNlY2M0YmNmMAEnAOPey7oG83QGc3lzdGVtAgQA497Lugb0dBJhYi5wcmVzZW5jZS5jb25maWcnAOPey7oG83QGb25UaWNrAgQA497LugaHdYQHQGlmICghY29uZmlnQm90KSB7CiAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgIGNvbnNvbGUubG9nKGBbJHt0YWdzLnN5c3RlbX0uJHt0YWdOYW1lfV0gaWdub3JpbmcgdGljayDigJQgd2FpdGluZyBmb3IgY29uZmlnQm90IHRvIGJlIHJlYWR5LmApOwogICAgfQogICAgcmV0dXJuOwp9CgppZiAoIWdsb2JhbFRoaXMuYWIpIHsKICAgIGlmICh0YWdzLmRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYFske3RhZ3Muc3lzdGVtfS4ke3RhZ05hbWV9XSBpZ25vcmluZyB0aWNrIOKAlCB3YWl0aW5nIGZvciBhYiB0byBiZSByZWFkeS5gKTsKICAgIH0KICAgIHJldHVybjsKfQoKLy8gVGhlIG5hbWUgdGhhdCB0aGlzIHJlbW90ZSBpcyB0byBiZSBrbm93biBhcyB0byBvdGhlciB1c2Vycy4KbGV0IHJlbW90ZU5hbWU7CgppZiAoYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lKSB7CiAgICByZW1vdGVOYW1lID0gYWIubGlua3MuY29uc29sZS5tYXNrcy5wcmVmZXJyZWROYW1lOwp9IGVsc2UgaWYgKGF1dGhCb3QgJiYgYXV0aEJvdC50YWdzLm5hbWUpIHsKICAgIHJlbW90ZU5hbWUgPSBhdXRoQm90LnRhZ3MubmFtZTsKfSBlbHNlIHsKICAgIHJlbW90ZU5hbWUgPSBjb25maWdCb3QuaWQuc3Vic3RyaW5nKDAsNSk7Cn0KCmlmIChtYXNrcy5yZW1vdGVOYW1lICE9PSByZW1vdGVOYW1lKSB7CiAgICBtYXNrcy5yZW1vdGVOYW1lID0gcmVtb3RlTmFtZTsKfQoKaWYgKCFtYXNrcy5yZW1vdGVDb2xvcikgewogICAgbWF0aC5zZXRSYW5kb21TZWVkKGNvbmZpZ0JvdC5pZCk7CiAgICBtYXNrcy5yZW1vdGVDb2xvciA9IGByZ2IoJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSwgJHttYXRoLnJhbmRvbUludCgwLCAyNTUpfSlgOwp9JwDj3su6BvN0CWFiVmVyc2lvbgIEAOPey7oGiHwFMTAuMzUnAOPey7oG83QKYWJQcmVzZW5jZQIEAOPey7oGjnwEdHJ1ZQA="}]}