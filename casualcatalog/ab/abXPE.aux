{"version":2,"updates":[{"id":0,"timestamp":1771650021572,"update":"AVGLiP/PAgAnAQRib3RzJDY2YzljN2RmLWQ4NDItNGJhNC04ZWM1LTBkNDk1ZWVmMWQwYwEnAIuI/88CAAZzeXN0ZW0CBACLiP/PAgEKYWIueHBlLmd1aScAi4j/zwIAA0FwcAIEAIuI/88CDLobQGNvbnN0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9ID0gb3MuYXBwSG9va3M7Cgpjb25zdCBDcmVkaXREaXNwbGF5ID0gdGhpc0JvdC5DcmVkaXREaXNwbGF5KCk7CiAgICAgICAgCmNvbnN0IEFwcCA9ICgpID0+IHsKICAgIGNvbnN0IFtjcmVkaXRzLCBzZXRDcmVkaXRzXSA9IHVzZVN0YXRlKCk7CiAgICBjb25zdCBbaWNvbiwgc2V0SWNvbl0gPSB1c2VTdGF0ZSgpOwogICAgY29uc3QgY3JlZGl0RGlzcGxheVJlZiA9IHVzZVJlZihudWxsKTsKCiAgICAvLyBvbiBtb3VudAogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBvbkFCWFBFUGFpZE91dCA9IGFzeW5jIChsaXN0ZW5lclRoYXQpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBwYXlBbW91bnQsIGN1ckNyZWRpdHMgfSA9IGxpc3RlbmVyVGhhdDsKCiAgICAgICAgICAgIHNldENyZWRpdHMoY3VyQ3JlZGl0cyk7CiAgICAgICAgICAgIGFiLmxpbmtzLnNvdW5kLmFiUGxheVNvdW5kKHsgdmFsdWU6ICdhYi9hdWRpby9wdXJjaGFzZS5tcDMnIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc3Qgc3Bhd25Db2lucyA9IGFzeW5jIChsaXN0ZW5lclRoYXQpID0+IHsKICAgICAgICAgICAgY29uc3QgeyB0YXJnZXRYLCB0YXJnZXRZLCB0YXJnZXRCb3QsIGNvdW50IH0gPSBsaXN0ZW5lclRoYXQ7CgogICAgICAgICAgICBjb25zdCBzdGFydFggPSBncmlkUG9ydGFsQm90LnRhZ3MucGl4ZWxXaWR0aCAtIDEwMDsKICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gNTA7CgogICAgICAgICAgICBpZiAoY3JlZGl0RGlzcGxheVJlZi5jdXJyZW50ICYmIGNvdW50KSB7CiAgICAgICAgICAgICAgICBsZXQgY29tcHV0ZWRUYXJnZXRYOwogICAgICAgICAgICAgICAgbGV0IGNvbXB1dGVkVGFyZ2V0WTsKCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Qm90KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0ZSB0YXJnZXQgcG9zaXRpb24gdXNpbmcgZ2l2ZW4gYm90LgogICAgICAgICAgICAgICAgICAgIGxldCBwb3J0YWw7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRpbWVuc2lvbjsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCAmJiB0YXJnZXRCb3QudGFnc1tjb25maWdCb3QudGFncy5tYXBQb3J0YWxdID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnRhbCA9ICdtYXAnOwogICAgICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWw7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICYmIHRhcmdldEJvdC50YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWxdID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnRhbCA9ICdncmlkJzsKICAgICAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uID0gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBwb3J0YWw6ICR7cG9ydGFsfSwgZGltZW5zaW9uOiAke2RpbWVuc2lvbn1gKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcnRhbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib3RQb3NpdGlvbiA9IGdldEJvdFBvc2l0aW9uKHRhcmdldEJvdCwgZGltZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90U2NyZWVuQ29vcmRzID0gYXdhaXQgb3MuY2FsY3VsYXRlU2NyZWVuQ29vcmRpbmF0ZXNGcm9tUG9zaXRpb24ocG9ydGFsLCBib3RQb3NpdGlvbik7CgogICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFRhcmdldFggPSBib3RTY3JlZW5Db29yZHMueDsKICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRUYXJnZXRZID0gYm90U2NyZWVuQ29vcmRzLnk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNyZWRpdERpc3BsYXlSZWYuY3VycmVudC5zcGF3bkNvaW5zKAogICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGNvdW50LCAxMCksCiAgICAgICAgICAgICAgICAgICAgc3RhcnRYLAogICAgICAgICAgICAgICAgICAgIHN0YXJ0WSwKICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFRhcmdldFggPz8gdGFyZ2V0WCwKICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFRhcmdldFkgPz8gdGFyZ2V0WQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgb3MuYWRkQm90TGlzdGVuZXIodGhpc0JvdCwgJ29uQUJYUEVQYWlkT3V0Jywgb25BQlhQRVBhaWRPdXQpOwogICAgICAgIG9zLmFkZEJvdExpc3RlbmVyKHRoaXNCb3QsICdzcGF3bkNvaW5zJywgc3Bhd25Db2lucyk7CgogICAgICAgIC8vIEdyYWIgY3VycmVudCBjcmVkaXRzIGFtb3VudC4KICAgICAgICBhYlhQRS5nZXRDcmVkaXRzKCkudGhlbigoY3VyQ3JlZGl0cykgPT4gewogICAgICAgICAgICBzZXRDcmVkaXRzKGN1ckNyZWRpdHMpOwogICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgLy8gTG9hZCBpY29uCiAgICAgICAgaWYgKHRhZ3MuY3JlZGl0SWNvbikgewogICAgICAgICAgICBjb25zdCBpY29uVVJMID0gYWIuYWJCdWlsZENhc3VhbENhdGFsb2dVUkwodGFncy5jcmVkaXRJY29uKTsKICAgICAgICAgICAgc2V0SWNvbihpY29uVVJMKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgICAgIG9zLnJlbW92ZUJvdExpc3RlbmVyKHRoaXNCb3QsICdvbkFCWFBFUGFpZE91dCcsIG9uQUJYUEVQYWlkT3V0KTsKICAgICAgICAgICAgb3MucmVtb3ZlQm90TGlzdGVuZXIodGhpc0JvdCwgJ3NwYXduQ29pbnMnLCBzcGF3bkNvaW5zKTsKICAgICAgICB9OwogICAgfSwgW10pOwoKICAgIGNvbnN0IG9uQ3JlZGl0RGlzcGxheUNsaWNrID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYXdhaXQgb3MuZ2V0UmVjb3Jkc0VuZHBvaW50KCk7CiAgICAgICAgb3Mub3BlblVSTChlbmRwb2ludCk7CiAgICB9LCBbXSk7CgogICAgcmV0dXJuICgKICAgICAgICA8PgogICAgICAgICAgICA8c3R5bGU+e3RhZ3NbJ3N0eWxlLmNzcyddfTwvc3R5bGU+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhYi14cGUtZ3VpJz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0b3AtcmlnaHQnPgogICAgICAgICAgICAgICAgICAgIHtjcmVkaXRzICE9IG51bGwgJiYgCiAgICAgICAgICAgICAgICAgICAgICAgIDxDcmVkaXREaXNwbGF5IGljb249e2ljb259IGFtb3VudD17Y3JlZGl0c30gYW5pbWF0ZT17dHJ1ZX0gb25DbGljaz17b25DcmVkaXREaXNwbGF5Q2xpY2t9IHJlZj17Y3JlZGl0RGlzcGxheVJlZn0gLz4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC8+CiAgICApCn0KCnJldHVybiBBcHA7CicAi4j/zwIABW1vdW50AgQAi4j/zwLHG9QBQGlmICghdGhpc0JvdC52YXJzLmFwcEluc3RhbmNlKSB7CiAgICB0aGlzQm90LnZhcnMuYXBwSW5zdGFuY2UgPSB0aGlzQm90LkFwcCgpOwogICAgYXdhaXQgb3MucmVnaXN0ZXJBcHAodGFncy5zeXN0ZW0sIHRoaXNCb3QpOwoKICAgIGNvbnN0IEFwcCA9IHRoaXNCb3QudmFycy5hcHBJbnN0YW5jZTsKICAgIG9zLmNvbXBpbGVBcHAodGFncy5zeXN0ZW0sIDxBcHAvPikKfQonAIuI/88CAAd1bm1vdW50AgQAi4j/zwKcHXFAaWYgKHRoaXNCb3QudmFycy5hcHBJbnN0YW5jZSkgewogICAgZGVsZXRlIHRoaXNCb3QudmFycy5hcHBJbnN0YW5jZTsKICAgIGF3YWl0IG9zLnVucmVnaXN0ZXJBcHAodGFncy5zeXN0ZW0pOwp9CicAi4j/zwIACXN0eWxlLmNzcwIEAIuI/88Cjh6+Ci5hYi14cGUtZ3VpIHsKfQoKLmFiLXhwZS1ndWkgLnRvcC1yaWdodCB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDEuMjVyZW07CiAgICByaWdodDogMC41cmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KCi5jcmVkaXQtZGlzcGxheSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHBhZGRpbmc6IDAuNnJlbTsKICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMTVzIGVhc2Utb3V0OwogICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgY2VudGVyOwp9CgouY3JlZGl0LWRpc3BsYXkgaW1nIHsKICAgIHdpZHRoOiAycmVtOwp9CgouY3JlZGl0LWRpc3BsYXkgc3BhbiB7CiAgICBtYXJnaW4tbGVmdDogMC41cmVtOwogICAgZm9udC1zaXplOiAxLjJyZW07CiAgICBmb250LXdlaWdodDogYm9sZDsKfQoKLmNyZWRpdC1jb2luIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHdpZHRoOiAycmVtOwogICAgaGVpZ2h0OiAycmVtOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICB6LWluZGV4OiAxMDAwMDsKfQoKLmNyZWRpdC1mbG9hdCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA1MCU7CiAgICB0b3A6IDEwMCU7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgYW5pbWF0aW9uOiBjcmVkaXQtZmxvYXQtYW5pbSAycyBlYXNlLW91dCBmb3J3YXJkczsKfQoKQGtleWZyYW1lcyBjcmVkaXQtZmxvYXQtYW5pbSB7CiAgICAwJSB7CiAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgwKTsKICAgIH0KICAgIDEwMCUgewogICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoM3JlbSk7CiAgICB9Cn0KCi5jcmVkaXQtcHVsc2UgeyAKICAgIGFuaW1hdGlvbjogY3JlZGl0LXB1bHNlLWFuaW0gMC41cyBlYXNlLW91dDsKfQoKQGtleWZyYW1lcyBjcmVkaXQtcHVsc2UtYW5pbSB7CiAgICAwJSAgIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfQogICAgMjIlICB7IHRyYW5zZm9ybTogc2NhbGUoMS4zMyk7IH0KICAgIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9Cn0nAIuI/88CAAlvbkRlc3Ryb3kCBACLiP/PAs0oE0B0aGlzQm90LnVubW91bnQoKTsoAIuI/88CAAVob21lWAF9ACgAi4j/zwIABWhvbWVZAX0DJwCLiP/PAgASb25BQlhQRUluaXRpYWxpemVkAgQAi4j/zwLjKBFAdGhpc0JvdC5tb3VudCgpOycAi4j/zwIABWFiWFBFAgQAi4j/zwL1KAR0cnVlJwCLiP/PAgAIYWJJZ25vcmUCBACLiP/PAvooBHRydWUnAIuI/88CAARmb3JtAgQAi4j/zwL/KAdub3RoaW5nJwCLiP/PAgAFdHlwZXMCBACLiP/PAocpBPCfk4QnAIuI/88CAA1DcmVkaXREaXNwbGF5AgQAi4j/zwKKKY0uQGNvbnN0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlSW1wZXJhdGl2ZUhhbmRsZSB9ID0gb3MuYXBwSG9va3M7CmNvbnN0IHsgZm9yd2FyZFJlZiB9ID0gb3MuYXBwQ29tcGF0OwoKaW50ZXJmYWNlIENyZWRpdERpc3BsYXlQcm9wcyB7CiAgICBhbW91bnQ6IG51bWJlcjsKICAgIGljb246IHN0cmluZzsKICAgIGFuaW1hdGU/OiBib29sZWFuOwogICAgb25DbGljaz86ICgpID0+IHZvaWQ7Cn0KCmludGVyZmFjZSBGbG9hdGluZ051bWJlciB7CiAgICBpZDogbnVtYmVyOwogICAgdmFsdWU6IG51bWJlcjsKfQoKaW50ZXJmYWNlIENvaW5QYXJ0aWNsZSB7CiAgICBpZDogbnVtYmVyOwogICAgc3RhcnRYOiBudW1iZXI7CiAgICBzdGFydFk6IG51bWJlcjsKICAgIHRhcmdldFg6IG51bWJlcjsKICAgIHRhcmdldFk6IG51bWJlcjsKICAgIHN0YXJ0VGltZTogbnVtYmVyOwogICAgZHVyYXRpb246IG51bWJlcjsKICAgIGFyY0hlaWdodDogbnVtYmVyOwogICAgb2Zmc2V0WDogbnVtYmVyOwogICAgcHJvZ3Jlc3M6IG51bWJlcjsKfQoKZnVuY3Rpb24gZWFzZU91dEN1YmljKHQ6IG51bWJlcikgewogICAgcmV0dXJuIDEgLSBNYXRoLnBvdygxIC0gdCwgMyk7Cn0KCmZ1bmN0aW9uIGVhc2VJbk91dFF1YWQodDogbnVtYmVyKSB7CiAgICByZXR1cm4gdCA8IDAuNSA/IDIgKiB0ICogdCA6IDEgLSBNYXRoLnBvdygtMiAqIHQgKyAyLCAyKSAvIDI7Cn0KCmxldCBmbG9hdElkID0gMDsKbGV0IGNvaW5JZCA9IDA7Cgpjb25zdCBGTE9BVFNfVElNRU9VVF9NUyA9IDIwMDA7CmNvbnN0IFBVTFNFX1RJTUVPVVRfTVMgPSA1MDA7Cgpjb25zdCBDcmVkaXREaXNwbGF5ID0gZm9yd2FyZFJlZigoewogICAgYW1vdW50LAogICAgaWNvbiwKICAgIGFuaW1hdGUgPSBmYWxzZSwKICAgIG9uQ2xpY2sKfTogQ3JlZGl0RGlzcGxheVByb3BzLCByZWYpID0+IHsKICAgIGNvbnN0IFtkaXNwbGF5QW1vdW50LCBzZXREaXNwbGF5QW1vdW50XSA9IHVzZVN0YXRlKGFtb3VudCk7CiAgICBjb25zdCBbcHVsc2UsIHNldFB1bHNlXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtmbG9hdHMsIHNldEZsb2F0c10gPSB1c2VTdGF0ZTxGbG9hdGluZ051bWJlcltdPihbXSk7CiAgICBjb25zdCBbY29pbnMsIHNldENvaW5zXSA9IHVzZVN0YXRlPENvaW5QYXJ0aWNsZVtdPihbXSk7CiAgICBjb25zdCBwcmV2QW1vdW50UmVmID0gdXNlUmVmKGFtb3VudCk7CiAgICBjb25zdCBhbmltRnJhbWVSZWYgPSB1c2VSZWY8bnVtYmVyIHwgbnVsbD4obnVsbCk7CiAgICBjb25zdCBjb2luc0xvb3BSZWYgPSB1c2VSZWY8bnVtYmVyIHwgbnVsbD4obnVsbCk7CiAgICBjb25zdCB3aWRnZXRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTsKCiAgICAvLyAtLS0gTnVtYmVyIGFuaW1hdGlvbiAtLS0KICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgZnJvbSA9IHByZXZBbW91bnRSZWYuY3VycmVudDsKICAgICAgICBjb25zdCB0byA9IGFtb3VudDsKICAgICAgICBwcmV2QW1vdW50UmVmLmN1cnJlbnQgPSBhbW91bnQ7CgogICAgICAgIGlmICghYW5pbWF0ZSB8fCBmcm9tID09PSB0bykgewogICAgICAgICAgICBzZXREaXNwbGF5QW1vdW50KHRvKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc2V0UHVsc2UodHJ1ZSk7CgogICAgICAgIGNvbnN0IGRpZmYgPSB0byAtIGZyb207CiAgICAgICAgY29uc3QgaWQgPSArK2Zsb2F0SWQ7CiAgICAgICAgc2V0RmxvYXRzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQsIHZhbHVlOiBkaWZmIH1dKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgc2V0RmxvYXRzKHByZXYgPT4gcHJldi5maWx0ZXIoZiA9PiBmLmlkICE9PSBpZCkpOwogICAgICAgIH0sIEZMT0FUU19USU1FT1VUX01TKTsKCiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLm1pbigxNTAwLCA0MDAgKyBNYXRoLmFicyh0byAtIGZyb20pICogNSk7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKCiAgICAgICAgZnVuY3Rpb24gdGljayhub3c6IG51bWJlcikgewogICAgICAgICAgICBjb25zdCB0ID0gTWF0aC5taW4oMSwgKG5vdyAtIHN0YXJ0KSAvIGR1cmF0aW9uKTsKICAgICAgICAgICAgc2V0RGlzcGxheUFtb3VudChNYXRoLnJvdW5kKGZyb20gKyAodG8gLSBmcm9tKSAqIGVhc2VPdXRDdWJpYyh0KSkpOwogICAgICAgICAgICBpZiAodCA8IDEpIHsKICAgICAgICAgICAgICAgIGFuaW1GcmFtZVJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhbmltRnJhbWVSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTsKICAgICAgICByZXR1cm4gKCkgPT4gewogICAgICAgICAgICBpZiAoYW5pbUZyYW1lUmVmLmN1cnJlbnQpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1GcmFtZVJlZi5jdXJyZW50KTsKICAgICAgICB9OwogICAgfSwgW2Ftb3VudCwgYW5pbWF0ZV0pOwoKICAgIC8vIC0tLSBQdWxzZSAtLS0KICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFwdWxzZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFB1bHNlKGZhbHNlKSwgUFVMU0VfVElNRU9VVF9NUyk7CiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0KTsKICAgIH0sIFtwdWxzZV0pOwoKICAgIC8vIC0tLSBDb2luIGFuaW1hdGlvbiBsb29wIC0tLQogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAoY29pbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGlmIChjb2luc0xvb3BSZWYuY3VycmVudCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUoY29pbnNMb29wUmVmLmN1cnJlbnQpOwogICAgICAgICAgICBjb2luc0xvb3BSZWYuY3VycmVudCA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvb3AoKSB7CiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgICAgICBzZXRDb2lucyhwcmV2ID0+CiAgICAgICAgICAgICAgICBwcmV2CiAgICAgICAgICAgICAgICAgICAgLm1hcChjID0+ICh7IC4uLmMsIHByb2dyZXNzOiBNYXRoLm1pbigxLCAobm93IC0gYy5zdGFydFRpbWUpIC8gYy5kdXJhdGlvbikgfSkpCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihjID0+IGMucHJvZ3Jlc3MgPCAxKQogICAgICAgICAgICApOwogICAgICAgICAgICBjb2luc0xvb3BSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTsKICAgICAgICB9CgogICAgICAgIGNvaW5zTG9vcFJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApOwogICAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgICAgIGlmIChjb2luc0xvb3BSZWYuY3VycmVudCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUoY29pbnNMb29wUmVmLmN1cnJlbnQpOwogICAgICAgIH07CiAgICB9LCBbY29pbnMubGVuZ3RoID4gMF0pOwoKICAgIC8vIC0tLSBJbXBlcmF0aXZlIEFQSSAtLS0KICAgIGNvbnN0IHNwYXduQ29pbnMgPSB1c2VDYWxsYmFjaygoY291bnQ6IG51bWJlciwgc3RhcnRYOiBudW1iZXIsIHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRYOiBudW1iZXIsIHRhcmdldFk6IG51bWJlcikgPT4gewogICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOwoKICAgICAgICBjb25zdCBuZXdDb2luczogQ29pblBhcnRpY2xlW10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb3VudCB9LCAoXywgaSkgPT4gKHsKICAgICAgICAgICAgaWQ6ICsrY29pbklkLAogICAgICAgICAgICBzdGFydFgsCiAgICAgICAgICAgIHN0YXJ0WSwKICAgICAgICAgICAgdGFyZ2V0WCwKICAgICAgICAgICAgdGFyZ2V0WSwKICAgICAgICAgICAgc3RhcnRUaW1lOiBub3cgKyBpICogNjAsCiAgICAgICAgICAgIGR1cmF0aW9uOiA3MDAgKyAoTWF0aC5yYW5kb20oKSAqIDMwMCksCiAgICAgICAgICAgIGFyY0hlaWdodDogNDAgKyAoTWF0aC5yYW5kb20oKSAqIDgwKSwKICAgICAgICAgICAgb2Zmc2V0WDogKE1hdGgucmFuZG9tKCkgLSAwLjUpICogNjAsCiAgICAgICAgICAgIHByb2dyZXNzOiAwLAogICAgICAgIH0pKTsKCiAgICAgICAgc2V0Q29pbnMocHJldiA9PiBbLi4ucHJldiwgLi4ubmV3Q29pbnNdKTsKICAgIH0sIFtdKTsKCiAgICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHsgc3Bhd25Db2lucyB9KSwgW3NwYXduQ29pbnNdKTsKCiAgICAvLyAtLS0gUmVuZGVyIGEgc2luZ2xlIGNvaW4gLS0tCiAgICBjb25zdCByZW5kZXJDb2luID0gKGM6IENvaW5QYXJ0aWNsZSkgPT4gewogICAgICAgIGNvbnN0IHQgPSBlYXNlSW5PdXRRdWFkKGMucHJvZ3Jlc3MpOwoKICAgICAgICBjb25zdCB4ID0gYy5zdGFydFggKyAoYy50YXJnZXRYIC0gYy5zdGFydFgpICogdCArIGMub2Zmc2V0WCAqICgxIC0gdCk7CiAgICAgICAgY29uc3QgYmFzZVkgPSBjLnN0YXJ0WSArIChjLnRhcmdldFkgLSBjLnN0YXJ0WSkgKiB0OwogICAgICAgIGNvbnN0IGFyYyA9IC1jLmFyY0hlaWdodCAqIDQgKiB0ICogKDEgLSB0KTsKICAgICAgICBjb25zdCB5ID0gYmFzZVkgKyBhcmM7CgogICAgICAgIGNvbnN0IHNjYWxlID0gMSAtIHQgKiAwLjQ7CiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHQgPiAwLjg1ID8gMSAtICh0IC0gMC44NSkgLyAwLjE1IDogMTsKCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgPGltZwogICAgICAgICAgICAgICAga2V5PXtjLmlkfQogICAgICAgICAgICAgICAgc3JjPXtpY29ufQogICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJjcmVkaXQtY29pbiIKICAgICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogYCR7eH1weGAsCiAgICAgICAgICAgICAgICAgICAgdG9wOiBgJHt5fXB4YCwKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgc2NhbGUoJHtzY2FsZX0pYCwKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5LAogICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgLz4KICAgICAgICApOwogICAgfTsKCiAgICByZXR1cm4gKAogICAgICAgIDw+CiAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgIHJlZj17d2lkZ2V0UmVmfQogICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgY3JlZGl0LWRpc3BsYXkgJHtwdWxzZSA/ICdjcmVkaXQtcHVsc2UnIDogJyd9YH0KICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9CiAgICAgICAgICAgICAgICBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fQogICAgICAgICAgICA+CiAgICAgICAgICAgICAgICA8aW1nIHNyYz17aWNvbn0+PC9pbWc+CiAgICAgICAgICAgICAgICA8c3Bhbj57ZGlzcGxheUFtb3VudH08L3NwYW4+CiAgICAgICAgICAgICAgICB7ZmxvYXRzLm1hcChmID0+ICgKICAgICAgICAgICAgICAgICAgICA8c3BhbgogICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2YuaWR9CiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0iY3JlZGl0LWZsb2F0IgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogZi52YWx1ZSA+IDAgPyAnIzIyYzU1ZScgOiAnI2VmNDQ0NCcgfX0KICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgIHtmLnZhbHVlID4gMCA/ICcrJyA6ICcnfXtmLnZhbHVlfQogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAge2NvaW5zLm1hcChyZW5kZXJDb2luKX0KICAgICAgICA8Lz4KICAgICk7Cn0pOwoKcmV0dXJuIENyZWRpdERpc3BsYXk7JwCLiP/PAgAab25BQkNvbW1hbmRzTWFuYWdlckNyZWF0ZWQCBACLiP/PAphXtQJAbGV0IGFiQ29tbWFuZHM6IEFCQ29tbWFuZHNNYW5hZ2VyID0gdGhhdDsKCmFiQ29tbWFuZHMuYWRkQ29tbWFuZCgneHBlZ3VpcmVsb2FkJywgYXN5bmMgKGFyZ3MpID0+IHsKICAgIGF3YWl0IHRoaXNCb3QudW5tb3VudCgpOwogICAgYXdhaXQgdGhpc0JvdC5tb3VudCgpOwogICAgY29uc29sZS5sb2coYFt4cGVndWlyZWxvYWRdIFJlbG9hZGVkIHRoZSBBQiBYUEUgR1VJIGFwcC5gKTsKfSwgewogICAgc2hvcnREZXNjcmlwdGlvbjogJ1JlbG9hZCB0aGUgQUIgWFBFIEdVSSBhcHAuJywKICAgIHVzYWdlOiBbJy54cGVndWlyZWxvYWQnXQp9KTsnAIuI/88CAApjcmVkaXRJY29uAgQAi4j/zwLOWSFhYi9pY29ucy9hdXhfY3JlZGl0X2ljb25fNDhweC5wbmcnAIuI/88CAAlhYlZlcnNpb24CBACLiP/PAvBZBTEwLjQwJwEEYm90cyQ3NTdjZDJjMC1iYTQ2LTQyYmYtOWMyNi0xYjFmN2IwNDJjODIBJwCLiP/PAvZZBnN5c3RlbQIEAIuI/88C91kPYWIueHBlLmV4Y2hhbmdlJwCLiP/PAvZZCGFiSWdub3JlAgQAi4j/zwKHWgR0cnVlJwCLiP/PAvZZBGZvcm0CBACLiP/PAoxaB25vdGhpbmcnAIuI/88C9lkPb25BQkluaXRpYWxpemVkAgQAi4j/zwKUWhZAdGhpc0JvdC5pbml0aWFsaXplKCk7JwCLiP/PAvZZDW9uU2tpbGxVcGRhdGUCBACLiP/PAqtaFkB0aGlzQm90LmluaXRpYWxpemUoKTsnAIuI/88C9lkRZ2V0QWNjb3VudEJhbGFuY2UCBACLiP/PAsJa/wFAYXNzZXJ0KG1hc2tzLmluaXRpYWxpemVkLCBgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIHNraWxsIG11c3QgYmUgbG9hZGVkIGJlZm9yZSBmaXJzdC5gKTsKCmlmICh0YWdzLm1vY2spIHsKICAgIGF3YWl0IG9zLnNsZWVwKDEwMCk7CiAgICByZXR1cm4gdGhpc0JvdC52YXJzLm1vY2tCYWxhbmNlOwp9IGVsc2UgewogICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IHhwLmdldEFjY291bnRCYWxhbmNlcygpOwogICAgcmV0dXJuIGJhbGFuY2U7Cn0nAIuI/88C9lkKZ2V0Q3JlZGl0cwIEAIuI/88CwlzCAUBpbXBvcnQgeyBKU09OQWNjb3VudEJhbGFuY2UgfSBmcm9tICdjYXN1YWxvcyc7Cgpjb25zdCBiYWxhbmNlOiBKU09OQWNjb3VudEJhbGFuY2UgPSBhd2FpdCB0aGlzQm90LmdldEFjY291bnRCYWxhbmNlKCk7CmNvbnN0IGNyZWRpdHNOdW0gPSBOdW1iZXIucGFyc2VGbG9hdChiYWxhbmNlLmNyZWRpdHMpOwoKcmV0dXJuIGNyZWRpdHNOdW07JwCLiP/PAvZZBWFiWFBFAgQAi4j/zwKFXgR0cnVlJwCLiP/PAvZZCWFiVmVyc2lvbgIEAIuI/88Cil4FMTAuNDAnAIuI/88C9lkKaW5pdGlhbGl6ZQIEAIuI/88CkF6qBEBpbXBvcnQgeyBKU09OQWNjb3VudEJhbGFuY2UgfSBmcm9tICdjYXN1YWxvcyc7CgppZiAobWFza3MuaW5pdGlhbGl6ZWQpIHsKICAgIHJldHVybjsKfQoKbWFza3MuaW5pdGlhbGl6ZWQgPSB0cnVlOwoKZ2xvYmFsVGhpcy5hYlhQRSA9IHRoaXNCb3Q7CgppZiAodGFncy5tb2NrKSB7CiAgICBjb25zdCBpbml0aWFsTW9ja0JhbGFuY2U6IEpTT05BY2NvdW50QmFsYW5jZSA9IHsKICAgICAgICBhY2NvdW50SWQ6IGF1dGhCb3QuaWQsCiAgICAgICAgY3JlZGl0czogJzEwJywKICAgICAgICBjdXJyZW5jeTogJ1VTRCcsCiAgICAgICAgZGViaXRzOiAnMCcsCiAgICAgICAgZGlzcGxheUZhY3RvcjogJzEnLAogICAgICAgIHBlbmRpbmdDcmVkaXRzOiAnMCcsCiAgICAgICAgcGVuZGluZ0RlYml0czogJzAnLAogICAgfQoKICAgIHRoaXNCb3QudmFycy5tb2NrQmFsYW5jZSA9IGluaXRpYWxNb2NrQmFsYW5jZTsKCiAgICBzaG91dCgnb25BQlhQRUluaXRpYWxpemVkJyk7Cn0gZWxzZSB7CiAgICAvLyBUT0RPPwogICAgCiAgICBzaG91dCgnb25BQlhQRUluaXRpYWxpemVkJyk7Cn0KJwCLiP/PAvZZBnBheW91dAIEAIuI/88Cu2LoC0BpbXBvcnQgeyBKU09OQWNjb3VudEJhbGFuY2UgfSBmcm9tICdjYXN1YWxvcyc7Cgpjb25zdCB7CiAgICBhbW91bnQsCiAgICBkZXN0aW5hdGlvbiwKICAgIHNvdXJjZUlkLAp9OiBBQlhQRSA9IHRoYXQgPz8ge307CgppZiAodGFncy5tb2NrKSB7CiAgICBhd2FpdCBvcy5zbGVlcCgxMDApOwoKICAgIGNvbnN0IGJhbGFuY2U6IEpTT05BY2NvdW50QmFsYW5jZSA9IHRoaXNCb3QudmFycy5tb2NrQmFsYW5jZTsKICAgIGxldCBjcmVkaXRzTnVtID0gTnVtYmVyLnBhcnNlRmxvYXQoYmFsYW5jZS5jcmVkaXRzKTsKCiAgICBpZiAoY3JlZGl0c051bSA+PSBhbW91bnQpIHsKICAgICAgICBpZiAodGFncy5kZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7dGFncy5zeXN0ZW19LiR7dGFnTmFtZX1dIG1vY2s6IHBheWluZyAke2Ftb3VudH0gb3V0IGEgYmFsYW5jZSBvZiAke2NyZWRpdHNOdW19LmApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBjcmVkaXRzTnVtIC09IGFtb3VudDsKICAgICAgICBiYWxhbmNlLmNyZWRpdHMgPSBjcmVkaXRzTnVtLnRvU3RyaW5nKCk7CgogICAgICAgIGNvbnN0IHJlc3VsdDogQUJYUEVQYXlvdXRSZXN1bHRTdWNjZXNzID0geyBzdWNjZXNzOiB0cnVlLCBwYXlBbW91bnQ6IGFtb3VudCwgY3VyQ3JlZGl0czogY3JlZGl0c051bSwgc291cmNlSWQgfTsKICAgICAgICBzaG91dCgnb25BQlhQRVBhaWRPdXQnLCByZXN1bHQpOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByZXN1bHQ6IEFCWFBFUGF5b3V0UmVzdWx0RmFpbHVyZSA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yQ29kZTogJ21vY2tfaW5zdWZmaWNpZW50X2Z1bmRzJywgZXJyb3JNZXNzYWdlOiAnVXNlciBoYXMgaW5zdWZmaWNpZW50IGZ1bmRzLicsIHNvdXJjZUlkfTsKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQp9IGVsc2UgewogICAgY29uc3QgcmVzcG9uc2U6IEdlbmVyaWNSZXN1bHQ8dm9pZCwgU2ltcGxlRXJyb3I+ID0gYXdhaXQgeHAucGF5b3V0KHsgYW1vdW50LCBkZXN0aW5hdGlvbiB9KTsKICAgIGNvbnN0IGN1ckNyZWRpdHMgPSBhd2FpdCB0aGlzQm90LmdldENyZWRpdHMoKTsKCiAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgIGNvbnN0IHJlc3VsdDogQUJYUEVQYXlvdXRSZXN1bHRTdWNjZXNzID0geyBzdWNjZXNzOiB0cnVlLCBwYXlBbW91bnQ6IGFtb3VudCwgY3VyQ3JlZGl0cywgc291cmNlSWQgfTsKICAgICAgICBzaG91dCgnb25BQlhQRVBhaWRPdXQnLCByZXN1bHQpOwoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByZXN1bHQ6IEFCWFBFUGF5b3V0UmVzdWx0RmFpbHVyZSA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yQ29kZTogcmVwc29uc2UuZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2U6IHJlc3BvbnNlLmVycm9yTWVzc2FnZSwgc291cmNlSWQgfTsKCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KfQoKCicAi4j/zwL2WQRtb2NrAgQAi4j/zwKkbgR0cnVlJwCLiP/PAvZZBWRlYnVnAgQAi4j/zwKpbgR0cnVlJwCLiP/PAvZZBXR5cGVzAgQAi4j/zwKubt4D8J+ThGludGVyZmFjZSBBQlhQRVBheW91dFBhcmFtcyBleHRlbmRzIEFQSVBheW91dFJlcXVlc3QgewogICAgYW1vdW50OiBudW1iZXI7CiAgICBkZXN0aW5hdGlvbjogJ3N0cmlwZScgfCAnY2FzaCc7CiAgICBzb3VyY2VJZD86IHN0cmluZwp9Cgp0eXBlIEFCWFBFUGF5b3V0UmVzdWx0ID0gQUJYUEVQYXlvdXRSZXN1bHRTdWNjZXNzIHwgQUJYUEVQYXlvdXRSZXN1bHRGYWlsdXJlOwoKaW50ZXJmYWNlIEFCWFBFUGF5b3V0UmVzdWx0U3VjY2VzcyB7CiAgICBzdWNjZXNzOiB0cnVlOwogICAgcGF5QW1vdW50OiBudW1iZXI7CiAgICBjdXJDcmVkaXRzOiBudW1iZXI7CiAgICBzb3VyY2VJZD86IHN0cmluZzsKfQoKaW50ZXJmYWNlIEFCWFBFUGF5b3V0UmVzdWx0RmFpbHVyZSB7CiAgICBzdWNjZXNzOiBmYWxzZTsKICAgIGVycm9yQ29kZTogc3RyaW5nOwogICAgZXJyb3JNZXNzYWdlOiBzdHJpbmc7CiAgICBzb3VyY2VJZD86IHN0cmluZzsKfScAi4j/zwL2WQNndWkCBACLiP/PAotyKPCflJc2NmM5YzdkZi1kODQyLTRiYTQtOGVjNS0wZDQ5NWVlZjFkMGMnAQRib3RzJGQ3ZGYzZTA1LWQ5YjktNGE3NC05MWUzLWFmODBhMWFmMzVhMAEnAIuI/88CsnIGc3lzdGVtAgQAi4j/zwKzcg5hYi54cGUudmVyc2lvbicAi4j/zwKycghhYklnbm9yZQIEAIuI/88CwnIEdHJ1ZScAi4j/zwKycgRmb3JtAgQAi4j/zwLHcgdub3RoaW5nJwCLiP/PArJyBWFiWFBFAgQAi4j/zwLPcgR0cnVlJwCLiP/PArJyEWFiWFBFTWFqb3JWZXJzaW9uAgQAi4j/zwLUcgEwJwCLiP/PArJyCWFiVmVyc2lvbgIEAIuI/88C1nIFMTAuNDAnAIuI/88CsnINb25Ta2lsbFVwZGF0ZQIEAIuI/88C3HKUAUBjb25zdCB2ZXJzaW9uU3RyaW5nID0gdGFncy5hYlhQRU1ham9yVmVyc2lvbiArICIuIiArIHRhZ3MuYWJYUEVNaW5vclZlcnNpb247CmNvbnNvbGUubG9nKCJbQUJYUEVdIExvYWRlZCBBQiBYUCBFeGNoYW5nZSB2ZXJzaW9uICIgKyB2ZXJzaW9uU3RyaW5nKTsnAIuI/88CsnIRYWJYUEVNaW5vclZlcnNpb24CBACLiP/PAvFzATYA"}]}