{"version":2,"updates":[{"id":0,"timestamp":1747168886311,"update":"AZ0Cy+CvqQ0AJwEEYm90cyQwZWVmNGU0Yy00NGNjLTQ5MmQtYWQ0OS1lODFhN2NmNTEyOGIBJwDL4K+pDQAHYWJBZGFwdAIEAMvgr6kNASpAdGFncy5jb2xvciA9IGFiUmVtZW1iZXIudGFncy5hYkJhc2VDb2xvcjsnAMvgr6kNABBhYkdyaWRNZW51QWN0aW9uAgQAy+CvqQ0ssBBAY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWJUb29sYm94TWVudSI7Cgpjb25zdCBwb3NzaWJsZVRvb2xzID0gZ2V0Qm90cygic3lzdGVtIik7CmNvbnN0IHRvb2xib3hOYW1lID0gImFpX3Rvb2xib3giOwpjb25zdCBncmlkSW5mb3JtYXRpb24gPSBhYlJlbWVtYmVyLnRhZ3MuYWJHcmlkRm9jdXM7CmNvbnN0IG1lbnVCb3RzID0gW107CmNvbnN0IHRvb2xCb3RCdXR0b24gPSB7fTsKCnRvb2xCb3RCdXR0b24uc3BhY2UgPSAidGVtcExvY2FsIjsKdG9vbEJvdEJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiAiOHB4IiwgImJvcmRlciI6ICIycHggc29saWQgIzAwMCIsICJib3gtc2hhZG93IjogIjNweCA0cHggIzAwMCIsICJtaW4taGVpZ2h0IjogIjQ0cHgifTsKdG9vbEJvdEJ1dHRvbi5hYlRvb2xib3hSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKdG9vbEJvdEJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKdG9vbEJvdEJ1dHRvbi5hYlRvb2xib3hNZW51ID0gdHJ1ZTsKdG9vbEJvdEJ1dHRvbi5ncmlkSW5mb3JtYXRpb24gPSB0aGF0Py5ncmlkSW5mb3JtYXRpb24gPyAKewogICAgW3RoYXQ/LmdyaWRJbmZvcm1hdGlvbj8uZGltZW5zaW9uXTogdHJ1ZSwgCiAgICBbdGhhdD8uZ3JpZEluZm9ybWF0aW9uPy5kaW1lbnNpb24gKyAiWCJdOiB0aGF0Py5ncmlkSW5mb3JtYXRpb24/LnBvc2l0aW9uLngsIAogICAgW3RoYXQ/LmdyaWRJbmZvcm1hdGlvbj8uZGltZW5zaW9uICsgIlkiXTogdGhhdD8uZ3JpZEluZm9ybWF0aW9uPy5wb3NpdGlvbi55LCAKICAgIGxpc3RlbmluZzogdHJ1ZSwgCiAgICBzeXN0ZW06IG51bGwsCiAgICBjcmVhdG9yOiBudWxsCn0gOgp7CiAgICBbZ3JpZEluZm9ybWF0aW9uPy5kaW1lbnNpb25dOiB0cnVlLCAKICAgIFtncmlkSW5mb3JtYXRpb24/LmRpbWVuc2lvbiArICJYIl06IGdyaWRJbmZvcm1hdGlvbj8ucG9zaXRpb24ueCwgCiAgICBbZ3JpZEluZm9ybWF0aW9uPy5kaW1lbnNpb24gKyAiWSJdOiBncmlkSW5mb3JtYXRpb24/LnBvc2l0aW9uLnksIAogICAgbGlzdGVuaW5nOiB0cnVlLCAKICAgIHN5c3RlbTogbnVsbCwKICAgIGNyZWF0b3I6IG51bGwKfTsKdG9vbEJvdEJ1dHRvbi5vbkNsaWNrID0gYEAgY3JlYXRlKGxpbmtzLmJhc2VUb29sLCB0aGlzQm90LnRhZ3MuZ3JpZEluZm9ybWF0aW9uKTsgc2hvdXQoJ2FiVG9vbGJveFJlc2V0Jyk7IHNob3V0KCdhYkNsaWNrJyk7IGA7Cgpmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmxlVG9vbHMubGVuZ3RoOyBpKyspCnsKICAgIGNvbnN0IGN1cnJlbnRQb3NzaWJsZSA9IHBvc3NpYmxlVG9vbHNbaV07CiAgICBjb25zdCBwb3NzaWJsZVN5c3RlbVRhZyA9IGN1cnJlbnRQb3NzaWJsZS50YWdzLnN5c3RlbTsKICAgIGNvbnN0IHRvb2xQcmVmaXggPSB0b29sYm94TmFtZSArICIudG9vbC4iOwoKICAgIGlmIChwb3NzaWJsZVN5c3RlbVRhZy5pbmRleE9mKHRvb2xQcmVmaXgpICE9IC0xKQogICAgewogICAgICAgIGNvbnN0IGN1cnJlbnRUb29sID0gY3VycmVudFBvc3NpYmxlOwogICAgICAgIGNvbnN0IHRvb2xJbmRleCA9IGN1cnJlbnRUb29sLnRhZ3Muc3lzdGVtLmluZGV4T2YoIi50b29sLiIpOwogICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY3VycmVudFRvb2wudGFncy5zeXN0ZW0uc3Vic3RyaW5nKHRvb2xJbmRleCArIDYpOwoKICAgICAgICB0b29sQm90QnV0dG9uLmxhYmVsID0gdG9vbE5hbWU7CiAgICAgICAgdG9vbEJvdEJ1dHRvbi5jb2xvciA9IGN1cnJlbnRUb29sLnRhZ3MuY29sb3I7CiAgICAgICAgdG9vbEJvdEJ1dHRvbi5iYXNlVG9vbCA9IGdldExpbmsoY3VycmVudFRvb2wpOwogICAgICAgIHRvb2xCb3RCdXR0b24uY29sb3IgPSBjdXJyZW50VG9vbC50YWdzLnN0cm9rZUNvbG9yOwoKICAgICAgICBjb25zdCBuZXdNZW51Qm90ID0gYXdhaXQgY3JlYXRlKHRvb2xCb3RCdXR0b24pOwoKICAgICAgICBtZW51Qm90cy5wdXNoKG5ld01lbnVCb3QpOwogICAgfQp9CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHRoaXNCb3QuYWJUb29sYm94UmVzZXQoKTtgOwptYXNrcy5tZW51Qm90cyA9IGdldExpbmsobWVudUJvdHMpOycAy+CvqQ0ADmFiR3JpZE1lbnVJY29uAgQAy+CvqQ3dEBNob21lX3JlcGFpcl9zZXJ2aWNlJwDL4K+pDQAKYWJJRE9yaWdpbgIEAMvgr6kN8RANYWlUb29sYm94X2RldicAy+CvqQ0ACmFiSURTdHVkaW8CBADL4K+pDf8QJGU5MWVhYjBkLTZhNzUtNGFiOS04YTBlLTUwYTRjYzBjMWQzNCcAy+CvqQ0ADmFiVG9vbGJveFJlc2V0AgQAy+CvqQ2kEU5AaWYgKGxpbmtzLm1lbnVCb3RzKQp7CiAgICBkZXN0cm95KGxpbmtzLm1lbnVCb3RzKTsKfQoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsnAMvgr6kNAAlhYlZlcnNpb24CBADL4K+pDfMRFDkuNjUuMS4xNzQ3MTY4ODg2MzEwJwDL4K+pDQANYWN0aXZlTWVudVRhZwIEAMvgr6kNiBKwEEBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYlRvb2xib3hNZW51IjsKCmNvbnN0IHBvc3NpYmxlVG9vbHMgPSBnZXRCb3RzKCJzeXN0ZW0iKTsKY29uc3QgdG9vbGJveE5hbWUgPSAiYWlfdG9vbGJveCI7CmNvbnN0IGdyaWRJbmZvcm1hdGlvbiA9IGFiUmVtZW1iZXIudGFncy5hYkdyaWRGb2N1czsKY29uc3QgbWVudUJvdHMgPSBbXTsKY29uc3QgdG9vbEJvdEJ1dHRvbiA9IHt9OwoKdG9vbEJvdEJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwp0b29sQm90QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6ICI4cHgiLCAiYm9yZGVyIjogIjJweCBzb2xpZCAjMDAwIiwgImJveC1zaGFkb3ciOiAiM3B4IDRweCAjMDAwIiwgIm1pbi1oZWlnaHQiOiAiNDRweCJ9Owp0b29sQm90QnV0dG9uLmFiVG9vbGJveFJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwp0b29sQm90QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwp0b29sQm90QnV0dG9uLmFiVG9vbGJveE1lbnUgPSB0cnVlOwp0b29sQm90QnV0dG9uLmdyaWRJbmZvcm1hdGlvbiA9IHRoYXQ/LmdyaWRJbmZvcm1hdGlvbiA/IAp7CiAgICBbdGhhdD8uZ3JpZEluZm9ybWF0aW9uPy5kaW1lbnNpb25dOiB0cnVlLCAKICAgIFt0aGF0Py5ncmlkSW5mb3JtYXRpb24/LmRpbWVuc2lvbiArICJYIl06IHRoYXQ/LmdyaWRJbmZvcm1hdGlvbj8ucG9zaXRpb24ueCwgCiAgICBbdGhhdD8uZ3JpZEluZm9ybWF0aW9uPy5kaW1lbnNpb24gKyAiWSJdOiB0aGF0Py5ncmlkSW5mb3JtYXRpb24/LnBvc2l0aW9uLnksIAogICAgbGlzdGVuaW5nOiB0cnVlLCAKICAgIHN5c3RlbTogbnVsbCwKICAgIGNyZWF0b3I6IG51bGwKfSA6CnsKICAgIFtncmlkSW5mb3JtYXRpb24/LmRpbWVuc2lvbl06IHRydWUsIAogICAgW2dyaWRJbmZvcm1hdGlvbj8uZGltZW5zaW9uICsgIlgiXTogZ3JpZEluZm9ybWF0aW9uPy5wb3NpdGlvbi54LCAKICAgIFtncmlkSW5mb3JtYXRpb24/LmRpbWVuc2lvbiArICJZIl06IGdyaWRJbmZvcm1hdGlvbj8ucG9zaXRpb24ueSwgCiAgICBsaXN0ZW5pbmc6IHRydWUsIAogICAgc3lzdGVtOiBudWxsLAogICAgY3JlYXRvcjogbnVsbAp9Owp0b29sQm90QnV0dG9uLm9uQ2xpY2sgPSBgQCBjcmVhdGUobGlua3MuYmFzZVRvb2wsIHRoaXNCb3QudGFncy5ncmlkSW5mb3JtYXRpb24pOyBzaG91dCgnYWJUb29sYm94UmVzZXQnKTsgc2hvdXQoJ2FiQ2xpY2snKTsgYDsKCmZvciAobGV0IGkgPSAwOyBpIDwgcG9zc2libGVUb29scy5sZW5ndGg7IGkrKykKewogICAgY29uc3QgY3VycmVudFBvc3NpYmxlID0gcG9zc2libGVUb29sc1tpXTsKICAgIGNvbnN0IHBvc3NpYmxlU3lzdGVtVGFnID0gY3VycmVudFBvc3NpYmxlLnRhZ3Muc3lzdGVtOwogICAgY29uc3QgdG9vbFByZWZpeCA9IHRvb2xib3hOYW1lICsgIi50b29sLiI7CgogICAgaWYgKHBvc3NpYmxlU3lzdGVtVGFnLmluZGV4T2YodG9vbFByZWZpeCkgIT0gLTEpCiAgICB7CiAgICAgICAgY29uc3QgY3VycmVudFRvb2wgPSBjdXJyZW50UG9zc2libGU7CiAgICAgICAgY29uc3QgdG9vbEluZGV4ID0gY3VycmVudFRvb2wudGFncy5zeXN0ZW0uaW5kZXhPZigiLnRvb2wuIik7CiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjdXJyZW50VG9vbC50YWdzLnN5c3RlbS5zdWJzdHJpbmcodG9vbEluZGV4ICsgNik7CgogICAgICAgIHRvb2xCb3RCdXR0b24ubGFiZWwgPSB0b29sTmFtZTsKICAgICAgICB0b29sQm90QnV0dG9uLmNvbG9yID0gY3VycmVudFRvb2wudGFncy5jb2xvcjsKICAgICAgICB0b29sQm90QnV0dG9uLmJhc2VUb29sID0gZ2V0TGluayhjdXJyZW50VG9vbCk7CiAgICAgICAgdG9vbEJvdEJ1dHRvbi5jb2xvciA9IGN1cnJlbnRUb29sLnRhZ3Muc3Ryb2tlQ29sb3I7CgogICAgICAgIGNvbnN0IG5ld01lbnVCb3QgPSBhd2FpdCBjcmVhdGUodG9vbEJvdEJ1dHRvbik7CgogICAgICAgIG1lbnVCb3RzLnB1c2gobmV3TWVudUJvdCk7CiAgICB9Cn0KCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgdGhpc0JvdC5hYlRvb2xib3hSZXNldCgpO2A7Cm1hc2tzLm1lbnVCb3RzID0gZ2V0TGluayhtZW51Qm90cyk7JwDL4K+pDQAQYWR2YW5jZWRfdG9vbGJveAIEAMvgr6kNuSIEdHJ1ZScAy+CvqQ0ABGZvcm0CBADL4K+pDb4iB25vdGhpbmcnAMvgr6kNAAVsYWJlbAIEAMvgr6kNxiIMYmxhbmtUb29sYm94KADL4K+pDQAJbGlzdGVuaW5nAXgnAMvgr6kNAAdvbkNsaWNrAgQAy+CvqQ3UItcBQHRoaXNCb3QuYWJHcmlkTWVudUFjdGlvbih7CiAgICBbY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbF06IHRydWUsIAogICAgW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWCJdOiAwLCAKICAgIFtjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlkiXTogMCwgCiAgICBsaXN0ZW5pbmc6IHRydWUsIAogICAgc3lzdGVtOiBudWxsLAogICAgY3JlYXRvcjogbnVsbAp9KTsnAMvgr6kNAAZzeXN0ZW0CBADL4K+pDawkEWFiLnRvb2xib3guYWkga2l0JwDL4K+pDQATYWJHcmlkTWVudVNvcnRPcmRlcgIEAMvgr6kNviQDMy4yJwDL4K+pDQAPYWJHcmlkTWVudUxhYmVsAgQAy+CvqQ3CJAZhaSBraXQnAMvgr6kNAAphaV90b29sYm94AgQAy+CvqQ3JJAR0cnVlJwDL4K+pDQAFY29sb3ICBADL4K+pDc4kByMwMEQ5Q0QnAMvgr6kNABJhaV90b29sYm94X3ZlcnNpb24CBADL4K+pDdYkAzEuMicAy+CvqQ0ACG9uQ3JlYXRlAgQAy+CvqQ3aJBlAdGhpc0JvdC5hYlRvb2xib3hSZXNldCgpJwEEYm90cyQxMDUwYWRhYS02NTIzLTQwMzctODdiZC0yMjRmYmY0YmUyNjEBJwDL4K+pDfQkB2FiQWdlbnQCBADL4K+pDfUkBHRydWUnAMvgr6kN9CQKYWJJRE9yaWdpbgIEAMvgr6kN+iQMYWdlbnRUb29sYm94JwDL4K+pDfQkCmFiSURTdHVkaW8CBADL4K+pDYclJGU5MWVhYjBkLTZhNzUtNGFiOS04YTBlLTUwYTRjYzBjMWQzNCcAy+CvqQ30JA1hYk1lbnVSZWZyZXNoAgQAy+CvqQ2sJRZAdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDfQkCWFiVmVyc2lvbgIEAMvgr6kNwyUUOS42NS4xLjE3NDcxNjg4ODYzMTAnAMvgr6kN9CQOYWdlbnRPblJlcXVlc3QCBADL4K+pDdgllwhAdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgYWJBc2tCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5hY3Rpb24uYXNrIik7CmNvbnN0IHByb21wdCA9ICF0aGF0LnByb21wdCA/IGFiQXNrQm90LnRhZ3MucHJvbXB0X2NvcmUgOiBhYkFza0JvdC50YWdzWyJwcm9tcHRfIiArIHRoYXQucHJvbXB0XTsKCmFiQXNrQm90Lm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgphYi5sb2codGFncy5haU1vZGVsICsgIiBib3QiICsgIjogdGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKdGhpc0JvdC5ib3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyBsaW5rcy50YXJnZXRCb3QuaWQ7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gIm11bHRpcGxlQm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSURTOiBgICsgdGhhdC5kYXRhLmJvdHM7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gImNvcmUiKQp7Cgp9CgoKLy9UQVJHRVQgUklHSFQgRlVOQ1RJT04KY29uc3QgYW5zd2VyID0gYXdhaXQgYWJBc2tCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIG1vZGVsOiB0aGF0Lm1vZGVsfSk7CgpjcmVhdGUoe2hvbWU6IHRydWUsIG9uQ3JlYXRlOiBgQCAke2Fuc3dlcn1gfSk7Ci8vRklYCmFiLmxvZyh0YWdzLmFpTW9kZWwgKyAiIGJvdCIgKyAiOiAiICsgYW5zd2VyKTsKCnJldHVybjsnAMvgr6kN9CQKYWdlbnRSZXNldAIEAMvgr6kN8C1wQGlmIChsaW5rcy5hcm0pCnsKICAgIGRlc3Ryb3kobGlua3MuYXJtKTsKfQoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsKCmFiUmVtZW1iZXIubWFza3MuYWJCdWlsZGVySWRlbnRpdHkgPSBudWxsOycAy+CvqQ30JAdhaU1vZGVsAgQAy+CvqQ3hLhhjbGF1ZGUtMy03LXNvbm5ldC1sYXRlc3QnAMvgr6kN9CQIYXNrQWdlbnQCBADL4K+pDfouhARAaWYgKG1hc2tzLmZvcm0gPT0gImlucHV0IikKewogICAgdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBtZW51UG9ydGFsID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbCA/PyAibWVudSI7CgppZiAoIWNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwpCnsKICAgIGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwgPSBtZW51UG9ydGFsOwp9CgptYXNrcy5wcm9tcHRUeXBlID0gdGhhdC5wcm9tcHQ7Cm1hc2tzLmxhYmVsQ29sb3IgPSAiYmxhY2siOwptYXNrcy5jb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3I7Cm1hc2tzLmRpbWVuc2lvbiA9IG1lbnVQb3J0YWw7Cm1hc2tzW21lbnVQb3J0YWxdID0gdHJ1ZTsKbWFza3MuZm9ybSA9ICJpbnB1dCI7CgppZiAodGhhdC5ib3QgJiYgdGhhdC5wcm9tcHQgPT09ICJib3QiKQp7CiAgICBtYXNrcy50YXJnZXRCb3QgPSBnZXRMaW5rKHRoYXQuYm90KTsKfQoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IHRhZ3MuYWlNb2RlbDsnAMvgr6kN9CQHYm90Q2hhdAIEAMvgr6kN/zLFCkBjb25zdCBib3RCYXNlID0gdGhpc0JvdDsKY29uc3QgZGltZW5zaW9uID0gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKY29uc3QgbWVzc2FnZSA9IHRoYXQubWVzc2FnZTsKY29uc3QgbWVzc2FnZVRpbWUgPSB0aGF0LnRpbWUgPyB0aGF0LnRpbWUgKiAxMDAwIDogMTYwMDsgCmNvbnN0IG1lc3NhZ2VCb3QgPSB7fTsKCm1lc3NhZ2VCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbWVzc2FnZUJvdC50cmFuc2Zvcm1lciA9IGJvdEJhc2UuaWQ7Cm1lc3NhZ2VCb3QuZm9ybSA9ICJzcHJpdGUiOwptZXNzYWdlQm90LmNvbG9yID0gIiMwMDAwMDAiOwptZXNzYWdlQm90LmxhYmVsID0gbWVzc2FnZTsKbWVzc2FnZUJvdC5sYWJlbENvbG9yID0gIiNmZmZmZmYiOwptZXNzYWdlQm90LmxhYmVsU2l6ZSA9IDE7Cm1lc3NhZ2VCb3Quc2NhbGVYID0gbWVzc2FnZS5sZW5ndGggLyA1ID4gMTAgPyAxMCA6IG1lc3NhZ2UubGVuZ3RoIDwgMTAgPyAyIDogbWVzc2FnZS5sZW5ndGggLyA1OwptZXNzYWdlQm90LnNjYWxlWSA9IChtZXNzYWdlLmxlbmd0aCAvIDUwKSA+IDEgPyBNYXRoLnJvdW5kKG1lc3NhZ2UubGVuZ3RoIC8gNTApIDogMS4zMzsKbWVzc2FnZUJvdC5zY2FsZVogPSAwLjE7Cm1lc3NhZ2VCb3Qub3JpZW50YXRpb25Nb2RlID0gImJpbGxib2FyZCI7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uXSA9IHRydWU7Cm1lc3NhZ2VCb3QuZGltZW5zaW9uID0gZGltZW5zaW9uOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJYIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJZIl0gPSAwOwptZXNzYWdlQm90W2RpbWVuc2lvbiArICJaIl0gPSBib3RCYXNlLnRhZ3Muc2NhbGUgPyBib3RCYXNlLnRhZ3Muc2NhbGUgLyAyICsgMiA6IDI7Cm1lc3NhZ2VCb3Qub25GYWRlID0gYEAgYXdhaXQgYW5pbWF0ZVRhZyh0aGlzQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMSwKICAgICAgICBsYWJlbE9wYWNpdHk6IDEsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0KICAgIH0sCiAgICB0b1ZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDAsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAwLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdICsgNQogICAgfSwKICAgIGR1cmF0aW9uOiAke3RoYXQuZHVyYXRpb24gPz8gM30KfSkuY2F0Y2goe30pOwoKZGVzdHJveSh0aGlzQm90KTtgOwoKY29uc3QgYWN0aXZlTWVzc2FnZSA9IGNyZWF0ZShtZXNzYWdlQm90KTsKCnNldFRpbWVvdXQoKCk9PiBhY3RpdmVNZXNzYWdlLm9uRmFkZSgpLCBtZXNzYWdlVGltZSk7JwDL4K+pDfQkBWNvbG9yAgQAy+CvqQ3FPQVjbGVhcicAy+CvqQ30JAVsYWJlbAIEAMvgr6kNyz0YY2xhdWRlLTMtNy1zb25uZXQtbGF0ZXN0JwDL4K+pDfQkCmxhYmVsQ29sb3ICBADL4K+pDeQ9BGdvbGQnAMvgr6kN9CQJbWVudUNvbG9yAgQAy+CvqQ3pPQRnb2xkJwDL4K+pDfQkB29uQ2xpY2sCBADL4K+pDe49JEB0aGlzQm90LmFza0FnZW50KHtwcm9tcHQ6ICJjb3JlIn0pOycAy+CvqQ30JAZvbkRyYWcCBADL4K+pDZM+3AxAb3MuaGlkZUNoYXQoKTsKCi8vIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gaWQpCi8vIHsKLy8gICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgovLyAgICAgcmV0dXJuOwovLyB9CgoKaWYgKHRhZ3MuYXJtKQp7CiAgICBhd2FpdCB0aGlzQm90LmFnZW50UmVzZXQoKTsKfQoKLy8gaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQovLyB7Ci8vICAgICB0aGlzQm90LmFiQ2xpY2soKTsKLy8gfQoKLy9sZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXTsKYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IHRoaXNCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lVG8gPSB0aGlzQm90LmlkOwphcm0ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CmFybS5vbkNsaWNrID0gIkAgbGlua3MubWFuYWdlci5vbkFybUNsaWNrKHthcm06IHRoaXNCb3R9KTsiOwphcm0ub25Ecm9wID0gYEAgdGFncy5kcmFnZ2FibGUgPSBmYWxzZTsKCmlmICh0aGF0LnRvLmJvdCkKewogICAgbGlua3MubWFuYWdlci5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKICAgIGxpbmtzLm1hbmFnZXIubWFza3MubGluZUNvbG9yID0gbGlua3MubWFuYWdlci50YWdzLnN0cm9rZUNvbG9yOwogICAgCiAgICBsaW5rcy5tYW5hZ2VyLmFza0FnZW50KHtwcm9tcHQ6ICJib3QiLCBib3Q6IHRoYXQudG8uYm90fSk7CgogICAgZGVzdHJveSh0aGlzQm90KTsKfQplbHNlCnsKICAgIGxpbmtzLm1hbmFnZXIuYXNrQWdlbnQoe3Byb21wdDogImdyaWQifSk7Cn1gOwoKLy8gYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwoKLy8gbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CgovLyBpZiAoc3RhdGUpCi8vIHsKLy8gICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7Ci8vICAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwovLyAgICAgYXJtLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCi8vICAgICBtYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwovLyB9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgptYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycAy+CvqQ30JAtvbkdyaWRDbGljawIEAMvgr6kN7koWQHRoaXNCb3QuYWdlbnRSZXNldCgpOycAy+CvqQ30JAhvblN1Ym1pdAIEAMvgr6kNhUuCBEB2YXIgcmVxdWVzdERhdGEgPSB0aGF0LmRhdGE7CnZhciBhY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwoKaWYgKGxpbmtzLmFybSkKewogICAgY29uc3QgYXJtID0gbGlua3MuYXJtOwogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gYXJtLnRhZ3MuZGltZW5zaW9uCgogICAgcmVxdWVzdERhdGEgPSB7ZGltZW5zaW9uOiBhY3RpdmVEaW1lbnNpb24sIGRpbWVuc2lvblg6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJYIl0sIGRpbWVuc2lvblk6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJZIl19Owp9Cgpjb25zdCBpbnF1aXJ5ID0gdGhhdC50ZXh0Owpjb25zdCBwcm9tcHQgPSB0YWdzLnByb21wdFR5cGU7Cgpjb25zdCBhaVJlcXVlc3QgPSBhd2FpdCB0aGlzQm90LmFnZW50T25SZXF1ZXN0KHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgZGF0YTogcmVxdWVzdERhdGEsIG1vZGVsOiB0YWdzLmFpTW9kZWx9KTsnAMvgr6kN9CQLc3Ryb2tlQ29sb3ICBADL4K+pDYhPBGdvbGQnAMvgr6kN9CQGc3lzdGVtAgQAy+CvqQ2NTzJhaV90b29sYm94LnRvb2wuY2xhdWRlLTMtNy1zb25uZXQtbGF0ZXN0IGFnZW50IGJvdCcAy+CvqQ30JAdjcmVhdG9yAgQAy+CvqQ3ATyQwZWVmNGU0Yy00NGNjLTQ5MmQtYWQ0OS1lODFhN2NmNTEyOGInAMvgr6kN9CQNbWVudUl0ZW1TdHlsZQIEAMvgr6kN5U+AAfCfp6x7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6ICI4cHgiLCAiYm9yZGVyIjogIjJweCBzb2xpZCAjMDAwIiwgImJveC1zaGFkb3ciOiAiM3B4IDRweCAjMDAwIiwgIm1pbi1oZWlnaHQiOiAiNDRweCJ9JwDL4K+pDfQkCm9uQXJtQ2xpY2sCBADL4K+pDeRQhAJAY29uc3QgYXJtID0gdGhhdC5hcm07CmNvbnN0IGRpbWVuc2lvbiA9IGFybS50YWdzLmRpbWVuc2lvbjsKY29uc3QgdGFyZ2V0WCA9IGFybS50YWdzW2RpbWVuc2lvbiArICJYIl07CmNvbnN0IHRhcmdldFkgPSBhcm0udGFnc1tkaW1lbnNpb24gKyAiWSJdOwoKdGFnc1tkaW1lbnNpb25dID0gdHJ1ZTsKdGFnc1tkaW1lbnNpb24gKyAiWCJdID0gdGFyZ2V0WDsKdGFnc1tkaW1lbnNpb24gKyAiWSJdID0gdGFyZ2V0WTsKCnRoaXNCb3QuYWdlbnRSZXNldCgpOycAy+CvqQ30JAphaV90b29sYm94AgQAy+CvqQ3pUgR0cnVlJwEEYm90cyQzY2ViZjZiYS0zZGI4LTQ4ZjYtODUxYS01MDRjOGYzZTVkNjMBJwDL4K+pDe5SB2FiQWdlbnQCBADL4K+pDe9SBHRydWUnAMvgr6kN7lIKYWJJRE9yaWdpbgIEAMvgr6kN9FIMYWdlbnRUb29sYm94JwDL4K+pDe5SCmFiSURTdHVkaW8CBADL4K+pDYFTJGU5MWVhYjBkLTZhNzUtNGFiOS04YTBlLTUwYTRjYzBjMWQzNCcAy+CvqQ3uUg1hYk1lbnVSZWZyZXNoAgQAy+CvqQ2mUxZAdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDe5SCWFiVmVyc2lvbgIEAMvgr6kNvVMUOS42NS4xLjE3NDcxNjg4ODYzMTAnAMvgr6kN7lIOYWdlbnRPblJlcXVlc3QCBADL4K+pDdJTlwhAdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgYWJBc2tCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5hY3Rpb24uYXNrIik7CmNvbnN0IHByb21wdCA9ICF0aGF0LnByb21wdCA/IGFiQXNrQm90LnRhZ3MucHJvbXB0X2NvcmUgOiBhYkFza0JvdC50YWdzWyJwcm9tcHRfIiArIHRoYXQucHJvbXB0XTsKCmFiQXNrQm90Lm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgphYi5sb2codGFncy5haU1vZGVsICsgIiBib3QiICsgIjogdGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKdGhpc0JvdC5ib3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyBsaW5rcy50YXJnZXRCb3QuaWQ7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gIm11bHRpcGxlQm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSURTOiBgICsgdGhhdC5kYXRhLmJvdHM7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gImNvcmUiKQp7Cgp9CgoKLy9UQVJHRVQgUklHSFQgRlVOQ1RJT04KY29uc3QgYW5zd2VyID0gYXdhaXQgYWJBc2tCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIG1vZGVsOiB0aGF0Lm1vZGVsfSk7CgpjcmVhdGUoe2hvbWU6IHRydWUsIG9uQ3JlYXRlOiBgQCAke2Fuc3dlcn1gfSk7Ci8vRklYCmFiLmxvZyh0YWdzLmFpTW9kZWwgKyAiIGJvdCIgKyAiOiAiICsgYW5zd2VyKTsKCnJldHVybjsnAMvgr6kN7lIKYWdlbnRSZXNldAIEAMvgr6kN6lt5QGlmIChsaW5rcy5hcm0pCnsKICAgIGRlc3Ryb3kobGlua3MuYXJtKTsKfQoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsKCmFiUmVtZW1iZXIubWFza3MuYWJCdWlsZGVySWRlbnRpdHkgPSBudWxsOwoKcmV0dXJuOycAy+CvqQ3uUgdhaU1vZGVsAgQAy+CvqQ3kXAcwMy1taW5pJwDL4K+pDe5SCGFza0FnZW50AgQAy+CvqQ3sXIQEQGlmIChtYXNrcy5mb3JtID09ICJpbnB1dCIpCnsKICAgIHRoaXNCb3QuYWdlbnRSZXNldCgpOwoKICAgIHJldHVybjsKfQoKY29uc3QgbWVudVBvcnRhbCA9IGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwgPz8gIm1lbnUiOwoKaWYgKCFjb25maWdCb3QudGFncy5tZW51UG9ydGFsKQp7CiAgICBjb25maWdCb3QudGFncy5tZW51UG9ydGFsID0gbWVudVBvcnRhbDsKfQoKbWFza3MucHJvbXB0VHlwZSA9IHRoYXQucHJvbXB0OwptYXNrcy5sYWJlbENvbG9yID0gImJsYWNrIjsKbWFza3MuY29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yOwptYXNrcy5kaW1lbnNpb24gPSBtZW51UG9ydGFsOwptYXNrc1ttZW51UG9ydGFsXSA9IHRydWU7Cm1hc2tzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKHRoYXQuYm90ICYmIHRoYXQucHJvbXB0ID09PSAiYm90IikKewogICAgbWFza3MudGFyZ2V0Qm90ID0gZ2V0TGluayh0aGF0LmJvdCk7Cn0KCmFiUmVtZW1iZXIubWFza3MuYWJCdWlsZGVySWRlbnRpdHkgPSB0YWdzLmFpTW9kZWw7JwDL4K+pDe5SB2JvdENoYXQCBADL4K+pDfFgxQpAY29uc3QgYm90QmFzZSA9IHRoaXNCb3Q7CmNvbnN0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmNvbnN0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2U7CmNvbnN0IG1lc3NhZ2VUaW1lID0gdGhhdC50aW1lID8gdGhhdC50aW1lICogMTAwMCA6IDE2MDA7IApjb25zdCBtZXNzYWdlQm90ID0ge307CgptZXNzYWdlQm90LnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lc3NhZ2VCb3QudHJhbnNmb3JtZXIgPSBib3RCYXNlLmlkOwptZXNzYWdlQm90LmZvcm0gPSAic3ByaXRlIjsKbWVzc2FnZUJvdC5jb2xvciA9ICIjMDAwMDAwIjsKbWVzc2FnZUJvdC5sYWJlbCA9IG1lc3NhZ2U7Cm1lc3NhZ2VCb3QubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKbWVzc2FnZUJvdC5sYWJlbFNpemUgPSAxOwptZXNzYWdlQm90LnNjYWxlWCA9IG1lc3NhZ2UubGVuZ3RoIC8gNSA+IDEwID8gMTAgOiBtZXNzYWdlLmxlbmd0aCA8IDEwID8gMiA6IG1lc3NhZ2UubGVuZ3RoIC8gNTsKbWVzc2FnZUJvdC5zY2FsZVkgPSAobWVzc2FnZS5sZW5ndGggLyA1MCkgPiAxID8gTWF0aC5yb3VuZChtZXNzYWdlLmxlbmd0aCAvIDUwKSA6IDEuMzM7Cm1lc3NhZ2VCb3Quc2NhbGVaID0gMC4xOwptZXNzYWdlQm90Lm9yaWVudGF0aW9uTW9kZSA9ICJiaWxsYm9hcmQiOwptZXNzYWdlQm90W2RpbWVuc2lvbl0gPSB0cnVlOwptZXNzYWdlQm90LmRpbWVuc2lvbiA9IGRpbWVuc2lvbjsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWCJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWSJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWiJdID0gYm90QmFzZS50YWdzLnNjYWxlID8gYm90QmFzZS50YWdzLnNjYWxlIC8gMiArIDIgOiAyOwptZXNzYWdlQm90Lm9uRmFkZSA9IGBAIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDEsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAxLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAwLAogICAgICAgIGxhYmVsT3BhY2l0eTogMCwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXSArIDUKICAgIH0sCiAgICBkdXJhdGlvbjogJHt0aGF0LmR1cmF0aW9uID8/IDN9Cn0pLmNhdGNoKHt9KTsKCmRlc3Ryb3kodGhpc0JvdCk7YDsKCmNvbnN0IGFjdGl2ZU1lc3NhZ2UgPSBjcmVhdGUobWVzc2FnZUJvdCk7CgpzZXRUaW1lb3V0KCgpPT4gYWN0aXZlTWVzc2FnZS5vbkZhZGUoKSwgbWVzc2FnZVRpbWUpOycAy+CvqQ3uUgVjb2xvcgIEAMvgr6kNt2sFY2xlYXInAMvgr6kN7lIFbGFiZWwCBADL4K+pDb1rBzAzLW1pbmknAMvgr6kN7lIKbGFiZWxDb2xvcgIEAMvgr6kNxWsEbGltZScAy+CvqQ3uUgltZW51Q29sb3ICBADL4K+pDcprBGxpbWUnAMvgr6kN7lINbWVudUl0ZW1TdHlsZQIEAMvgr6kNz2uAAfCfp6x7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6ICI4cHgiLCAiYm9yZGVyIjogIjJweCBzb2xpZCAjMDAwIiwgImJveC1zaGFkb3ciOiAiM3B4IDRweCAjMDAwIiwgIm1pbi1oZWlnaHQiOiAiNDRweCJ9JwDL4K+pDe5SB29uQ2xpY2sCBADL4K+pDc5sJEB0aGlzQm90LmFza0FnZW50KHtwcm9tcHQ6ICJjb3JlIn0pOycAy+CvqQ3uUglvbkRlc3Ryb3kCBADL4K+pDfNsV0BpZiAobGlua3MuYXJtKQp7CiAgICBkZXN0cm95KGxpbmtzLmFybSk7Cn0KCmFiUmVtZW1iZXIubWFza3MuYWJCdWlsZGVySWRlbnRpdHkgPSBudWxsOycAy+CvqQ3uUgZvbkRyYWcCBADL4K+pDctt3AxAb3MuaGlkZUNoYXQoKTsKCi8vIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gaWQpCi8vIHsKLy8gICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgovLyAgICAgcmV0dXJuOwovLyB9CgoKaWYgKHRhZ3MuYXJtKQp7CiAgICBhd2FpdCB0aGlzQm90LmFnZW50UmVzZXQoKTsKfQoKLy8gaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQovLyB7Ci8vICAgICB0aGlzQm90LmFiQ2xpY2soKTsKLy8gfQoKLy9sZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXTsKYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IHRoaXNCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lVG8gPSB0aGlzQm90LmlkOwphcm0ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CmFybS5vbkNsaWNrID0gIkAgbGlua3MubWFuYWdlci5vbkFybUNsaWNrKHthcm06IHRoaXNCb3R9KTsiOwphcm0ub25Ecm9wID0gYEAgdGFncy5kcmFnZ2FibGUgPSBmYWxzZTsKCmlmICh0aGF0LnRvLmJvdCkKewogICAgbGlua3MubWFuYWdlci5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKICAgIGxpbmtzLm1hbmFnZXIubWFza3MubGluZUNvbG9yID0gbGlua3MubWFuYWdlci50YWdzLnN0cm9rZUNvbG9yOwogICAgCiAgICBsaW5rcy5tYW5hZ2VyLmFza0FnZW50KHtwcm9tcHQ6ICJib3QiLCBib3Q6IHRoYXQudG8uYm90fSk7CgogICAgZGVzdHJveSh0aGlzQm90KTsKfQplbHNlCnsKICAgIGxpbmtzLm1hbmFnZXIuYXNrQWdlbnQoe3Byb21wdDogImdyaWQifSk7Cn1gOwoKLy8gYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwoKLy8gbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CgovLyBpZiAoc3RhdGUpCi8vIHsKLy8gICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7Ci8vICAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwovLyAgICAgYXJtLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCi8vICAgICBtYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwovLyB9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgptYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycAy+CvqQ3uUgtvbkdyaWRDbGljawIEAMvgr6kNpnoWQHRoaXNCb3QuYWdlbnRSZXNldCgpOycAy+CvqQ3uUghvblN1Ym1pdAIEAMvgr6kNvXqCBEB2YXIgcmVxdWVzdERhdGEgPSB0aGF0LmRhdGE7CnZhciBhY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwoKaWYgKGxpbmtzLmFybSkKewogICAgY29uc3QgYXJtID0gbGlua3MuYXJtOwogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gYXJtLnRhZ3MuZGltZW5zaW9uCgogICAgcmVxdWVzdERhdGEgPSB7ZGltZW5zaW9uOiBhY3RpdmVEaW1lbnNpb24sIGRpbWVuc2lvblg6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJYIl0sIGRpbWVuc2lvblk6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJZIl19Owp9Cgpjb25zdCBpbnF1aXJ5ID0gdGhhdC50ZXh0Owpjb25zdCBwcm9tcHQgPSB0YWdzLnByb21wdFR5cGU7Cgpjb25zdCBhaVJlcXVlc3QgPSBhd2FpdCB0aGlzQm90LmFnZW50T25SZXF1ZXN0KHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgZGF0YTogcmVxdWVzdERhdGEsIG1vZGVsOiB0YWdzLmFpTW9kZWx9KTsnAMvgr6kN7lIKcHJvbXB0VHlwZQIEAMvgr6kNwH4EY29yZScAy+CvqQ3uUgtzdHJva2VDb2xvcgIEAMvgr6kNxX4EbGltZScAy+CvqQ3uUgZzeXN0ZW0CBADL4K+pDcp+IWFpX3Rvb2xib3gudG9vbC4wMy1taW5pIGFnZW50IGJvdCcAy+CvqQ3uUgdjcmVhdG9yAgQAy+CvqQ3sfiQwZWVmNGU0Yy00NGNjLTQ5MmQtYWQ0OS1lODFhN2NmNTEyOGInAMvgr6kN7lIKb25Bcm1DbGljawIEAMvgr6kNkX+EAkBjb25zdCBhcm0gPSB0aGF0LmFybTsKY29uc3QgZGltZW5zaW9uID0gYXJtLnRhZ3MuZGltZW5zaW9uOwpjb25zdCB0YXJnZXRYID0gYXJtLnRhZ3NbZGltZW5zaW9uICsgIlgiXTsKY29uc3QgdGFyZ2V0WSA9IGFybS50YWdzW2RpbWVuc2lvbiArICJZIl07Cgp0YWdzW2RpbWVuc2lvbl0gPSB0cnVlOwp0YWdzW2RpbWVuc2lvbiArICJYIl0gPSB0YXJnZXRYOwp0YWdzW2RpbWVuc2lvbiArICJZIl0gPSB0YXJnZXRZOwoKdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDe5SCmFpX3Rvb2xib3gCBADL4K+pDZaBAQR0cnVlJwEEYm90cyQ1NGFiYmRiMy0zMzIyLTRmYjktYjhiMy00NzE5OTMwYzhjMGIBJwDL4K+pDZuBAQdhYkFnZW50AgQAy+CvqQ2cgQEEdHJ1ZScAy+CvqQ2bgQEKYWJJRE9yaWdpbgIEAMvgr6kNoYEBDGFnZW50VG9vbGJveCcAy+CvqQ2bgQEKYWJJRFN0dWRpbwIEAMvgr6kNroEBJGU5MWVhYjBkLTZhNzUtNGFiOS04YTBlLTUwYTRjYzBjMWQzNCcAy+CvqQ2bgQENYWJNZW51UmVmcmVzaAIEAMvgr6kN04EBFkB0aGlzQm90LmFnZW50UmVzZXQoKTsnAMvgr6kNm4EBCWFiVmVyc2lvbgIEAMvgr6kN6oEBFDkuNjUuMS4xNzQ3MTY4ODg2MzEwJwDL4K+pDZuBAQ5hZ2VudE9uUmVxdWVzdAIEAMvgr6kN/4EBlwhAdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgYWJBc2tCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5hY3Rpb24uYXNrIik7CmNvbnN0IHByb21wdCA9ICF0aGF0LnByb21wdCA/IGFiQXNrQm90LnRhZ3MucHJvbXB0X2NvcmUgOiBhYkFza0JvdC50YWdzWyJwcm9tcHRfIiArIHRoYXQucHJvbXB0XTsKCmFiQXNrQm90Lm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgphYi5sb2codGFncy5haU1vZGVsICsgIiBib3QiICsgIjogdGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKdGhpc0JvdC5ib3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyBsaW5rcy50YXJnZXRCb3QuaWQ7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gIm11bHRpcGxlQm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSURTOiBgICsgdGhhdC5kYXRhLmJvdHM7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gImNvcmUiKQp7Cgp9CgoKLy9UQVJHRVQgUklHSFQgRlVOQ1RJT04KY29uc3QgYW5zd2VyID0gYXdhaXQgYWJBc2tCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIG1vZGVsOiB0aGF0Lm1vZGVsfSk7CgpjcmVhdGUoe2hvbWU6IHRydWUsIG9uQ3JlYXRlOiBgQCAke2Fuc3dlcn1gfSk7Ci8vRklYCmFiLmxvZyh0YWdzLmFpTW9kZWwgKyAiIGJvdCIgKyAiOiAiICsgYW5zd2VyKTsKCnJldHVybjsnAMvgr6kNm4EBCmFnZW50UmVzZXQCBADL4K+pDZeKAXBAaWYgKGxpbmtzLmFybSkKewogICAgZGVzdHJveShsaW5rcy5hcm0pOwp9CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpOwoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IG51bGw7JwDL4K+pDZuBAQdhaU1vZGVsAgQAy+CvqQ2IiwESZ2VtaW5pLTIuMC1wcm8tZXhwJwDL4K+pDZuBAQhhc2tBZ2VudAIEAMvgr6kNm4sBhARAaWYgKG1hc2tzLmZvcm0gPT0gImlucHV0IikKewogICAgdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBtZW51UG9ydGFsID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbCA/PyAibWVudSI7CgppZiAoIWNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwpCnsKICAgIGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwgPSBtZW51UG9ydGFsOwp9CgptYXNrcy5wcm9tcHRUeXBlID0gdGhhdC5wcm9tcHQ7Cm1hc2tzLmxhYmVsQ29sb3IgPSAiYmxhY2siOwptYXNrcy5jb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3I7Cm1hc2tzLmRpbWVuc2lvbiA9IG1lbnVQb3J0YWw7Cm1hc2tzW21lbnVQb3J0YWxdID0gdHJ1ZTsKbWFza3MuZm9ybSA9ICJpbnB1dCI7CgppZiAodGhhdC5ib3QgJiYgdGhhdC5wcm9tcHQgPT09ICJib3QiKQp7CiAgICBtYXNrcy50YXJnZXRCb3QgPSBnZXRMaW5rKHRoYXQuYm90KTsKfQoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IHRhZ3MuYWlNb2RlbDsnAMvgr6kNm4EBB2JvdENoYXQCBADL4K+pDaCPAcUKQGNvbnN0IGJvdEJhc2UgPSB0aGlzQm90Owpjb25zdCBkaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlOwpjb25zdCBtZXNzYWdlVGltZSA9IHRoYXQudGltZSA/IHRoYXQudGltZSAqIDEwMDAgOiAxNjAwOyAKY29uc3QgbWVzc2FnZUJvdCA9IHt9OwoKbWVzc2FnZUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZXNzYWdlQm90LnRyYW5zZm9ybWVyID0gYm90QmFzZS5pZDsKbWVzc2FnZUJvdC5mb3JtID0gInNwcml0ZSI7Cm1lc3NhZ2VCb3QuY29sb3IgPSAiIzAwMDAwMCI7Cm1lc3NhZ2VCb3QubGFiZWwgPSBtZXNzYWdlOwptZXNzYWdlQm90LmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lc3NhZ2VCb3QubGFiZWxTaXplID0gMTsKbWVzc2FnZUJvdC5zY2FsZVggPSBtZXNzYWdlLmxlbmd0aCAvIDUgPiAxMCA/IDEwIDogbWVzc2FnZS5sZW5ndGggPCAxMCA/IDIgOiBtZXNzYWdlLmxlbmd0aCAvIDU7Cm1lc3NhZ2VCb3Quc2NhbGVZID0gKG1lc3NhZ2UubGVuZ3RoIC8gNTApID4gMSA/IE1hdGgucm91bmQobWVzc2FnZS5sZW5ndGggLyA1MCkgOiAxLjMzOwptZXNzYWdlQm90LnNjYWxlWiA9IDAuMTsKbWVzc2FnZUJvdC5vcmllbnRhdGlvbk1vZGUgPSAiYmlsbGJvYXJkIjsKbWVzc2FnZUJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKbWVzc2FnZUJvdC5kaW1lbnNpb24gPSBkaW1lbnNpb247Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlgiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlkiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIloiXSA9IGJvdEJhc2UudGFncy5zY2FsZSA/IGJvdEJhc2UudGFncy5zY2FsZSAvIDIgKyAyIDogMjsKbWVzc2FnZUJvdC5vbkZhZGUgPSBgQCBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAxLAogICAgICAgIGxhYmVsT3BhY2l0eTogMSwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMCwKICAgICAgICBsYWJlbE9wYWNpdHk6IDAsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0gKyA1CiAgICB9LAogICAgZHVyYXRpb246ICR7dGhhdC5kdXJhdGlvbiA/PyAzfQp9KS5jYXRjaCh7fSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpjb25zdCBhY3RpdmVNZXNzYWdlID0gY3JlYXRlKG1lc3NhZ2VCb3QpOwoKc2V0VGltZW91dCgoKT0+IGFjdGl2ZU1lc3NhZ2Uub25GYWRlKCksIG1lc3NhZ2VUaW1lKTsnAMvgr6kNm4EBBWNvbG9yAgQAy+CvqQ3mmQEFY2xlYXInAMvgr6kNm4EBBWxhYmVsAgQAy+CvqQ3smQESZ2VtaW5pLTIuMC1wcm8tZXhwJwDL4K+pDZuBAQpsYWJlbENvbG9yAgQAy+CvqQ3/mQEJbGlnaHRibHVlJwDL4K+pDZuBAQltZW51Q29sb3ICBADL4K+pDYmaAQlsaWdodGJsdWUnAMvgr6kNm4EBB29uQ2xpY2sCBADL4K+pDZOaASRAdGhpc0JvdC5hc2tBZ2VudCh7cHJvbXB0OiAiY29yZSJ9KTsnAMvgr6kNm4EBBm9uRHJhZwIEAMvgr6kNuJoB3AxAb3MuaGlkZUNoYXQoKTsKCi8vIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gaWQpCi8vIHsKLy8gICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgovLyAgICAgcmV0dXJuOwovLyB9CgoKaWYgKHRhZ3MuYXJtKQp7CiAgICBhd2FpdCB0aGlzQm90LmFnZW50UmVzZXQoKTsKfQoKLy8gaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQovLyB7Ci8vICAgICB0aGlzQm90LmFiQ2xpY2soKTsKLy8gfQoKLy9sZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXTsKYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IHRoaXNCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lVG8gPSB0aGlzQm90LmlkOwphcm0ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CmFybS5vbkNsaWNrID0gIkAgbGlua3MubWFuYWdlci5vbkFybUNsaWNrKHthcm06IHRoaXNCb3R9KTsiOwphcm0ub25Ecm9wID0gYEAgdGFncy5kcmFnZ2FibGUgPSBmYWxzZTsKCmlmICh0aGF0LnRvLmJvdCkKewogICAgbGlua3MubWFuYWdlci5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKICAgIGxpbmtzLm1hbmFnZXIubWFza3MubGluZUNvbG9yID0gbGlua3MubWFuYWdlci50YWdzLnN0cm9rZUNvbG9yOwogICAgCiAgICBsaW5rcy5tYW5hZ2VyLmFza0FnZW50KHtwcm9tcHQ6ICJib3QiLCBib3Q6IHRoYXQudG8uYm90fSk7CgogICAgZGVzdHJveSh0aGlzQm90KTsKfQplbHNlCnsKICAgIGxpbmtzLm1hbmFnZXIuYXNrQWdlbnQoe3Byb21wdDogImdyaWQifSk7Cn1gOwoKLy8gYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwoKLy8gbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CgovLyBpZiAoc3RhdGUpCi8vIHsKLy8gICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7Ci8vICAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwovLyAgICAgYXJtLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCi8vICAgICBtYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwovLyB9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgptYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycAy+CvqQ2bgQELb25HcmlkQ2xpY2sCBADL4K+pDZOnARZAdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDZuBAQhvblN1Ym1pdAIEAMvgr6kNqqcBggRAdmFyIHJlcXVlc3REYXRhID0gdGhhdC5kYXRhOwp2YXIgYWN0aXZlRGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKCmlmIChsaW5rcy5hcm0pCnsKICAgIGNvbnN0IGFybSA9IGxpbmtzLmFybTsKICAgIGNvbnN0IGFjdGl2ZURpbWVuc2lvbiA9IGFybS50YWdzLmRpbWVuc2lvbgoKICAgIHJlcXVlc3REYXRhID0ge2RpbWVuc2lvbjogYWN0aXZlRGltZW5zaW9uLCBkaW1lbnNpb25YOiBhcm0udGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWCJdLCBkaW1lbnNpb25ZOiBhcm0udGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWSJdfTsKfQoKY29uc3QgaW5xdWlyeSA9IHRoYXQudGV4dDsKY29uc3QgcHJvbXB0ID0gdGFncy5wcm9tcHRUeXBlOwoKY29uc3QgYWlSZXF1ZXN0ID0gYXdhaXQgdGhpc0JvdC5hZ2VudE9uUmVxdWVzdCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIGRhdGE6IHJlcXVlc3REYXRhLCBtb2RlbDogdGFncy5haU1vZGVsfSk7JwDL4K+pDZuBAQtzdHJva2VDb2xvcgIEAMvgr6kNrasBCWxpZ2h0Ymx1ZScAy+CvqQ2bgQEGc3lzdGVtAgQAy+CvqQ23qwEsYWlfdG9vbGJveC50b29sLmdlbWluaS0yLjAtcHJvLWV4cCBhZ2VudCBib3QnAMvgr6kNm4EBB2NyZWF0b3ICBADL4K+pDeSrASQwZWVmNGU0Yy00NGNjLTQ5MmQtYWQ0OS1lODFhN2NmNTEyOGInAMvgr6kNm4EBDW1lbnVJdGVtU3R5bGUCBADL4K+pDYmsAYAB8J+nrHsiYm9yZGVyLXJhZGl1cyI6IjhweCIsICJtYXJnaW4tdG9wIjogIjhweCIsICJib3JkZXIiOiAiMnB4IHNvbGlkICMwMDAiLCAiYm94LXNoYWRvdyI6ICIzcHggNHB4ICMwMDAiLCAibWluLWhlaWdodCI6ICI0NHB4In0nAMvgr6kNm4EBCm9uQXJtQ2xpY2sCBADL4K+pDYitAYQCQGNvbnN0IGFybSA9IHRoYXQuYXJtOwpjb25zdCBkaW1lbnNpb24gPSBhcm0udGFncy5kaW1lbnNpb247CmNvbnN0IHRhcmdldFggPSBhcm0udGFnc1tkaW1lbnNpb24gKyAiWCJdOwpjb25zdCB0YXJnZXRZID0gYXJtLnRhZ3NbZGltZW5zaW9uICsgIlkiXTsKCnRhZ3NbZGltZW5zaW9uXSA9IHRydWU7CnRhZ3NbZGltZW5zaW9uICsgIlgiXSA9IHRhcmdldFg7CnRhZ3NbZGltZW5zaW9uICsgIlkiXSA9IHRhcmdldFk7Cgp0aGlzQm90LmFnZW50UmVzZXQoKTsnAMvgr6kNm4EBCmFpX3Rvb2xib3gCBADL4K+pDY2vAQR0cnVlJwEEYm90cyRiOTg1MGJhYi1iNjlkLTRjNGUtYmIxOC04YjVkZDFmN2FlNWEBJwDL4K+pDZKvAQdjcmVhdG9yAgQAy+CvqQ2TrwEkMGVlZjRlNGMtNDRjYy00OTJkLWFkNDktZTgxYTdjZjUxMjhiJwDL4K+pDZKvAQdhYkFnZW50AgQAy+CvqQ24rwEEdHJ1ZScAy+CvqQ2SrwENYWJNZW51UmVmcmVzaAIEAMvgr6kNva8BFkB0aGlzQm90LmFnZW50UmVzZXQoKTsnAMvgr6kNkq8BCWFiVmVyc2lvbgIEAMvgr6kN1K8BFDkuNjUuMS4xNzQ3MTY4ODg2MzEwJwDL4K+pDZKvAQ5hZ2VudE9uUmVxdWVzdAIEAMvgr6kN6a8BlghAdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgYWJBc2tCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5hY3Rpb24uYXNrIik7CmNvbnN0IHByb21wdCA9ICF0aGF0LnByb21wdCA/IGFiQXNrQm90LnRhZ3MucHJvbXB0X2NvcmUgOiBhYkFza0JvdC50YWdzWyJwcm9tcHRfIiArIHRoYXQucHJvbXB0XTsKCmFiQXNrQm90Lm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7CgphYi5sb2codGFncy5haU1vZGVsICsgIiBib3QiICsgIjogdGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnkpOwoKdGhpc0JvdC5ib3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBQT1NJVElPTjogeyR7dGhhdC5kYXRhLmRpbWVuc2lvbn06IHRydWUsICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1YOiAke3RoYXQuZGF0YS5kaW1lbnNpb25YfSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVk6JHt0aGF0LmRhdGEuZGltZW5zaW9uWX19LmAKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiYm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSUQ6IGAgKyBsaW5rcy50YXJnZXRCb3QuaWQ7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gIm11bHRpcGxlQm90IikKewogICAgaW5xdWlyeSA9IGlucXVpcnkgKyBgIFRBUkdFVF9CT1RfSURTOiBgICsgdGhhdC5kYXRhLmJvdHM7Cn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gImNvcmUiKQp7Cgp9CgovL1RBUkdFVCBSSUdIVCBGVU5DVElPTgpjb25zdCBhbnN3ZXIgPSBhd2FpdCBhYkFza0JvdC5zdWJtaXRSZXF1ZXN0R1BUKHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgbW9kZWw6IHRoYXQubW9kZWx9KTsKCmNyZWF0ZSh7aG9tZTogdHJ1ZSwgb25DcmVhdGU6IGBAICR7YW5zd2VyfWB9KTsKLy9GSVgKYWIubG9nKHRhZ3MuYWlNb2RlbCArICIgYm90IiArICI6ICIgKyBhbnN3ZXIpOwoKcmV0dXJuOycAy+CvqQ2SrwEKYWdlbnRSZXNldAIEAMvgr6kNgLgBcEBpZiAobGlua3MuYXJtKQp7CiAgICBkZXN0cm95KGxpbmtzLmFybSk7Cn0KCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7CgphYlJlbWVtYmVyLm1hc2tzLmFiQnVpbGRlcklkZW50aXR5ID0gbnVsbDsnAMvgr6kNkq8BB2FpTW9kZWwCBADL4K+pDfG4AQdncHQtNC4xJwDL4K+pDZKvAQhhc2tBZ2VudAIEAMvgr6kN+bgBswRAaWYgKG1hc2tzLmZvcm0gPT0gImlucHV0IikKewogICAgdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBtZW51UG9ydGFsID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbCA/PyAibWVudSI7CgppZiAoIWNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwpCnsKICAgIGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwgPSBtZW51UG9ydGFsOwp9CgptYXNrcy5wcm9tcHRUeXBlID0gdGhhdC5wcm9tcHQ7Cm1hc2tzLmxhYmVsQ29sb3IgPSAiYmxhY2siOwptYXNrcy5jb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3I7Cm1hc2tzLmRpbWVuc2lvbiA9IG1lbnVQb3J0YWw7Cm1hc2tzW21lbnVQb3J0YWxdID0gdHJ1ZTsKbWFza3MuZm9ybSA9ICJpbnB1dCI7CgppZiAodGhhdC5ib3QgJiYgdGhhdC5wcm9tcHQgPT09ICJib3QiKQp7CiAgICBtYXNrcy50YXJnZXRCb3QgPSBnZXRMaW5rKHRoYXQuYm90KTsKfQoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IHRhZ3MuYWlNb2RlbDsKCi8vV0hFUkUgSVMgT05BTllCT1RDTElDS0VEIEdFVFRJTkcgU0VUPz8/Pz8/PycAy+CvqQ2SrwEHYm90Q2hhdAIEAMvgr6kNrb0BxQpAY29uc3QgYm90QmFzZSA9IHRoaXNCb3Q7CmNvbnN0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmNvbnN0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2U7CmNvbnN0IG1lc3NhZ2VUaW1lID0gdGhhdC50aW1lID8gdGhhdC50aW1lICogMTAwMCA6IDE2MDA7IApjb25zdCBtZXNzYWdlQm90ID0ge307CgptZXNzYWdlQm90LnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lc3NhZ2VCb3QudHJhbnNmb3JtZXIgPSBib3RCYXNlLmlkOwptZXNzYWdlQm90LmZvcm0gPSAic3ByaXRlIjsKbWVzc2FnZUJvdC5jb2xvciA9ICIjMDAwMDAwIjsKbWVzc2FnZUJvdC5sYWJlbCA9IG1lc3NhZ2U7Cm1lc3NhZ2VCb3QubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKbWVzc2FnZUJvdC5sYWJlbFNpemUgPSAxOwptZXNzYWdlQm90LnNjYWxlWCA9IG1lc3NhZ2UubGVuZ3RoIC8gNSA+IDEwID8gMTAgOiBtZXNzYWdlLmxlbmd0aCA8IDEwID8gMiA6IG1lc3NhZ2UubGVuZ3RoIC8gNTsKbWVzc2FnZUJvdC5zY2FsZVkgPSAobWVzc2FnZS5sZW5ndGggLyA1MCkgPiAxID8gTWF0aC5yb3VuZChtZXNzYWdlLmxlbmd0aCAvIDUwKSA6IDEuMzM7Cm1lc3NhZ2VCb3Quc2NhbGVaID0gMC4xOwptZXNzYWdlQm90Lm9yaWVudGF0aW9uTW9kZSA9ICJiaWxsYm9hcmQiOwptZXNzYWdlQm90W2RpbWVuc2lvbl0gPSB0cnVlOwptZXNzYWdlQm90LmRpbWVuc2lvbiA9IGRpbWVuc2lvbjsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWCJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWSJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWiJdID0gYm90QmFzZS50YWdzLnNjYWxlID8gYm90QmFzZS50YWdzLnNjYWxlIC8gMiArIDIgOiAyOwptZXNzYWdlQm90Lm9uRmFkZSA9IGBAIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDEsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAxLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAwLAogICAgICAgIGxhYmVsT3BhY2l0eTogMCwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXSArIDUKICAgIH0sCiAgICBkdXJhdGlvbjogJHt0aGF0LmR1cmF0aW9uID8/IDN9Cn0pLmNhdGNoKHt9KTsKCmRlc3Ryb3kodGhpc0JvdCk7YDsKCmNvbnN0IGFjdGl2ZU1lc3NhZ2UgPSBjcmVhdGUobWVzc2FnZUJvdCk7CgpzZXRUaW1lb3V0KCgpPT4gYWN0aXZlTWVzc2FnZS5vbkZhZGUoKSwgbWVzc2FnZVRpbWUpOycAy+CvqQ2SrwEFY29sb3ICBADL4K+pDfPHAQVjbGVhcicAy+CvqQ2SrwEFbGFiZWwCBADL4K+pDfnHAQ1ncHQtNC4xIGFnZW50JwDL4K+pDZKvAQpsYWJlbENvbG9yAgQAy+CvqQ2HyAEHI0ZGNjlCNCcAy+CvqQ2SrwEJbWVudUNvbG9yAgQAy+CvqQ2PyAEHI0ZGNjlCNCcAy+CvqQ2SrwEHb25DbGljawIEAMvgr6kNl8gBJEB0aGlzQm90LmFza0FnZW50KHtwcm9tcHQ6ICJjb3JlIn0pOycAy+CvqQ2SrwEGb25EcmFnAgQAy+CvqQ28yAHcDEBvcy5oaWRlQ2hhdCgpOwoKLy8gaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBpZCkKLy8gewovLyAgICAgb3MuZW5hYmxlQ3VzdG9tRHJhZ2dpbmcoKTsKCi8vICAgICByZXR1cm47Ci8vIH0KCgppZiAodGFncy5hcm0pCnsKICAgIGF3YWl0IHRoaXNCb3QuYWdlbnRSZXNldCgpOwp9CgovLyBpZiAoIXRoYXQuYm90LnRhZ3MuaW50ZXJ2YWwpCi8vIHsKLy8gICAgIHRoaXNCb3QuYWJDbGljaygpOwovLyB9CgovL2xldCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CmxldCBhcm0gPSB7fTsKCmFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphcm1bdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKYXJtW3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWCJdOwphcm1bdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGFnc1t0aGF0LmRpbWVuc2lvbiArICJZIl07CmFybS5jcmVhdG9yID0gdGhpc0JvdC5pZDsKYXJtLmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uID8/IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmFybS5zY2FsZSA9IDAuOTsKYXJtLnNjYWxlWiA9IDAuMDE7CmFybS5jb2xvciA9ICJjbGVhciI7CmFybS5zdHJva2VDb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3IgPz8gdGFncy5jb2xvcjsKYXJtLmxpbmVDb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3IgPz8gdGFncy5jb2xvcjsKYXJtLmxpbmVUbyA9IHRoaXNCb3QuaWQ7CmFybS5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKYXJtLm9uQ2xpY2sgPSAiQCBsaW5rcy5tYW5hZ2VyLm9uQXJtQ2xpY2soe2FybTogdGhpc0JvdH0pOyI7CmFybS5vbkRyb3AgPSBgQCB0YWdzLmRyYWdnYWJsZSA9IGZhbHNlOwoKaWYgKHRoYXQudG8uYm90KQp7CiAgICBsaW5rcy5tYW5hZ2VyLm1hc2tzLmxpbmVUbyA9IHRoYXQudG8uYm90LmlkOwogICAgbGlua3MubWFuYWdlci5tYXNrcy5saW5lQ29sb3IgPSBsaW5rcy5tYW5hZ2VyLnRhZ3Muc3Ryb2tlQ29sb3I7CiAgICAKICAgIGxpbmtzLm1hbmFnZXIuYXNrQWdlbnQoe3Byb21wdDogImJvdCIsIGJvdDogdGhhdC50by5ib3R9KTsKCiAgICBkZXN0cm95KHRoaXNCb3QpOwp9CmVsc2UKewogICAgbGlua3MubWFuYWdlci5hc2tBZ2VudCh7cHJvbXB0OiAiZ3JpZCJ9KTsKfWA7CgovLyBhcm0ub25DbGljayA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7CgovLyBsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0aGF0LmRpbWVuc2lvbiArICJZIl19fSk7YDsKCi8vIGlmIChzdGF0ZSkKLy8gewovLyAgICAgYXJtLm11bHRpU2VsZWN0ID0gdHJ1ZTsKLy8gICAgIGFybS5mb3JtID0gInNwaGVyZSI7Ci8vICAgICBhcm0uY29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKLy8gICAgIG1hc2tzLmRyYWdnYWJsZSA9IHRydWU7Ci8vIH0KCmxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsKCm9zLnJlcGxhY2VEcmFnQm90KG5ld0FybSk7JwDL4K+pDZKvAQtvbkdyaWRDbGljawIEAMvgr6kNl9UBFkB0aGlzQm90LmFnZW50UmVzZXQoKTsnAMvgr6kNkq8BCG9uU3VibWl0AgQAy+CvqQ2u1QGCBEB2YXIgcmVxdWVzdERhdGEgPSB0aGF0LmRhdGE7CnZhciBhY3RpdmVEaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwoKaWYgKGxpbmtzLmFybSkKewogICAgY29uc3QgYXJtID0gbGlua3MuYXJtOwogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gYXJtLnRhZ3MuZGltZW5zaW9uCgogICAgcmVxdWVzdERhdGEgPSB7ZGltZW5zaW9uOiBhY3RpdmVEaW1lbnNpb24sIGRpbWVuc2lvblg6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJYIl0sIGRpbWVuc2lvblk6IGFybS50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJZIl19Owp9Cgpjb25zdCBpbnF1aXJ5ID0gdGhhdC50ZXh0Owpjb25zdCBwcm9tcHQgPSB0YWdzLnByb21wdFR5cGU7Cgpjb25zdCBhaVJlcXVlc3QgPSBhd2FpdCB0aGlzQm90LmFnZW50T25SZXF1ZXN0KHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdCwgZGF0YTogcmVxdWVzdERhdGEsIG1vZGVsOiB0YWdzLmFpTW9kZWx9KTsnAMvgr6kNkq8BC3N0cm9rZUNvbG9yAgQAy+CvqQ2x2QEHI0ZGNjlCNCcAy+CvqQ2SrwEGc3lzdGVtAgQAy+CvqQ252QEhYWlfdG9vbGJveC50b29sLmdwdC00LjEgYWdlbnQgYm90JwDL4K+pDZKvAQ1tZW51SXRlbVN0eWxlAgQAy+CvqQ3b2QGAAfCfp6x7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6ICI4cHgiLCAiYm9yZGVyIjogIjJweCBzb2xpZCAjMDAwIiwgImJveC1zaGFkb3ciOiAiM3B4IDRweCAjMDAwIiwgIm1pbi1oZWlnaHQiOiAiNDRweCJ9JwDL4K+pDZKvAQpvbkFybUNsaWNrAgQAy+CvqQ3a2gGEAkBjb25zdCBhcm0gPSB0aGF0LmFybTsKY29uc3QgZGltZW5zaW9uID0gYXJtLnRhZ3MuZGltZW5zaW9uOwpjb25zdCB0YXJnZXRYID0gYXJtLnRhZ3NbZGltZW5zaW9uICsgIlgiXTsKY29uc3QgdGFyZ2V0WSA9IGFybS50YWdzW2RpbWVuc2lvbiArICJZIl07Cgp0YWdzW2RpbWVuc2lvbl0gPSB0cnVlOwp0YWdzW2RpbWVuc2lvbiArICJYIl0gPSB0YXJnZXRYOwp0YWdzW2RpbWVuc2lvbiArICJZIl0gPSB0YXJnZXRZOwoKdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDZKvAQphaV90b29sYm94AgQAy+CvqQ3f3AEEdHJ1ZScBBGJvdHMkZWM2MDAxN2ItYzk0Zi00ZTY0LWE4YTAtOGQyYTY3M2UwMWZkAScAy+CvqQ3k3AEHYWJBZ2VudAIEAMvgr6kN5dwBBHRydWUnAMvgr6kN5NwBCmFiSURPcmlnaW4CBADL4K+pDercAQxhZ2VudFRvb2xib3gnAMvgr6kN5NwBCmFiSURTdHVkaW8CBADL4K+pDffcASRlOTFlYWIwZC02YTc1LTRhYjktOGEwZS01MGE0Y2MwYzFkMzQnAMvgr6kN5NwBDWFiTWVudVJlZnJlc2gCBADL4K+pDZzdARZAdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDeTcAQlhYlZlcnNpb24CBADL4K+pDbPdARQ5LjY1LjEuMTc0NzE2ODg4NjMxMCcAy+CvqQ3k3AEOYWdlbnRPblJlcXVlc3QCBADL4K+pDcjdAZYIQHRoaXNCb3QuYWdlbnRSZXNldCgpOwoKbGV0IGlucXVpcnkgPSB0aGF0LmlucXVpcnkgPz8gdGhhdDsKCmNvbnN0IGFiQXNrQm90ID0gZ2V0Qm90KCJzeXN0ZW0iLCAiYWIuYWN0aW9uLmFzayIpOwpjb25zdCBwcm9tcHQgPSAhdGhhdC5wcm9tcHQgPyBhYkFza0JvdC50YWdzLnByb21wdF9jb3JlIDogYWJBc2tCb3QudGFnc1sicHJvbXB0XyIgKyB0aGF0LnByb21wdF07CgphYkFza0JvdC5tYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKYWIubG9nKHRhZ3MuYWlNb2RlbCArICIgYm90IiArICI6IHRoaW5raW5nIGFib3V0ICIgKyBpbnF1aXJ5KTsKCnRoaXNCb3QuYm90Q2hhdCh7bWVzc2FnZTogInRoaW5raW5nIGFib3V0ICIgKyBpbnF1aXJ5fSk7CgppZiAodGhhdC5wcm9tcHQgPT0gImdyaWQiKQp7CiAgICBpbnF1aXJ5ID0gaW5xdWlyeSArIGAgUE9TSVRJT046IHske3RoYXQuZGF0YS5kaW1lbnNpb259OiB0cnVlLCAke3RoYXQuZGF0YS5kaW1lbnNpb259WDogJHt0aGF0LmRhdGEuZGltZW5zaW9uWH0sICR7dGhhdC5kYXRhLmRpbWVuc2lvbn1ZOiR7dGhhdC5kYXRhLmRpbWVuc2lvbll9fS5gCn0KZWxzZSBpZiAodGhhdC5wcm9tcHQgPT0gImJvdCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBUQVJHRVRfQk9UX0lEOiBgICsgbGlua3MudGFyZ2V0Qm90LmlkOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJtdWx0aXBsZUJvdCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYCBUQVJHRVRfQk9UX0lEUzogYCArIHRoYXQuZGF0YS5ib3RzOwp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJjb3JlIikKewoKfQoKLy9UQVJHRVQgUklHSFQgRlVOQ1RJT04KY29uc3QgYW5zd2VyID0gYXdhaXQgYWJBc2tCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIG1vZGVsOiB0aGF0Lm1vZGVsfSk7CgpjcmVhdGUoe2hvbWU6IHRydWUsIG9uQ3JlYXRlOiBgQCAke2Fuc3dlcn1gfSk7Ci8vRklYCmFiLmxvZyh0YWdzLmFpTW9kZWwgKyAiIGJvdCIgKyAiOiAiICsgYW5zd2VyKTsKCnJldHVybjsnAMvgr6kN5NwBCmFnZW50UmVzZXQCBADL4K+pDd/lAXBAaWYgKGxpbmtzLmFybSkKewogICAgZGVzdHJveShsaW5rcy5hcm0pOwp9CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpOwoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IG51bGw7JwDL4K+pDeTcAQdhaU1vZGVsAgQAy+CvqQ3Q5gEPZ3B0LTQuNS1wcmV2aWV3JwDL4K+pDeTcAQhhc2tBZ2VudAIEAMvgr6kN4OYBswRAaWYgKG1hc2tzLmZvcm0gPT0gImlucHV0IikKewogICAgdGhpc0JvdC5hZ2VudFJlc2V0KCk7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBtZW51UG9ydGFsID0gY29uZmlnQm90LnRhZ3MubWVudVBvcnRhbCA/PyAibWVudSI7CgppZiAoIWNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwpCnsKICAgIGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwgPSBtZW51UG9ydGFsOwp9CgptYXNrcy5wcm9tcHRUeXBlID0gdGhhdC5wcm9tcHQ7Cm1hc2tzLmxhYmVsQ29sb3IgPSAiYmxhY2siOwptYXNrcy5jb2xvciA9IHRhZ3Muc3Ryb2tlQ29sb3I7Cm1hc2tzLmRpbWVuc2lvbiA9IG1lbnVQb3J0YWw7Cm1hc2tzW21lbnVQb3J0YWxdID0gdHJ1ZTsKbWFza3MuZm9ybSA9ICJpbnB1dCI7CgppZiAodGhhdC5ib3QgJiYgdGhhdC5wcm9tcHQgPT09ICJib3QiKQp7CiAgICBtYXNrcy50YXJnZXRCb3QgPSBnZXRMaW5rKHRoYXQuYm90KTsKfQoKYWJSZW1lbWJlci5tYXNrcy5hYkJ1aWxkZXJJZGVudGl0eSA9IHRhZ3MuYWlNb2RlbDsKCi8vV0hFUkUgSVMgT05BTllCT1RDTElDS0VEIEdFVFRJTkcgU0VUPz8/Pz8/PycAy+CvqQ3k3AEHYm90Q2hhdAIEAMvgr6kNlOsBxQpAY29uc3QgYm90QmFzZSA9IHRoaXNCb3Q7CmNvbnN0IGRpbWVuc2lvbiA9IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmNvbnN0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2U7CmNvbnN0IG1lc3NhZ2VUaW1lID0gdGhhdC50aW1lID8gdGhhdC50aW1lICogMTAwMCA6IDE2MDA7IApjb25zdCBtZXNzYWdlQm90ID0ge307CgptZXNzYWdlQm90LnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lc3NhZ2VCb3QudHJhbnNmb3JtZXIgPSBib3RCYXNlLmlkOwptZXNzYWdlQm90LmZvcm0gPSAic3ByaXRlIjsKbWVzc2FnZUJvdC5jb2xvciA9ICIjMDAwMDAwIjsKbWVzc2FnZUJvdC5sYWJlbCA9IG1lc3NhZ2U7Cm1lc3NhZ2VCb3QubGFiZWxDb2xvciA9ICIjZmZmZmZmIjsKbWVzc2FnZUJvdC5sYWJlbFNpemUgPSAxOwptZXNzYWdlQm90LnNjYWxlWCA9IG1lc3NhZ2UubGVuZ3RoIC8gNSA+IDEwID8gMTAgOiBtZXNzYWdlLmxlbmd0aCA8IDEwID8gMiA6IG1lc3NhZ2UubGVuZ3RoIC8gNTsKbWVzc2FnZUJvdC5zY2FsZVkgPSAobWVzc2FnZS5sZW5ndGggLyA1MCkgPiAxID8gTWF0aC5yb3VuZChtZXNzYWdlLmxlbmd0aCAvIDUwKSA6IDEuMzM7Cm1lc3NhZ2VCb3Quc2NhbGVaID0gMC4xOwptZXNzYWdlQm90Lm9yaWVudGF0aW9uTW9kZSA9ICJiaWxsYm9hcmQiOwptZXNzYWdlQm90W2RpbWVuc2lvbl0gPSB0cnVlOwptZXNzYWdlQm90LmRpbWVuc2lvbiA9IGRpbWVuc2lvbjsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWCJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWSJdID0gMDsKbWVzc2FnZUJvdFtkaW1lbnNpb24gKyAiWiJdID0gYm90QmFzZS50YWdzLnNjYWxlID8gYm90QmFzZS50YWdzLnNjYWxlIC8gMiArIDIgOiAyOwptZXNzYWdlQm90Lm9uRmFkZSA9IGBAIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgZm9ybU9wYWNpdHk6IDEsCiAgICAgICAgbGFiZWxPcGFjaXR5OiAxLAogICAgICAgIFt0YWdzLmRpbWVuc2lvbiArICJaIl06IHRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWiJdCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAwLAogICAgICAgIGxhYmVsT3BhY2l0eTogMCwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXSArIDUKICAgIH0sCiAgICBkdXJhdGlvbjogJHt0aGF0LmR1cmF0aW9uID8/IDN9Cn0pLmNhdGNoKHt9KTsKCmRlc3Ryb3kodGhpc0JvdCk7YDsKCmNvbnN0IGFjdGl2ZU1lc3NhZ2UgPSBjcmVhdGUobWVzc2FnZUJvdCk7CgpzZXRUaW1lb3V0KCgpPT4gYWN0aXZlTWVzc2FnZS5vbkZhZGUoKSwgbWVzc2FnZVRpbWUpOycAy+CvqQ3k3AEFY29sb3ICBADL4K+pDdr1AQVjbGVhcicAy+CvqQ3k3AEFbGFiZWwCBADL4K+pDeD1AQ9ncHQtNC41LXByZXZpZXcnAMvgr6kN5NwBCmxhYmVsQ29sb3ICBADL4K+pDfD1AQVncmVlbicAy+CvqQ3k3AEJbWVudUNvbG9yAgQAy+CvqQ329QEFZ3JlZW4nAMvgr6kN5NwBB29uQ2xpY2sCBADL4K+pDfz1ASRAdGhpc0JvdC5hc2tBZ2VudCh7cHJvbXB0OiAiY29yZSJ9KTsnAMvgr6kN5NwBBm9uRHJhZwIEAMvgr6kNofYB3AxAb3MuaGlkZUNoYXQoKTsKCi8vIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMgJiYgdGhhdC5ib3QuaWQgPT0gaWQpCi8vIHsKLy8gICAgIG9zLmVuYWJsZUN1c3RvbURyYWdnaW5nKCk7CgovLyAgICAgcmV0dXJuOwovLyB9CgoKaWYgKHRhZ3MuYXJtKQp7CiAgICBhd2FpdCB0aGlzQm90LmFnZW50UmVzZXQoKTsKfQoKLy8gaWYgKCF0aGF0LmJvdC50YWdzLmludGVydmFsKQovLyB7Ci8vICAgICB0aGlzQm90LmFiQ2xpY2soKTsKLy8gfQoKLy9sZXQgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwpsZXQgYXJtID0ge307Cgphcm0uc3BhY2UgPSAidGVtcExvY2FsIjsKYXJtW3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXTsKYXJtW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdOwphcm0uY3JlYXRvciA9IHRoaXNCb3QuaWQ7CmFybS5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbiA/PyBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwphcm0uc2NhbGUgPSAwLjk7CmFybS5zY2FsZVogPSAwLjAxOwphcm0uY29sb3IgPSAiY2xlYXIiOwphcm0uc3Ryb2tlQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lQ29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yID8/IHRhZ3MuY29sb3I7CmFybS5saW5lVG8gPSB0aGlzQm90LmlkOwphcm0ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CmFybS5vbkNsaWNrID0gIkAgbGlua3MubWFuYWdlci5vbkFybUNsaWNrKHthcm06IHRoaXNCb3R9KTsiOwphcm0ub25Ecm9wID0gYEAgdGFncy5kcmFnZ2FibGUgPSBmYWxzZTsKCmlmICh0aGF0LnRvLmJvdCkKewogICAgbGlua3MubWFuYWdlci5tYXNrcy5saW5lVG8gPSB0aGF0LnRvLmJvdC5pZDsKICAgIGxpbmtzLm1hbmFnZXIubWFza3MubGluZUNvbG9yID0gbGlua3MubWFuYWdlci50YWdzLnN0cm9rZUNvbG9yOwogICAgCiAgICBsaW5rcy5tYW5hZ2VyLmFza0FnZW50KHtwcm9tcHQ6ICJib3QiLCBib3Q6IHRoYXQudG8uYm90fSk7CgogICAgZGVzdHJveSh0aGlzQm90KTsKfQplbHNlCnsKICAgIGxpbmtzLm1hbmFnZXIuYXNrQWdlbnQoe3Byb21wdDogImdyaWQifSk7Cn1gOwoKLy8gYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwoKLy8gbGlua3MubWFuYWdlci5hYk1hbmlmZXN0Qm90KHtkaW1lbnNpb246IHRoYXQuZGltZW5zaW9uLCBwb3NpdGlvbjp7eDp0YWdzW3RoYXQuZGltZW5zaW9uICsgIlgiXSx5OnRhZ3NbdGhhdC5kaW1lbnNpb24gKyAiWSJdfX0pO2A7CgovLyBpZiAoc3RhdGUpCi8vIHsKLy8gICAgIGFybS5tdWx0aVNlbGVjdCA9IHRydWU7Ci8vICAgICBhcm0uZm9ybSA9ICJzcGhlcmUiOwovLyAgICAgYXJtLmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCi8vICAgICBtYXNrcy5kcmFnZ2FibGUgPSB0cnVlOwovLyB9CgpsZXQgbmV3QXJtID0gYXdhaXQgY3JlYXRlKGFybSk7CgptYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7Cgpvcy5yZXBsYWNlRHJhZ0JvdChuZXdBcm0pOycAy+CvqQ3k3AELb25HcmlkQ2xpY2sCBADL4K+pDfyCAhZAdGhpc0JvdC5hZ2VudFJlc2V0KCk7JwDL4K+pDeTcAQhvblN1Ym1pdAIEAMvgr6kNk4MCggRAdmFyIHJlcXVlc3REYXRhID0gdGhhdC5kYXRhOwp2YXIgYWN0aXZlRGltZW5zaW9uID0gdGhhdC5kaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKCmlmIChsaW5rcy5hcm0pCnsKICAgIGNvbnN0IGFybSA9IGxpbmtzLmFybTsKICAgIGNvbnN0IGFjdGl2ZURpbWVuc2lvbiA9IGFybS50YWdzLmRpbWVuc2lvbgoKICAgIHJlcXVlc3REYXRhID0ge2RpbWVuc2lvbjogYWN0aXZlRGltZW5zaW9uLCBkaW1lbnNpb25YOiBhcm0udGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWCJdLCBkaW1lbnNpb25ZOiBhcm0udGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWSJdfTsKfQoKY29uc3QgaW5xdWlyeSA9IHRoYXQudGV4dDsKY29uc3QgcHJvbXB0ID0gdGFncy5wcm9tcHRUeXBlOwoKY29uc3QgYWlSZXF1ZXN0ID0gYXdhaXQgdGhpc0JvdC5hZ2VudE9uUmVxdWVzdCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIGRhdGE6IHJlcXVlc3REYXRhLCBtb2RlbDogdGFncy5haU1vZGVsfSk7JwDL4K+pDeTcAQtzdHJva2VDb2xvcgIEAMvgr6kNlocCBWdyZWVuJwDL4K+pDeTcAQZzeXN0ZW0CBADL4K+pDZyHAilhaV90b29sYm94LnRvb2wuZ3B0LTQuNS1wcmV2aWV3IGFnZW50IGJvdCcAy+CvqQ3k3AEHY3JlYXRvcgIEAMvgr6kNxocCJDBlZWY0ZTRjLTQ0Y2MtNDkyZC1hZDQ5LWU4MWE3Y2Y1MTI4YicAy+CvqQ3k3AENbWVudUl0ZW1TdHlsZQIEAMvgr6kN64cCgAHwn6eseyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiAiOHB4IiwgImJvcmRlciI6ICIycHggc29saWQgIzAwMCIsICJib3gtc2hhZG93IjogIjNweCA0cHggIzAwMCIsICJtaW4taGVpZ2h0IjogIjQ0cHgifScAy+CvqQ3k3AEKb25Bcm1DbGljawIEAMvgr6kN6ogChAJAY29uc3QgYXJtID0gdGhhdC5hcm07CmNvbnN0IGRpbWVuc2lvbiA9IGFybS50YWdzLmRpbWVuc2lvbjsKY29uc3QgdGFyZ2V0WCA9IGFybS50YWdzW2RpbWVuc2lvbiArICJYIl07CmNvbnN0IHRhcmdldFkgPSBhcm0udGFnc1tkaW1lbnNpb24gKyAiWSJdOwoKdGFnc1tkaW1lbnNpb25dID0gdHJ1ZTsKdGFnc1tkaW1lbnNpb24gKyAiWCJdID0gdGFyZ2V0WDsKdGFnc1tkaW1lbnNpb24gKyAiWSJdID0gdGFyZ2V0WTsKCnRoaXNCb3QuYWdlbnRSZXNldCgpOycAy+CvqQ3k3AEKYWlfdG9vbGJveAIEAMvgr6kN74oCBHRydWUA"}]}