{"version":1,"state":{"fb4b3b32-361a-420a-99e7-9a52da8a3015":{"id":"fb4b3b32-361a-420a-99e7-9a52da8a3015","space":"shared","tags":{"abIgnore":true,"aiModel":"claude-3-5-sonnet-latest","askAi":"@masks.gptActive = true;\r\n\r\nconst userMessage = that;\r\n\r\nconst model = tags.aiModel;\r\nconst contextualPrompt = tags.prompt;\r\n\r\nconst systemPrompt = tags.corePrompt + \" \" + contextualPrompt + \". User message: \" + userMessage;\r\n\r\nconst aiResp = await ai.chat(systemPrompt, {\r\n    model: model ?? \"claude-3-5-sonnet-latest\",\r\n    temperature: 0,\r\n    topP: 1,\r\n    presencePenalty: 0.6,\r\n    frequencyPenalty: 0\r\n});\r\n\r\nab.log(\"AI: \" + aiResp);","bbChatBot":"true","corePrompt":"Your conversation topic is: ","cursor":"pointer","form":"input","gridPortalLabel":"open chat bar","icon":"https://brandplayer-prod-filesbucket-458964701190.s3.amazonaws.com/84348f60-2a4c-40eb-89df-0a3223327b4e/5101137ce896b0afdc7b534f49ad8c5fde8f76b2085ffbc1fe8f913f4ab0f283.png","menuItemStyle":"ðŸ§¬{\"border-radius\":\"8px\", \"margin-top\": \"8px\", \"border\": \"2px solid #000\", \"box-shadow\": \"3px 4px #000\", \"min-height\": \"44px\"}","onBotAdded":"@masks[os.getCurrentDimension()] = true;\nmasks.label = tags.gridPortalLabel","onClick":"@if (!ab.links.console.masks.open) {\r\n    whisper(ab.links.console, \"showConsole\");\r\n    ab.links.console.masks.open = true;\r\n}\r\n\r\nconst menuPortal = configBot.tags.menuPortal ?? \"menu\";\r\n\r\nif (!configBot.tags.menuPortal)\r\n{\r\n    configBot.tags.menuPortal = menuPortal;\r\n}\r\n\r\nmasks[menuPortal] = true;\r\nmasks[os.getCurrentDimension()] = false;\r\nmasks.label = null;","onCreate":"@tags.abIgnore = true;\r\nab.links.console.tags.showTopBar = false;","onDestroy":"@ab.links.console.tags.showTopBar = true;","onEggHatch":"@if (that.eggParameters) {\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\n\n    tags[dimension] = true;\n    tags[dimension + 'X'] = dimensionX;\n    tags[dimension + 'Y'] = dimensionY;\n}\n","onPortalChanged":"@if (that.portal == \"menuPortal\") {\r\n    if (!masks[that.dimension]) {\r\n        masks[os.getCurrentDimension()] = true;\r\n        masks.label = tags.gridPortalLabel;\r\n    } else {\r\n        masks[os.getCurrentDimension()] = false;\r\n    }\r\n}","onSubmit":"@//thisBot.askAi(that.text);\r\n\r\nif (!ab.links.console.masks.open) {\r\n    whisper(ab.links.console, \"showConsole\");\r\n    ab.links.console.masks.open = true;\r\n}\r\n\r\nlet username = \"user\";\r\n\r\nif (authBot) {\r\n    username = authBot.tags.name;\r\n} else if (ab.links.console.masks.preferredName) {\r\n    username = ab.links.console.masks.preferredName;\r\n} else {\r\n    username = await os.showInput(\"\", {\r\n        title: \"What would you like me to call you?\"\r\n    });\r\n    ab.links.console.masks.preferredName = username;\r\n}\r\n\r\nmasks.menuItemText = \"\";\r\n\r\nif (that.text[0] == \".\") {\r\n    ab.links.input.onChat({message: that.text});\r\n    ab.log({message: that.text, name: username, space: \"tempLocal\"});\r\n} else {\r\n    ab.log({message: that.text, name: username, space: \"shared\"});\r\n}\r\n\r\n","system":"tools.chatBot.chatBot","home":null,"homeX":null,"homeY":null}}}}