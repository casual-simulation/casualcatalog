{"version":1,"state":{"ca097f34-f9de-4962-a29f-2910fdf6b477":{"id":"ca097f34-f9de-4962-a29f-2910fdf6b477","space":"shared","tags":{"home":null,"homeX":null,"homeY":null,"color":null,"onEggHatch":"@os.toast(\"checking for permit\");\r\n\r\nif (!authBot) {\r\n    await os.requestAuthBot();\r\n}\r\n\r\nif (!authBot){\r\n    os.toast(\"could not get authBot\");\r\n    return;\r\n};\r\n\r\nconst recordCheck = await os.getData(authBot.id, \"ai_permit\");\r\n\r\nif (recordCheck.success)\r\n{\r\n    os.toast(\"ai permit already exists\");\r\n}\r\nelse\r\n{\r\n    os.toast(\"generating permit\");\r\n\r\n    const date = DateTime.now().toMillis();\r\n    const recordData = {aiPermit: true, permitID: configBot.tags.staticInst, time: date};\r\n    let recordedPermit = await os.recordData(authBot.id, \"ai_permit\", recordData);\r\n\r\n    if (!recordedPermit.success) {\r\n        await os.grantInstAdminPermission(authBot.id);\r\n        recordedPermit = await os.recordData(authBot.id, \"ai_permit\", recordData);\r\n    }\r\n\r\n    if (recordedPermit.success)\r\n    {\r\n        os.toast(\"ai permit created\");\r\n    }\r\n    else\r\n    {\r\n        os.toast(\"ai permit failed, please try again\");\r\n    }\r\n\r\n    return recordedPermit;\r\n}","aiPermitGenerator":"true","abIgnore":"true","system":"ai.permit_generator","abVersion":"10.26"}}}}