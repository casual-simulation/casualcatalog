{"version":1,"state":{"1c1e0901-1eca-4294-97a7-1177b61ff56e":{"id":"1c1e0901-1eca-4294-97a7-1177b61ff56e","space":"shared","tags":{"abIDOrigin":"arWristBand","color":"#00D9CD","form":"hex","homeSortOrder":0,"pointable":"false","scale":"0.5","scaleZ":"0.2","transformer":"d8f00fb5-2b55-442b-8dab-db5e0aee88ac","system":"arWristBand.hex","arWristBand":"true","abVersion":"10.6","abArtifactName":"arWristBand","onABStripArtifactInstanceDataFromBotData":"@console.log(`[${tags.system}.${tagName}]`, JSON.parse(JSON.stringify(that)));\n\nconst { data } = that;\n\nconst dimension = data.tags.dimension;\n\ndelete data.tags.dimension\ndelete data.tags[dimension];\ndelete data.tags[dimension + 'X'];\ndelete data.tags[dimension + 'Y'];\ndelete data.tags[dimension + 'Z'];\ndelete data.tags[dimension + 'RotationX'];","onABArtifactReconstitute":"@const { data } = that;\n\nif (data.eggParameters) {\n    if (data.eggParameters.gridInformation) {\n        const dimension = data.eggParameters.gridInformation.dimension ?? 'home';\n\n        tags.dimension = dimension;\n        tags[dimension] = true;\n        tags[dimension + 'X'] = 0;\n        tags[dimension + 'Z'] = -0.5;\n        tags[dimension + 'RotationX'] = 0.785398;\n    }\n}\n\nif (data.hexDimension) {\n    tags.dimension = data.hexDimension;\n    tags[data.hexDimension] = true;\n    tags[data.hexDimension + 'X'] = data.hexDimensionX;\n    tags[data.hexDimension + 'Y'] = data.hexDimensionY;\n    tags[data.hexDimension + 'Z'] = data.hexDimensionZ;\n}","onABArtifactCollectShards":"@const shard: ABArtifactShard = {\n    data: {\n        hexDimension: tags.dimension,\n        hexDimensionX: tags[tags.dimension + 'X'],\n        hexDimensionY: tags[tags.dimension + 'Y'],\n        hexDimensionZ: tags[tags.dimension + 'Z'],\n    },\n    dependencies: [\n        { askID: 'arWristBand' }\n    ]\n}\n\nreturn shard;"}},"d8f00fb5-2b55-442b-8dab-db5e0aee88ac":{"id":"d8f00fb5-2b55-442b-8dab-db5e0aee88ac","space":"shared","tags":{"abIDOrigin":"arWristBand","abWristBandX":"-3","abWristBandY":"3","form":"sphere","formOpacity":"0.5","listening":true,"onAnyBotsAdded":"@if (!configBot.tags.arEnabled) {\n    return;\n}\n\nconst menuPortal = configBot.tags.menuPortal;\nconst allBots = that.bots;\n\nfor (let i = 0; i < allBots.length; i++) {\n    const activeBot = allBots[i];\n\n    if (activeBot.tags[menuPortal] == true) {\n        thisBot.wrist_addItem(activeBot);\n    }\n}","onClick":"@const arCapable = await os.arSupported();\n\nif (!arCapable && !configBot.tags.arEnabled) {\n    masks.color = \"red\";\n    os.toast(\"AR not possible on this device\");\n} else if (arCapable && !configBot.tags.arEnabled) {\n    os.enableAR();\n}","onExitClick":"@if (configBot.tags.arEnabled) {\n    os.disableAR();\n}","scale":"1.5","wristManager":"true","wrist_addItem":"@const targetBot = that;\nconst wristPortal = configBot.tags.leftWristPortal;\nconst otherWristBots = getBots((b) => {\n    return b.tags[wristPortal] === true &&\n        b.links.wristManager !== thisBot\n})\n\notherWristBots.push(targetBot);\n\nconst actualRootCheck = Math.sqrt(otherWristBots.length) % 1 === 0;\nconst baseRoot = Math.ceil(Math.sqrt(otherWristBots.length));\n\nlet targetColumns = baseRoot;\n\nif (actualRootCheck) {\n    targetColumns = Math.sqrt(otherWristBots.length);\n}\n\nlet botNum = 0;\n\nfullLoop:\nfor (let j = 0; j < targetColumns; j++) {\n    const rowNum = j;\n\n    for (let k = 0; k < targetColumns; k++) {\n        const columnNum = k;\n        const currentBot = otherWristBots[botNum];\n\n        if (!currentBot) {\n            break fullLoop;\n        }\n        else {\n            botNum++;\n        }\n\n        currentBot.masks[wristPortal + \"X\"] = (columnNum * 2) - 2;\n        currentBot.masks[wristPortal + \"Y\"] = (rowNum * -2) + 2;\n        currentBot.masks[wristPortal] = true;\n        //currentBot.masks.labelPosition = \"floatingBillboard\";\n    }\n}","arWristBand":"true","system":"arWristBand.manager","abVersion":"10.6","abArtifactName":"arWristBand","onABArtifactCollectShards":"@const shard: ABArtifactShard = {\n    data: {\n        managerDimension: tags.dimension,\n        managerDimensionX: tags[tags.dimension + 'X'],\n        managerDimensionY: tags[tags.dimension + 'Y'],\n        managerDimensionZ: tags[tags.dimension + 'Z'],\n    },\n    dependencies: [\n        { askID: 'arWristBand' }\n    ]\n}\n\nreturn shard;","onABArtifactReconstitute":"@const data = that.data;\n\nif (data.eggParameters) {\n    if (data.eggParameters.gridInformation) {\n        const dimension = data.eggParameters.gridInformation.dimension ?? 'home';\n        const dimensionX = data.eggParameters.gridInformation.position?.x ?? 0;\n        const dimensionY = data.eggParameters.gridInformation.position?.y ?? 0;\n\n        tags.dimension = dimension;\n        tags[dimension] = true;\n        tags[dimension + 'X'] = dimensionX;\n        tags[dimension + 'Y'] = dimensionY;\n    }\n}\n\nif (data.managerDimension) {\n    tags.dimension = data.managerDimension;\n    tags[data.managerDimension] = true;\n    tags[data.managerDimension + 'X'] = data.managerDimensionX;\n    tags[data.managerDimension + 'Y'] = data.managerDimensionY;\n    tags[data.managerDimension + 'Z'] = data.managerDimensionZ;\n}","onABStripArtifactInstanceDataFromBotData":"@console.log(`[${tags.system}.${tagName}]`, JSON.parse(JSON.stringify(that)));\n\nconst { data } = that;\n\nconst dimension = data.tags.dimension;\n\ndelete data.tags.dimension;\ndelete data.tags[dimension];\ndelete data.tags[dimension + 'X'];\ndelete data.tags[dimension + 'Y'];\ndelete data.tags[dimension + 'Z'];","hex":"ðŸ”—1c1e0901-1eca-4294-97a7-1177b61ff56e","onEnterAR":"@configBot.tags.arEnabled = true;\n\nconfigBot.masks.leftWristPortal = \"abWristBand\";\n\nmasks.mapPortalBeforeAR = configBot.tags.mapPortal;\n\n// Need to move out of the mapPortal if we are in it.\nif (configBot.tags.mapPortal) {\n    configBot.tags.mapPortal = null;\n\n    if (!configBot.tags.gridPortal) {\n        configBot.tags.gridPortal = masks.mapPortalBeforeAR;\n    }\n}\n\nmasks.abWristBand = true;\nmasks.onClick = `@ thisBot.onExitClick();`;\nmasks.label = \"X\";\nmasks.form = null;\nmasks.formOpacity = 1;\nmasks.draggable = false;\nmasks.color = \"clear\";\nmasks.scaleZ = 0.1;\nmasks.labelColor = \"#FFFFFF\";\nmasks.onPointerEnter = \"@ masks.scale = 1.1;\";\nmasks.onPointerExit = \"@ masks.scale = null;\";\n\nconst hexBot = getBot(\"transformer\", thisBot.id);\nhexBot.masks.color = \"clear\";","onExitAR":"@if (masks.mapPortalBeforeAR) {\n    configBot.tags.mapPortal = masks.mapPortalBeforeAR;\n}\n\nclearTagMasks(thisBot);\n\nconfigBot.masks.leftWristPortal = null;\nconfigBot.tags.arEnabled = null;\n\nconst hexBot = getBot(\"transformer\", thisBot.id);\nclearTagMasks(hexBot);"}}}}