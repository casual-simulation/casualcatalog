{"version":1,"state":{"395785d2-a8e6-46c0-8934-553b87713d49":{"id":"395785d2-a8e6-46c0-8934-553b87713d49","space":"shared","tags":{"system":"curiosity_toolbox.tools.artifactExplorer","clearEggSetupMenu":null,"onABArtifactCollectShards":"@const shard: ABArtifactShard = {\r\n    data: {\r\n        eggName: tags.chosenEggName,\r\n        eggStudio: tags.chosenStudio,\r\n        eggSetupLabel: tags.channelSetupLabel,\r\n        eggConfigConfirmed: tags.eggConfigConfirmed,\r\n        prevBotID: thisBot.id,\r\n        dimensionData: {\r\n            dimension: [ab.links.remember.tags.abActiveDimension],\r\n            [ab.links.remember.tags.abActiveDimension]: tags[ab.links.remember.tags.abActiveDimension],\r\n            [ab.links.remember.tags.abActiveDimension + 'X']: tags[ab.links.remember.tags.abActiveDimension + 'X'],\r\n            [ab.links.remember.tags.abActiveDimension + 'Y']: tags[ab.links.remember.tags.abActiveDimension + 'Y'],\r\n            [ab.links.remember.tags.abActiveDimension + 'Z']: tags[ab.links.remember.tags.abActiveDimension + 'Z'],\r\n            [ab.links.remember.tags.abActiveDimension + 'RotationX']: tags[ab.links.remember.tags.abActiveDimension + 'RotationX'],\r\n            [ab.links.remember.tags.abActiveDimension + 'RotationY']: tags[ab.links.remember.tags.abActiveDimension + 'RotationY'],\r\n            [ab.links.remember.tags.abActiveDimension + 'RotationZ']: tags[ab.links.remember.tags.abActiveDimension + 'RotationZ'],\r\n        }\r\n    },\r\n    dependencies: [\r\n        {\r\n            askID: 'eggConfigurator'\r\n        }\r\n    ]\r\n}\r\n\r\nreturn shard;","onABArtifactReconstitute":"@const data = that.data;\r\n\r\ntags.chosenEggName = data.eggName;\r\ntags.chosenStudio = data.eggStudio;\r\ntags.eggSetupLabel = data.eggSetupLabel ?? \"configure egg\";\r\ntags.eggConfigConfirmed = data.eggConfigConfirmed ?? false;\r\ntags.chosenVersionNumber = null;\r\ntags.prevBotID = data.prevBotID;\r\n\r\nif (data.dimensionData) {\r\n    for (const tagName in data.dimensionData) {\r\n        tags[tagName] = data.dimensionData[tagName];\r\n    }\r\n}\r\n\r\nif (data.eggParameters) {\r\n    const dimension = data.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = data.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = data.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags.dimension = dimension;\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n\r\n    tags.eggSetupLabel = \"configure egg\";\r\n    thisBot.showEggSetupMenu();\r\n}\r\n\r\nthisBot.updateBillboardLabel();","onABStripArtifactInstanceDataFromBotData":"@const { data } = that;\r\n\r\ndelete data.tags.chosenPattern;\r\ndelete data.tags[data.tags.dimension];\r\ndelete data.tags[data.tags.dimension + 'X'];\r\ndelete data.tags[data.tags.dimension + 'Y'];\r\ndelete data.tags[data.tags.dimension + 'Z'];\r\ndelete data.tags[data.tags.dimension + 'RotationX'];\r\ndelete data.tags[data.tags.dimension + 'RotationY'];\r\ndelete data.tags[data.tags.dimension + 'RotationZ'];\r\ndelete data.tags.dimension;\r\ndelete data.tags.prevBotID;","onAnyBotsRemoved":"@const { botIDs } = that;\r\n\r\nif (botIDs.includes(thisBot.id)) {\r\n    shout(\"clearLinkerMenu\");\r\n}","onBotAdded":"@let waitTime = 0;\r\n\r\nwhile(!globalThis.ab?.links.bot_factory) {\r\n    if (waitTime >= 5000) {\r\n        return;\r\n    }\r\n    \r\n    await os.sleep(250);\r\n    waitTime += 250;\r\n}\r\n\r\nmasks.ready = true;\r\n\r\nthisBot.updateBillboardLabel();","onClick":"@thisBot.showLinkerMenu();","onGridClick":"@shout(\"clearLinkerMenu\");","showEggSetupMenu":null,"updateBillboardLabel":"@if (thisBot.vars.billboardLabelBot) {\r\n    destroy(thisBot.vars.billboardLabelBot);\r\n    thisBot.vars.billboardLabelBot = null;\r\n}\r\n\r\nthisBot.vars.billboardLabelBot = ab.links.bot_factory.abCreateBillboardLabel({ \r\n    bot: thisBot, \r\n    label: tags.bbLabel,\r\n    color: tags.bbLabelFloatingBackgroundColor,\r\n    dimension: configBot.tags.mapPortal ?? configBot.tags.gridPortal ?? 'home',\r\n    // botLabelMargin: 0,\r\n    labelColor: tags.bbLabelColor,\r\n    space: 'tempLocal',\r\n})","abArtifactName":"artifactExplorer","artifact":"ðŸ”—78e41503-c933-4f8a-817a-ba97bf8d5d27","eggConfigurator":null,"form":"egg","eggSetupLabelColor":null,"eggSetupLabelFloatingBackgroundColor":null,"cursor":"pointer","publishEggConfigurator":null,"abIDOrigin":"eggConfigurator","showTestMenu":null,"hatchEggConfig":null,"maxEggVersion":null,"eggSetupLabel":null,"eggConfigConfirmed":null,"chosenEggName":null,"showLinkerMenu":"@shout('clearLinkerMenu');\r\n\r\nconfigBot.tags.menuPortal = 'linkerMenu';\r\n\r\nconst menuTags = {\r\n    clearLinkerMenu: `@destroy(thisBot);`,\r\n    linkerMenu: true,\r\n    linker: getLink(thisBot)\r\n}\r\n\r\n//HATCH\r\nconst hatchButton = {\r\n    ...menuTags,\r\n    label: \"create new\",\r\n    onClick: `@\r\n        links.linker.hatchNewLink();\r\n    `,\r\n    eggTestMenuSortOrder: 1,\r\n}\r\n\r\nab.links.menu.abCreateMenuButton(hatchButton);\r\n","linkerLabel":null,"linkerLabelFloatingBackgroundColor":null,"billboardLabel":null,"billboardLabelFloatingBackgroundColor":null,"billboardLabelColor":null,"bbLabel":"artifact explorer","bbLabelColor":"black","bbLabelFloatingBackgroundColor":"#a66a3a","clearLinkerMenu":"@configBot.masks.menuPortal = null;","hatchNewLink":"@const dimension = configBot.tags.mapPortal ? \"map\" : \"grid\";\r\n\r\nlet gridInfo;\r\nif (dimension == \"map\") {\r\n    gridInfo = {    \r\n        \"dimension\":tags.dimension,\r\n        \"position\":\r\n            {\r\n                \"x\":tags[tags.dimension + \"X\"] + ((Math.floor(Math.random() * 5) + 2) / 10000),\r\n                \"y\":tags[tags.dimension + \"Y\"] + ((Math.floor(Math.random() * 5) + 2) / 10000)\r\n            }\r\n    }\r\n} else {\r\n    gridInfo = {\r\n        \"dimension\":tags.dimension,\r\n        \"position\":\r\n            {\r\n                \"x\":tags[tags.dimension + \"X\"] + Math.floor(Math.random() * 5) + 2,\r\n                \"y\":tags[tags.dimension + \"Y\"] + Math.floor(Math.random() * 5) + 2\r\n            }\r\n    }\r\n}\r\n\r\nconst linkID = uuid();\r\n\r\nab.links.search.onLookupAskID({\r\n    askID: \"instCreatorWizard\",\r\n    sourceEvent: 'tool',\r\n    eggParameters: {\r\n        gridInformation: gridInfo,\r\n        initializationInfo: {\r\n            pattern: tags.chosenPattern,\r\n            linkTo: thisBot.id,\r\n            abAwake: true,\r\n            label: tags.chosenPattern + \" id:\" + linkID,\r\n            urlVariables: {\r\n                uuid: linkID\r\n            }\r\n        }\r\n    },\r\n});"}}}}