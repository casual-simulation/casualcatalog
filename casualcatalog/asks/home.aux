{"version":1,"state":{"6db84a90-e8f4-4102-b0a9-1fec5b97873c":{"id":"6db84a90-e8f4-4102-b0a9-1fec5b97873c","space":"shared","tags":{"system":"ab.home.egg","homeEgg":"true","onCreate":null,"abVersion":"10.6","abIDOrigin":"home","onEggHatch":"@const currentDim = ab.links.remember.tags.abActiveDimension;\r\nconst currentPortal = configBot.tags.mapPortal ? \"map\" : configBot.tags.gridPortal == \"blueprint\" ? \"blueprint\" :\"grid\";\r\n\r\nif (currentPortal != 'map') {\r\n    configBot.tags.mapPortal = currentDim;\r\n}\r\n\r\nif (!authBot) {\r\n    await os.requestAuthBotInBackground();\r\n}\r\n\r\nif (!authBot) {\r\n    console.log(\"HOME EGG: User not logged in.\");\r\n    return;\r\n}\r\n\r\nconst homeEggData = await os.getData(authBot.id, 'home');\r\n\r\nif (!homeEggData.success) {\r\n    thisBot.saveData();\r\n}","saveData":"@if (!authBot) {\r\n    await os.requestAuthBotInBackground();\r\n}\r\n\r\nif (!authBot) {\r\n    console.log(\"HOME EGG: User not logged in.\");\r\n    return;\r\n}\r\n\r\nawait os.grantInstAdminPermission(authBot.id);\r\nab.links.store.abPublishAB({ab: 'home', sourceEvent: 'home_egg_publish'});","processInstChange":"@if (thisBot.vars.saveTimout) {\r\n    cancelTimeout(thisBot.vars.saveTimout);\r\n    thisBot.vars.saveTimout = null;\r\n}\r\n\r\nthisBot.vars.saveTimout = await setTimeout(() => {\r\n    thisBot.saveData();\r\n}, 5000);","onAnyBotChanged":"@if (that.bot.tags.space == 'tempLocal' || that.bot.tags.space == 'local') {\r\n    return;\r\n}\r\n\r\nif (that.bot.tags.abIgnore) {\r\n    return;\r\n}\r\n\r\nif (that.bot.tags.system && that.bot.tags.system.substring(0, 3) == 'ab.') {\r\n    return;\r\n}\r\n\r\nthisBot.processInstChange();","onAnyBotAdded":"@let validChange = false;\r\nfor (const addedBot of that.bots) {\r\n    if (addedBot.tags.space == 'tempLocal' || addedBot.tags.space == 'local') {\r\n        continue;\r\n    }\r\n\r\n    if (addedBot.tags.abIgnore) {\r\n        continue;\r\n    }\r\n\r\n    if (addedBot.tags.system && addedBot.tags.system.substring(0, 3) == 'ab.') {\r\n        continue;\r\n    }\r\n\r\n    validChange = true;\r\n    break;\r\n}\r\n\r\nif (validChange) {\r\n    thisBot.processInstChange();\r\n}\r\n\r\n"}}}}