{"version":1,"state":{"2c8cac66-8c9f-4091-b900-faf2fa553b94":{"id":"2c8cac66-8c9f-4091-b900-faf2fa553b94","space":"shared","tags":{"creator":"34c3c210-5bf1-49cf-b151-ee2d07f0e673","system":"server_toolbox.tools.instBot","onClick":"@os.openURL(tags.instURL);","onPointerEnter":"@if (tags.biosSetting == 'public') {\r\n    const now = DateTime.now().toMillis();\r\n    const expiration = (tags.expirationTime - now) / (1000 * 60 * 60);\r\n    const expHr = Math.trunc(expiration);\r\n    const expMin = Math.trunc((expiration % 1) * 60);\r\n    os.tip(`temporary (expires in ${expHr}:${expMin})`);\r\n\r\n    if (expiration <= 0) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","color":null,"cursor":"pointer","expireInstBot":"@if (tags.abIDOrigin == \"instBot\") {\r\n    return;\r\n}\r\n\r\nsetTagMask(thisBot, 'color', 'gray', \"shared\");\r\nsetTagMask(thisBot, 'label', 'expired', \"shared\");\r\nsetTagMask(thisBot, 'onClick', null, \"shared\");\r\nsetTagMask(thisBot, 'cursor', null, \"shared\");\r\nsetTagMask(thisBot, 'onPointerEnter', null, \"shared\");","instBot":"true","onEggHatch":"@if (tags.abIDOrigin == \"instBot\") {\r\n    tags.label = \"instBot\";\r\n    tags.biosSetting = null;\r\n    tags.instSetting = null;\r\n    tags.instURL = null;\r\n    tags.creationTime = null;\r\n    tags.expirationTime = null;\r\n}\r\n\r\nif (that.eggParameters) {\r\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n\r\n    if (that.eggParameters.serverParameters) {\r\n        tags.label = that.eggParameters.serverParameters.inst;\r\n        if (tags.label) {\r\n            tags.labelPosition = 'floatingBillboard';\r\n            tags.labelWordWrapMode = 'breakWords';\r\n        }\r\n\r\n        tags.biosSetting = that.eggParameters.serverParameters.bios;\r\n        tags.instSetting = that.eggParameters.serverParameters.inst;\r\n        // tags.patternSetting = that.eggParameters.serverParameters.pattern;\r\n        tags.instURL = that.eggParameters.serverParameters.url;\r\n\r\n        if (!tags.creationTime) {\r\n            tags.creationTime = DateTime?.now()?.toMillis();\r\n\r\n            if (that.eggParameters.serverParameters.bios == 'public') {\r\n                tags.expirationTime = DateTime?.fromMillis(tags.creationTime + (24 * 1000 * 60 * 60))?.toMillis();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nif (tags.biosSetting && tags.biosSetting == 'public') {\r\n    const currTime = DateTime?.now()?.toMillis();\r\n\r\n    //TODO: ab1 has different expire times than auxplayer and brandplayer\r\n    //Treating as all expire in 24hr for now\r\n\r\n    const elapsedMS = currTime - tags.creationTime;\r\n    const hoursPassed = elapsedMS / (1000 * 60 * 60);\r\n\r\n    if (hoursPassed >= 24) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","abVersion":"10.5","abIDOrigin":"instBot","home":true,"homeX":0,"homeY":0,"label":"e9a0e530-72e8-4e1b-956d-e1b4570e442a","labelPosition":"floatingBillboard","labelWordWrapMode":"breakWords","biosSetting":"public","instSetting":"e9a0e530-72e8-4e1b-956d-e1b4570e442a","instURL":"https://dev.auxplayer.com/?bios=free","creationTime":1755704608743,"expirationTime":1755791008743}}}}