{"version":1,"state":{"b093e6e0-d5e8-48d5-8dba-0ba2e40e5ea1":{"id":"b093e6e0-d5e8-48d5-8dba-0ba2e40e5ea1","space":"shared","tags":{"system":"server_toolbox.tools.instBot","instCreatorWizard":null,"abIgnore":null,"onClick":"@os.openURL(tags.instURL);","onCreate":null,"onPointerEnter":"@if (tags.biosSetting == 'public') {\r\n    const now = new Date.now();\r\n    const expiration = (tags.expirationTime - now) / (1000 * 60 * 60);\r\n    os.tip(`temporary (expires in ${expiration} hours)`);\r\n\r\n    if (expiration <= 0) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","color":"#fa6464","cursor":"pointer","labelPosition":"floatingBillboard","labelWordWrapMode":"breakWords","expireInstBot":"@if (tags.abIDOrigin == \"instBot\") {\r\n    return;\r\n}\r\n\r\ntags.color = 'gray';\r\ntags.label = 'expired';\r\ntags.onClick = null;\r\ntags.cursor = null;\r\ntags.onPointerEnter = null;","instBot":"true","onEggHatch":"@if (tags.abIDOrigin == \"instBot\") {\r\n    return;\r\n}\r\n\r\nif (that.eggParameters) {\r\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n\r\n    if (that.eggParameters.serverParameters) {\r\n        tags.label = that.eggParameters.serverParameters.instName;\r\n\r\n        tags.biosSetting = that.eggParameters.serverParameters.bios;\r\n        tags.instSetting = that.eggParameters.serverParameters.instName;\r\n        // tags.patternSetting = that.eggParameters.serverParameters.pattern;\r\n        tags.instURL = that.eggParameters.serverParameters.url;\r\n\r\n        if (!tags.creationTime) {\r\n            tags.creationTime = new Date.now();\r\n\r\n            if (that.eggParameters.serverParameters.bios == 'public') {\r\n                tags.expirationTime = new Date(tags.creationTime + (24 * 1000 * 60 * 60)).now();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nif (tags.biosSetting && tags.biosSetting == 'public') {\r\n    const currTime = new Date.now();\r\n\r\n    //TODO: ab1 has different expire times than auxplayer and brandplayer\r\n    //Treating as all expire in 24hr for now\r\n\r\n    const elapsedMS = currTime - tags.creationTime;\r\n    const hoursPassed = elapsedMS / (1000 * 60 * 60);\r\n\r\n    if (hoursPassed >= 24) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","abVersion":"10.5"}}}}