{"version":1,"state":{"625ef46b-d5cb-4f29-ae14-f7e31d6099d0":{"id":"625ef46b-d5cb-4f29-ae14-f7e31d6099d0","space":"shared","tags":{"creator":"34c3c210-5bf1-49cf-b151-ee2d07f0e673","system":"server_toolbox.tools.instBot","onClick":"@os.openURL(tags.instURL);","onPointerEnter":"@if (tags.biosSetting == 'public') {\r\n    const now = DateTime.now().toMillis();\r\n    const expiration = (tags.expirationTime - now) / (1000 * 60 * 60);\r\n    const expHr = Math.trunc(expiration);\r\n    const expMin = String(Math.trunc((expiration % 1) * 60)).padStart(2, '0');\r\n    os.tip(`temporary (expires in ${expHr}:${expMin})`);\r\n\r\n    if (expiration <= 0) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","cursor":"pointer","expireInstBot":"@if (tags.abIDOrigin == \"instBot\") {\r\n    return;\r\n}\r\n\r\nsetTagMask(thisBot, 'color', 'gray', \"shared\");\r\nsetTagMask(thisBot, 'label', 'expired', \"shared\");\r\nsetTagMask(thisBot, 'onClick', null, \"shared\");\r\nsetTagMask(thisBot, 'cursor', null, \"shared\");\r\nsetTagMask(thisBot, 'onPointerEnter', null, \"shared\");","instBot":"true","onEggHatch":"@if (tags.abIDOrigin == \"instBot\") {\r\n    tags.label = \"instBot\";\r\n    tags.biosSetting = null;\r\n    tags.instSetting = null;\r\n    tags.instURL = null;\r\n    tags.creationTime = null;\r\n    tags.expirationTime = null;\r\n}\r\n\r\nif (that.eggParameters) {\r\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n\r\n    if (that.eggParameters.serverParameters) {\r\n        tags.label = that.eggParameters.serverParameters.inst;\r\n        if (tags.label) {\r\n            tags.labelPosition = 'floatingBillboard';\r\n            tags.labelWordWrapMode = 'breakWords';\r\n        }\r\n\r\n        tags.biosSetting = that.eggParameters.serverParameters.bios;\r\n        tags.instSetting = that.eggParameters.serverParameters.inst;\r\n        // tags.patternSetting = that.eggParameters.serverParameters.pattern;\r\n        tags.instURL = that.eggParameters.serverParameters.url;\r\n\r\n        if (!tags.creationTime) {\r\n            tags.creationTime = DateTime?.now()?.toMillis();\r\n\r\n            if (that.eggParameters.serverParameters.bios == 'public') {\r\n                tags.expirationTime = DateTime?.fromMillis(tags.creationTime + (24 * 1000 * 60 * 60))?.toMillis();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nif (tags.biosSetting && tags.biosSetting == 'public') {\r\n    const currTime = DateTime?.now()?.toMillis();\r\n\r\n    //TODO: ab1 has different expire times than auxplayer and brandplayer\r\n    //Treating as all expire in 24hr for now\r\n\r\n    const elapsedMS = currTime - tags.creationTime;\r\n    const hoursPassed = elapsedMS / (1000 * 60 * 60);\r\n\r\n    if (hoursPassed >= 24) {\r\n        thisBot.expireInstBot();\r\n    }\r\n}","abVersion":"10.7","abIDOrigin":"home","home":true,"homeX":-85.6725256171353,"homeY":42.96630630630631,"label":"c2ba3584-4a82-4123-a90b-7465f6c177fd","labelPosition":"floatingBillboard","labelWordWrapMode":"breakWords","homeZ":0,"color":"#0000FF","labelColor":"#0000FF","biosSetting":"public","instSetting":"c2ba3584-4a82-4123-a90b-7465f6c177fd","instURL":"https://dev.auxplayer.com/?owner=public&inst=c2ba3584-4a82-4123-a90b-7465f6c177fd&gridPortal=home","creationTime":1756924879002,"expirationTime":1757011279002,"homeWorldBot":"true"}}}}