{"version":1,"state":{"92b51f1f-69dd-47f0-9c02-304834e3baeb":{"id":"92b51f1f-69dd-47f0-9c02-304834e3baeb","space":"shared","tags":{"creator":"34c3c210-5bf1-49cf-b151-ee2d07f0e673","system":"story_toolbox.storyPlace","storyPlace":"true","onEggHatch":"@if (that.eggParameters) {\r\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n}\r\n\r\nif (tags.abIDOrigin == 'storyPlace') {\r\n    shout(\"abMenuRefresh\");\r\n\r\n    thisBot.tags.formAddress = null;\r\n    thisBot.tags.label = 'storyPlace';\r\n\r\n    if (that.skyboxTags) {\r\n        thisBot.createSkybox({\"prompt\": that.skyboxTags.prompt});\r\n    } else {\r\n        thisBot.createSkybox();\r\n    }\r\n}","createSkybox":"@let prompt;\r\nif (that && that.prompt) {\r\n    prompt = that.prompt;\r\n} else {\r\n    prompt = await os.showInput('', {\r\n        title: \"What would you like this place to look like?\"\r\n    })\r\n}\r\n\r\ntags.placePrompt = prompt;\r\nconst generatingTip = await os.tip(\"generating...\", 60);\r\n\r\nlet skyboxImage = await ai.generateSkybox(prompt);\r\nos.hideTips(generatingTip);\r\n\r\ntags.formAddress = skyboxImage;\r\ntags.label = null;\r\n\r\nconst dimension = configBot.tags.gridPortal;\r\nconst artifactInstanceID = uuid();\r\ntags.artifactInstanceID = artifactInstanceID;\r\n\r\nconst artifact = await links.artifact.abCreateArtifactPromiseBot({\r\n    abArtifactName: 'msSkyBot',\r\n    abArtifactInstanceID: artifactInstanceID,\r\n    abArtifactShard: {\r\n        data: {\r\n            toolboxBot: tags.toolbox ?? \"\",\r\n            gridInformation: tags.gridInformation,\r\n            skyboxImage: skyboxImage,\r\n            skyboxTags: {\r\n                scale: 450,\r\n                [dimension + \"Z\"]: -100,\r\n                onInstJoined: tags.instJoinedString\r\n            }\r\n        },\r\n        dependencies: [\r\n            { askID: 'msSkyBot' }\r\n        ]\r\n\r\n    }\r\n})\r\n\r\nconsole.log(\"artifacty\", artifact);\r\n\r\ngridPortalBot.tags.portalCameraType = \"perspective\";\r\ngridPortalBot.tags.portalPannableMaxX = 30;\r\ngridPortalBot.tags.portalPannableMinX = -30;\r\ngridPortalBot.tags.portalPannableMaxY = 30;\r\ngridPortalBot.tags.portalPannableMinY = -30;\r\ngridPortalBot.tags.portalZoomable = false;","artifact":"ðŸ”—78e41503-c933-4f8a-817a-ba97bf8d5d27","onClick":"@if (tags.formAddress) {\r\n    if (links.skybox.tags[configBot.tags.gridPortal] != true) {\r\n       shout(\"onStorySceneChange\", tags.placePrompt); \r\n    } \r\n    links.skybox.link.toggle.onClick();\r\n} else {\r\n    thisBot.createSkybox();\r\n}","home":true,"homeX":4,"homeY":-3,"homeZ":0,"form":"sphere","onAnyABArtifactReconstituted ":"@if (that.abArtifactInstanceID == tags.artifactInstanceID) {\r\n    for (const bot of that.shardBots) {\r\n        if (bot.tags.toggle) {\r\n            tags.skybox = getLink(bot);\r\n        } else {\r\n            bot.tags[configBot.tags.gridPortal] = false;\r\n        }\r\n    }\r\n}","onAnyBotsAdded":null,"abVersion":"10.5","abIDOrigin":"storyPlace","placePrompt":"a dense wet jungle","formAddress":"https://images.blockadelabs.com/images/imagine/Advanced_no_style_equirectangular-jpg_a_dense_wet_jungle_9521548135_14120848.jpg?ver=1","artifactInstanceID":"bdbaa0c5-a913-499f-97e5-dc7935a4a2b9","label":null}}}}