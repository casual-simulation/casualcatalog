{"version":1,"state":{"c6aa6207-fea7-4a49-bab2-616d3c4da40e":{"id":"c6aa6207-fea7-4a49-bab2-616d3c4da40e","space":"shared","tags":{"creator":"34c3c210-5bf1-49cf-b151-ee2d07f0e673","system":"studioTools.studioEggWizard","abIgnore":"true","formOpacity":".33","strokeColor":"#d6d494","color":"#d6d494","onEggHatch":"@if (that.eggParameters) {\r\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\r\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\r\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\r\n\r\n    tags.studioStatioID = that.eggParameters.studioStationID;\r\n\r\n    tags[dimension] = true;\r\n    tags[dimension + 'X'] = dimensionX;\r\n    tags[dimension + 'Y'] = dimensionY;\r\n\r\n    setTagMask(thisBot, \"gridInformation\", that.eggParameters.gridInformation, \"shared\");\r\n    \r\n    thisBot.showEggWizardMenu();\r\n}","onClick":"@thisBot.showEggWizardMenu();","cursor":"pointer","home":true,"onAnyBotsRemoved":"@const { botIDs } = that;\r\n\r\nif (botIDs.includes(thisBot.id)) {\r\n    shout(\"clearEggWizardMenu\");\r\n}","onGridClick":"@shout(\"clearEggWizardMenu\");","homeX":-73.77273866451272,"homeY":41.031621621621625,"homeZ":0,"abVersion":"10.34","abIDOrigin":"studioEggWizard","onBotAdded":"@let waitTime = 0;\r\n\r\nwhile(!globalThis.ab?.links.bot_factory) {\r\n    if (waitTime >= 5000) {\r\n        return;\r\n    }\r\n    \r\n    await os.sleep(250);\r\n    waitTime += 250;\r\n}\r\n\r\nmasks.ready = true;\r\n\r\nthisBot.updateBillboardLabel();","updateBillboardLabel":"@if (thisBot.vars.billboardLabelBot) {\r\n    destroy(thisBot.vars.billboardLabelBot);\r\n    thisBot.vars.billboardLabelBot = null;\r\n}\r\n\r\nthisBot.vars.billboardLabelBot = ab.links.bot_factory.abCreateBillboardLabel({ \r\n    bot: thisBot, \r\n    label: tags.bbLabel,\r\n    color: tags.bbLabelFloatingBackgroundColor,\r\n    dimension: tags.dimension ?? 'home',\r\n    // botLabelMargin: 0,\r\n    labelColor: tags.bbLabelColor,\r\n    space: 'tempLocal',\r\n})","onDestroy":"@shout('clearEggWizardMenu');","studioEggWizard":"true","bbLabelFloatingBackgroundColor":"#d6d494","bbLabel":"egg wizard","bbLabelColor":"#29281b","showEggWizardMenu":"@shout('clearEggWizardMenu');\r\n\r\nconfigBot.masks.menuPortal = 'eggWizardMenu';\r\n\r\nconst newButton = {\r\n    clearEggWizardMenu: `@destroy(thisBot);`,\r\n    eggWizardMenu: true,\r\n    label: \"new egg\",\r\n    wizard: getLink(thisBot),\r\n    formAddress: 'add',\r\n    onClick: `@\r\n        links.wizard.newEgg();\r\n        shout('clearEggWizardMenu');\r\n    `,\r\n    eggWizardMenuSortOrder: 1\r\n}\r\n\r\nab.links.menu.abCreateMenuButton(newButton);\r\n\r\nconst chooseExistingButton = {\r\n    clearEggWizardMenu: `@destroy(thisBot);`,\r\n    eggWizardMenu: true,\r\n    label: \"choose existing\",\r\n    wizard: getLink(thisBot),\r\n    onClick: `@\r\n        const response = await os.showInput(null, {\r\n            title: 'egg name'\r\n        });\r\n        if (response) {\r\n            links.wizard.loadEgg(response);\r\n        }\r\n        shout('clearEggWizardMenu');\r\n    `,\r\n    eggWizardMenuSortOrder: 2\r\n}\r\n\r\nab.links.menu.abCreateMenuButton(chooseExistingButton);","newEgg":"@const abArtifactShard = {\r\n    data: {\r\n        eggParameters: {\r\n            toolboxBot: tags.toolbox ?? null,\r\n            gridInformation: tags.gridInformation\r\n        }\r\n    },\r\n    dependencies: [\r\n        {\r\n            askID: 'eggConfigurator'\r\n        }\r\n    ]\r\n};\r\nab.links.artifact.abCreateArtifactPromiseBot({\r\n    abArtifactName: 'eggConfigurator',\r\n    abArtifactInstanceID: uuid(),\r\n    abArtifactShard,\r\n});\r\n\r\nshout(\"abMenuRefresh\");\r\nif (tags.destroyAfterUse == true) {\r\n    destroy(thisBot);\r\n}","clearEggWizardMenu":"@configBot.masks.menuPortal = null;","loadEgg":"@const abID = that;\r\n\r\nconst egg = await os.getData(tags.studioStationID ?? authBot.id, abID);\r\nif (egg.success) {\r\n\r\n    const abArtifactShard = {\r\n        data: {\r\n            eggName: abID,\r\n            eggStudio: tags.studioStationID ?? authBot.id,\r\n            eggSetupLabel: abID,\r\n            eggConfigConfirmed: true,\r\n            studioStationID: tags.studioStationID ?? authBot.id,\r\n            eggParameters: {\r\n                toolboxBot: tags.toolbox ?? null,\r\n                gridInformation: tags.gridInformation\r\n            }\r\n        },\r\n        dependencies: [\r\n            {\r\n                askID: 'eggConfigurator'\r\n            }\r\n        ]\r\n    };\r\n    ab.links.artifact.abCreateArtifactPromiseBot({\r\n        abArtifactName: 'eggConfigurator',\r\n        abArtifactInstanceID: uuid(),\r\n        abArtifactShard,\r\n    });\r\n\r\n    shout(\"abMenuRefresh\");\r\n    if (tags.destroyAfterUse == true) {\r\n        destroy(thisBot);\r\n    }\r\n} else {\r\n    os.toast(\"could not find \" + abID + \" in studio.\");\r\n}","destroyAfterUse":"false"}}}}