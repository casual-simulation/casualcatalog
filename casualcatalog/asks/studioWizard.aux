{"version":1,"state":{"90371b2e-4636-40b2-af87-2a74b15570fe":{"id":"90371b2e-4636-40b2-af87-2a74b15570fe","space":"shared","tags":{"creator":"34c3c210-5bf1-49cf-b151-ee2d07f0e673","system":"homeworldStudioWizard.wizard","label":"studio wizard","cursor":"pointer","formOpacity":"0.33","strokeColor":"#7090c2","labelPosition":"floatingBillboard","onClick":"@thisBot.showStudioWizardMenu();","abVersion":"10.35","onEggHatch":"@if (that.eggParameters) {\n    const dimension = that.eggParameters.gridInformation?.dimension ?? 'home';\n    const dimensionX = that.eggParameters.gridInformation?.position?.x ?? 0;\n    const dimensionY = that.eggParameters.gridInformation?.position?.y ?? 0;\n\n    tags[dimension] = true;\n    tags[dimension + 'X'] = dimensionX;\n    tags[dimension + 'Y'] = dimensionY;\n\n    thisBot.showStudioWizardMenu();\n}\n","destroyAfterUse":"true","abIgnore":"true","labelWordWrapMode":"breakWords","color":"#7090c2","labelFloatingBackgroundColor":"#7090c2","labelColor":"#1c2430","remember":"ðŸ”—e5380a6b-8b4d-4a8b-8b04-58e1eb03e5e7","learn":"ðŸ”—6657b865-e983-4401-9fc9-f5418d18a7f7","onAnyBotsRemoved":"@const { botIDs } = that;\n\nif (botIDs.includes(thisBot.id)) {\n    thisBot.abArtifactBotMenuReset();\n}","onGridClick":"@shout(\"clearStudioWizardMenu\");","menu":"ðŸ”—b30c6c5d-a4f7-4266-ba38-393dc95e1ecb","utils":"ðŸ”—93d965e0-d20e-4b45-8ca0-649273b7138c","abIDOrigin":"studioWizard","home":true,"homeY":3,"homeX":6,"clearStudioWizardMenu":"@configBot.masks.menuPortal = null;\r\n","showStudioWizardMenu":"@shout(\"clearStudioWizardMenu\");\r\n\r\nconfigBot.tags.menuPortal = 'studioWizard_menu';\r\n\r\nconst menuOptions = {\r\n    studioWizard_menu: true,\r\n    abMenuRefresh: `@destroy(thisBot);`,\r\n    clearStudioWizardMenu: `@destroy(thisBot);`,\r\n    wizard: getLink(thisBot)\r\n}\r\n\r\nconst studioGroup = {\r\n    ...menuOptions,\r\n    label: 'choose a studio',\r\n    dropdownSortOrder: 1,\r\n    dropdownOptions: []\r\n}\r\n\r\nlet studioData = await os.listUserStudios();\r\n\r\nif (studioData.success) {\r\n    const studios = studioData.studios;\r\n    for (let i = 0; i < studios.length; ++i) {\r\n        const studioBot = getBot(byTag(\"studioStation\", true), byTag(\"studioId\", studios[i].studioId));\r\n        if (!studioBot) {\r\n            //add to menu\r\n            studioGroup.dropdownOptions.push( {\r\n                ...menuOptions,\r\n                label: studios[i].displayName,\r\n                studioData: studios[i],\r\n                onClick: `@\r\n                    links.wizard.addStudio(tags.studioData);\r\n                    shout('clearStudioWizardMenu');\r\n                `\r\n            })\r\n        }\r\n    }\r\n\r\n    const homeStudioBot = getBot(byTag(\"studioStation\", true), byTag(\"studioId\", authBot?.id));\r\n        if (!homeStudioBot) {\r\n            //add to menu\r\n            studioGroup.dropdownOptions.push( {\r\n                ...menuOptions,\r\n                label: 'home studio',\r\n                studioData: {\r\n                    studioId: authBot?.id,\r\n                    displayName: 'home studio'\r\n                },\r\n                onClick: `@\r\n                    links.wizard.addStudio(tags.studioData);\r\n                    shout('clearStudioWizardMenu');\r\n                `\r\n            })\r\n        }\r\n}\r\n\r\nab.links.menu.abCreateMenuDropdown(studioGroup);","studioWizard":"true","addStudio":"@const studioData = that;\r\n\r\n//get meta data\r\nconst homeWorldMetaData = await os.getData(studioData?.studioId, 'homeworldMetaData');\r\nlet positionX;\r\nlet positionY;\r\nif (!homeWorldMetaData.success) {\r\n    positionX = tags.homeX;\r\n    positionY = tags.homeY;\r\n} else {\r\n    positionX = homeWorldMetaData?.data?.position?.x;\r\n    positionY = homeWorldMetaData?.data?.position?.y;\r\n}\r\n\r\n//setup hub\r\nconst abArtifactShard = {\r\n    data: {\r\n        studioId: studioData?.studioId,\r\n        label: studioData?.displayName,\r\n        eggParameters: {\r\n            toolboxBot: getLink(thisBot),\r\n            gridInformation: {\r\n                dimension: 'home',\r\n                position: {\r\n                    x: positionX,\r\n                    y: positionY\r\n                }\r\n            }\r\n        }\r\n    },\r\n    dependencies: [\r\n        {\r\n            askID: 'studioStation'\r\n        }\r\n    ]\r\n};\r\nawait ab.links.artifact.abCreateArtifactPromiseBot({\r\n    abArtifactName: 'studioStation',\r\n    abArtifactInstanceID: uuid(),\r\n    abArtifactShard,\r\n});\r\n\r\nif (tags.destroyAfterUse == true) {\r\n    destroy(thisBot);\r\n}","homeZ":0}}}}